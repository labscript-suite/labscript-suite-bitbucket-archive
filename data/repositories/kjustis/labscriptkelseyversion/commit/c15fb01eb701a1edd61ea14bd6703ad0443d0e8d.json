{"rendered": {"message": {"raw": "Some refactoring of labscript.\nLabscript now only opens the hdf5 file when it needs it, rather than just having it open the whole time whilst the user's code is running. The file is only open in a context manager, which means that if an exception is raised, the file will be closed.\nPreviously exceptions would be raised and the files would only close upon the process exiting. This was all well and good, since most labscript errors explicity called sys.exit(), and the process would end, and the files would close. However, now that labscripts are being compiled in a long-running process by runmanager, the process does not end. So we need to make sure those files get closed, otherwise we can't delete failed compilations without closing runmanager.\nI've also replaced all labscript errors with 'raise LabscriptError(message)' instead of 'sys.stderr.write(message); sys.exit(1)'. This provides a traceback so that users can see where things went wrong, and it also allows for easier future modification by catching the LabscriptError exception class instead of a giant find and replace (there were 58).\nI've also disabled 'minor' warnings by default, where an output's value isn't defined at t=0 (or ever). Now the only warnings you get are when you set an output to two values at the same time. These are actually pretty important, so hopefully the decrease in visual pollution will make people read them and make mistakes in their experiments less often.\nThis change also makes it a bit easier to refactor labscript further, since there are now no global varaibles.", "markup": "markdown", "html": "<p>Some refactoring of labscript.<br />\nLabscript now only opens the hdf5 file when it needs it, rather than just having it open the whole time whilst the user's code is running. The file is only open in a context manager, which means that if an exception is raised, the file will be closed.<br />\nPreviously exceptions would be raised and the files would only close upon the process exiting. This was all well and good, since most labscript errors explicity called sys.exit(), and the process would end, and the files would close. However, now that labscripts are being compiled in a long-running process by runmanager, the process does not end. So we need to make sure those files get closed, otherwise we can't delete failed compilations without closing runmanager.<br />\nI've also replaced all labscript errors with 'raise LabscriptError(message)' instead of 'sys.stderr.write(message); sys.exit(1)'. This provides a traceback so that users can see where things went wrong, and it also allows for easier future modification by catching the LabscriptError exception class instead of a giant find and replace (there were 58).<br />\nI've also disabled 'minor' warnings by default, where an output's value isn't defined at t=0 (or ever). Now the only warnings you get are when you set an output to two values at the same time. These are actually pretty important, so hopefully the decrease in visual pollution will make people read them and make mistakes in their experiments less often.<br />\nThis change also makes it a bit easier to refactor labscript further, since there are now no global varaibles.</p>", "type": "rendered"}}, "hash": "c15fb01eb701a1edd61ea14bd6703ad0443d0e8d", "repository": {"links": {"self": {"href": "data/repositories/kjustis/labscriptkelseyversion.json"}, "html": {"href": "#!/kjustis/labscriptkelseyversion"}, "avatar": {"href": "data/bytebucket.org/ravatar/{123b7c0d-db11-4359-bc46-9fd5735d8fd0}ts=python"}}, "type": "repository", "name": "labscriptKelseyVersion", "full_name": "kjustis/labscriptkelseyversion", "uuid": "{123b7c0d-db11-4359-bc46-9fd5735d8fd0}"}, "links": {"self": {"href": "data/repositories/kjustis/labscriptkelseyversion/commit/c15fb01eb701a1edd61ea14bd6703ad0443d0e8d.json"}, "comments": {"href": "data/repositories/kjustis/labscriptkelseyversion/commit/c15fb01eb701a1edd61ea14bd6703ad0443d0e8d/comments_page=1.json"}, "patch": {"href": "https://api.bitbucket.org/2.0/repositories/kjustis/labscriptkelseyversion/patch/c15fb01eb701a1edd61ea14bd6703ad0443d0e8d"}, "html": {"href": "#!/kjustis/labscriptkelseyversion/commits/c15fb01eb701a1edd61ea14bd6703ad0443d0e8d"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/kjustis/labscriptkelseyversion/diff/c15fb01eb701a1edd61ea14bd6703ad0443d0e8d"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/kjustis/labscriptkelseyversion/commit/c15fb01eb701a1edd61ea14bd6703ad0443d0e8d/approve"}, "statuses": {"href": "data/repositories/kjustis/labscriptkelseyversion/commit/c15fb01eb701a1edd61ea14bd6703ad0443d0e8d/statuses_page=1.json"}}, "author": {"raw": "cbilling", "type": "author", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}}, "summary": {"raw": "Some refactoring of labscript.\nLabscript now only opens the hdf5 file when it needs it, rather than just having it open the whole time whilst the user's code is running. The file is only open in a context manager, which means that if an exception is raised, the file will be closed.\nPreviously exceptions would be raised and the files would only close upon the process exiting. This was all well and good, since most labscript errors explicity called sys.exit(), and the process would end, and the files would close. However, now that labscripts are being compiled in a long-running process by runmanager, the process does not end. So we need to make sure those files get closed, otherwise we can't delete failed compilations without closing runmanager.\nI've also replaced all labscript errors with 'raise LabscriptError(message)' instead of 'sys.stderr.write(message); sys.exit(1)'. This provides a traceback so that users can see where things went wrong, and it also allows for easier future modification by catching the LabscriptError exception class instead of a giant find and replace (there were 58).\nI've also disabled 'minor' warnings by default, where an output's value isn't defined at t=0 (or ever). Now the only warnings you get are when you set an output to two values at the same time. These are actually pretty important, so hopefully the decrease in visual pollution will make people read them and make mistakes in their experiments less often.\nThis change also makes it a bit easier to refactor labscript further, since there are now no global varaibles.", "markup": "markdown", "html": "<p>Some refactoring of labscript.<br />\nLabscript now only opens the hdf5 file when it needs it, rather than just having it open the whole time whilst the user's code is running. The file is only open in a context manager, which means that if an exception is raised, the file will be closed.<br />\nPreviously exceptions would be raised and the files would only close upon the process exiting. This was all well and good, since most labscript errors explicity called sys.exit(), and the process would end, and the files would close. However, now that labscripts are being compiled in a long-running process by runmanager, the process does not end. So we need to make sure those files get closed, otherwise we can't delete failed compilations without closing runmanager.<br />\nI've also replaced all labscript errors with 'raise LabscriptError(message)' instead of 'sys.stderr.write(message); sys.exit(1)'. This provides a traceback so that users can see where things went wrong, and it also allows for easier future modification by catching the LabscriptError exception class instead of a giant find and replace (there were 58).<br />\nI've also disabled 'minor' warnings by default, where an output's value isn't defined at t=0 (or ever). Now the only warnings you get are when you set an output to two values at the same time. These are actually pretty important, so hopefully the decrease in visual pollution will make people read them and make mistakes in their experiments less often.<br />\nThis change also makes it a bit easier to refactor labscript further, since there are now no global varaibles.</p>", "type": "rendered"}, "participants": [], "parents": [{"hash": "7131a20858f415a23eac5f3c2fceba79ccbf1bf4", "type": "commit", "links": {"self": {"href": "data/repositories/kjustis/labscriptkelseyversion/commit/7131a20858f415a23eac5f3c2fceba79ccbf1bf4.json"}, "html": {"href": "#!/kjustis/labscriptkelseyversion/commits/7131a20858f415a23eac5f3c2fceba79ccbf1bf4"}}}], "date": "2012-06-13T11:10:51+00:00", "message": "Some refactoring of labscript.\nLabscript now only opens the hdf5 file when it needs it, rather than just having it open the whole time whilst the user's code is running. The file is only open in a context manager, which means that if an exception is raised, the file will be closed.\nPreviously exceptions would be raised and the files would only close upon the process exiting. This was all well and good, since most labscript errors explicity called sys.exit(), and the process would end, and the files would close. However, now that labscripts are being compiled in a long-running process by runmanager, the process does not end. So we need to make sure those files get closed, otherwise we can't delete failed compilations without closing runmanager.\nI've also replaced all labscript errors with 'raise LabscriptError(message)' instead of 'sys.stderr.write(message); sys.exit(1)'. This provides a traceback so that users can see where things went wrong, and it also allows for easier future modification by catching the LabscriptError exception class instead of a giant find and replace (there were 58).\nI've also disabled 'minor' warnings by default, where an output's value isn't defined at t=0 (or ever). Now the only warnings you get are when you set an output to two values at the same time. These are actually pretty important, so hopefully the decrease in visual pollution will make people read them and make mistakes in their experiments less often.\nThis change also makes it a bit easier to refactor labscript further, since there are now no global varaibles.", "type": "commit", "git_hash": "c143d69e9dcc16d1baf8ec35c1456e62bd39df66", "tags": null, "branches": "default"}