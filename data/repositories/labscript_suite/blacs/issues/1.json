{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/blacs/issues/1/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/blacs/issues/1.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/blacs/issues/1/watch"}, "comments": {"href": "data/repositories/labscript_suite/blacs/issues/1/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/blacs/issues/1/compiling-a-connection-table-file-silently"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/blacs/issues/1/vote"}}, "reporter": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "title": "Compiling a connection table file silently fails if the h5 file to be overwritten is open in HDFview", "component": null, "votes": 0, "watches": 1, "content": {"raw": "BLACS seemingly fails to compile a new connection table after saying that it has successfully compiled the new table and restarted.\r\nThe issue only occurs when the connectiontable.h5 which is to be overwritten is open in another program (in my case on the same computer as BLACS, haven't tried opening on another computer).\r\n\r\nAn exception is raised, and the traceback is as follow:\r\n\r\n```\r\n#!python\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\pythonlib\\labscript_utils\\excepthook\\__init__.py\", line 32, in run\r\n    run_old(*args, **kwargs)\r\n  File \"C:\\Python27\\lib\\threading.py\", line 483, in run\r\n    self.__target(*self.__args, **self.__kwargs)\r\n  File \"C:\\pythonlib\\runmanager\\__init__.py\", line 552, in compile_labscript_async\r\n    done_callback(data)\r\n  File \"build\\bdist.win32\\egg\\qtutils\\invoke_in_main.py\", line 100, in f\r\n    return inmain(fn, *args, **kwargs)\r\n  File \"build\\bdist.win32\\egg\\qtutils\\invoke_in_main.py\", line 63, in inmain\r\n    return get_inmain_result(in_main_later(fn,False,*args,**kwargs))\r\n  File \"build\\bdist.win32\\egg\\qtutils\\invoke_in_main.py\", line 42, in event\r\n    result = event.fn(*event.args, **event.kwargs)\r\n  File \"C:\\pythonlib\\blacs\\compile_and_restart.py\", line 90, in finished_compiling\r\n    self.output_box.queue.put(['stderr','Couldn\\'t replace existing connection table h5 file. Is it open in another process?'])\r\nAttributeError: 'OutputBox' object has no attribute 'queue'\r\n```\r\n\r\n", "markup": "markdown", "html": "<p>BLACS seemingly fails to compile a new connection table after saying that it has successfully compiled the new table and restarted.\nThe issue only occurs when the connectiontable.h5 which is to be overwritten is open in another program (in my case on the same computer as BLACS, haven't tried opening on another computer).</p>\n<p>An exception is raised, and the traceback is as follow:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"p\">):</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\pythonlib\\labscript_utils\\excepthook\\__init__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">32</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">run</span>\n    <span class=\"n\">run_old</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Python27\\lib</span><span class=\"se\">\\t</span><span class=\"s2\">hreading.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">483</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">run</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">__target</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">__args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">__kwargs</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\pythonlib</span><span class=\"se\">\\r</span><span class=\"s2\">unmanager\\__init__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">552</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">compile_labscript_async</span>\n    <span class=\"n\">done_callback</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;build</span><span class=\"se\">\\b</span><span class=\"s2\">dist.win32\\egg\\qtutils\\invoke_in_main.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">100</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">f</span>\n    <span class=\"k\">return</span> <span class=\"n\">inmain</span><span class=\"p\">(</span><span class=\"n\">fn</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;build</span><span class=\"se\">\\b</span><span class=\"s2\">dist.win32\\egg\\qtutils\\invoke_in_main.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">63</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">inmain</span>\n    <span class=\"k\">return</span> <span class=\"n\">get_inmain_result</span><span class=\"p\">(</span><span class=\"n\">in_main_later</span><span class=\"p\">(</span><span class=\"n\">fn</span><span class=\"p\">,</span><span class=\"bp\">False</span><span class=\"p\">,</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span><span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">))</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;build</span><span class=\"se\">\\b</span><span class=\"s2\">dist.win32\\egg\\qtutils\\invoke_in_main.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">42</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">event</span>\n    <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">event</span><span class=\"o\">.</span><span class=\"n\">fn</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">event</span><span class=\"o\">.</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">event</span><span class=\"o\">.</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\pythonlib</span><span class=\"se\">\\b</span><span class=\"s2\">lacs\\compile_and_restart.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">90</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">finished_compiling</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">output_box</span><span class=\"o\">.</span><span class=\"n\">queue</span><span class=\"o\">.</span><span class=\"n\">put</span><span class=\"p\">([</span><span class=\"s1\">&#39;stderr&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;Couldn</span><span class=\"se\">\\&#39;</span><span class=\"s1\">t replace existing connection table h5 file. Is it open in another process?&#39;</span><span class=\"p\">])</span>\n<span class=\"ne\">AttributeError</span><span class=\"p\">:</span> <span class=\"s1\">&#39;OutputBox&#39;</span> <span class=\"nb\">object</span> <span class=\"n\">has</span> <span class=\"n\">no</span> <span class=\"n\">attribute</span> <span class=\"s1\">&#39;queue&#39;</span>\n</pre></div>", "type": "rendered"}, "assignee": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2014-05-07T07:22:52.469927+00:00", "milestone": null, "updated_on": "2014-05-07T07:32:07.637400+00:00", "type": "issue", "id": 1}