{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/blacs/issues/12/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/blacs/issues/12.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/blacs/issues/12/watch"}, "comments": {"href": "data/repositories/labscript_suite/blacs/issues/12/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/blacs/issues/12/error-not-handled-well-during-connection"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/blacs/issues/12/vote"}}, "reporter": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "title": "Error not handled well during connection table recompile", "component": null, "votes": 0, "watches": 3, "content": {"raw": "Today when attempting to have BLACS recompile my connection table I had a ZMQ timeout error. After this, the popup window was unresponsive, with the three buttons at the bottom greyed out, and the [x] button in the corner of the window not doing anything.\r\n\r\nThe error, as displayed in the output window, is:\r\n\r\n\r\n```\r\n#!python\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\pythonlib\\runmanager\\batch_compiler.py\", line 19, in <module>\r\n    import labscript\r\n  File \"C:\\pythonlib\\labscript\\__init__.py\", line 14, in <module>\r\n    from labscript import *\r\n  File \"C:\\pythonlib\\labscript\\labscript.py\", line 22, in <module>\r\n    import runmanager\r\n  File \"C:\\pythonlib\\runmanager\\__init__.py\", line 25, in <module>\r\n    import labscript_utils.h5_lock\r\n  File \"C:\\pythonlib\\labscript_utils\\h5_lock.py\", line 98, in <module>\r\n    connect_to_zlock_server()\r\n  File \"C:\\pythonlib\\labscript_utils\\h5_lock.py\", line 91, in connect_to_zlock_server\r\n    zprocess.locking.connect(host, port)\r\n  File \"C:\\Python27\\lib\\site-packages\\zprocess-1.1.6-py2.7.egg\\zprocess\\locking\\__init__.py\", line 373, in connect\r\n    ping(timeout)\r\n  File \"C:\\Python27\\lib\\site-packages\\zprocess-1.1.6-py2.7.egg\\zprocess\\locking\\__init__.py\", line 337, in ping\r\n    return _zmq_lock_client.say_hello(timeout)\r\n  File \"C:\\Python27\\lib\\site-packages\\zprocess-1.1.6-py2.7.egg\\zprocess\\locking\\__init__.py\", line 114, in say_hello\r\n    raise zmq.ZMQError('No response from zlock server: timed out')\r\nzmq.error.ZMQError: No response from zlock server: timed out\r\n```\r\n\r\nThe line above the output window still says \"Recompiling connection table\"", "markup": "markdown", "html": "<p>Today when attempting to have BLACS recompile my connection table I had a ZMQ timeout error. After this, the popup window was unresponsive, with the three buttons at the bottom greyed out, and the [x] button in the corner of the window not doing anything.</p>\n<p>The error, as displayed in the output window, is:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"p\">):</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\pythonlib</span><span class=\"se\">\\r</span><span class=\"s2\">unmanager</span><span class=\"se\">\\b</span><span class=\"s2\">atch_compiler.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">19</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span>\n    <span class=\"kn\">import</span> <span class=\"nn\">labscript</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\pythonlib\\labscript\\__init__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">14</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span>\n    <span class=\"kn\">from</span> <span class=\"nn\">labscript</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\pythonlib\\labscript\\labscript.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">22</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span>\n    <span class=\"kn\">import</span> <span class=\"nn\">runmanager</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\pythonlib</span><span class=\"se\">\\r</span><span class=\"s2\">unmanager\\__init__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">25</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span>\n    <span class=\"kn\">import</span> <span class=\"nn\">labscript_utils.h5_lock</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\pythonlib\\labscript_utils\\h5_lock.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">98</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span>\n    <span class=\"n\">connect_to_zlock_server</span><span class=\"p\">()</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\pythonlib\\labscript_utils\\h5_lock.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">91</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">connect_to_zlock_server</span>\n    <span class=\"n\">zprocess</span><span class=\"o\">.</span><span class=\"n\">locking</span><span class=\"o\">.</span><span class=\"n\">connect</span><span class=\"p\">(</span><span class=\"n\">host</span><span class=\"p\">,</span> <span class=\"n\">port</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Python27\\lib\\site-packages\\zprocess-1.1.6-py2.7.egg\\zprocess\\locking\\__init__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">373</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">connect</span>\n    <span class=\"n\">ping</span><span class=\"p\">(</span><span class=\"n\">timeout</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Python27\\lib\\site-packages\\zprocess-1.1.6-py2.7.egg\\zprocess\\locking\\__init__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">337</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">ping</span>\n    <span class=\"k\">return</span> <span class=\"n\">_zmq_lock_client</span><span class=\"o\">.</span><span class=\"n\">say_hello</span><span class=\"p\">(</span><span class=\"n\">timeout</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Python27\\lib\\site-packages\\zprocess-1.1.6-py2.7.egg\\zprocess\\locking\\__init__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">114</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">say_hello</span>\n    <span class=\"k\">raise</span> <span class=\"n\">zmq</span><span class=\"o\">.</span><span class=\"n\">ZMQError</span><span class=\"p\">(</span><span class=\"s1\">&#39;No response from zlock server: timed out&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">zmq</span><span class=\"o\">.</span><span class=\"n\">error</span><span class=\"o\">.</span><span class=\"n\">ZMQError</span><span class=\"p\">:</span> <span class=\"n\">No</span> <span class=\"n\">response</span> <span class=\"kn\">from</span> <span class=\"nn\">zlock</span> <span class=\"nn\">server</span><span class=\"p\">:</span> <span class=\"n\">timed</span> <span class=\"n\">out</span>\n</pre></div>\n\n\n<p>The line above the output window still says \"Recompiling connection table\"</p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "new", "version": null, "edited_on": null, "created_on": "2015-09-21T00:49:51.107662+00:00", "milestone": null, "updated_on": "2019-07-04T16:30:39.727131+00:00", "type": "issue", "id": 12}