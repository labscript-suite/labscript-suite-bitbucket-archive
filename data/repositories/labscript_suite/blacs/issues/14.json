{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/blacs/issues/14/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/blacs/issues/14.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/blacs/issues/14/watch"}, "comments": {"href": "data/repositories/labscript_suite/blacs/issues/14/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/blacs/issues/14/potential-unnecessary-delay-in-queue"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/blacs/issues/14/vote"}}, "reporter": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "title": "Potential unnecessary delay in queue", "component": null, "votes": 0, "watches": 1, "content": {"raw": "around line 600 of queue.py, the queue manager needs to wait on either of two python Queue() objects, as it is waiting either for the end of an experiment, or an abort/tab-restarted signal, whichever comes first. Waiting on one of these Queue() objects with a timeout prevents checking the other queue. The timeouts are currently set to 0.5 seconds, meaning experiment completion could potentially be delayed up to 0.5 seconds.\r\n\r\nThis should be fixed to speed up cycle time! Although waiting on multiple Queue() objects is [not in general possible](http://blog.jorgenschaefer.de/2013/09/waiting-for-multiple-queues-in-python.html), we can do something like have a separate thread merge them into a single queue, or actually change things so that the same Queue() is used for abort/restart and 'done' signals.", "markup": "markdown", "html": "<p>around line 600 of queue.py, the queue manager needs to wait on either of two python Queue() objects, as it is waiting either for the end of an experiment, or an abort/tab-restarted signal, whichever comes first. Waiting on one of these Queue() objects with a timeout prevents checking the other queue. The timeouts are currently set to 0.5 seconds, meaning experiment completion could potentially be delayed up to 0.5 seconds.</p>\n<p>This should be fixed to speed up cycle time! Although waiting on multiple Queue() objects is <a data-is-external-link=\"true\" href=\"http://blog.jorgenschaefer.de/2013/09/waiting-for-multiple-queues-in-python.html\" rel=\"nofollow\">not in general possible</a>, we can do something like have a separate thread merge them into a single queue, or actually change things so that the same Queue() is used for abort/restart and 'done' signals.</p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2017-06-06T18:53:40.016109+00:00", "milestone": null, "updated_on": "2017-06-07T16:14:03.209013+00:00", "type": "issue", "id": 14}