{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/blacs/issues/18/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/blacs/issues/18.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/blacs/issues/18/watch"}, "comments": {"href": "data/repositories/labscript_suite/blacs/issues/18/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/blacs/issues/18/elide-text-in-status-bars-and-queue-status"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/blacs/issues/18/vote"}}, "reporter": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "title": "Elide text in status bars and queue status", "component": null, "votes": 0, "watches": 2, "content": {"raw": "The QLabels in the status bars of the tabs, as well as the one for the status of the queue sometimes have text larger than what has been set to them via a splitter. This causes the splitters to jump around as shots run and tabs change status.\r\n\r\nThe labels should have their text elided. This isn't a  built in function of QLabels, but can be achieved by adapting [this C++ function](https://gist.github.com/andrey-str/0f9c7709cbf0c9c49ef9):\r\n\r\n\r\n```\r\n#!C++\r\n\r\nvoid setElidedText(QLabel* label, const QString &text){\r\n    QFontMetrics metrix(label->font());\r\n    int width = label->width() - 2;\r\n    QString clippedText = metrix.elidedText(text, Qt::ElideMiddle, width);\r\n    label->setText(clippedText);\r\n}\r\n```", "markup": "markdown", "html": "<p>The QLabels in the status bars of the tabs, as well as the one for the status of the queue sometimes have text larger than what has been set to them via a splitter. This causes the splitters to jump around as shots run and tabs change status.</p>\n<p>The labels should have their text elided. This isn't a  built in function of QLabels, but can be achieved by adapting <a data-is-external-link=\"true\" href=\"https://gist.github.com/andrey-str/0f9c7709cbf0c9c49ef9\" rel=\"nofollow\">this C++ function</a>:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"kt\">void</span> <span class=\"nf\">setElidedText</span><span class=\"p\">(</span><span class=\"n\">QLabel</span><span class=\"o\">*</span> <span class=\"n\">label</span><span class=\"p\">,</span> <span class=\"k\">const</span> <span class=\"n\">QString</span> <span class=\"o\">&amp;</span><span class=\"n\">text</span><span class=\"p\">){</span>\n    <span class=\"n\">QFontMetrics</span> <span class=\"n\">metrix</span><span class=\"p\">(</span><span class=\"n\">label</span><span class=\"o\">-&gt;</span><span class=\"n\">font</span><span class=\"p\">());</span>\n    <span class=\"kt\">int</span> <span class=\"n\">width</span> <span class=\"o\">=</span> <span class=\"n\">label</span><span class=\"o\">-&gt;</span><span class=\"n\">width</span><span class=\"p\">()</span> <span class=\"o\">-</span> <span class=\"mi\">2</span><span class=\"p\">;</span>\n    <span class=\"n\">QString</span> <span class=\"n\">clippedText</span> <span class=\"o\">=</span> <span class=\"n\">metrix</span><span class=\"p\">.</span><span class=\"n\">elidedText</span><span class=\"p\">(</span><span class=\"n\">text</span><span class=\"p\">,</span> <span class=\"n\">Qt</span><span class=\"o\">::</span><span class=\"n\">ElideMiddle</span><span class=\"p\">,</span> <span class=\"n\">width</span><span class=\"p\">);</span>\n    <span class=\"n\">label</span><span class=\"o\">-&gt;</span><span class=\"n\">setText</span><span class=\"p\">(</span><span class=\"n\">clippedText</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n</pre></div>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2017-06-15T19:29:39.496027+00:00", "milestone": null, "updated_on": "2017-07-28T22:11:34.772349+00:00", "type": "issue", "id": 18}