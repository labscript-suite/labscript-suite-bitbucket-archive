{"links": {"self": {"href": "data/repositories/labscript_suite/blacs/issues/2/comments/12642599.json"}, "html": {"href": "#!/labscript_suite/blacs/issues/2#comment-12642599"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/issues/2.json"}}, "type": "issue", "id": 2, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "title": "\"Address in use\" error when restarting"}, "content": {"raw": "I have fixed the race condition in zprocess.ZMQServer.shutdown(). The port really, truly, should be free when that method returns. And since BLACS now calls that method before spawning the new copy of itself, the port really ought to be freed when the new instance tries to bind to it.\n\nSo hopefully we have a fix in zprocess 1.1.3 and BLACS revision b0e673fcc916 (latest in 1.1.0-dev branch). Note that this BLACS requires labscript_utils revision 459a1cdf851b or later (latest in 1.1.0-dev branch).\n\nIf these two changes don't fix it, then I blame PyZMQ/ZMQ/Windows.", "markup": "markdown", "html": "<p>I have fixed the race condition in zprocess.ZMQServer.shutdown(). The port really, truly, should be free when that method returns. And since BLACS now calls that method before spawning the new copy of itself, the port really ought to be freed when the new instance tries to bind to it.</p>\n<p>So hopefully we have a fix in zprocess 1.1.3 and BLACS revision <a href=\"#!/labscript_suite/blacs/commits/b0e673fcc916\" rel=\"nofollow\" class=\"ap-connect-link\">b0e673fcc916</a> (latest in 1.1.0-dev branch). Note that this BLACS requires labscript_utils revision <a href=\"#!/labscript_suite/blacs/commits/459a1cdf851b\" rel=\"nofollow\" class=\"ap-connect-link\">459a1cdf851b</a> or later (latest in 1.1.0-dev branch).</p>\n<p>If these two changes don't fix it, then I blame PyZMQ/ZMQ/Windows.</p>", "type": "rendered"}, "created_on": "2014-09-30T03:53:56.333037+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": null, "type": "issue_comment", "id": 12642599}