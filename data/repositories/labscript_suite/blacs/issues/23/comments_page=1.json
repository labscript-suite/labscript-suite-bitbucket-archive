{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/labscript_suite/blacs/issues/23/comments/38179730.json"}, "html": {"href": "#!/labscript_suite/blacs/issues/23#comment-38179730"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/issues/23.json"}}, "type": "issue", "id": 23, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "title": "Analoge Inputs"}, "content": {"raw": "Yes, this is something we've wanted for a while. I would also like to see maybe the ability to popup a live graph or similar. The main implementation detail to be aware of is that we want this to be done using ZMQ PUB/SUB sockets. So the aquisition worker will publish to a named ZMQ socket, and the tab will subscribe to sockets as appropriate. This allows other things (even those outside of BLACS) to access the data as well, over a standard interface, with minimal overhead. @cbillington will probably have some more to say when he gets back from leave!", "markup": "markdown", "html": "<p>Yes, this is something we've wanted for a while. I would also like to see maybe the ability to popup a live graph or similar. The main implementation detail to be aware of is that we want this to be done using ZMQ PUB/SUB sockets. So the aquisition worker will publish to a named ZMQ socket, and the tab will subscribe to sockets as appropriate. This allows other things (even those outside of BLACS) to access the data as well, over a standard interface, with minimal overhead. @cbillington will probably have some more to say when he gets back from leave!</p>", "type": "rendered"}, "created_on": "2017-07-12T11:54:16.489567+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": null, "type": "issue_comment", "id": 38179730}, {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/issues/23/comments/39297348.json"}, "html": {"href": "#!/labscript_suite/blacs/issues/23#comment-39297348"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/issues/23.json"}}, "type": "issue", "id": 23, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "title": "Analoge Inputs"}, "content": {"raw": "Ok I think I got this almost figured out.\nI'm guessing the idea was acquisition workers publish to a broker that lives in BLACS and subscribers subscribe to that Broker.\n\nJust one minor detail as you mentioned that other things would also want that data should we put the Broker ports into the lab config? The port can't be random if we want it so be accessible from outside.", "markup": "markdown", "html": "<p>Ok I think I got this almost figured out.\nI'm guessing the idea was acquisition workers publish to a broker that lives in BLACS and subscribers subscribe to that Broker.</p>\n<p>Just one minor detail as you mentioned that other things would also want that data should we put the Broker ports into the lab config? The port can't be random if we want it so be accessible from outside.</p>", "type": "rendered"}, "created_on": "2017-08-24T14:38:07.563017+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": null, "type": "issue_comment", "id": 39297348}, {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/issues/23/comments/39331950.json"}, "html": {"href": "#!/labscript_suite/blacs/issues/23#comment-39331950"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/issues/23.json"}}, "type": "issue", "id": 23, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "title": "Analoge Inputs"}, "content": {"raw": "I think the idea may have been to have one broker per device, that lived in the subprocess actually acquiring the data, but i'm not sure if that is correct or feasible if you need to assign each one a port....\n\nOk, ZMQ docs indicate that the PUB/SUB model has the PUB socket created where the data is. So it definitely needs to be in the worker process. So we'd need some way of creating ports. Possibly BLACS GUI tabs should request a port number from something centrally in BLACS and then pass this on to the worker process? BLACS could publish a list of device name/ports on which data is being published so that it can be accessed outside of that device tab. Not sure if this is a good plan though, it seems a bit messy. I sort of assumed Chris Billington had this figured out mostly already, but unfortunately he's not available to discuss again for a while.\n\nThere is also the risk that a slow subscriber slows down the consumption of data in the PUB/SUB model, which could affect the performance of the worker process.", "markup": "markdown", "html": "<p>I think the idea may have been to have one broker per device, that lived in the subprocess actually acquiring the data, but i'm not sure if that is correct or feasible if you need to assign each one a port....</p>\n<p>Ok, ZMQ docs indicate that the PUB/SUB model has the PUB socket created where the data is. So it definitely needs to be in the worker process. So we'd need some way of creating ports. Possibly BLACS GUI tabs should request a port number from something centrally in BLACS and then pass this on to the worker process? BLACS could publish a list of device name/ports on which data is being published so that it can be accessed outside of that device tab. Not sure if this is a good plan though, it seems a bit messy. I sort of assumed Chris Billington had this figured out mostly already, but unfortunately he's not available to discuss again for a while.</p>\n<p>There is also the risk that a slow subscriber slows down the consumption of data in the PUB/SUB model, which could affect the performance of the worker process.</p>", "type": "rendered"}, "created_on": "2017-08-24T23:05:12.279344+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": null, "type": "issue_comment", "id": 39331950}, {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/issues/23/comments/39338037.json"}, "html": {"href": "#!/labscript_suite/blacs/issues/23#comment-39338037"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/issues/23.json"}}, "type": "issue", "id": 23, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "title": "Analoge Inputs"}, "content": {"raw": "The Publisher lives in the Worker and publishes to the Broker that lives in BLACS. The Broker works as a hub. Any Subscriber (GUI or other ) could than subscribe to that broker only and listen to any topic they'd like. Performance of the worker process should not be affected by this. \n\nThe only question is where to set/config/store the publishing port (that subscribers subscribe to) for the broker.", "markup": "markdown", "html": "<p>The Publisher lives in the Worker and publishes to the Broker that lives in BLACS. The Broker works as a hub. Any Subscriber (GUI or other ) could than subscribe to that broker only and listen to any topic they'd like. Performance of the worker process should not be affected by this. </p>\n<p>The only question is where to set/config/store the publishing port (that subscribers subscribe to) for the broker.</p>", "type": "rendered"}, "created_on": "2017-08-25T07:18:52.494859+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": null, "type": "issue_comment", "id": 39338037}, {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/issues/23/comments/39361331.json"}, "html": {"href": "#!/labscript_suite/blacs/issues/23#comment-39361331"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/issues/23.json"}}, "type": "issue", "id": 23, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "title": "Analoge Inputs"}, "content": {"raw": "To make it more clear this is kind of what I'm going for: [Forwarder](http://learning-0mq-with-pyzmq.readthedocs.io/en/latest/pyzmq/devices/forwarder.html)\n\nAnd the forwading port that subscribers subscribe to has to be fix if we want apps other than BLACS to access analog input data. \n\nWe could however make that a second pull request and start off with BLACS binding to a random port that it passes to it's analog in widget update thread.", "markup": "markdown", "html": "<p>To make it more clear this is kind of what I'm going for: <a data-is-external-link=\"true\" href=\"http://learning-0mq-with-pyzmq.readthedocs.io/en/latest/pyzmq/devices/forwarder.html\" rel=\"nofollow\">Forwarder</a></p>\n<p>And the forwading port that subscribers subscribe to has to be fix if we want apps other than BLACS to access analog input data. </p>\n<p>We could however make that a second pull request and start off with BLACS binding to a random port that it passes to it's analog in widget update thread.</p>", "type": "rendered"}, "created_on": "2017-08-26T19:25:56.603134+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-26T20:25:25.363454+00:00", "type": "issue_comment", "id": 39361331}, {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/issues/23/comments/39403604.json"}, "html": {"href": "#!/labscript_suite/blacs/issues/23#comment-39403604"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/issues/23.json"}}, "type": "issue", "id": 23, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "title": "Analoge Inputs"}, "content": {"raw": "I see. Yes then, we should have the broker port in labconfig. The broker should definitely exist in a separate BLACS thread. We should possibly consider whether it should even be a separate process so that it doesn't get slowed down by anything else in BLACS, or cause BLACS to consume ridiculous amounts of RAM (I don't know how much it will buffer, or how much CPU it will use...but we could considerably have dozens of analog inputs streaming data though this broker. Might be worth it to spend the time avoiding the Python GIL now)", "markup": "markdown", "html": "<p>I see. Yes then, we should have the broker port in labconfig. The broker should definitely exist in a separate BLACS thread. We should possibly consider whether it should even be a separate process so that it doesn't get slowed down by anything else in BLACS, or cause BLACS to consume ridiculous amounts of RAM (I don't know how much it will buffer, or how much CPU it will use...but we could considerably have dozens of analog inputs streaming data though this broker. Might be worth it to spend the time avoiding the Python GIL now)</p>", "type": "rendered"}, "created_on": "2017-08-28T00:23:50.544134+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": null, "type": "issue_comment", "id": 39403604}, {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/issues/23/comments/39406752.json"}, "html": {"href": "#!/labscript_suite/blacs/issues/23#comment-39406752"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/issues/23.json"}}, "type": "issue", "id": 23, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "title": "Analoge Inputs"}, "content": {"raw": "Yeah sure it can live in it's own process why not. I'll add all those changes to my 'beta' version of analog in widgets and then create a pull request later this week maybe even today.", "markup": "markdown", "html": "<p>Yeah sure it can live in it's own process why not. I'll add all those changes to my 'beta' version of analog in widgets and then create a pull request later this week maybe even today.</p>", "type": "rendered"}, "created_on": "2017-08-28T06:16:10.508782+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": null, "type": "issue_comment", "id": 39406752}], "page": 1, "size": 7}