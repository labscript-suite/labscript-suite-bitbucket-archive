{"links": {"self": {"href": "data/repositories/labscript_suite/blacs/issues/5/comments/37599094.json"}, "html": {"href": "#!/labscript_suite/blacs/issues/5#comment-37599094"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/issues/5.json"}}, "type": "issue", "id": 5, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "title": "AppID stuff not set correctly after compile and restart"}, "content": {"raw": "Oh, so it does! I think that changed at some point, I think it used to be os.execv or something, but maybe I'm mistaken.\n\nI can test on Windows at NIST, and try a few things, but if anyone else wants to have a go at this, I'd suspect a few things: One, that the parent process doesn't die before its child process starts - this means there are two BLACS processes running at the same time, although, to be sure, the second one is delayed and so should not be calling the AppID functions until the first one is dead.\n\nYou might have some luck settings the DETACHED_PROCESS flag, which I've used for things like launching a zlock server automatically without wanting it to be a child process of the current process (example [here](https://bitbucket.org/cbillington/zprocess/src/72cb79765e03b1ab1bfa114070db187925955ea6/zprocess/__init__.py?at=default&fileviewer=file-view-default#__init__.py-575)). But this would mean that the new process would not inherit the old one's terminal, which would be unfortunate if you are running from a terminal for debugging.", "markup": "markdown", "html": "<p>Oh, so it does! I think that changed at some point, I think it used to be os.execv or something, but maybe I'm mistaken.</p>\n<p>I can test on Windows at NIST, and try a few things, but if anyone else wants to have a go at this, I'd suspect a few things: One, that the parent process doesn't die before its child process starts - this means there are two BLACS processes running at the same time, although, to be sure, the second one is delayed and so should not be calling the AppID functions until the first one is dead.</p>\n<p>You might have some luck settings the DETACHED_PROCESS flag, which I've used for things like launching a zlock server automatically without wanting it to be a child process of the current process (example <a data-is-external-link=\"true\" href=\"https://bitbucket.org/cbillington/zprocess/src/72cb79765e03b1ab1bfa114070db187925955ea6/zprocess/__init__.py?at=default&amp;fileviewer=file-view-default#__init__.py-575\" rel=\"nofollow\">here</a>). But this would mean that the new process would not inherit the old one's terminal, which would be unfortunate if you are running from a terminal for debugging.</p>", "type": "rendered"}, "created_on": "2017-06-14T23:23:45.541451+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": null, "type": "issue_comment", "id": 37599094}