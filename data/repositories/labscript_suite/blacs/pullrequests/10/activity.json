{"pagelen": 50, "values": [{"update": {"description": "- Elided text in queue status, tab status bar, tab top bar (device name and connection) and tab label.\r\nThis prevents the GUI from jumping around while shots are running.\r\n\r\n- Split queue status into two QLabels and set them separately - one for the actual status and one for the filename. Made status messages more concise so that they are less likely to be elided.\r\n\r\n- Got rid of the splitter handle at the top of each tab when no error was visible.\r\n\r\n- Device name and connection at top of tab now on one line as:\r\n device_name [connection]\r\n\r\n- Shrank status bar of each tab\r\n\r\n- Put queue controls in a box and made the box centred and not expanding\r\n\r\n- Moved the delete-shots button next to the queue as a toolbutton with no text, and added an add-shots button there too. Connected the add-shots button to a file dialog to add shots (also connected the add shots menu item using the same QAction).\r\n\r\n- Cleaned up analysis submission interface a bit. Added tooltips to each element to improve discoverability in the absence of labels.\r\n\r\n- Reworked analysis submission logic to make it more responsive. \"clear unsent shots\" button used to just hang for many seconds before actually doing anything. Now things are responsive. Added a \"retry now\" button for retrying unsent shots, reduced the timeout time for connecting to lyse to 1 second instead of 2, and decreased the periodic connectivity checks to once every 10 seconds, instead of every second when not connected.\r\n\r\n- Shrank connection table notification recompile button to just say \"recompile\" instead of \"recompile connection table\". The message next to it already makes it clear what's being recompiled.\r\n\r\n- Made unexpected queue exceptions be raised in a thread so that they are still visible, even though the queue continues on.\r\n\r\n- Used a QGridLayout for the queue part of the main interface to make things a bit better aligned.\r\n\r\n(by the way, I've checked the option \"close feature2 after the pull request is merged\". When merging, bitbucket gives the merger the option of changing this to not close the branch. Please do close the branch. Perhaps counterintuitively, re-using branches like I'm doing is easier if they are closed every time.)\r\n\r\n![blacs_elision.png](https://bitbucket.org/repo/9pKE7ad/images/1351085268-blacs_elision.png)", "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements", "destination": {"commit": {"hash": "d77e8e9aaf66", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/blacs/commit/d77e8e9aaf66.json"}, "html": {"href": "#!/labscript_suite/blacs/commits/d77e8e9aaf66"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "bb175799a55f", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs/commit/bb175799a55f"}, "html": {"href": "#!/cbillington/blacs/commits/bb175799a55f"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs"}, "html": {"href": "#!/cbillington/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}ts=python"}}, "type": "repository", "name": "BLACS", "full_name": "cbillington/blacs", "uuid": "{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}"}, "branch": {"name": "feature2"}}, "state": "MERGED", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-06-23T22:11:43.862518+00:00"}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"update": {"description": "- Elided text in queue status, tab status bar, tab top bar (device name and connection) and tab label.\r\nThis prevents the GUI from jumping around while shots are running.\r\n\r\n- Split queue status into two QLabels and set them separately - one for the actual status and one for the filename. Made status messages more concise so that they are less likely to be elided.\r\n\r\n- Got rid of the splitter handle at the top of each tab when no error was visible.\r\n\r\n- Device name and connection at top of tab now on one line as:\r\n device_name [connection]\r\n\r\n- Shrank status bar of each tab\r\n\r\n- Put queue controls in a box and made the box centred and not expanding\r\n\r\n- Moved the delete-shots button next to the queue as a toolbutton with no text, and added an add-shots button there too. Connected the add-shots button to a file dialog to add shots (also connected the add shots menu item using the same QAction).\r\n\r\n- Cleaned up analysis submission interface a bit. Added tooltips to each element to improve discoverability in the absence of labels.\r\n\r\n- Reworked analysis submission logic to make it more responsive. \"clear unsent shots\" button used to just hang for many seconds before actually doing anything. Now things are responsive. Added a \"retry now\" button for retrying unsent shots, reduced the timeout time for connecting to lyse to 1 second instead of 2, and decreased the periodic connectivity checks to once every 10 seconds, instead of every second when not connected.\r\n\r\n- Shrank connection table notification recompile button to just say \"recompile\" instead of \"recompile connection table\". The message next to it already makes it clear what's being recompiled.\r\n\r\n- Made unexpected queue exceptions be raised in a thread so that they are still visible, even though the queue continues on.\r\n\r\n- Used a QGridLayout for the queue part of the main interface to make things a bit better aligned.\r\n\r\n(by the way, I've checked the option \"close feature2 after the pull request is merged\". When merging, bitbucket gives the merger the option of changing this to not close the branch. Please do close the branch. Perhaps counterintuitively, re-using branches like I'm doing is easier if they are closed every time.)\r\n\r\n![blacs_elision.png](https://bitbucket.org/repo/9pKE7ad/images/1351085268-blacs_elision.png)", "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements", "destination": {"commit": {"hash": "d77e8e9aaf66", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/blacs/commit/d77e8e9aaf66.json"}, "html": {"href": "#!/labscript_suite/blacs/commits/d77e8e9aaf66"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "bb175799a55f", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs/commit/bb175799a55f"}, "html": {"href": "#!/cbillington/blacs/commits/bb175799a55f"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs"}, "html": {"href": "#!/cbillington/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}ts=python"}}, "type": "repository", "name": "BLACS", "full_name": "cbillington/blacs", "uuid": "{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}"}, "branch": {"name": "feature2"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-06-23T22:11:43.118869+00:00"}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39349913.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39349913"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "Ah, good point, done.", "markup": "markdown", "html": "<p>Ah, good point, done.</p>", "type": "rendered"}, "created_on": "2017-06-22T09:26:02.473493+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-06-22T09:26:02.476679+00:00", "type": "pullrequest_comment", "id": 39349913}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"update": {"description": "- Elided text in queue status, tab status bar, tab top bar (device name and connection) and tab label.\r\nThis prevents the GUI from jumping around while shots are running.\r\n\r\n- Split queue status into two QLabels and set them separately - one for the actual status and one for the filename. Made status messages more concise so that they are less likely to be elided.\r\n\r\n- Got rid of the splitter handle at the top of each tab when no error was visible.\r\n\r\n- Device name and connection at top of tab now on one line as:\r\n device_name [connection]\r\n\r\n- Shrank status bar of each tab\r\n\r\n- Put queue controls in a box and made the box centred and not expanding\r\n\r\n- Moved the delete-shots button next to the queue as a toolbutton with no text, and added an add-shots button there too. Connected the add-shots button to a file dialog to add shots (also connected the add shots menu item using the same QAction).\r\n\r\n- Cleaned up analysis submission interface a bit. Added tooltips to each element to improve discoverability in the absence of labels.\r\n\r\n- Reworked analysis submission logic to make it more responsive. \"clear unsent shots\" button used to just hang for many seconds before actually doing anything. Now things are responsive. Added a \"retry now\" button for retrying unsent shots, reduced the timeout time for connecting to lyse to 1 second instead of 2, and decreased the periodic connectivity checks to once every 10 seconds, instead of every second when not connected.\r\n\r\n- Shrank connection table notification recompile button to just say \"recompile\" instead of \"recompile connection table\". The message next to it already makes it clear what's being recompiled.\r\n\r\n- Made unexpected queue exceptions be raised in a thread so that they are still visible, even though the queue continues on.\r\n\r\n- Used a QGridLayout for the queue part of the main interface to make things a bit better aligned.\r\n\r\n(by the way, I've checked the option \"close feature2 after the pull request is merged\". When merging, bitbucket gives the merger the option of changing this to not close the branch. Please do close the branch. Perhaps counterintuitively, re-using branches like I'm doing is easier if they are closed every time.)\r\n\r\n![blacs_elision.png](https://bitbucket.org/repo/9pKE7ad/images/1351085268-blacs_elision.png)", "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements", "destination": {"commit": {"hash": "d77e8e9aaf66", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/blacs/commit/d77e8e9aaf66.json"}, "html": {"href": "#!/labscript_suite/blacs/commits/d77e8e9aaf66"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "bb175799a55f", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs/commit/bb175799a55f"}, "html": {"href": "#!/cbillington/blacs/commits/bb175799a55f"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs"}, "html": {"href": "#!/cbillington/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}ts=python"}}, "type": "repository", "name": "BLACS", "full_name": "cbillington/blacs", "uuid": "{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}"}, "branch": {"name": "feature2"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-06-22T09:25:05.818207+00:00"}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39324035.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39324035"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "While we're making gui improvements, do you want to hook up the exit button in the file menu to close issue #16?", "markup": "markdown", "html": "<p>While we're making gui improvements, do you want to hook up the exit button in the file menu to close issue <a href=\"#!/labscript_suite/blacs/issues/16/menu-actions-not-connected\" rel=\"nofollow\" title=\"Menu actions not connected\" class=\"ap-connect-link\"><s>#16</s></a>?</p>", "type": "rendered"}, "created_on": "2017-06-21T23:54:48.257574+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": "2017-06-21T23:54:48.260912+00:00", "type": "pullrequest_comment", "id": 39324035}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"update": {"description": "- Elided text in queue status, tab status bar, tab top bar (device name and connection) and tab label.\r\nThis prevents the GUI from jumping around while shots are running.\r\n\r\n- Split queue status into two QLabels and set them separately - one for the actual status and one for the filename. Made status messages more concise so that they are less likely to be elided.\r\n\r\n- Got rid of the splitter handle at the top of each tab when no error was visible.\r\n\r\n- Device name and connection at top of tab now on one line as:\r\n device_name [connection]\r\n\r\n- Shrank status bar of each tab\r\n\r\n- Put queue controls in a box and made the box centred and not expanding\r\n\r\n- Moved the delete-shots button next to the queue as a toolbutton with no text, and added an add-shots button there too. Connected the add-shots button to a file dialog to add shots (also connected the add shots menu item using the same QAction).\r\n\r\n- Cleaned up analysis submission interface a bit. Added tooltips to each element to improve discoverability in the absence of labels.\r\n\r\n- Reworked analysis submission logic to make it more responsive. \"clear unsent shots\" button used to just hang for many seconds before actually doing anything. Now things are responsive. Added a \"retry now\" button for retrying unsent shots, reduced the timeout time for connecting to lyse to 1 second instead of 2, and decreased the periodic connectivity checks to once every 10 seconds, instead of every second when not connected.\r\n\r\n- Shrank connection table notification recompile button to just say \"recompile\" instead of \"recompile connection table\". The message next to it already makes it clear what's being recompiled.\r\n\r\n- Made unexpected queue exceptions be raised in a thread so that they are still visible, even though the queue continues on.\r\n\r\n- Used a QGridLayout for the queue part of the main interface to make things a bit better aligned.\r\n\r\n(by the way, I've checked the option \"close feature2 after the pull request is merged\". When merging, bitbucket gives the merger the option of changing this to not close the branch. Please do close the branch. Perhaps counterintuitively, re-using branches like I'm doing is easier if they are closed every time.)\r\n\r\n![blacs_elision.png](https://bitbucket.org/repo/9pKE7ad/images/1351085268-blacs_elision.png)", "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements", "destination": {"commit": {"hash": "d77e8e9aaf66", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/blacs/commit/d77e8e9aaf66.json"}, "html": {"href": "#!/labscript_suite/blacs/commits/d77e8e9aaf66"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "b3daedd67288", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs/commit/b3daedd67288"}, "html": {"href": "#!/cbillington/blacs/commits/b3daedd67288"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs"}, "html": {"href": "#!/cbillington/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}ts=python"}}, "type": "repository", "name": "BLACS", "full_name": "cbillington/blacs", "uuid": "{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}"}, "branch": {"name": "feature2"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-06-21T15:24:16.434015+00:00"}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39245009.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39245009"}}, "parent": {"id": 39244228, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39244228.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39244228"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "Here's the screenshot for comparison with the others:\n\n![newest BLACS spacings.PNG](data/bitbucket.org/repo/dR5qxr/images/3811199700-newest_BLACS_spacings.PNG)", "markup": "markdown", "html": "<p>Here's the screenshot for comparison with the others:</p>\n<p><img alt=\"newest BLACS spacings.PNG\" src=\"data/bitbucket.org/repo/dR5qxr/images/3811199700-newest_BLACS_spacings.PNG\" /></p>", "type": "rendered"}, "created_on": "2017-06-21T07:29:21.180758+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": "2017-06-21T07:29:21.183791+00:00", "type": "pullrequest_comment", "id": 39245009}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"update": {"description": "- Elided text in queue status, tab status bar, tab top bar (device name and connection) and tab label.\r\nThis prevents the GUI from jumping around while shots are running.\r\n\r\n- Split queue status into two QLabels and set them separately - one for the actual status and one for the filename. Made status messages more concise so that they are less likely to be elided.\r\n\r\n- Got rid of the splitter handle at the top of each tab when no error was visible.\r\n\r\n- Device name and connection at top of tab now on one line as:\r\n device_name [connection]\r\n\r\n- Shrank status bar of each tab\r\n\r\n- Put queue controls in a box and made the box centred and not expanding\r\n\r\n- Moved the delete-shots button next to the queue as a toolbutton with no text, and added an add-shots button there too. Connected the add-shots button to a file dialog to add shots (also connected the add shots menu item using the same QAction).\r\n\r\n- Cleaned up analysis submission interface a bit. Added tooltips to each element to improve discoverability in the absence of labels.\r\n\r\n- Reworked analysis submission logic to make it more responsive. \"clear unsent shots\" button used to just hang for many seconds before actually doing anything. Now things are responsive. Added a \"retry now\" button for retrying unsent shots, reduced the timeout time for connecting to lyse to 1 second instead of 2, and decreased the periodic connectivity checks to once every 10 seconds, instead of every second when not connected.\r\n\r\n- Shrank connection table notification recompile button to just say \"recompile\" instead of \"recompile connection table\". The message next to it already makes it clear what's being recompiled.\r\n\r\n- Made unexpected queue exceptions be raised in a thread so that they are still visible, even though the queue continues on.\r\n\r\n- Used a QGridLayout for the queue part of the main interface to make things a bit better aligned.\r\n\r\n(by the way, I've checked the option \"close feature2 after the pull request is merged\". When merging, bitbucket gives the merger the option of changing this to not close the branch. Please do close the branch. Perhaps counterintuitively, re-using branches like I'm doing is easier if they are closed every time.)\r\n\r\n![blacs_elision.png](https://bitbucket.org/repo/9pKE7ad/images/1351085268-blacs_elision.png)", "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements", "destination": {"commit": {"hash": "d77e8e9aaf66", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/blacs/commit/d77e8e9aaf66.json"}, "html": {"href": "#!/labscript_suite/blacs/commits/d77e8e9aaf66"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "cd87008fb515", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs/commit/cd87008fb515"}, "html": {"href": "#!/cbillington/blacs/commits/cd87008fb515"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs"}, "html": {"href": "#!/cbillington/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}ts=python"}}, "type": "repository", "name": "BLACS", "full_name": "cbillington/blacs", "uuid": "{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}"}, "branch": {"name": "feature2"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-06-21T07:23:17.883703+00:00"}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39244228.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39244228"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "I agree. Will change the 3 pixels into 6 pixels, which will make things line up, and probably fit the intuition well since 6 is sort of the default spacing in Qt.", "markup": "markdown", "html": "<p>I agree. Will change the 3 pixels into 6 pixels, which will make things line up, and probably fit the intuition well since 6 is sort of the default spacing in Qt.</p>", "type": "rendered"}, "created_on": "2017-06-21T07:19:17.825895+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-06-21T07:19:17.829140+00:00", "type": "pullrequest_comment", "id": 39244228}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39244091.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39244091"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "![newer BLACS spacings.PNG](data/bitbucket.org/repo/dR5qxr/images/160155503-newer_BLACS_spacings.PNG)\n\nThe bottom of the analysis submission box no longer lines up with the bottom of the tabs. I think that I actually prefer the medium size version, even if it \"wastes\" some pixels, it gives more defined borders around each area of the GUI.", "markup": "markdown", "html": "<p><img alt=\"newer BLACS spacings.PNG\" src=\"data/bitbucket.org/repo/dR5qxr/images/160155503-newer_BLACS_spacings.PNG\" /></p>\n<p>The bottom of the analysis submission box no longer lines up with the bottom of the tabs. I think that I actually prefer the medium size version, even if it \"wastes\" some pixels, it gives more defined borders around each area of the GUI.</p>", "type": "rendered"}, "created_on": "2017-06-21T07:17:29.266858+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": "2017-06-21T07:17:29.269654+00:00", "type": "pullrequest_comment", "id": 39244091}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39243556.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39243556"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "Yes, the splitter handles were 12 and now they're 6. But there were also margins on each tab widget, which were 9. So I've just changed them to 3.\n\nSo spacing between tab widgets before = 9 + 12 + 9 = 30\n\nSpacing now: = 3 + 6 + 3 = 12\n\nSo closer to \"half\" as suggested. ", "markup": "markdown", "html": "<p>Yes, the splitter handles were 12 and now they're 6. But there were also margins on each tab widget, which were 9. So I've just changed them to 3.</p>\n<p>So spacing between tab widgets before = 9 + 12 + 9 = 30</p>\n<p>Spacing now: = 3 + 6 + 3 = 12</p>\n<p>So closer to \"half\" as suggested. </p>", "type": "rendered"}, "created_on": "2017-06-21T07:10:25.774865+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-06-21T07:10:47.226315+00:00", "type": "pullrequest_comment", "id": 39243556}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"update": {"description": "- Elided text in queue status, tab status bar, tab top bar (device name and connection) and tab label.\r\nThis prevents the GUI from jumping around while shots are running.\r\n\r\n- Split queue status into two QLabels and set them separately - one for the actual status and one for the filename. Made status messages more concise so that they are less likely to be elided.\r\n\r\n- Got rid of the splitter handle at the top of each tab when no error was visible.\r\n\r\n- Device name and connection at top of tab now on one line as:\r\n device_name [connection]\r\n\r\n- Shrank status bar of each tab\r\n\r\n- Put queue controls in a box and made the box centred and not expanding\r\n\r\n- Moved the delete-shots button next to the queue as a toolbutton with no text, and added an add-shots button there too. Connected the add-shots button to a file dialog to add shots (also connected the add shots menu item using the same QAction).\r\n\r\n- Cleaned up analysis submission interface a bit. Added tooltips to each element to improve discoverability in the absence of labels.\r\n\r\n- Reworked analysis submission logic to make it more responsive. \"clear unsent shots\" button used to just hang for many seconds before actually doing anything. Now things are responsive. Added a \"retry now\" button for retrying unsent shots, reduced the timeout time for connecting to lyse to 1 second instead of 2, and decreased the periodic connectivity checks to once every 10 seconds, instead of every second when not connected.\r\n\r\n- Shrank connection table notification recompile button to just say \"recompile\" instead of \"recompile connection table\". The message next to it already makes it clear what's being recompiled.\r\n\r\n- Made unexpected queue exceptions be raised in a thread so that they are still visible, even though the queue continues on.\r\n\r\n- Used a QGridLayout for the queue part of the main interface to make things a bit better aligned.\r\n\r\n(by the way, I've checked the option \"close feature2 after the pull request is merged\". When merging, bitbucket gives the merger the option of changing this to not close the branch. Please do close the branch. Perhaps counterintuitively, re-using branches like I'm doing is easier if they are closed every time.)\r\n\r\n![blacs_elision.png](https://bitbucket.org/repo/9pKE7ad/images/1351085268-blacs_elision.png)", "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements", "destination": {"commit": {"hash": "d77e8e9aaf66", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/blacs/commit/d77e8e9aaf66.json"}, "html": {"href": "#!/labscript_suite/blacs/commits/d77e8e9aaf66"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "36e70f1daa91", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs/commit/36e70f1daa91"}, "html": {"href": "#!/cbillington/blacs/commits/36e70f1daa91"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs"}, "html": {"href": "#!/cbillington/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}ts=python"}}, "type": "repository", "name": "BLACS", "full_name": "cbillington/blacs", "uuid": "{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}"}, "branch": {"name": "feature2"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-06-21T07:08:46.640011+00:00"}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39242055.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39242055"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "before this gets merged, I want to clarify regarding the splitter handles. You say you've reduced the size of them, but I feel like there is more than 6 pixels of space in Shaun's pictures. Maybe it wasn't the size of the splitter handle that needed shrinking, but some padding around the tab widgets?", "markup": "markdown", "html": "<p>before this gets merged, I want to clarify regarding the splitter handles. You say you've reduced the size of them, but I feel like there is more than 6 pixels of space in Shaun's pictures. Maybe it wasn't the size of the splitter handle that needed shrinking, but some padding around the tab widgets?</p>", "type": "rendered"}, "created_on": "2017-06-21T06:48:23.669016+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2017-06-21T06:48:23.671500+00:00", "type": "pullrequest_comment", "id": 39242055}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"approval": {"date": "2017-06-21T05:40:09.975425+00:00", "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39238641.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39238641"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "Looking better!\n\nBefore:\n\n![old BLACS spacings.PNG](data/bitbucket.org/repo/dR5qxr/images/2228293422-old_BLACS_spacings.PNG)\n\nAfter:\n\n![new BLACS spacings.PNG](data/bitbucket.org/repo/dR5qxr/images/3526651573-new_BLACS_spacings.PNG)\n", "markup": "markdown", "html": "<p>Looking better!</p>\n<p>Before:</p>\n<p><img alt=\"old BLACS spacings.PNG\" src=\"data/bitbucket.org/repo/dR5qxr/images/2228293422-old_BLACS_spacings.PNG\" /></p>\n<p>After:</p>\n<p><img alt=\"new BLACS spacings.PNG\" src=\"data/bitbucket.org/repo/dR5qxr/images/3526651573-new_BLACS_spacings.PNG\" /></p>", "type": "rendered"}, "created_on": "2017-06-21T05:39:54.506960+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": "2017-06-21T05:39:54.511312+00:00", "type": "pullrequest_comment", "id": 39238641}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39236917.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39236917"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "All done.", "markup": "markdown", "html": "<p>All done.</p>", "type": "rendered"}, "created_on": "2017-06-21T04:51:18.243995+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-06-21T04:51:18.246585+00:00", "type": "pullrequest_comment", "id": 39236917}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"update": {"description": "- Elided text in queue status, tab status bar, tab top bar (device name and connection) and tab label.\r\nThis prevents the GUI from jumping around while shots are running.\r\n\r\n- Split queue status into two QLabels and set them separately - one for the actual status and one for the filename. Made status messages more concise so that they are less likely to be elided.\r\n\r\n- Got rid of the splitter handle at the top of each tab when no error was visible.\r\n\r\n- Device name and connection at top of tab now on one line as:\r\n device_name [connection]\r\n\r\n- Shrank status bar of each tab\r\n\r\n- Put queue controls in a box and made the box centred and not expanding\r\n\r\n- Moved the delete-shots button next to the queue as a toolbutton with no text, and added an add-shots button there too. Connected the add-shots button to a file dialog to add shots (also connected the add shots menu item using the same QAction).\r\n\r\n- Cleaned up analysis submission interface a bit. Added tooltips to each element to improve discoverability in the absence of labels.\r\n\r\n- Reworked analysis submission logic to make it more responsive. \"clear unsent shots\" button used to just hang for many seconds before actually doing anything. Now things are responsive. Added a \"retry now\" button for retrying unsent shots, reduced the timeout time for connecting to lyse to 1 second instead of 2, and decreased the periodic connectivity checks to once every 10 seconds, instead of every second when not connected.\r\n\r\n- Shrank connection table notification recompile button to just say \"recompile\" instead of \"recompile connection table\". The message next to it already makes it clear what's being recompiled.\r\n\r\n- Made unexpected queue exceptions be raised in a thread so that they are still visible, even though the queue continues on.\r\n\r\n- Used a QGridLayout for the queue part of the main interface to make things a bit better aligned.\r\n\r\n(by the way, I've checked the option \"close feature2 after the pull request is merged\". When merging, bitbucket gives the merger the option of changing this to not close the branch. Please do close the branch. Perhaps counterintuitively, re-using branches like I'm doing is easier if they are closed every time.)\r\n\r\n![blacs_elision.png](https://bitbucket.org/repo/9pKE7ad/images/1351085268-blacs_elision.png)", "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements", "destination": {"commit": {"hash": "d77e8e9aaf66", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/blacs/commit/d77e8e9aaf66.json"}, "html": {"href": "#!/labscript_suite/blacs/commits/d77e8e9aaf66"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "7f789d47a6af", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs/commit/7f789d47a6af"}, "html": {"href": "#!/cbillington/blacs/commits/7f789d47a6af"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs"}, "html": {"href": "#!/cbillington/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}ts=python"}}, "type": "repository", "name": "BLACS", "full_name": "cbillington/blacs", "uuid": "{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}"}, "branch": {"name": "feature2"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-06-21T04:50:39.875024+00:00"}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39236442.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39236442"}}, "parent": {"id": 39234799, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39234799.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39234799"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "- I can add some pixels! I think it was about the margins of the layout it's in rather than the widget itself.\n\n- Will halve the splitter handle width. I actually increased it to 12 pixels up from 6, but you're right, that's pretty big : 6 is the default size of most gaps between things that aren't intentionally closer.\n\n- Sounds good about the connection string - now that the text is elided it's not so important that it's as short as possible anyway.\n", "markup": "markdown", "html": "<ul>\n<li>\n<p>I can add some pixels! I think it was about the margins of the layout it's in rather than the widget itself.</p>\n</li>\n<li>\n<p>Will halve the splitter handle width. I actually increased it to 12 pixels up from 6, but you're right, that's pretty big : 6 is the default size of most gaps between things that aren't intentionally closer.</p>\n</li>\n<li>\n<p>Sounds good about the connection string - now that the text is elided it's not so important that it's as short as possible anyway.</p>\n</li>\n</ul>", "type": "rendered"}, "created_on": "2017-06-21T04:36:50.966547+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-06-21T04:36:50.969479+00:00", "type": "pullrequest_comment", "id": 39236442}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39234799.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39234799"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "I'd like to have the following addressed before we merge this:\n\n* I still can't work out what you've done to make the status bars smaller than they used to be, it seems to be overriding the margin when I try to increase it. It just needs a few extra pixels of vertical space.\n\n* While doing all of this pixel saving, you should also shrink the gaps between each tab frame (approx half the current size would probably do).\n\n* It's not always immediately obvious what the \"connection\" is now that it's in the brackets after the device name. Sometimes it's just an integer, sometimes an ip address, or sometimes a string (in our lab, the NI card connections have the same name as the device). Perhaps you should write \"**Device_name** [Conn: conection_string]\" to make is slightly more obvious?", "markup": "markdown", "html": "<p>I'd like to have the following addressed before we merge this:</p>\n<ul>\n<li>\n<p>I still can't work out what you've done to make the status bars smaller than they used to be, it seems to be overriding the margin when I try to increase it. It just needs a few extra pixels of vertical space.</p>\n</li>\n<li>\n<p>While doing all of this pixel saving, you should also shrink the gaps between each tab frame (approx half the current size would probably do).</p>\n</li>\n<li>\n<p>It's not always immediately obvious what the \"connection\" is now that it's in the brackets after the device name. Sometimes it's just an integer, sometimes an ip address, or sometimes a string (in our lab, the NI card connections have the same name as the device). Perhaps you should write \"<strong>Device_name</strong> [Conn: conection_string]\" to make is slightly more obvious?</p>\n</li>\n</ul>", "type": "rendered"}, "created_on": "2017-06-21T03:41:24.470447+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": "2017-06-21T03:41:24.472969+00:00", "type": "pullrequest_comment", "id": 39234799}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39139024.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39139024"}}, "parent": {"id": 39137622, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39137622.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39137622"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "The margin doesn't seem to actually change anything (it looks like it will in QtDesigner, but then it doesn't change in BLACS). Let's just leave it as it is, it's not that bad.", "markup": "markdown", "html": "<p>The margin doesn't seem to actually change anything (it looks like it will in QtDesigner, but then it doesn't change in BLACS). Let's just leave it as it is, it's not that bad.</p>", "type": "rendered"}, "created_on": "2017-06-20T05:58:25.106414+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": "2017-06-20T05:58:25.108621+00:00", "type": "pullrequest_comment", "id": 39139024}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39137622.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39137622"}}, "parent": {"id": 39136576, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39136576.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39136576"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "If you change the \"frame\" settings of the status label in Qt Designer, do any of them look any better? The \"frameShadow\" will probably change the background colour and \"frameShape\" will put a box around it. And yeah it could stand to gain a few pixels - you could change \"margin\" to 1 or 2 in its QLabel settings.\n\nWould do it myself but they all look pretty much the same on Ubuntu.", "markup": "markdown", "html": "<p>If you change the \"frame\" settings of the status label in Qt Designer, do any of them look any better? The \"frameShadow\" will probably change the background colour and \"frameShape\" will put a box around it. And yeah it could stand to gain a few pixels - you could change \"margin\" to 1 or 2 in its QLabel settings.</p>\n<p>Would do it myself but they all look pretty much the same on Ubuntu.</p>", "type": "rendered"}, "created_on": "2017-06-20T05:22:56.468556+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-06-20T05:22:56.470825+00:00", "type": "pullrequest_comment", "id": 39137622}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39137046.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39137046"}}, "parent": {"id": 39136837, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39136837.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39136837"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "It looks like that's what you would have gotten before my changes, but I've fixed it anyway - now that status is written from the exception handler rather than from the `if error condition:` block, so it will not overwrite the 'error in transition to manual' status.", "markup": "markdown", "html": "<p>It looks like that's what you would have gotten before my changes, but I've fixed it anyway - now that status is written from the exception handler rather than from the <code>if error condition:</code> block, so it will not overwrite the 'error in transition to manual' status.</p>", "type": "rendered"}, "created_on": "2017-06-20T05:04:42.818158+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-06-20T05:04:42.820559+00:00", "type": "pullrequest_comment", "id": 39137046}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"update": {"description": "- Elided text in queue status, tab status bar, tab top bar (device name and connection) and tab label.\r\nThis prevents the GUI from jumping around while shots are running.\r\n\r\n- Split queue status into two QLabels and set them separately - one for the actual status and one for the filename. Made status messages more concise so that they are less likely to be elided.\r\n\r\n- Got rid of the splitter handle at the top of each tab when no error was visible.\r\n\r\n- Device name and connection at top of tab now on one line as:\r\n device_name [connection]\r\n\r\n- Shrank status bar of each tab\r\n\r\n- Put queue controls in a box and made the box centred and not expanding\r\n\r\n- Moved the delete-shots button next to the queue as a toolbutton with no text, and added an add-shots button there too. Connected the add-shots button to a file dialog to add shots (also connected the add shots menu item using the same QAction).\r\n\r\n- Cleaned up analysis submission interface a bit. Added tooltips to each element to improve discoverability in the absence of labels.\r\n\r\n- Reworked analysis submission logic to make it more responsive. \"clear unsent shots\" button used to just hang for many seconds before actually doing anything. Now things are responsive. Added a \"retry now\" button for retrying unsent shots, reduced the timeout time for connecting to lyse to 1 second instead of 2, and decreased the periodic connectivity checks to once every 10 seconds, instead of every second when not connected.\r\n\r\n- Shrank connection table notification recompile button to just say \"recompile\" instead of \"recompile connection table\". The message next to it already makes it clear what's being recompiled.\r\n\r\n- Made unexpected queue exceptions be raised in a thread so that they are still visible, even though the queue continues on.\r\n\r\n- Used a QGridLayout for the queue part of the main interface to make things a bit better aligned.\r\n\r\n(by the way, I've checked the option \"close feature2 after the pull request is merged\". When merging, bitbucket gives the merger the option of changing this to not close the branch. Please do close the branch. Perhaps counterintuitively, re-using branches like I'm doing is easier if they are closed every time.)\r\n\r\n![blacs_elision.png](https://bitbucket.org/repo/9pKE7ad/images/1351085268-blacs_elision.png)", "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements", "destination": {"commit": {"hash": "a5d306dab61e", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/blacs/commit/a5d306dab61e.json"}, "html": {"href": "#!/labscript_suite/blacs/commits/a5d306dab61e"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "c6f1ea49f11b", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs/commit/c6f1ea49f11b"}, "html": {"href": "#!/cbillington/blacs/commits/c6f1ea49f11b"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs"}, "html": {"href": "#!/cbillington/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}ts=python"}}, "type": "repository", "name": "BLACS", "full_name": "cbillington/blacs", "uuid": "{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}"}, "branch": {"name": "feature2"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-06-20T05:03:11.241511+00:00"}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39136837.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39136837"}}, "parent": {"id": 39136466, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39136466.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39136466"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "I still get \"Error in queue manager\\nQueue Paused\" rather than \"Error in transtion to manual\\nQueue Paused\" but I guess this in because it is not the tab's transition_to_manual raising the error, but instead the tab itself being unresponsive.", "markup": "markdown", "html": "<p>I still get \"Error in queue manager\\nQueue Paused\" rather than \"Error in transtion to manual\\nQueue Paused\" but I guess this in because it is not the tab's transition_to_manual raising the error, but instead the tab itself being unresponsive.</p>", "type": "rendered"}, "created_on": "2017-06-20T04:56:12.448988+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": "2017-06-20T04:56:12.452029+00:00", "type": "pullrequest_comment", "id": 39136837}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39136576.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39136576"}}, "parent": {"id": 39136522, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39136522.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39136522"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "I think that my comment about the status bar looking weird is in part due to the fact that it is white on my system, whereas on yours it's the same background colour, so it doesn't look like the box above is sitting in front of the status bar.", "markup": "markdown", "html": "<p>I think that my comment about the status bar looking weird is in part due to the fact that it is white on my system, whereas on yours it's the same background colour, so it doesn't look like the box above is sitting in front of the status bar.</p>", "type": "rendered"}, "created_on": "2017-06-20T04:47:05.512927+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": "2017-06-20T04:47:05.515567+00:00", "type": "pullrequest_comment", "id": 39136576}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39136522.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39136522"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "Here are a few more general comments on some of the changes in this pull request:\n\n* I can't actually find any error messages that need eliding, the queue width is limited by the control buttons first, if I make it any smaller than them the whole thing is hidden. This means that I can't test the multi-line stuff.\n\n* I think that the status bars on tabs may be slightly too narrow now, they look a bit weird without some extra whitespace above the text.\n\n* Not really related to changes made here, but the interface in general, it looks as though various borders look different on our computer compared with yours. In Windows, the border around the tab itself is quite light compared with the border around the tab contents. This makes it less obvious that the status bar is part of the tab. Do you think that it is worth altering these while we're changing other aspects of the interface? See attached screenshot compared with the one on the pull request\n\n![blacs borders.PNG](data/bitbucket.org/repo/dR5qxr/images/4064635204-blacs_borders.PNG)\n", "markup": "markdown", "html": "<p>Here are a few more general comments on some of the changes in this pull request:</p>\n<ul>\n<li>\n<p>I can't actually find any error messages that need eliding, the queue width is limited by the control buttons first, if I make it any smaller than them the whole thing is hidden. This means that I can't test the multi-line stuff.</p>\n</li>\n<li>\n<p>I think that the status bars on tabs may be slightly too narrow now, they look a bit weird without some extra whitespace above the text.</p>\n</li>\n<li>\n<p>Not really related to changes made here, but the interface in general, it looks as though various borders look different on our computer compared with yours. In Windows, the border around the tab itself is quite light compared with the border around the tab contents. This makes it less obvious that the status bar is part of the tab. Do you think that it is worth altering these while we're changing other aspects of the interface? See attached screenshot compared with the one on the pull request</p>\n</li>\n</ul>\n<p><img alt=\"blacs borders.PNG\" src=\"data/bitbucket.org/repo/dR5qxr/images/4064635204-blacs_borders.PNG\" /></p>", "type": "rendered"}, "created_on": "2017-06-20T04:45:03.592166+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": "2017-06-20T04:45:03.595089+00:00", "type": "pullrequest_comment", "id": 39136522}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39136466.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39136466"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "I pushed a fix. Pretty simple:\n\n\n```\n#!diff\n\n--- a/queue.py\tMon Jun 19 14:29:52 2017 -0400\n+++ b/queue.py\tTue Jun 20 00:42:29 2017 -0400\n@@ -801,25 +801,25 @@\n                         error_condition = True\n                     if self.get_device_error_state(device_name,devices_in_use):\n                         error_condition = True\n                     # Once device has transitioned_to_manual, disconnect restart signal\n                     inmain(tab.disconnect_restart_receiver,restart_function)\n                     \n                 if error_condition:                \n                     self.set_status(\"Error in transtion to manual\\nQueue Paused\")\n-                    # TODO: Kind of dodgy raising an exception here...\n-                    raise Exception('A device failed during transition to manual')\n                                        \n             except Exception as e:\n+                error_condition = True\n                 logger.exception(\"Error in queue manager execution. Queue paused.\")\n \n                 # Raise the error in a thread for visibility\n                 zprocess.raise_exception_in_thread(sys.exc_info())\n                 \n+            if error_condition:\n                 # clean up the h5 file\n                 self.manager_paused = True\n                 # clean the h5 file:\n                 self.clean_h5_file(path, 'temp.h5')\n                 try:\n                     os.remove(path)\n                     os.rename('temp.h5', path)\n                 except WindowsError if platform.system() == 'Windows' else None:\n```\n", "markup": "markdown", "html": "<p>I pushed a fix. Pretty simple:</p>\n<div class=\"codehilite language-diff\"><pre><span></span><span class=\"gd\">--- a/queue.py  Mon Jun 19 14:29:52 2017 -0400</span>\n<span class=\"gi\">+++ b/queue.py  Tue Jun 20 00:42:29 2017 -0400</span>\n<span class=\"gu\">@@ -801,25 +801,25 @@</span>\n                         error_condition = True\n                     if self.get_device_error_state(device_name,devices_in_use):\n                         error_condition = True\n                     # Once device has transitioned_to_manual, disconnect restart signal\n                     inmain(tab.disconnect_restart_receiver,restart_function)\n\n                 if error_condition:                \n                     self.set_status(&quot;Error in transtion to manual\\nQueue Paused&quot;)\n<span class=\"gd\">-                    # TODO: Kind of dodgy raising an exception here...</span>\n<span class=\"gd\">-                    raise Exception(&#39;A device failed during transition to manual&#39;)</span>\n\n             except Exception as e:\n<span class=\"gi\">+                error_condition = True</span>\n                 logger.exception(&quot;Error in queue manager execution. Queue paused.&quot;)\n\n                 # Raise the error in a thread for visibility\n                 zprocess.raise_exception_in_thread(sys.exc_info())\n\n<span class=\"gi\">+            if error_condition:</span>\n                 # clean up the h5 file\n                 self.manager_paused = True\n                 # clean the h5 file:\n                 self.clean_h5_file(path, &#39;temp.h5&#39;)\n                 try:\n                     os.remove(path)\n                     os.rename(&#39;temp.h5&#39;, path)\n                 except WindowsError if platform.system() == &#39;Windows&#39; else None:\n</pre></div>", "type": "rendered"}, "created_on": "2017-06-20T04:42:54.404618+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-06-20T04:42:54.407903+00:00", "type": "pullrequest_comment", "id": 39136466}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"update": {"description": "- Elided text in queue status, tab status bar, tab top bar (device name and connection) and tab label.\r\nThis prevents the GUI from jumping around while shots are running.\r\n\r\n- Split queue status into two QLabels and set them separately - one for the actual status and one for the filename. Made status messages more concise so that they are less likely to be elided.\r\n\r\n- Got rid of the splitter handle at the top of each tab when no error was visible.\r\n\r\n- Device name and connection at top of tab now on one line as:\r\n device_name [connection]\r\n\r\n- Shrank status bar of each tab\r\n\r\n- Put queue controls in a box and made the box centred and not expanding\r\n\r\n- Moved the delete-shots button next to the queue as a toolbutton with no text, and added an add-shots button there too. Connected the add-shots button to a file dialog to add shots (also connected the add shots menu item using the same QAction).\r\n\r\n- Cleaned up analysis submission interface a bit. Added tooltips to each element to improve discoverability in the absence of labels.\r\n\r\n- Reworked analysis submission logic to make it more responsive. \"clear unsent shots\" button used to just hang for many seconds before actually doing anything. Now things are responsive. Added a \"retry now\" button for retrying unsent shots, reduced the timeout time for connecting to lyse to 1 second instead of 2, and decreased the periodic connectivity checks to once every 10 seconds, instead of every second when not connected.\r\n\r\n- Shrank connection table notification recompile button to just say \"recompile\" instead of \"recompile connection table\". The message next to it already makes it clear what's being recompiled.\r\n\r\n- Made unexpected queue exceptions be raised in a thread so that they are still visible, even though the queue continues on.\r\n\r\n- Used a QGridLayout for the queue part of the main interface to make things a bit better aligned.\r\n\r\n(by the way, I've checked the option \"close feature2 after the pull request is merged\". When merging, bitbucket gives the merger the option of changing this to not close the branch. Please do close the branch. Perhaps counterintuitively, re-using branches like I'm doing is easier if they are closed every time.)\r\n\r\n![blacs_elision.png](https://bitbucket.org/repo/9pKE7ad/images/1351085268-blacs_elision.png)", "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements", "destination": {"commit": {"hash": "a5d306dab61e", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/blacs/commit/a5d306dab61e.json"}, "html": {"href": "#!/labscript_suite/blacs/commits/a5d306dab61e"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "72561874b90f", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs/commit/72561874b90f"}, "html": {"href": "#!/cbillington/blacs/commits/72561874b90f"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs"}, "html": {"href": "#!/cbillington/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}ts=python"}}, "type": "repository", "name": "BLACS", "full_name": "cbillington/blacs", "uuid": "{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}"}, "branch": {"name": "feature2"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-06-20T04:35:58.233820+00:00"}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39136066.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39136066"}}, "parent": {"id": 39135974, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39135974.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39135974"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "Yeah, it paused the queue, but as soon as I restarted the crashed tab I could keep using it.", "markup": "markdown", "html": "<p>Yeah, it paused the queue, but as soon as I restarted the crashed tab I could keep using it.</p>", "type": "rendered"}, "created_on": "2017-06-20T04:27:17.052739+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": "2017-06-20T04:27:17.055201+00:00", "type": "pullrequest_comment", "id": 39136066}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39135974.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39135974"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "So It looks like you get that error *as well* as everything continuing to function, right?\n\nIt looks like I mistook a bit of code for \"this is a catch-all exception handler for if something goes wrong that was unexpected\", when the code was actually being used to catch more expected errors.\n\nAn exception is raised earlier in order to intentionally trigger the cleanup code. At least there is a comment acknowledging that it's dodgy! It's essentially using the exception as a GOTO.\n\nI could remove the error popup (it is just for visibility so you don't miss the tracebacks from actual unexpected crashes) but I think I can easily refactor to remove the dodgy exception.", "markup": "markdown", "html": "<p>So It looks like you get that error <em>as well</em> as everything continuing to function, right?</p>\n<p>It looks like I mistook a bit of code for \"this is a catch-all exception handler for if something goes wrong that was unexpected\", when the code was actually being used to catch more expected errors.</p>\n<p>An exception is raised earlier in order to intentionally trigger the cleanup code. At least there is a comment acknowledging that it's dodgy! It's essentially using the exception as a GOTO.</p>\n<p>I could remove the error popup (it is just for visibility so you don't miss the tracebacks from actual unexpected crashes) but I think I can easily refactor to remove the dodgy exception.</p>", "type": "rendered"}, "created_on": "2017-06-20T04:24:00.987312+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-06-20T04:24:00.990701+00:00", "type": "pullrequest_comment", "id": 39135974}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39135935.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39135935"}}, "parent": {"id": 39135745, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39135745.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39135745"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "Oh, actually, it looks like this may have already been the behaviour, there's a comment saying \"TODO: Kind of dodgy raising an exception here...\" before that exception is raised. Is that just to put the queue in an error state and pause it?", "markup": "markdown", "html": "<p>Oh, actually, it looks like this may have already been the behaviour, there's a comment saying \"TODO: Kind of dodgy raising an exception here...\" before that exception is raised. Is that just to put the queue in an error state and pause it?</p>", "type": "rendered"}, "created_on": "2017-06-20T04:22:22.487119+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": "2017-06-20T04:22:22.489505+00:00", "type": "pullrequest_comment", "id": 39135935}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39135745.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39135745"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "I just tried turning off BIAS during a shot, to make its BLACS tab crash on transition to manual, and rather than getting an error message in the queue, I got a popup:\n\n![error transition to manual.PNG](data/bitbucket.org/repo/dR5qxr/images/3078800611-error_transition_to_manual.PNG)\n", "markup": "markdown", "html": "<p>I just tried turning off BIAS during a shot, to make its BLACS tab crash on transition to manual, and rather than getting an error message in the queue, I got a popup:</p>\n<p><img alt=\"error transition to manual.PNG\" src=\"data/bitbucket.org/repo/dR5qxr/images/3078800611-error_transition_to_manual.PNG\" /></p>", "type": "rendered"}, "created_on": "2017-06-20T04:14:46.459806+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": "2017-06-20T04:14:46.461968+00:00", "type": "pullrequest_comment", "id": 39135745}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39134800.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39134800"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "Looks good, I just need to make some tabs crash at various stages to confirm that the new error messages display properly, then I'll merge this and the corresponding \"Correctly resize for multi-line QLabels\" in labscipt_ultils", "markup": "markdown", "html": "<p>Looks good, I just need to make some tabs crash at various stages to confirm that the new error messages display properly, then I'll merge this and the corresponding \"Correctly resize for multi-line QLabels\" in labscipt_ultils</p>", "type": "rendered"}, "created_on": "2017-06-20T03:39:48.833769+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": "2017-06-20T03:39:48.836483+00:00", "type": "pullrequest_comment", "id": 39134800}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"update": {"description": "- Elided text in queue status, tab status bar, tab top bar (device name and connection) and tab label.\r\nThis prevents the GUI from jumping around while shots are running.\r\n\r\n- Split queue status into two QLabels and set them separately - one for the actual status and one for the filename. Made status messages more concise so that they are less likely to be elided.\r\n\r\n- Got rid of the splitter handle at the top of each tab when no error was visible.\r\n\r\n- Device name and connection at top of tab now on one line as:\r\n device_name [connection]\r\n\r\n- Shrank status bar of each tab\r\n\r\n- Put queue controls in a box and made the box centred and not expanding\r\n\r\n- Moved the delete-shots button next to the queue as a toolbutton with no text, and added an add-shots button there too. Connected the add-shots button to a file dialog to add shots (also connected the add shots menu item using the same QAction).\r\n\r\n- Cleaned up analysis submission interface a bit. Added tooltips to each element to improve discoverability in the absence of labels.\r\n\r\n- Reworked analysis submission logic to make it more responsive. \"clear unsent shots\" button used to just hang for many seconds before actually doing anything. Now things are responsive. Added a \"retry now\" button for retrying unsent shots, reduced the timeout time for connecting to lyse to 1 second instead of 2, and decreased the periodic connectivity checks to once every 10 seconds, instead of every second when not connected.\r\n\r\n- Shrank connection table notification recompile button to just say \"recompile\" instead of \"recompile connection table\". The message next to it already makes it clear what's being recompiled.\r\n\r\n- Made unexpected queue exceptions be raised in a thread so that they are still visible, even though the queue continues on.\r\n\r\n- Used a QGridLayout for the queue part of the main interface to make things a bit better aligned.\r\n\r\n(by the way, I've checked the option \"close feature2 after the pull request is merged\". When merging, bitbucket gives the merger the option of changing this to not close the branch. Please do close the branch. Perhaps counterintuitively, re-using branches like I'm doing is easier if they are closed every time.)\r\n\r\n![blacs_elision.png](https://bitbucket.org/repo/9pKE7ad/images/1351085268-blacs_elision.png)", "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements", "destination": {"commit": {"hash": "a5d306dab61e", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/blacs/commit/a5d306dab61e.json"}, "html": {"href": "#!/labscript_suite/blacs/commits/a5d306dab61e"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "982390a752f5", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs/commit/982390a752f5"}, "html": {"href": "#!/cbillington/blacs/commits/982390a752f5"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs"}, "html": {"href": "#!/cbillington/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}ts=python"}}, "type": "repository", "name": "BLACS", "full_name": "cbillington/blacs", "uuid": "{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}"}, "branch": {"name": "feature2"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-06-19T18:30:06.280133+00:00"}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"update": {"description": "- Elided text in queue status, tab status bar, tab top bar (device name and connection) and tab label.\r\nThis prevents the GUI from jumping around while shots are running.\r\n\r\n- Split queue status into two QLabels and set them separately - one for the actual status and one for the filename. Made status messages more concise so that they are less likely to be elided.\r\n\r\n- Got rid of the splitter handle at the top of each tab when no error was visible.\r\n\r\n- Device name and connection at top of tab now on one line as:\r\n device_name [connection]\r\n\r\n- Shrank status bar of each tab\r\n\r\n- Put queue controls in a box and made the box centred and not expanding\r\n\r\n- Moved the delete-shots button next to the queue as a toolbutton with no text, and added an add-shots button there too. Connected the add-shots button to a file dialog to add shots (also connected the add shots menu item using the same QAction).\r\n\r\n- Cleaned up analysis submission interface a bit. Added tooltips to each element to improve discoverability in the absence of labels.\r\n\r\n- Reworked analysis submission logic to make it more responsive. \"clear unsent shots\" button used to just hang for many seconds before actually doing anything. Now things are responsive. Added a \"retry now\" button for retrying unsent shots, reduced the timeout time for connecting to lyse to 1 second instead of 2, and decreased the periodic connectivity checks to once every 10 seconds, instead of every second when not connected.\r\n\r\n- Shrank connection table notification recompile button to just say \"recompile\" instead of \"recompile connection table\". The message next to it already makes it clear what's being recompiled.\r\n\r\n- Made unexpected queue exceptions be raised in a thread so that they are still visible, even though the queue continues on.\r\n\r\n- Used a QGridLayout for the queue part of the main interface to make things a bit better aligned.\r\n\r\n(by the way, I've checked the option \"close feature2 after the pull request is merged\". When merging, bitbucket gives the merger the option of changing this to not close the branch. Please do close the branch. Perhaps counterintuitively, re-using branches like I'm doing is easier if they are closed every time.)\r\n\r\n![blacs_elision.png](https://bitbucket.org/repo/9pKE7ad/images/1351085268-blacs_elision.png)", "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements", "destination": {"commit": {"hash": "a5d306dab61e", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/blacs/commit/a5d306dab61e.json"}, "html": {"href": "#!/labscript_suite/blacs/commits/a5d306dab61e"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "f0d83fe6e2e3", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs/commit/f0d83fe6e2e3"}, "html": {"href": "#!/cbillington/blacs/commits/f0d83fe6e2e3"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs"}, "html": {"href": "#!/cbillington/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}ts=python"}}, "type": "repository", "name": "BLACS", "full_name": "cbillington/blacs", "uuid": "{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}"}, "branch": {"name": "feature2"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-06-19T18:04:59.845432+00:00"}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39052972.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39052972"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "I'll leave it to @shaunj for final testing, approval and merging.", "markup": "markdown", "html": "<p>I'll leave it to @shaunj for final testing, approval and merging.</p>", "type": "rendered"}, "created_on": "2017-06-19T07:41:57.772576+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2017-06-19T07:41:57.783752+00:00", "type": "pullrequest_comment", "id": 39052972}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"approval": {"date": "2017-06-19T07:41:22.519768+00:00", "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39052725.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39052725"}}, "parent": {"id": 39046444, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39046444.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39046444"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "Yes, That issue also applies when re-opening BLACS after recompiling the connection table if there were shots in the queue (they vanish on connection table mismatch) so bigger than this pull request I think.", "markup": "markdown", "html": "<p>Yes, That issue also applies when re-opening BLACS after recompiling the connection table if there were shots in the queue (they vanish on connection table mismatch) so bigger than this pull request I think.</p>", "type": "rendered"}, "created_on": "2017-06-19T07:39:15.203118+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2017-06-19T07:39:15.206553+00:00", "type": "pullrequest_comment", "id": 39052725}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39046444.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39046444"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "Ok, I've restored the details of the error messages and made it only allow .h5 files.\n\nAdding files is still not great, there needs to be a way to show the user the error message if the file fails to be added because of a mismatched connection table or whatnot. But that was already a problem with the drag+drop way of adding shots, so maybe can be left as a separate issue.", "markup": "markdown", "html": "<p>Ok, I've restored the details of the error messages and made it only allow .h5 files.</p>\n<p>Adding files is still not great, there needs to be a way to show the user the error message if the file fails to be added because of a mismatched connection table or whatnot. But that was already a problem with the drag+drop way of adding shots, so maybe can be left as a separate issue.</p>", "type": "rendered"}, "created_on": "2017-06-19T05:53:10.646429+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-06-19T05:53:10.649024+00:00", "type": "pullrequest_comment", "id": 39046444}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"update": {"description": "- Elided text in queue status, tab status bar, tab top bar (device name and connection) and tab label.\r\nThis prevents the GUI from jumping around while shots are running.\r\n\r\n- Split queue status into two QLabels and set them separately - one for the actual status and one for the filename. Made status messages more concise so that they are less likely to be elided.\r\n\r\n- Got rid of the splitter handle at the top of each tab when no error was visible.\r\n\r\n- Device name and connection at top of tab now on one line as:\r\n device_name [connection]\r\n\r\n- Shrank status bar of each tab\r\n\r\n- Put queue controls in a box and made the box centred and not expanding\r\n\r\n- Moved the delete-shots button next to the queue as a toolbutton with no text, and added an add-shots button there too. Connected the add-shots button to a file dialog to add shots (also connected the add shots menu item using the same QAction).\r\n\r\n- Cleaned up analysis submission interface a bit. Added tooltips to each element to improve discoverability in the absence of labels.\r\n\r\n- Reworked analysis submission logic to make it more responsive. \"clear unsent shots\" button used to just hang for many seconds before actually doing anything. Now things are responsive. Added a \"retry now\" button for retrying unsent shots, reduced the timeout time for connecting to lyse to 1 second instead of 2, and decreased the periodic connectivity checks to once every 10 seconds, instead of every second when not connected.\r\n\r\n- Shrank connection table notification recompile button to just say \"recompile\" instead of \"recompile connection table\". The message next to it already makes it clear what's being recompiled.\r\n\r\n- Made unexpected queue exceptions be raised in a thread so that they are still visible, even though the queue continues on.\r\n\r\n- Used a QGridLayout for the queue part of the main interface to make things a bit better aligned.\r\n\r\n(by the way, I've checked the option \"close feature2 after the pull request is merged\". When merging, bitbucket gives the merger the option of changing this to not close the branch. Please do close the branch. Perhaps counterintuitively, re-using branches like I'm doing is easier if they are closed every time.)\r\n\r\n![blacs_elision.png](https://bitbucket.org/repo/9pKE7ad/images/1351085268-blacs_elision.png)", "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements", "destination": {"commit": {"hash": "a5d306dab61e", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/blacs/commit/a5d306dab61e.json"}, "html": {"href": "#!/labscript_suite/blacs/commits/a5d306dab61e"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "21a553cd2625", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs/commit/21a553cd2625"}, "html": {"href": "#!/cbillington/blacs/commits/21a553cd2625"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs"}, "html": {"href": "#!/cbillington/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}ts=python"}}, "type": "repository", "name": "BLACS", "full_name": "cbillington/blacs", "uuid": "{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}"}, "branch": {"name": "feature2"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-06-19T05:47:12.271708+00:00"}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39041745.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39041745"}}, "parent": {"id": 39041574, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39041574.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39041574"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "That's better :)", "markup": "markdown", "html": "<p>That's better :)</p>", "type": "rendered"}, "created_on": "2017-06-19T02:28:02.066882+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": "2017-06-19T02:28:02.069404+00:00", "type": "pullrequest_comment", "id": 39041745}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39041574.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39041574"}}, "parent": {"id": 39041353, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39041353.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39041353"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "Aha, found it! A single character bug.\n\nIn the mainloop of the analysis submission, it waits for signals for what to do, and if that times out after 10 seconds it instead sets signal to 'check/retry' to check connectivity.\n\nHowever I had written `signal == 'check/retry'` instead of `signal = 'check/retry'`. Meaning that line did nothing and instead the signal from the last iteration of the mainloop was processed again (submitting the shot file again).\n\nI've pushed the fix.", "markup": "markdown", "html": "<p>Aha, found it! A single character bug.</p>\n<p>In the mainloop of the analysis submission, it waits for signals for what to do, and if that times out after 10 seconds it instead sets signal to 'check/retry' to check connectivity.</p>\n<p>However I had written <code>signal == 'check/retry'</code> instead of <code>signal = 'check/retry'</code>. Meaning that line did nothing and instead the signal from the last iteration of the mainloop was processed again (submitting the shot file again).</p>\n<p>I've pushed the fix.</p>", "type": "rendered"}, "created_on": "2017-06-19T02:19:44.460219+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-06-19T02:20:11.577396+00:00", "type": "pullrequest_comment", "id": 39041574}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"update": {"description": "- Elided text in queue status, tab status bar, tab top bar (device name and connection) and tab label.\r\nThis prevents the GUI from jumping around while shots are running.\r\n\r\n- Split queue status into two QLabels and set them separately - one for the actual status and one for the filename. Made status messages more concise so that they are less likely to be elided.\r\n\r\n- Got rid of the splitter handle at the top of each tab when no error was visible.\r\n\r\n- Device name and connection at top of tab now on one line as:\r\n device_name [connection]\r\n\r\n- Shrank status bar of each tab\r\n\r\n- Put queue controls in a box and made the box centred and not expanding\r\n\r\n- Moved the delete-shots button next to the queue as a toolbutton with no text, and added an add-shots button there too. Connected the add-shots button to a file dialog to add shots (also connected the add shots menu item using the same QAction).\r\n\r\n- Cleaned up analysis submission interface a bit. Added tooltips to each element to improve discoverability in the absence of labels.\r\n\r\n- Reworked analysis submission logic to make it more responsive. \"clear unsent shots\" button used to just hang for many seconds before actually doing anything. Now things are responsive. Added a \"retry now\" button for retrying unsent shots, reduced the timeout time for connecting to lyse to 1 second instead of 2, and decreased the periodic connectivity checks to once every 10 seconds, instead of every second when not connected.\r\n\r\n- Shrank connection table notification recompile button to just say \"recompile\" instead of \"recompile connection table\". The message next to it already makes it clear what's being recompiled.\r\n\r\n- Made unexpected queue exceptions be raised in a thread so that they are still visible, even though the queue continues on.\r\n\r\n- Used a QGridLayout for the queue part of the main interface to make things a bit better aligned.\r\n\r\n(by the way, I've checked the option \"close feature2 after the pull request is merged\". When merging, bitbucket gives the merger the option of changing this to not close the branch. Please do close the branch. Perhaps counterintuitively, re-using branches like I'm doing is easier if they are closed every time.)\r\n\r\n![blacs_elision.png](https://bitbucket.org/repo/9pKE7ad/images/1351085268-blacs_elision.png)", "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements", "destination": {"commit": {"hash": "a5d306dab61e", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/blacs/commit/a5d306dab61e.json"}, "html": {"href": "#!/labscript_suite/blacs/commits/a5d306dab61e"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "9a20e8077b6e", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs/commit/9a20e8077b6e"}, "html": {"href": "#!/cbillington/blacs/commits/9a20e8077b6e"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs"}, "html": {"href": "#!/cbillington/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}ts=python"}}, "type": "repository", "name": "BLACS", "full_name": "cbillington/blacs", "uuid": "{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}"}, "branch": {"name": "feature2"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-06-19T02:17:27.194577+00:00"}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39041440.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39041440"}}, "parent": {"id": 39041353, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39041353.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39041353"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "Yes, I can reproduce it without any analysis or anything running. It's clearly due to my changes, I'll fix!", "markup": "markdown", "html": "<p>Yes, I can reproduce it without any analysis or anything running. It's clearly due to my changes, I'll fix!</p>", "type": "rendered"}, "created_on": "2017-06-19T02:13:36.316439+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-06-19T02:13:36.319999+00:00", "type": "pullrequest_comment", "id": 39041440}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39041384.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39041384"}}, "parent": {"id": 39041353, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39041353.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39041353"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "Oh, maybe it's something else then. I'll check if there's an obvious mistake to that effect.", "markup": "markdown", "html": "<p>Oh, maybe it's something else then. I'll check if there's an obvious mistake to that effect.</p>", "type": "rendered"}, "created_on": "2017-06-19T02:11:10.860252+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-06-19T02:11:10.863180+00:00", "type": "pullrequest_comment", "id": 39041384}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39041367.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39041367"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "Aah, I see. That seems likely!\n\nLyse's zmq server probably isn't blocked by analysis running, but reading h5 files. h5py holds the GIL. This used to cause > 1 second delays  with heartbeating, and we had to switch to doing heartbeating without the parent touching the Python interpreter, so it could respond quickly.\n\nI guess I'd better increase the timeout again, perhaps even 3 seconds is better. \n\nResolving issue #22 in the way being discussed in the thread there might solve this, as it would relieve the lyse process from having to read h5 files a lot of the time. Nothing else we use holds the GIL like that. Perhaps also we should make it that lyse can receive a list of shots all in one zmq request, so that reading one h5 file doesn't block it from receiving the next one.", "markup": "markdown", "html": "<p>Aah, I see. That seems likely!</p>\n<p>Lyse's zmq server probably isn't blocked by analysis running, but reading h5 files. h5py holds the GIL. This used to cause &gt; 1 second delays  with heartbeating, and we had to switch to doing heartbeating without the parent touching the Python interpreter, so it could respond quickly.</p>\n<p>I guess I'd better increase the timeout again, perhaps even 3 seconds is better. </p>\n<p>Resolving issue <a href=\"#!/labscript_suite/blacs/issues/22/blacs-log-file-rollover-not-working\" rel=\"nofollow\" title=\"BLACS log file rollover not working\" class=\"ap-connect-link\"><s>#22</s></a> in the way being discussed in the thread there might solve this, as it would relieve the lyse process from having to read h5 files a lot of the time. Nothing else we use holds the GIL like that. Perhaps also we should make it that lyse can receive a list of shots all in one zmq request, so that reading one h5 file doesn't block it from receiving the next one.</p>", "type": "rendered"}, "created_on": "2017-06-19T02:10:28.607006+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-06-19T02:10:28.609230+00:00", "type": "pullrequest_comment", "id": 39041367}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39041353.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39041353"}}, "parent": {"id": 39041240, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39041240.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39041240"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "The message appeared to be coming after the analysis routines had run on the shot.\n\nI just went away from the lab for a few minutes without any experiments running, and returned to a wall of red text. It appears as though BLACS is repeatedly submitting the last file to lyse every ~10-15 seconds.", "markup": "markdown", "html": "<p>The message appeared to be coming after the analysis routines had run on the shot.</p>\n<p>I just went away from the lab for a few minutes without any experiments running, and returned to a wall of red text. It appears as though BLACS is repeatedly submitting the last file to lyse every ~10-15 seconds.</p>", "type": "rendered"}, "created_on": "2017-06-19T02:09:58.900964+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": "2017-06-19T02:09:58.903322+00:00", "type": "pullrequest_comment", "id": 39041353}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39041240.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39041240"}}, "parent": {"id": 39040833, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39040833.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39040833"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "This could be because even though the `zmq_get` call times out, the contents of the submitted packet are actually sitting in a buffer in lyse, and eventually get read. Likely happens because the lyse zmq server is being blocked by running analysis and not being responsive?\n\nI've seen something similar when launching runviewer from runmanager. The submission to runviewer fails, but then runviewer starts after the timeout and has loaded the shot correctly.", "markup": "markdown", "html": "<p>This could be because even though the <code>zmq_get</code> call times out, the contents of the submitted packet are actually sitting in a buffer in lyse, and eventually get read. Likely happens because the lyse zmq server is being blocked by running analysis and not being responsive?</p>\n<p>I've seen something similar when launching runviewer from runmanager. The submission to runviewer fails, but then runviewer starts after the timeout and has loaded the shot correctly.</p>", "type": "rendered"}, "created_on": "2017-06-19T02:04:53.106428+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2017-06-19T02:04:53.108719+00:00", "type": "pullrequest_comment", "id": 39041240}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39040833.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39040833"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "I seem to be getting a lot of \"Ignoring duplicate shot\" warnings in lyse, which *appear* to be correlated with turning this pull request on and off. I have, however, also updated to the latest lyse this morning.", "markup": "markdown", "html": "<p>I seem to be getting a lot of \"Ignoring duplicate shot\" warnings in lyse, which <em>appear</em> to be correlated with turning this pull request on and off. I have, however, also updated to the latest lyse this morning.</p>", "type": "rendered"}, "created_on": "2017-06-19T01:45:00.880335+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": "2017-06-19T01:45:00.882549+00:00", "type": "pullrequest_comment", "id": 39040833}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39039955.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39039955"}}, "parent": {"id": 39039905, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10/comments/39039905.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10/_/diff#comment-39039905"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}, "content": {"raw": "Yeah, good point about the file extensions. Let's just use .h5.", "markup": "markdown", "html": "<p>Yeah, good point about the file extensions. Let's just use .h5.</p>", "type": "rendered"}, "created_on": "2017-06-19T00:54:30.824668+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2017-06-19T00:54:30.826787+00:00", "type": "pullrequest_comment", "id": 39039955}, "pull_request": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/10"}}, "title": "Prevent GUI from jumping around, pixel saving, analysis submission improvements"}}], "next": "data/repositories/labscript_suite/blacs/pullrequests/10/activity_ctx=KRt9zId.json"}