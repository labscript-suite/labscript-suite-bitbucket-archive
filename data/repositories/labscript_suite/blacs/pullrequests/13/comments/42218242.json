{"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/13/comments/42218242.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/13/_/diff#comment-42218242"}}, "parent": {"id": 42181177, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/13/comments/42181177.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/13/_/diff#comment-42181177"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 13, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/13.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/13"}}, "title": "qtutils 2.0.0 support and experimental PyQt5 support"}, "content": {"raw": "Ok so I can reproduce this bug.I'll try and fix it and as usual update here.\n\nUpdate: Ok so adding\n\n```\n#!python\n\nself.BLACS['ui'].centralwidget.show()\n```\n\n before the setStyleSheet solves it. I'm guessing stylesheets can only be set in pyqt5 when the widget is already displayed. So we can move the plugin so after show is called in BLACS, use this or find a better fix. I'll do some googeling maybe I find someone else with this problem.\n\nUpdate2: I couldn't find anything on this topic. I'll do some testing with minimal examples to see if this is a BLACS or PyQt5 problem\n\nUpdate3: Seems to be a BLACS only problem minimal app just creating a window and button allows style sheets before show\n\nUpdate4: Moving the plugin_setup_complete section of main behind show also solves the problem. And if we wanted to apply the stylesheet to all of BLACS that would work as well. Meaning replacing \"\"\"self.BLACS['ui'].centralwidget.setStyleSheet(self.unmodified_stylesheet + stylesheet_settings)\"\"\" with \"\"\"self.BLACS['ui']setStyleSheet(self.unmodified_stylesheet + stylesheet_settings)\"\"\"\n\nSo thats 3 solutions I would say moving the plugin_setup_complete section is the cleanest", "markup": "markdown", "html": "<p>Ok so I can reproduce this bug.I'll try and fix it and as usual update here.</p>\n<p>Update: Ok so adding</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">BLACS</span><span class=\"p\">[</span><span class=\"s1\">&#39;ui&#39;</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">centralwidget</span><span class=\"o\">.</span><span class=\"n\">show</span><span class=\"p\">()</span>\n</pre></div>\n\n\n<p>before the setStyleSheet solves it. I'm guessing stylesheets can only be set in pyqt5 when the widget is already displayed. So we can move the plugin so after show is called in BLACS, use this or find a better fix. I'll do some googeling maybe I find someone else with this problem.</p>\n<p>Update2: I couldn't find anything on this topic. I'll do some testing with minimal examples to see if this is a BLACS or PyQt5 problem</p>\n<p>Update3: Seems to be a BLACS only problem minimal app just creating a window and button allows style sheets before show</p>\n<p>Update4: Moving the plugin_setup_complete section of main behind show also solves the problem. And if we wanted to apply the stylesheet to all of BLACS that would work as well. Meaning replacing \"\"\"self.BLACS['ui'].centralwidget.setStyleSheet(self.unmodified_stylesheet + stylesheet_settings)\"\"\" with \"\"\"self.BLACS['ui']setStyleSheet(self.unmodified_stylesheet + stylesheet_settings)\"\"\"</p>\n<p>So thats 3 solutions I would say moving the plugin_setup_complete section is the cleanest</p>", "type": "rendered"}, "created_on": "2017-08-04T16:31:02.369759+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-04T17:06:16.527190+00:00", "type": "pullrequest_comment", "id": 42218242}