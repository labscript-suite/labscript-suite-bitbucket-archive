{"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/13/comments/42224596.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/13/_/diff#comment-42224596"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 13, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/13.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/13"}}, "title": "qtutils 2.0.0 support and experimental PyQt5 support"}, "content": {"raw": "So the existing stylesheet (which we pull out as self.unmodified_stylesheet ) is set in Qt designer. I'm guessing that the Ui loader changed such that this setting is now set on the widget upon first show - meaning that it would overwrite what we had set prior to the show(). But I'm not sure about that, and it's a hypothesis that could be checked.\n\nI also tried `self.BLACS['ui']setStyleSheet(self.unmodified_stylesheet + stylesheet_settings)` and I think I recall it not being quite right - because `self.BLACS['ui']` is higher in the hierarchy than the `centralWidget`, and so the flat buttons theme was set on the `centralWidget`, overriding some of the settings and  leading to the green buttons being grey when pushed in or moused-over or something, if I recall. \n\nThe time at which plugin_setup_complete is called is not so easy to change - other plugins certainly need to be able to set up before the GUI is shown.\n\nHow about hooking up a slot that sets the initial theme to a firstPaint() signal on the main window similar to how we defer some things until first paint in lyse and runmanager? plugin_setup_complete can connect the slot to do the work that it wants to defer until then. \n", "markup": "markdown", "html": "<p>So the existing stylesheet (which we pull out as self.unmodified_stylesheet ) is set in Qt designer. I'm guessing that the Ui loader changed such that this setting is now set on the widget upon first show - meaning that it would overwrite what we had set prior to the show(). But I'm not sure about that, and it's a hypothesis that could be checked.</p>\n<p>I also tried <code>self.BLACS['ui']setStyleSheet(self.unmodified_stylesheet + stylesheet_settings)</code> and I think I recall it not being quite right - because <code>self.BLACS['ui']</code> is higher in the hierarchy than the <code>centralWidget</code>, and so the flat buttons theme was set on the <code>centralWidget</code>, overriding some of the settings and  leading to the green buttons being grey when pushed in or moused-over or something, if I recall. </p>\n<p>The time at which plugin_setup_complete is called is not so easy to change - other plugins certainly need to be able to set up before the GUI is shown.</p>\n<p>How about hooking up a slot that sets the initial theme to a firstPaint() signal on the main window similar to how we defer some things until first paint in lyse and runmanager? plugin_setup_complete can connect the slot to do the work that it wants to defer until then. </p>", "type": "rendered"}, "created_on": "2017-08-04T18:12:57.466989+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-04T18:13:34.915552+00:00", "type": "pullrequest_comment", "id": 42224596}