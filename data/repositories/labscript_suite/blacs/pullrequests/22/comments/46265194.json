{"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/22/comments/46265194.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/22/_/diff#comment-46265194"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 22, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/22.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/22"}}, "title": "Analysis filters"}, "content": {"raw": "Sorry for the delay in reviewing this.....Some more adjustments. Could you:\n\n1. decorate `get_callbacks()` with `@inmain_decorator(True)` so that it runs in the main thread \\(protects against race conditions in the future if we expand the use of the callbacks. I also don't know whether we consider anything to do with accessing plugins to be thread safe, so let's err on the side of caution\\)\n2. Wrap the `for` loop in `get_callbacks()` inside a try-except block \\(and log to `self._logger` in the exception which is the logger that exists in the main thread\\) just in case something breaks when getting plugins from BLACS or asking the plugin for the callbacks.\n\nThen I think we're good to merge", "markup": "markdown", "html": "<p>Sorry for the delay in reviewing this.....Some more adjustments. Could you:</p>\n<ol>\n<li>decorate <code>get_callbacks()</code> with <code>@inmain_decorator(True)</code> so that it runs in the main thread (protects against race conditions in the future if we expand the use of the callbacks. I also don't know whether we consider anything to do with accessing plugins to be thread safe, so let's err on the side of caution)</li>\n<li>Wrap the <code>for</code> loop in <code>get_callbacks()</code> inside a try-except block (and log to <code>self._logger</code> in the exception which is the logger that exists in the main thread) just in case something breaks when getting plugins from BLACS or asking the plugin for the callbacks.</li>\n</ol>\n<p>Then I think we're good to merge</p>", "type": "rendered"}, "created_on": "2017-10-03T01:23:56.341105+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2017-10-03T01:23:56.346567+00:00", "type": "pullrequest_comment", "id": 46265194}