{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/32/comments/58368268.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/32/_/diff#comment-58368268"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/32.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/32"}}, "title": "Absolute imports, and don't use __file__"}, "content": {"raw": "There are a couple of UI files loaded by devices in labscript\\_devices that will need to be updated to use this new system \\(or rather, labscript\\_devices needs to have a similar modification to it's `__init__.py` file\\).\n\nAlso, `blacs/__init__.py` \\(and similarly for blacs.plugins\\) should have a fallback to use `__file__` if it can't find the labscript install directory \\(for copies of the software that predate the installer or were manually installed\\). This would then match the behaviour of the labscript\\_utils/labconfig.py script which does [something similar](#!/labscript_suite/labscript_utils/src/4d200324079d6041a56842866c965f721742ea37/labconfig.py?at=default&fileviewer=file-view-default#labconfig.py-28).", "markup": "markdown", "html": "<p>There are a couple of UI files loaded by devices in labscript_devices that will need to be updated to use this new system (or rather, labscript_devices needs to have a similar modification to it's <code>__init__.py</code> file).</p>\n<p>Also, <code>blacs/__init__.py</code> (and similarly for blacs.plugins) should have a fallback to use <code>__file__</code> if it can't find the labscript install directory (for copies of the software that predate the installer or were manually installed). This would then match the behaviour of the labscript_utils/labconfig.py script which does <a data-is-external-link=\"true\" href=\"#!/labscript_suite/labscript_utils/src/4d200324079d6041a56842866c965f721742ea37/labconfig.py?at=default&amp;fileviewer=file-view-default#labconfig.py-28\" rel=\"nofollow\">something similar</a>.</p>", "type": "rendered"}, "created_on": "2018-03-09T02:56:33.529107+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2018-03-09T02:56:33.532285+00:00", "type": "pullrequest_comment", "id": 58368268}, {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/32/comments/58368791.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/32/_/diff#comment-58368791"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/32.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/32"}}, "title": "Absolute imports, and don't use __file__"}, "content": {"raw": "Unless the `labscript_devices` files are relying on the current directory being the BLACS directory, then changing them would be good but is independent of this change. So I agree, but it is not blocking merging this for example.\nSimilarly for everything else in labscript using `__file__`, I know there are more (48 according to grep). There are also several `os.chdir()`'s, but I think the only two that need changing are runviewer and runmanager, the rest exist for good reason.\n\nAgreed about the backward compatibility, will do.", "markup": "markdown", "html": "<p>Unless the <code>labscript_devices</code> files are relying on the current directory being the BLACS directory, then changing them would be good but is independent of this change. So I agree, but it is not blocking merging this for example.\nSimilarly for everything else in labscript using <code>__file__</code>, I know there are more (48 according to grep). There are also several <code>os.chdir()</code>'s, but I think the only two that need changing are runviewer and runmanager, the rest exist for good reason.</p>\n<p>Agreed about the backward compatibility, will do.</p>", "type": "rendered"}, "created_on": "2018-03-09T03:13:30.566136+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2018-03-09T03:13:30.570544+00:00", "type": "pullrequest_comment", "id": 58368791}, {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/32/comments/58514473.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/32/_/diff#comment-58514473"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/32.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/32"}}, "title": "Absolute imports, and don't use __file__"}, "content": {"raw": "Fallback implemented, and I've reinstated all the absolute imports including the two that were previously left out leading to issue #36.\n\nwith this pull request DoubleImportDenier no longer has any complaints about BLACS.", "markup": "markdown", "html": "<p>Fallback implemented, and I've reinstated all the absolute imports including the two that were previously left out leading to issue <a href=\"#!/labscript_suite/blacs/issues/36/front-panel-settings-not-loaded-correctly\" rel=\"nofollow\" title=\"front panel settings not loaded correctly if blacs is not run as a module\" class=\"ap-connect-link\"><s>#36</s></a>.</p>\n<p>with this pull request DoubleImportDenier no longer has any complaints about BLACS.</p>", "type": "rendered"}, "created_on": "2018-03-12T09:38:27.919960+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2018-03-12T09:38:27.926068+00:00", "type": "pullrequest_comment", "id": 58514473}, {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/32/comments/58610452.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/32/_/diff#comment-58610452"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/32.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/32"}}, "title": "Absolute imports, and don't use __file__"}, "content": {"raw": "Happy to merge provided you've seen one of the plugins successfully make a notification \\(e.g. connection table recompile notification\\). EDIT: wait was this already merged when I posted this? There are too many things to keep track of!\n\nsemi-unrelated: I think the reason why the BLACS window isn't always associated with the icon on windows might be that the `relaunch_command`is sent to the win32 API but that value was not derived from `sys.argv` which is actually what we use when relaunching BLACS in order to preserve any custom arguments. This probably causes a mismatch and so you see the BLACS window get associated with something else \\(sometimes a new icon, sometimes runmanager for some reason\\). Just a thought anyway! Not really necessary to fix in this pull request if you can't be bothered, I'm just mentioning it because that piece of code was slightly updated here.", "markup": "markdown", "html": "<p>Happy to merge provided you've seen one of the plugins successfully make a notification (e.g. connection table recompile notification). EDIT: wait was this already merged when I posted this? There are too many things to keep track of!</p>\n<p>semi-unrelated: I think the reason why the BLACS window isn't always associated with the icon on windows might be that the <code>relaunch_command</code>is sent to the win32 API but that value was not derived from <code>sys.argv</code> which is actually what we use when relaunching BLACS in order to preserve any custom arguments. This probably causes a mismatch and so you see the BLACS window get associated with something else (sometimes a new icon, sometimes runmanager for some reason). Just a thought anyway! Not really necessary to fix in this pull request if you can't be bothered, I'm just mentioning it because that piece of code was slightly updated here.</p>", "type": "rendered"}, "created_on": "2018-03-13T00:13:01.880816+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2018-03-13T00:14:47.136094+00:00", "type": "pullrequest_comment", "id": 58610452}, {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/32/comments/58610851.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/32/_/diff#comment-58610851"}}, "parent": {"id": 58610452, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/32/comments/58610452.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/32/_/diff#comment-58610452"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/32.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/32"}}, "title": "Absolute imports, and don't use __file__"}, "content": {"raw": "Ah, interesting about the relaunching thing - that may be.\n\nSorry, I implemented the changes you made and then merged. I've verified notifications work!", "markup": "markdown", "html": "<p>Ah, interesting about the relaunching thing - that may be.</p>\n<p>Sorry, I implemented the changes you made and then merged. I've verified notifications work!</p>", "type": "rendered"}, "created_on": "2018-03-13T00:23:43.305633+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2018-03-13T00:23:43.308473+00:00", "type": "pullrequest_comment", "id": 58610851}], "page": 1, "size": 5}