{"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/47/comments/71073790.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/47/_/diff#comment-71073790"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 47, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/47.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/47"}}, "title": "Deserialise transition_to_manual"}, "content": {"raw": "Some thoughts:\n\n* I don\u2019t think it\u2019s a good idea to stop the abort button from working during transition to manual. This prevents the user from breaking out of any future deadlocks.\n* We have an issue where a device that is taking a long time to transition to manual could conceivably write the the HDF5 file after it has been cleaned \\(if it didn\u2019t hold open the HDF5 file while doing a long computation\\). We need some way to abort the transition to manual for all tabs, when one tab fails,, and ensure that happens. I don\u2019t know the best way to do this\u2026..Really we want to wait for some timeout before hard killing, but maybe hard kill the worker process too if the abort button is pressed twice? Can we even hard kill worker processes?\n\nFixing this probably also means we don\u2019t need the second call to transition\\_to\\_manual in the error condition if block.", "markup": "markdown", "html": "<p>Some thoughts:</p>\n<ul>\n<li>I don\u2019t think it\u2019s a good idea to stop the abort button from working during transition to manual. This prevents the user from breaking out of any future deadlocks.</li>\n<li>We have an issue where a device that is taking a long time to transition to manual could conceivably write the the HDF5 file after it has been cleaned (if it didn\u2019t hold open the HDF5 file while doing a long computation). We need some way to abort the transition to manual for all tabs, when one tab fails,, and ensure that happens. I don\u2019t know the best way to do this\u2026..Really we want to wait for some timeout before hard killing, but maybe hard kill the worker process too if the abort button is pressed twice? Can we even hard kill worker processes?</li>\n</ul>\n<p>Fixing this probably also means we don\u2019t need the second call to transition_to_manual in the error condition if block.</p>", "type": "rendered"}, "created_on": "2018-07-26T02:06:01.370751+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2018-07-26T02:06:01.376789+00:00", "type": "pullrequest_comment", "id": 71073790}