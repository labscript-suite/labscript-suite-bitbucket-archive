{"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/47/comments/71445109.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/47/_/diff#comment-71445109"}}, "parent": {"id": 71073790, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/47/comments/71073790.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/47/_/diff#comment-71073790"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 47, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/47.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/47"}}, "title": "Deserialise transition_to_manual"}, "content": {"raw": "Abort, if connected, would have to behave differently, as you've implied. Right now the way to break out of a deadlock would be to restart the offending devices' worker processes. This works with this change. We can make the abort button kill workers too in the same manner as is done when restarting them, but the current available functionality seems satisfactory to me - and I like the idea of restarting tabs being explicitly requested, since it is a more destructive operation than abort normally is.\n\nI believe the second call to `transtion_to_manual` in the error handling block is totally redundant and can be removed without having to make any other changes.\n\nWriting to the h5 file after it is cleaned is not the best! I'll have a little bit of a think about this - probably we should just wait until they are all done (or errorred) before cleaning the file if there is an error. So, not breaking from the loop upon error. A hung device can be dealt with manually by restarting it - what happens to a hung device if transition_to_buffered times out? I don't suppose we're killing them there, are we?", "markup": "markdown", "html": "<p>Abort, if connected, would have to behave differently, as you've implied. Right now the way to break out of a deadlock would be to restart the offending devices' worker processes. This works with this change. We can make the abort button kill workers too in the same manner as is done when restarting them, but the current available functionality seems satisfactory to me - and I like the idea of restarting tabs being explicitly requested, since it is a more destructive operation than abort normally is.</p>\n<p>I believe the second call to <code>transtion_to_manual</code> in the error handling block is totally redundant and can be removed without having to make any other changes.</p>\n<p>Writing to the h5 file after it is cleaned is not the best! I'll have a little bit of a think about this - probably we should just wait until they are all done (or errorred) before cleaning the file if there is an error. So, not breaking from the loop upon error. A hung device can be dealt with manually by restarting it - what happens to a hung device if transition_to_buffered times out? I don't suppose we're killing them there, are we?</p>", "type": "rendered"}, "created_on": "2018-07-30T18:43:01.276907+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2018-07-30T19:49:25.054481+00:00", "type": "pullrequest_comment", "id": 71445109}