{"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/56/comments/79321179.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/56/_/diff#comment-79321179"}}, "parent": {"id": 79313211, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/56/comments/79313211.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/56/_/diff#comment-79313211"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/56.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/56"}}, "title": "Defer starting the worker process until _initialise_worker"}, "content": {"raw": "Hmm. I went back through the commit history and it\u2019s not really clear why I made the change. There are a few nearby commits regarding fixing race conditions in the state machine though, and also adding PyQt support \\(on top of the existing PySide support\\). If it is actually necessary, I\u2019m guessing only one or two devices have the problem and the rest are fine, which is why it doesn\u2019t show up in testing.\n\nMaybe the easiest solution is just to make `prepend` a kwarg of `create_worker`. It can default to `False` if you want, as long as we update all of the existing labscript\\_devices classes to explicitly specify `prepend=True`. That way we can slowly remove it as we are able to test each device.", "markup": "markdown", "html": "<p>Hmm. I went back through the commit history and it\u2019s not really clear why I made the change. There are a few nearby commits regarding fixing race conditions in the state machine though, and also adding PyQt support (on top of the existing PySide support). If it is actually necessary, I\u2019m guessing only one or two devices have the problem and the rest are fine, which is why it doesn\u2019t show up in testing.</p>\n<p>Maybe the easiest solution is just to make <code>prepend</code> a kwarg of <code>create_worker</code>. It can default to <code>False</code> if you want, as long as we update all of the existing labscript_devices classes to explicitly specify <code>prepend=True</code>. That way we can slowly remove it as we are able to test each device.</p>", "type": "rendered"}, "created_on": "2018-10-17T03:55:03.783313+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2018-10-17T03:55:03.797098+00:00", "type": "pullrequest_comment", "id": 79321179}