{"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/67/comments/100217568.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/67/_/diff#comment-100217568"}}, "parent": {"id": 100216145, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/67/comments/100216145.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/67/_/diff#comment-100216145"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 67, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/67.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/67"}}, "title": "Implement remote workers in BLACS"}, "content": {"raw": "So it looks like the issue here is when you tap restart twice quickly in a row, such that the current worker process has not started yet before you click restart, then the subprocess gets killed, but the BLACS tab\u2019s mainloop is still waiting for the initial \u2018hello\u2019 indicating that the worker process has started. So BLACS hangs for 30 seconds waiting for that to come though it never does.\n\nThe fix is to change zprocess to break out of waiting for the startup response if the process is terminated.\n\nThis bug was present already without remote workers, I can trigger it with local workers. Nonetheless will fix in zprocess.\n\nEdit: [fixed in zprocess](https://bitbucket.org/cbillington/zprocess/commits/139dcc6a98451b335eae46554efc13b28cdbd59e)", "markup": "markdown", "html": "<p>So it looks like the issue here is when you tap restart twice quickly in a row, such that the current worker process has not started yet before you click restart, then the subprocess gets killed, but the BLACS tab\u2019s mainloop is still waiting for the initial \u2018hello\u2019 indicating that the worker process has started. So BLACS hangs for 30 seconds waiting for that to come though it never does.</p>\n<p>The fix is to change zprocess to break out of waiting for the startup response if the process is terminated.</p>\n<p>This bug was present already without remote workers, I can trigger it with local workers. Nonetheless will fix in zprocess.</p>\n<p>Edit: <a data-is-external-link=\"true\" href=\"https://bitbucket.org/cbillington/zprocess/commits/139dcc6a98451b335eae46554efc13b28cdbd59e\" rel=\"nofollow\">fixed in zprocess</a></p>", "type": "rendered"}, "created_on": "2019-04-27T14:10:27.980552+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-04-27T14:18:22.604253+00:00", "type": "pullrequest_comment", "id": 100217568}