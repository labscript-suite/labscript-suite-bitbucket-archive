{"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/67/comments/101553629.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/67/_/diff#comment-101553629"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 67, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/67.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/67"}}, "title": "Implement remote workers in BLACS"}, "content": {"raw": "> I\u2019m seeing an issue where I open blacs with a tab that has a remote worker, without launching labscript_utils.remote. The tab fails to start, of course, but after starting the remote server and attempting to restart the tab, the whole GUI crashes.\n\nThanks, I can reproduce this. It doesn't happen on BLACS 2.6 + remote-workers, but it does happen once adding in bugfix2. So an issue with bugfix2 (or more likely, with the zprocess implementation enabling it). I will look into it.\n\nThe second issue, yes, I haven't resolved that yet. I still need to resolve:\n\n* terminate() is now remote and therefore a) blocking, and b) able to raise an exception and therefore is no bueno in a GUI thread.\n* BLACS hanging while sending data to subprocesses that have vanished since they started, because the zmq socket blocks when there are no connected peers.\n\nI can trivially turn the blocking parts of these issues into instant exceptions if not connected to a remote server, but I would really rather BLACS be able to weather ~1 second network glitches if at all possible, so I'm still thinking about this.", "markup": "markdown", "html": "<blockquote>\n<p>I\u2019m seeing an issue where I open blacs with a tab that has a remote worker, without launching labscript_utils.remote. The tab fails to start, of course, but after starting the remote server and attempting to restart the tab, the whole GUI crashes.</p>\n</blockquote>\n<p>Thanks, I can reproduce this. It doesn't happen on BLACS 2.6 + remote-workers, but it does happen once adding in bugfix2. So an issue with bugfix2 (or more likely, with the zprocess implementation enabling it). I will look into it.</p>\n<p>The second issue, yes, I haven't resolved that yet. I still need to resolve:</p>\n<ul>\n<li>terminate() is now remote and therefore a) blocking, and b) able to raise an exception and therefore is no bueno in a GUI thread.</li>\n<li>BLACS hanging while sending data to subprocesses that have vanished since they started, because the zmq socket blocks when there are no connected peers.</li>\n</ul>\n<p>I can trivially turn the blocking parts of these issues into instant exceptions if not connected to a remote server, but I would really rather BLACS be able to weather ~1 second network glitches if at all possible, so I'm still thinking about this.</p>", "type": "rendered"}, "created_on": "2019-05-10T05:15:12.272977+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-05-10T05:15:41.835194+00:00", "type": "pullrequest_comment", "id": 101553629}