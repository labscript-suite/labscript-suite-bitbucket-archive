{"pagelen": 50, "values": [{"update": {"description": "Unconditionally convert `h5_file` to network agnostic when sending to workers. Have a method in the worker convert them to local before calling the worker's `transition_to_buffered()`.\r\n\r\nSince `shared_drive.path_to_local` is idempotent, this is backward compatible\r\nwith devices that convert the path to local manually.\r\n\r\nThis means all devices will work as remote devices now without having to be updated to convert the path to local themselves. Devices that already do that will not be broken by this change, but they can remove those lines and depend on this version of BLACS instead.\r\n\r\nWe still have the issue whereby the different sides of remote connections don't check the versions on the other side, so you get obtuse error messages instead of version errors when things don't match. That's a work in progress, but this PR makes things at least work when the versions are right!\r\n\r\nI don't know why I didn't make this change earlier - I think I thought I would need a metaclass or something a bit too magical for my tastes, but of course just defining an extra method as in the PR is the obvious solution.", "title": "Convert filepaths to network format unconditionally", "destination": {"commit": {"hash": "9dd6d90723eb", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/blacs/commit/9dd6d90723eb.json"}, "html": {"href": "#!/labscript_suite/blacs/commits/9dd6d90723eb"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "413498c6364f", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs/commit/413498c6364f"}, "html": {"href": "#!/cbillington/blacs/commits/413498c6364f"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs"}, "html": {"href": "#!/cbillington/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}ts=python"}}, "type": "repository", "name": "BLACS", "full_name": "cbillington/blacs", "uuid": "{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}"}, "branch": {"name": "remote_filepaths"}}, "state": "MERGED", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2020-01-28T20:44:53.060677+00:00"}, "pull_request": {"type": "pullrequest", "id": 79, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/79.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/79"}}, "title": "Convert filepaths to network format unconditionally"}}, {"update": {"description": "Unconditionally convert `h5_file` to network agnostic when sending to workers. Have a method in the worker convert them to local before calling the worker's `transition_to_buffered()`.\r\n\r\nSince `shared_drive.path_to_local` is idempotent, this is backward compatible\r\nwith devices that convert the path to local manually.\r\n\r\nThis means all devices will work as remote devices now without having to be updated to convert the path to local themselves. Devices that already do that will not be broken by this change, but they can remove those lines and depend on this version of BLACS instead.\r\n\r\nWe still have the issue whereby the different sides of remote connections don't check the versions on the other side, so you get obtuse error messages instead of version errors when things don't match. That's a work in progress, but this PR makes things at least work when the versions are right!\r\n\r\nI don't know why I didn't make this change earlier - I think I thought I would need a metaclass or something a bit too magical for my tastes, but of course just defining an extra method as in the PR is the obvious solution.", "title": "Convert filepaths to network format unconditionally", "destination": {"commit": {"hash": "9dd6d90723eb", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/blacs/commit/9dd6d90723eb.json"}, "html": {"href": "#!/labscript_suite/blacs/commits/9dd6d90723eb"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "413498c6364f", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs/commit/413498c6364f"}, "html": {"href": "#!/cbillington/blacs/commits/413498c6364f"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs"}, "html": {"href": "#!/cbillington/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}ts=python"}}, "type": "repository", "name": "BLACS", "full_name": "cbillington/blacs", "uuid": "{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}"}, "branch": {"name": "remote_filepaths"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2020-01-28T20:44:52.364823+00:00"}, "pull_request": {"type": "pullrequest", "id": 79, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/79.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/79"}}, "title": "Convert filepaths to network format unconditionally"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/79/comments/131915762.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/79/_/diff#comment-131915762"}}, "parent": {"id": 131907402, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/79/comments/131907402.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/79/_/diff#comment-131907402"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 79, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/79.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/79"}}, "title": "Convert filepaths to network format unconditionally"}, "content": {"raw": "Ok! Merge it as is then!", "markup": "markdown", "html": "<p>Ok! Merge it as is then!</p>", "type": "rendered"}, "created_on": "2020-01-16T11:37:14.909308+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{0147401a-13ed-4e39-a0d0-63108c18738b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D"}, "html": {"href": "https://bitbucket.org/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/fa0698c306b3470c00717c146b5296e9d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "philipstarkey", "type": "user", "account_id": "557058:2f99420c-1dbd-4837-952c-82c421b8fbdd"}, "updated_on": "2020-01-16T11:37:14.927619+00:00", "type": "pullrequest_comment", "id": 131915762}, "pull_request": {"type": "pullrequest", "id": 79, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/79.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/79"}}, "title": "Convert filepaths to network format unconditionally"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/79/comments/131907402.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/79/_/diff#comment-131907402"}}, "parent": {"id": 131887814, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/79/comments/131887814.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/79/_/diff#comment-131887814"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 79, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/79.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/79"}}, "title": "Convert filepaths to network format unconditionally"}, "content": {"raw": "Remote workers previously didn\u2019t work at all for devices other than subclasses of IMAQdxCamera \\(unless the shared drive was Z:\\\\\\\\ by coincidence\\)! the camera I think is the only device that is currently doing the path conversion at the other end, but the BLACS has been converting the path to network format for all remote devices.\n\nSo you\u2019re right, people whose shared drive is Z:\\\\\\\\ using remote devices other than cameras will see breakage if they don\u2019t upgrade both at once. \n\nIf we want to make it backward compatible - a `hasattr`check isn\u2019t really possible given that the worker class is not necessarily imported in the parent - it might just be a string. I don\u2019t _think_ a try/except around the `yield` is possible catching the AttributeError - the state machine mainloop doesn\u2019t return/raise the exception object. We could modify BLACS to do so \\(could be a good idea anyway, but bigger than this issue!\\)\n\nI think we should merge anyway, but this is why you originally brought up the need for remote version checks. And the remote version check PR in labscript\\_utils doesn\u2019t address this issue since it\u2019s about client/server setups, and workers don\u2019t use that model. So at some point BLACS workers should grow a method \u201ccheck\\_version\u201d or similar that allows the parent process to check versions of things the worker is using \\(or something that has the same effect\\).\n\nOnce we\u2019re on github we can have version milestones and tag issues as needing to be implemented before a release - I think we should merge this and make an issue that BLACS needs to be able to version check its subprocesses before the next release \\(this won\u2019t be too hard to implement I don\u2019t think\\).\n\n\u200c", "markup": "markdown", "html": "<p>Remote workers previously didn\u2019t work at all for devices other than subclasses of IMAQdxCamera (unless the shared drive was Z:\\\\ by coincidence)! the camera I think is the only device that is currently doing the path conversion at the other end, but the BLACS has been converting the path to network format for all remote devices.</p>\n<p>So you\u2019re right, people whose shared drive is Z:\\\\ using remote devices other than cameras will see breakage if they don\u2019t upgrade both at once. </p>\n<p>If we want to make it backward compatible - a <code>hasattr</code>check isn\u2019t really possible given that the worker class is not necessarily imported in the parent - it might just be a string. I don\u2019t <em>think</em> a try/except around the <code>yield</code> is possible catching the AttributeError - the state machine mainloop doesn\u2019t return/raise the exception object. We could modify BLACS to do so (could be a good idea anyway, but bigger than this issue!)</p>\n<p>I think we should merge anyway, but this is why you originally brought up the need for remote version checks. And the remote version check PR in labscript_utils doesn\u2019t address this issue since it\u2019s about client/server setups, and workers don\u2019t use that model. So at some point BLACS workers should grow a method \u201ccheck_version\u201d or similar that allows the parent process to check versions of things the worker is using (or something that has the same effect).</p>\n<p>Once we\u2019re on github we can have version milestones and tag issues as needing to be implemented before a release - I think we should merge this and make an issue that BLACS needs to be able to version check its subprocesses before the next release (this won\u2019t be too hard to implement I don\u2019t think).</p>\n<p>\u200c</p>", "type": "rendered"}, "created_on": "2020-01-16T10:50:46.485109+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2020-01-16T10:50:46.496569+00:00", "type": "pullrequest_comment", "id": 131907402}, "pull_request": {"type": "pullrequest", "id": 79, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/79.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/79"}}, "title": "Convert filepaths to network format unconditionally"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/79/comments/131887814.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/79/_/diff#comment-131887814"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 79, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/79.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/79"}}, "title": "Convert filepaths to network format unconditionally"}, "content": {"raw": "I was going to say merge this, but isn\u2019t there a problem if the remote worker is using an old version of BLACS and thus doesn\u2019t have `_transition_to_buffered`?", "markup": "markdown", "html": "<p>I was going to say merge this, but isn\u2019t there a problem if the remote worker is using an old version of BLACS and thus doesn\u2019t have <code>_transition_to_buffered</code>?</p>", "type": "rendered"}, "created_on": "2020-01-16T09:17:31.173977+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{0147401a-13ed-4e39-a0d0-63108c18738b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D"}, "html": {"href": "https://bitbucket.org/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/fa0698c306b3470c00717c146b5296e9d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "philipstarkey", "type": "user", "account_id": "557058:2f99420c-1dbd-4837-952c-82c421b8fbdd"}, "updated_on": "2020-01-16T09:17:31.181834+00:00", "type": "pullrequest_comment", "id": 131887814}, "pull_request": {"type": "pullrequest", "id": 79, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/79.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/79"}}, "title": "Convert filepaths to network format unconditionally"}}, {"update": {"description": "Unconditionally convert `h5_file` to network agnostic when sending to workers. Have a method in the worker convert them to local before calling the worker's `transition_to_buffered()`.\r\n\r\nSince `shared_drive.path_to_local` is idempotent, this is backward compatible\r\nwith devices that convert the path to local manually.\r\n\r\nThis means all devices will work as remote devices now without having to be updated to convert the path to local themselves. Devices that already do that will not be broken by this change, but they can remove those lines and depend on this version of BLACS instead.\r\n\r\nWe still have the issue whereby the different sides of remote connections don't check the versions on the other side, so you get obtuse error messages instead of version errors when things don't match. That's a work in progress, but this PR makes things at least work when the versions are right!\r\n\r\nI don't know why I didn't make this change earlier - I think I thought I would need a metaclass or something a bit too magical for my tastes, but of course just defining an extra method as in the PR is the obvious solution.", "title": "Convert filepaths to network format unconditionally", "destination": {"commit": {"hash": "9dd6d90723eb", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/blacs/commit/9dd6d90723eb.json"}, "html": {"href": "#!/labscript_suite/blacs/commits/9dd6d90723eb"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "413498c6364f", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs/commit/413498c6364f"}, "html": {"href": "#!/cbillington/blacs/commits/413498c6364f"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs"}, "html": {"href": "#!/cbillington/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}ts=python"}}, "type": "repository", "name": "BLACS", "full_name": "cbillington/blacs", "uuid": "{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}"}, "branch": {"name": "remote_filepaths"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-12-12T14:43:47.008062+00:00"}, "pull_request": {"type": "pullrequest", "id": 79, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/79.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/79"}}, "title": "Convert filepaths to network format unconditionally"}}, {"update": {"description": "Unconditionally convert `h5_file` to network agnostic when sending to workers. Have a method in the worker convert them to local before calling the worker's `transition_to_buffered()`.\r\n\r\nSince `shared_drive.path_to_local` is idempotent, this is backward compatible\r\nwith devices that convert the path to local manually.\r\n\r\nThis means all devices will work as remote devices now without having to be updated to convert the path to local themselves. Devices that already do that will not be broken by this change, but they can remove those lines and depend on this version of BLACS instead.\r\n\r\nWe still have the issue whereby the different sides of remote connections don't check the versions on the other side, so you get obtuse error messages instead of version errors when things don't match. That's a work in progress, but this PR makes things at least work when the versions are right!\r\n\r\nI don't know why I didn't make this change earlier - I think I thought I would need a metaclass or something a bit too magical for my tastes, but of course just defining an extra method as in the PR is the obvious solution.", "title": "Convert filepaths to network format unconditionally", "destination": {"commit": {"hash": "9dd6d90723eb", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/blacs/commit/9dd6d90723eb.json"}, "html": {"href": "#!/labscript_suite/blacs/commits/9dd6d90723eb"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/blacs.json"}, "html": {"href": "#!/labscript_suite/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}ts=249915"}}, "type": "repository", "name": "BLACS", "full_name": "labscript_suite/blacs", "uuid": "{50ed1eb9-8c1b-4afe-a8b8-8e0a33b39a05}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "413498c6364f", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs/commit/413498c6364f"}, "html": {"href": "#!/cbillington/blacs/commits/413498c6364f"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/blacs"}, "html": {"href": "#!/cbillington/blacs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}ts=python"}}, "type": "repository", "name": "BLACS", "full_name": "cbillington/blacs", "uuid": "{1ffc697c-0cdc-43c3-b124-343fa9d9cc95}"}, "branch": {"name": "remote_filepaths"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-12-12T14:43:46.908049+00:00"}, "pull_request": {"type": "pullrequest", "id": 79, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/79.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/79"}}, "title": "Convert filepaths to network format unconditionally"}}]}