{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/79/comments/131887814.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/79/_/diff#comment-131887814"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 79, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/79.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/79"}}, "title": "Convert filepaths to network format unconditionally"}, "content": {"raw": "I was going to say merge this, but isn\u2019t there a problem if the remote worker is using an old version of BLACS and thus doesn\u2019t have `_transition_to_buffered`?", "markup": "markdown", "html": "<p>I was going to say merge this, but isn\u2019t there a problem if the remote worker is using an old version of BLACS and thus doesn\u2019t have <code>_transition_to_buffered</code>?</p>", "type": "rendered"}, "created_on": "2020-01-16T09:17:31.173977+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{0147401a-13ed-4e39-a0d0-63108c18738b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D"}, "html": {"href": "https://bitbucket.org/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/fa0698c306b3470c00717c146b5296e9d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "philipstarkey", "type": "user", "account_id": "557058:2f99420c-1dbd-4837-952c-82c421b8fbdd"}, "updated_on": "2020-01-16T09:17:31.181834+00:00", "type": "pullrequest_comment", "id": 131887814}, {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/79/comments/131907402.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/79/_/diff#comment-131907402"}}, "parent": {"id": 131887814, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/79/comments/131887814.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/79/_/diff#comment-131887814"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 79, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/79.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/79"}}, "title": "Convert filepaths to network format unconditionally"}, "content": {"raw": "Remote workers previously didn\u2019t work at all for devices other than subclasses of IMAQdxCamera \\(unless the shared drive was Z:\\\\\\\\ by coincidence\\)! the camera I think is the only device that is currently doing the path conversion at the other end, but the BLACS has been converting the path to network format for all remote devices.\n\nSo you\u2019re right, people whose shared drive is Z:\\\\\\\\ using remote devices other than cameras will see breakage if they don\u2019t upgrade both at once. \n\nIf we want to make it backward compatible - a `hasattr`check isn\u2019t really possible given that the worker class is not necessarily imported in the parent - it might just be a string. I don\u2019t _think_ a try/except around the `yield` is possible catching the AttributeError - the state machine mainloop doesn\u2019t return/raise the exception object. We could modify BLACS to do so \\(could be a good idea anyway, but bigger than this issue!\\)\n\nI think we should merge anyway, but this is why you originally brought up the need for remote version checks. And the remote version check PR in labscript\\_utils doesn\u2019t address this issue since it\u2019s about client/server setups, and workers don\u2019t use that model. So at some point BLACS workers should grow a method \u201ccheck\\_version\u201d or similar that allows the parent process to check versions of things the worker is using \\(or something that has the same effect\\).\n\nOnce we\u2019re on github we can have version milestones and tag issues as needing to be implemented before a release - I think we should merge this and make an issue that BLACS needs to be able to version check its subprocesses before the next release \\(this won\u2019t be too hard to implement I don\u2019t think\\).\n\n\u200c", "markup": "markdown", "html": "<p>Remote workers previously didn\u2019t work at all for devices other than subclasses of IMAQdxCamera (unless the shared drive was Z:\\\\ by coincidence)! the camera I think is the only device that is currently doing the path conversion at the other end, but the BLACS has been converting the path to network format for all remote devices.</p>\n<p>So you\u2019re right, people whose shared drive is Z:\\\\ using remote devices other than cameras will see breakage if they don\u2019t upgrade both at once. </p>\n<p>If we want to make it backward compatible - a <code>hasattr</code>check isn\u2019t really possible given that the worker class is not necessarily imported in the parent - it might just be a string. I don\u2019t <em>think</em> a try/except around the <code>yield</code> is possible catching the AttributeError - the state machine mainloop doesn\u2019t return/raise the exception object. We could modify BLACS to do so (could be a good idea anyway, but bigger than this issue!)</p>\n<p>I think we should merge anyway, but this is why you originally brought up the need for remote version checks. And the remote version check PR in labscript_utils doesn\u2019t address this issue since it\u2019s about client/server setups, and workers don\u2019t use that model. So at some point BLACS workers should grow a method \u201ccheck_version\u201d or similar that allows the parent process to check versions of things the worker is using (or something that has the same effect).</p>\n<p>Once we\u2019re on github we can have version milestones and tag issues as needing to be implemented before a release - I think we should merge this and make an issue that BLACS needs to be able to version check its subprocesses before the next release (this won\u2019t be too hard to implement I don\u2019t think).</p>\n<p>\u200c</p>", "type": "rendered"}, "created_on": "2020-01-16T10:50:46.485109+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2020-01-16T10:50:46.496569+00:00", "type": "pullrequest_comment", "id": 131907402}, {"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/79/comments/131915762.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/79/_/diff#comment-131915762"}}, "parent": {"id": 131907402, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/79/comments/131907402.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/79/_/diff#comment-131907402"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 79, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/79.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/79"}}, "title": "Convert filepaths to network format unconditionally"}, "content": {"raw": "Ok! Merge it as is then!", "markup": "markdown", "html": "<p>Ok! Merge it as is then!</p>", "type": "rendered"}, "created_on": "2020-01-16T11:37:14.909308+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{0147401a-13ed-4e39-a0d0-63108c18738b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D"}, "html": {"href": "https://bitbucket.org/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/fa0698c306b3470c00717c146b5296e9d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "philipstarkey", "type": "user", "account_id": "557058:2f99420c-1dbd-4837-952c-82c421b8fbdd"}, "updated_on": "2020-01-16T11:37:14.927619+00:00", "type": "pullrequest_comment", "id": 131915762}], "page": 1, "size": 3}