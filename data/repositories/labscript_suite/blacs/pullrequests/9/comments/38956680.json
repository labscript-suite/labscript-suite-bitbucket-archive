{"links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/9/comments/38956680.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/9/_/diff#comment-38956680"}}, "parent": {"id": 38956422, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/9/comments/38956422.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/9/_/diff#comment-38956422"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 9, "links": {"self": {"href": "data/repositories/labscript_suite/blacs/pullrequests/9.json"}, "html": {"href": "#!/labscript_suite/blacs/pull-requests/9"}}, "title": "\"delete repeated shots\" functionality"}, "content": {"raw": "It's also about total hard drive space consumed - the way this patch works, if BLACS is in repeat-last mode and you are submitting shots to BLACS throughout the day, so long as you leave that \"keep n reps\" setting on all day, you'll only have n reps on disk by the end of the day, regardless of how many shots you submitted. Whereas if it keeps n per shot, then the number you have left at the end of the day scales roughly with the number of shots you submitted. Our repeated shots are almost always useless, so we'd really like to throw them all out. Keeping n per shot submitted means that once you stop repeating that shot, n will be left on disk and never deleted, wheres in the way this patch is implemented, all repeated shots eventually get deleted.\n\nSo yes, it's just about keeping a buffer to let you do whatever you like with the files, analyse them with lyse, decide you don't want to delete them after all, or whatever. But having BLACS do it ensures pretty reliable deletion (BLACS even saves the files queued for deletion upon restart). I would agree that it would be sort of natural for lyse to do the deletion, since it's at the end of the line, but having it done from BLACS is more reliable I think.", "markup": "markdown", "html": "<p>It's also about total hard drive space consumed - the way this patch works, if BLACS is in repeat-last mode and you are submitting shots to BLACS throughout the day, so long as you leave that \"keep n reps\" setting on all day, you'll only have n reps on disk by the end of the day, regardless of how many shots you submitted. Whereas if it keeps n per shot, then the number you have left at the end of the day scales roughly with the number of shots you submitted. Our repeated shots are almost always useless, so we'd really like to throw them all out. Keeping n per shot submitted means that once you stop repeating that shot, n will be left on disk and never deleted, wheres in the way this patch is implemented, all repeated shots eventually get deleted.</p>\n<p>So yes, it's just about keeping a buffer to let you do whatever you like with the files, analyse them with lyse, decide you don't want to delete them after all, or whatever. But having BLACS do it ensures pretty reliable deletion (BLACS even saves the files queued for deletion upon restart). I would agree that it would be sort of natural for lyse to do the deletion, since it's at the end of the line, but having it done from BLACS is more reliable I think.</p>", "type": "rendered"}, "created_on": "2017-06-16T05:35:25.507788+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-06-16T05:42:48.357694+00:00", "type": "pullrequest_comment", "id": 38956680}