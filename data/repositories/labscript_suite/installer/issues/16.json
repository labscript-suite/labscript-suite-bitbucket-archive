{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/installer.json"}, "html": {"href": "#!/labscript_suite/installer"}, "avatar": {"href": "data/bytebucket.org/ravatar/{65cd9685-3e8c-4275-9b89-1a7873b341d0}ts=python"}}, "type": "repository", "name": "installer", "full_name": "labscript_suite/installer", "uuid": "{65cd9685-3e8c-4275-9b89-1a7873b341d0}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/installer/issues/16/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/installer/issues/16.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/installer/issues/16/watch"}, "comments": {"href": "data/repositories/labscript_suite/installer/issues/16/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/installer/issues/16/installer-can-delete-wrong-labscript"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/installer/issues/16/vote"}}, "reporter": {"display_name": "David Meyer", "uuid": "{8df655d6-8661-4957-b4ba-669cef19bf2d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D"}, "html": {"href": "https://bitbucket.org/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2a4efe81a17e5aeccdbc4ef2ca2cc463d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDM-0.png"}}, "nickname": "dihm", "type": "user", "account_id": "557058:411f7712-e1fa-438c-b578-0359da2d9f06"}, "title": "Installer can delete wrong labscript installation when trying to reinstall one of two installations", "component": null, "votes": 0, "watches": 1, "content": {"raw": "Almost lost two days of work on this very strange edge case.\r\n\r\nIf someone has two separate labscript installations on the same machine and attempts to use the installer to refresh the existing second installation in the non-default path (second defined by the order in the python path), the installer calls uninstall on line 329 without explicitly passing the user-specified install path. Uninstall then searches the python path for the first labscript directory (lines 427-430) and proceeds to delete everything. Unfortunately the first labscript directory on the path is not necessarily the desired install path that needs to be refreshed.\r\n\r\nIf I'm reading it correctly, this can be fixed by passing install_folder to uninstall() on line 329.", "markup": "markdown", "html": "<p>Almost lost two days of work on this very strange edge case.</p>\n<p>If someone has two separate labscript installations on the same machine and attempts to use the installer to refresh the existing second installation in the non-default path (second defined by the order in the python path), the installer calls uninstall on line 329 without explicitly passing the user-specified install path. Uninstall then searches the python path for the first labscript directory (lines 427-430) and proceeds to delete everything. Unfortunately the first labscript directory on the path is not necessarily the desired install path that needs to be refreshed.</p>\n<p>If I'm reading it correctly, this can be fixed by passing install_folder to uninstall() on line 329.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2017-08-28T20:19:11.392740+00:00", "milestone": null, "updated_on": "2018-06-15T13:49:18.476974+00:00", "type": "issue", "id": 16}