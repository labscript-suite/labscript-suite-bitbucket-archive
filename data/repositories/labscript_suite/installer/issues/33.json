{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/installer.json"}, "html": {"href": "#!/labscript_suite/installer"}, "avatar": {"href": "data/bytebucket.org/ravatar/{65cd9685-3e8c-4275-9b89-1a7873b341d0}ts=python"}}, "type": "repository", "name": "installer", "full_name": "labscript_suite/installer", "uuid": "{65cd9685-3e8c-4275-9b89-1a7873b341d0}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/installer/issues/33/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/installer/issues/33.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/installer/issues/33/watch"}, "comments": {"href": "data/repositories/labscript_suite/installer/issues/33/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/installer/issues/33/start-menu-shortcuts-point-to-wrong"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/installer/issues/33/vote"}}, "reporter": null, "title": "Start Menu Shortcuts Point to Wrong Directory", "component": null, "votes": 0, "watches": null, "content": {"raw": "After installing labscript, the start menu shortcuts point to the copies of the labscript programs in the directory with the installer, rather than the copies in the target install directory. This occurred on a machine in which I was using an Anaconda environment other than base. This issue didn't occur on a separate machine in which I simply installed in the base environment, so that may be relevant.\r\n\r\n\r\nSteps to reproduce:\r\n* Create a new anaconda environment, say \"labscript\", then activate it and install all of the necessary labscript dependencies.\r\n* Make a directory for the installer (e.g. `%userprofile%\\Software\\Labscript\\installer`), and a target installation directory (e.g. `%userprofile%\\Software\\Labscript\\labscript_suite`)\r\n* Clone the installer mercurial repo into `%userprofile%\\Software\\Labscript\\installer`\r\n* Run the installer, and specify `%userprofile%\\Software\\Labscript\\labscript_suite` as the target install directory\r\n\r\nTo see the result:\r\n* After the installation completes, open the start menu, type e.g. blacs then right-click on it and select \"Open file location\"\r\n* In that directory (%userprofile%\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs), right click on the link to blacs and select \"Properties\"\r\n* In the \"Shortcut\" tab, look at the entry in the box labeled \"Target\". In my case it looked like this:\r\n`%userprofile%\\.conda\\envs\\labscript\\pythonw.exe \"`%userprofile%\\Software\\Labscript\\installer\\labscript_utils\\winlauncher.py\" \"-n\" \"labscript\" \"-p\" \"`%userprofile%\\.conda\\envs\\labscript\" \"`%userprofile%\\Software\\Labscript\\installer\\blacs\\_` (seems to be truncated in the display there, but the link opens fine)\r\nNote that these paths point to `%userprofile%\\Software\\Labscript\\installer` rather than `%userprofile%\\Software\\Labscript\\labscript_suite`. The same is true for the links for the other runmanager etc.\r\n\r\n\r\nGenerally this isn't a big issue because there is a copy of the labscript suite in the installer directory which runs fine, so I've marked this bug as minor. However, it did cause some confusion when updating the mercurial repo for Lyse in the target install directory didn't affect the copy of Lyse that opens from the start menu. Additionally, the fact that the \"Target\" text box truncates the command makes it difficult to update the link to point to the correct location manually.\r\n\r\nIt's maybe worth noting that importing lyse in python imports the desired copy in the target directory (according to its `__file__` attribute it's from `%userprofile%\\Software\\Labscript\\labscript_suite`), so this is only an issue with the start menu link.\r\n \r\nVersion info:\r\nLabscript suite installer changeset 1447f798ec6a\r\nAnaconda 2019.10\r\nPython 3.7.4\r\nWindows 10, 64 bit", "markup": "markdown", "html": "<p>After installing labscript, the start menu shortcuts point to the copies of the labscript programs in the directory with the installer, rather than the copies in the target install directory. This occurred on a machine in which I was using an Anaconda environment other than base. This issue didn't occur on a separate machine in which I simply installed in the base environment, so that may be relevant.</p>\n<p>Steps to reproduce:\n<em> Create a new anaconda environment, say \"labscript\", then activate it and install all of the necessary labscript dependencies.\n</em> Make a directory for the installer (e.g. <code>%userprofile%\\Software\\Labscript\\installer</code>), and a target installation directory (e.g. <code>%userprofile%\\Software\\Labscript\\labscript_suite</code>)\n<em> Clone the installer mercurial repo into <code>%userprofile%\\Software\\Labscript\\installer</code>\n</em> Run the installer, and specify <code>%userprofile%\\Software\\Labscript\\labscript_suite</code> as the target install directory</p>\n<p>To see the result:\n<em> After the installation completes, open the start menu, type e.g. blacs then right-click on it and select \"Open file location\"\n</em> In that directory (%userprofile%\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs), right click on the link to blacs and select \"Properties\"\n* In the \"Shortcut\" tab, look at the entry in the box labeled \"Target\". In my case it looked like this:\n<code>%userprofile%\\.conda\\envs\\labscript\\pythonw.exe \"</code>%userprofile%\\Software\\Labscript\\installer\\labscript_utils\\winlauncher.py\" \"-n\" \"labscript\" \"-p\" \"<code>%userprofile%\\.conda\\envs\\labscript\" \"</code>%userprofile%\\Software\\Labscript\\installer\\blacs_<code>(seems to be truncated in the display there, but the link opens fine)\nNote that these paths point to</code>%userprofile%\\Software\\Labscript\\installer<code>rather than</code>%userprofile%\\Software\\Labscript\\labscript_suite`. The same is true for the links for the other runmanager etc.</p>\n<p>Generally this isn't a big issue because there is a copy of the labscript suite in the installer directory which runs fine, so I've marked this bug as minor. However, it did cause some confusion when updating the mercurial repo for Lyse in the target install directory didn't affect the copy of Lyse that opens from the start menu. Additionally, the fact that the \"Target\" text box truncates the command makes it difficult to update the link to point to the correct location manually.</p>\n<p>It's maybe worth noting that importing lyse in python imports the desired copy in the target directory (according to its <code>__file__</code> attribute it's from <code>%userprofile%\\Software\\Labscript\\labscript_suite</code>), so this is only an issue with the start menu link.</p>\n<p>Version info:\nLabscript suite installer changeset <a href=\"#!/labscript_suite/installer/commits/1447f798ec6a\" rel=\"nofollow\" class=\"ap-connect-link\">1447f798ec6a</a>\nAnaconda 2019.10\nPython 3.7.4\nWindows 10, 64 bit</p>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2020-01-09T22:47:21.550185+00:00", "milestone": null, "updated_on": "2020-02-12T21:19:46.208678+00:00", "type": "issue", "id": 33}