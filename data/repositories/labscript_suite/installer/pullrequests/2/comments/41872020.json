{"links": {"self": {"href": "data/repositories/labscript_suite/installer/pullrequests/2/comments/41872020.json"}, "html": {"href": "#!/labscript_suite/installer/pull-requests/2/_/diff#comment-41872020"}}, "parent": {"id": 41865426, "links": {"self": {"href": "data/repositories/labscript_suite/installer/pullrequests/2/comments/41865426.json"}, "html": {"href": "#!/labscript_suite/installer/pull-requests/2/_/diff#comment-41865426"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2, "links": {"self": {"href": "data/repositories/labscript_suite/installer/pullrequests/2.json"}, "html": {"href": "#!/labscript_suite/installer/pull-requests/2"}}, "title": "Fixes for installer to run with Python 3"}, "content": {"raw": "Our only use of `six` in the labscript suite is for the constant `six.PY2`. I don't anticipate having to use six much for anything else - it used to be necessary but with more recent versions of Python 3 it's completely possible to write code that works on both Python 2 and 3 without it, which is what we've been doing so far. And I'd prefer to see in the code \"if PY2 do this, otherwise, do that\" so we know what to cull in [2020](https://pythonclock.org/).\n\nThe definition of `PY2` in the `six` source code is:\n\n```\n#!python\n\nPY2 = sys.version_info[0] == 2\n```\n\nSo I suggest maybe we just define `labscript_utils.PY2`, replace usages of `six.PY2` with that in the labscript suite where we have them already, and in the installer replace that \"if\" statement in the imports with `if sys.version_info[0] == 2` so as not to depend on anything at all for it. That was probably my thinking with `if sys.version < '3'`, but that's imperfect since `'20' < 3` is True :p.\n\nIt's not that I mind having the dependency, it's more that it's misleading to make it look like we are using six for our compatibility with both Python versions when we're actually not!", "markup": "markdown", "html": "<p>Our only use of <code>six</code> in the labscript suite is for the constant <code>six.PY2</code>. I don't anticipate having to use six much for anything else - it used to be necessary but with more recent versions of Python 3 it's completely possible to write code that works on both Python 2 and 3 without it, which is what we've been doing so far. And I'd prefer to see in the code \"if PY2 do this, otherwise, do that\" so we know what to cull in <a data-is-external-link=\"true\" href=\"https://pythonclock.org/\" rel=\"nofollow\">2020</a>.</p>\n<p>The definition of <code>PY2</code> in the <code>six</code> source code is:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">PY2</span> <span class=\"o\">=</span> <span class=\"n\">sys</span><span class=\"o\">.</span><span class=\"n\">version_info</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"o\">==</span> <span class=\"mi\">2</span>\n</pre></div>\n\n\n<p>So I suggest maybe we just define <code>labscript_utils.PY2</code>, replace usages of <code>six.PY2</code> with that in the labscript suite where we have them already, and in the installer replace that \"if\" statement in the imports with <code>if sys.version_info[0] == 2</code> so as not to depend on anything at all for it. That was probably my thinking with <code>if sys.version &lt; '3'</code>, but that's imperfect since <code>'20' &lt; 3</code> is True :p.</p>\n<p>It's not that I mind having the dependency, it's more that it's misleading to make it look like we are using six for our compatibility with both Python versions when we're actually not!</p>", "type": "rendered"}, "created_on": "2017-08-01T04:20:04.488461+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-01T04:20:04.490724+00:00", "type": "pullrequest_comment", "id": 41872020}