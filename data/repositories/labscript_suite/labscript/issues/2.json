{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript.json"}, "html": {"href": "#!/labscript_suite/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{48848b08-1db5-463b-bbdc-911beadf8bbf}ts=249917"}}, "type": "repository", "name": "labscript", "full_name": "labscript_suite/labscript", "uuid": "{48848b08-1db5-463b-bbdc-911beadf8bbf}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/labscript/issues/2/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/labscript/issues/2.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript/issues/2/watch"}, "comments": {"href": "data/repositories/labscript_suite/labscript/issues/2/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/labscript/issues/2/shutter-commands-can-be-reordered-due-to"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript/issues/2/vote"}}, "reporter": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "title": "Shutter commands can be reordered due to shutter delays", "component": null, "votes": 0, "watches": 2, "content": {"raw": "The simplistic implementation of shutter delays can result in undesired results.\r\n\r\nFor example if the delays are:\r\n\r\n```\r\n#!python\r\n\r\nopen_delay = 3e-3\r\nclose_delay = 5e-3\r\n```\r\n\r\n\r\nand you call:\r\n\r\n```\r\n#!python\r\n\r\nshutter.open(t)\r\nshutter.close(t+1e-3)\r\n\r\n```\r\n\r\nthen the command to close the shutter ends up coming before the command to open it.\r\n\r\nThis will result in the shutter opening at the correct time, but never closing.\r\n\r\nSimilarly the delays may be such that the open command is overwritten by the close command, so the shutter will never open (though in this case labscript will at least warn the user).", "markup": "markdown", "html": "<p>The simplistic implementation of shutter delays can result in undesired results.</p>\n<p>For example if the delays are:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">open_delay</span> <span class=\"o\">=</span> <span class=\"mf\">3e-3</span>\n<span class=\"n\">close_delay</span> <span class=\"o\">=</span> <span class=\"mf\">5e-3</span>\n</pre></div>\n\n\n<p>and you call:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">shutter</span><span class=\"o\">.</span><span class=\"n\">open</span><span class=\"p\">(</span><span class=\"n\">t</span><span class=\"p\">)</span>\n<span class=\"n\">shutter</span><span class=\"o\">.</span><span class=\"n\">close</span><span class=\"p\">(</span><span class=\"n\">t</span><span class=\"o\">+</span><span class=\"mf\">1e-3</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>then the command to close the shutter ends up coming before the command to open it.</p>\n<p>This will result in the shutter opening at the correct time, but never closing.</p>\n<p>Similarly the delays may be such that the open command is overwritten by the close command, so the shutter will never open (though in this case labscript will at least warn the user).</p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "new", "version": null, "edited_on": null, "created_on": "2014-06-11T07:04:48.251490+00:00", "milestone": null, "updated_on": "2017-06-23T01:42:31.480508+00:00", "type": "issue", "id": 2}