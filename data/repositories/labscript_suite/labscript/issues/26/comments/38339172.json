{"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/26/comments/38339172.json"}, "html": {"href": "#!/labscript_suite/labscript/issues/26#comment-38339172"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/26.json"}}, "type": "issue", "id": 26, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript.json"}, "html": {"href": "#!/labscript_suite/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{48848b08-1db5-463b-bbdc-911beadf8bbf}ts=249917"}}, "type": "repository", "name": "labscript", "full_name": "labscript_suite/labscript", "uuid": "{48848b08-1db5-463b-bbdc-911beadf8bbf}"}, "title": "Port to pyqt5 and python3."}, "content": {"raw": "I wasn't planing on doing a total revamp of qtutils I was thinking of adding PyQt5 in a appropriate way in all the existing files. As this is minimal effort and can later be replaced by the Qt wrapper.\n\nBut the new abstraction layer that you proposed would then just be PyQt4 & PyQt5 for the start as thats was I have running on my machines and what I can test against.\n\nBut you're most probably right that all of this should be done before even touching labscript code. As I would first introduce API2 lines just to remove them at a later time and replace them with the new wrapper.\n\nAs for removing PySide I was talking about the imports as they are currently not consistent in lyse, runmanager vs blacs, runviewer. We should decide on whats the way to go here as someone using PySide currently can only use half of the labscript suite. Either we drop support as a whole or reinstate it.\nOk so here is my plan:\n\n1. make existing qtutils files PyQt5 compatible.\n\n2. Qt wrapper for PyQt4 and PyQt5 that behaves like PyQt5\n\n3. Add all of that code into Labscript by replacing the PyQt imports with the import of the wrapper (It would be best to do this with lyse, runmanager, runviewer first as they have they have less Ui code)\n\n4. Lots of testing and dissucssing\n\n5. Do adjustment for Python 3\n\nOne last thing though should we maybe try to import the __future__ package in labscripts files at some point prior to the python3 port to see if something breaks?", "markup": "markdown", "html": "<p>I wasn't planing on doing a total revamp of qtutils I was thinking of adding PyQt5 in a appropriate way in all the existing files. As this is minimal effort and can later be replaced by the Qt wrapper.</p>\n<p>But the new abstraction layer that you proposed would then just be PyQt4 &amp; PyQt5 for the start as thats was I have running on my machines and what I can test against.</p>\n<p>But you're most probably right that all of this should be done before even touching labscript code. As I would first introduce API2 lines just to remove them at a later time and replace them with the new wrapper.</p>\n<p>As for removing PySide I was talking about the imports as they are currently not consistent in lyse, runmanager vs blacs, runviewer. We should decide on whats the way to go here as someone using PySide currently can only use half of the labscript suite. Either we drop support as a whole or reinstate it.\nOk so here is my plan:</p>\n<ol>\n<li>\n<p>make existing qtutils files PyQt5 compatible.</p>\n</li>\n<li>\n<p>Qt wrapper for PyQt4 and PyQt5 that behaves like PyQt5</p>\n</li>\n<li>\n<p>Add all of that code into Labscript by replacing the PyQt imports with the import of the wrapper (It would be best to do this with lyse, runmanager, runviewer first as they have they have less Ui code)</p>\n</li>\n<li>\n<p>Lots of testing and dissucssing</p>\n</li>\n<li>\n<p>Do adjustment for Python 3</p>\n</li>\n</ol>\n<p>One last thing though should we maybe try to import the <strong>future</strong> package in labscripts files at some point prior to the python3 port to see if something breaks?</p>", "type": "rendered"}, "created_on": "2017-07-19T19:48:54.170000+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-07-19T20:07:01.413810+00:00", "type": "issue_comment", "id": 38339172}