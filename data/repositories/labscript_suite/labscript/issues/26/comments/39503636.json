{"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/26/comments/39503636.json"}, "html": {"href": "#!/labscript_suite/labscript/issues/26#comment-39503636"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/26.json"}}, "type": "issue", "id": 26, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript.json"}, "html": {"href": "#!/labscript_suite/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{48848b08-1db5-463b-bbdc-911beadf8bbf}ts=249917"}}, "type": "repository", "name": "labscript", "full_name": "labscript_suite/labscript", "uuid": "{48848b08-1db5-463b-bbdc-911beadf8bbf}"}, "title": "Port to pyqt5 and python3."}, "content": {"raw": "Speaking of numpy Unicode problems, labscript_devices is going to have a bunch of issues since [dtype field names must match the native python string type](https://github.com/numpy/numpy/issues/2407). Looks like there are two approachs to support both python2 and 3. First is to wrap all the field names in str(), which won't work for us if we are going to overload str() to Unicode() for python2. The second is to specify dtypes with field names using dictionaries instead of lists when specifying dtypes. For whatever reason the dictionary accepts Unicode or bytes for field names regardless of the python used, i.e. \n\n```\n#!python\n\ndtype({'names':['label','time','state'],'formats':['a256',float,np.uint8]})\n```\n\n For whatever reason the type string can be Unicode or bytes using the dictionary or the list method.", "markup": "markdown", "html": "<p>Speaking of numpy Unicode problems, labscript_devices is going to have a bunch of issues since <a data-is-external-link=\"true\" href=\"https://github.com/numpy/numpy/issues/2407\" rel=\"nofollow\">dtype field names must match the native python string type</a>. Looks like there are two approachs to support both python2 and 3. First is to wrap all the field names in str(), which won't work for us if we are going to overload str() to Unicode() for python2. The second is to specify dtypes with field names using dictionaries instead of lists when specifying dtypes. For whatever reason the dictionary accepts Unicode or bytes for field names regardless of the python used, i.e. </p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">dtype</span><span class=\"p\">({</span><span class=\"s1\">&#39;names&#39;</span><span class=\"p\">:[</span><span class=\"s1\">&#39;label&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;time&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;state&#39;</span><span class=\"p\">],</span><span class=\"s1\">&#39;formats&#39;</span><span class=\"p\">:[</span><span class=\"s1\">&#39;a256&#39;</span><span class=\"p\">,</span><span class=\"nb\">float</span><span class=\"p\">,</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">uint8</span><span class=\"p\">]})</span>\n</pre></div>\n\n\n<p>For whatever reason the type string can be Unicode or bytes using the dictionary or the list method.</p>", "type": "rendered"}, "created_on": "2017-08-30T14:03:11.501270+00:00", "user": {"display_name": "David Meyer", "uuid": "{8df655d6-8661-4957-b4ba-669cef19bf2d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D"}, "html": {"href": "https://bitbucket.org/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2a4efe81a17e5aeccdbc4ef2ca2cc463d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDM-0.png"}}, "nickname": "dihm", "type": "user", "account_id": "557058:411f7712-e1fa-438c-b578-0359da2d9f06"}, "updated_on": null, "type": "issue_comment", "id": 39503636}