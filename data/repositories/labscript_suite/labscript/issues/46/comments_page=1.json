{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/46/comments/43920384.json"}, "html": {"href": "#!/labscript_suite/labscript/issues/46#comment-43920384"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/46.json"}}, "type": "issue", "id": 46, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript.json"}, "html": {"href": "#!/labscript_suite/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{48848b08-1db5-463b-bbdc-911beadf8bbf}ts=249917"}}, "type": "repository", "name": "labscript", "full_name": "labscript_suite/labscript", "uuid": "{48848b08-1db5-463b-bbdc-911beadf8bbf}"}, "title": "Ramps can over-/undershoot their final value"}, "content": {"raw": "Hmm, yeah I can see that quatised times could likely be the cause here. Only other thing I can think of is if you're running it on Python 3?", "markup": "markdown", "html": "<p>Hmm, yeah I can see that quatised times could likely be the cause here. Only other thing I can think of is if you're running it on Python 3?</p>", "type": "rendered"}, "created_on": "2018-03-14T22:45:50.481651+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": null, "type": "issue_comment", "id": 43920384}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/46/comments/43920403.json"}, "html": {"href": "#!/labscript_suite/labscript/issues/46#comment-43920403"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/46.json"}}, "type": "issue", "id": 46, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript.json"}, "html": {"href": "#!/labscript_suite/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{48848b08-1db5-463b-bbdc-911beadf8bbf}ts=249917"}}, "type": "repository", "name": "labscript", "full_name": "labscript_suite/labscript", "uuid": "{48848b08-1db5-463b-bbdc-911beadf8bbf}"}, "title": "Ramps can over-/undershoot their final value"}, "content": {"raw": "Nope python 2 so far. Only my testing system is running python 3. The lab will make the switch to python 3 sometime next month.", "markup": "markdown", "html": "<p>Nope python 2 so far. Only my testing system is running python 3. The lab will make the switch to python 3 sometime next month.</p>", "type": "rendered"}, "created_on": "2018-03-14T22:47:54.295481+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": null, "type": "issue_comment", "id": 43920403}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/46/comments/43920431.json"}, "html": {"href": "#!/labscript_suite/labscript/issues/46#comment-43920431"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/46.json"}}, "type": "issue", "id": 46, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript.json"}, "html": {"href": "#!/labscript_suite/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{48848b08-1db5-463b-bbdc-911beadf8bbf}ts=249917"}}, "type": "repository", "name": "labscript", "full_name": "labscript_suite/labscript", "uuid": "{48848b08-1db5-463b-bbdc-911beadf8bbf}"}, "title": "Ramps can over-/undershoot their final value"}, "content": {"raw": "After labscript generates lists of output values, devices tend to quantise these as well (in their generate_code method) before storing them in the h5 file. I am not sure if any checks are performed after the output values are quantised here, so bad quantisation code could be to blame. \n\nHappy to debug a minimum working example.", "markup": "markdown", "html": "<p>After labscript generates lists of output values, devices tend to quantise these as well (in their generate_code method) before storing them in the h5 file. I am not sure if any checks are performed after the output values are quantised here, so bad quantisation code could be to blame. </p>\n<p>Happy to debug a minimum working example.</p>", "type": "rendered"}, "created_on": "2018-03-14T22:52:04.508032+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": null, "type": "issue_comment", "id": 43920431}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/46/comments/43939773.json"}, "html": {"href": "#!/labscript_suite/labscript/issues/46#comment-43939773"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/46.json"}}, "type": "issue", "id": 46, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript.json"}, "html": {"href": "#!/labscript_suite/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{48848b08-1db5-463b-bbdc-911beadf8bbf}ts=249917"}}, "type": "repository", "name": "labscript", "full_name": "labscript_suite/labscript", "uuid": "{48848b08-1db5-463b-bbdc-911beadf8bbf}"}, "title": "Ramps can over-/undershoot their final value"}, "content": {"raw": "Here is a minimal example:\n\n```\n#!python\n\nfrom labscript import *\nfrom labscript_devices.PulseBlaster_SP2_24_100_32k import PulseBlaster_SP2_24_100_32k\nfrom labscript_devices.NI_PCIe_6363 import NI_PCIe_6363\n\n\n# Connection Table\nPulseBlaster_SP2_24_100_32k(   name='pulse_blaster')\nClockLine(  name='A1_clockline', pseudoclock=pulse_blaster.pseudoclock,   connection='flag 0')\nNI_PCIe_6363(name='ni_card_0', parent_device=A1_clockline, clock_terminal='ni_pcie_6363_0/PFI0', MAX_name='ni_pcie_6363_0', acquisition_rate=100e3)\nAnalogOut(  name='Pushout_Frequency',           parent_device=ni_card_0,                connection='ao2', limits=(0,10), default_value=5.67)\nAnalogOut(  name='Pushout_Amplitude',           parent_device=ni_card_0,                connection='ao3', limits=(0,10), default_value=0.0)\n\nstart()\nt=1.8061896326530613\nramp_samplerate = 16000.0\nPushout_Amplitude.  ramp(t, duration=0.25, initial=5.00, final=0, samplerate=ramp_samplerate)\nt += 0.25 + 0.01\nstop(t)\n\n```\n\nThis should result in \n\n\n```\n#!\n\nTraceback (most recent call last):\n  File \"script.py\", line 18, in <module>\n  File \"/Users/janwerkmann/labscript_suite/labscript/labscript.py\", line 2143, in stop\n    generate_code()\n  File \"/Users/janwerkmann/labscript_suite/labscript/labscript.py\", line 2045, in generate_code\n    device.generate_code(hdf5_file)\n  File \"/Users/janwerkmann/labscript_suite/labscript_devices/PulseBlaster_No_DDS.py\", line 73, in generate_code\n    PseudoclockDevice.generate_code(self, hdf5_file)\n  File \"/Users/janwerkmann/labscript_suite/labscript/labscript.py\", line 963, in generate_code\n    self.do_checks(outputs)\n  File \"/Users/janwerkmann/labscript_suite/labscript/labscript.py\", line 943, in do_checks\n    output.do_checks(self.trigger_times)\n  File \"/Users/janwerkmann/labscript_suite/labscript/labscript.py\", line 1128, in do_checks\n    self.add_instruction(instruction['end time'], instruction['function'](instruction['end time']-instruction['initial time']), instruction['units'])\n  File \"/Users/janwerkmann/labscript_suite/labscript/labscript.py\", line 1107, in add_instruction\n    raise LabscriptError('You cannot program the value %s (base units) to %s as it falls outside the limits (%d to %d)'%(str(instruction), self.name, self.limits[0], self.limits[1]))\nLabscriptError: You cannot program the value -4.4408920985e-15 (base units) to Pushout_Amplitude as it falls outside the limits (0 to 10)\nCompilation aborted.\n```", "markup": "markdown", "html": "<p>Here is a minimal example:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">labscript</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n<span class=\"kn\">from</span> <span class=\"nn\">labscript_devices.PulseBlaster_SP2_24_100_32k</span> <span class=\"kn\">import</span> <span class=\"n\">PulseBlaster_SP2_24_100_32k</span>\n<span class=\"kn\">from</span> <span class=\"nn\">labscript_devices.NI_PCIe_6363</span> <span class=\"kn\">import</span> <span class=\"n\">NI_PCIe_6363</span>\n\n\n<span class=\"c1\"># Connection Table</span>\n<span class=\"n\">PulseBlaster_SP2_24_100_32k</span><span class=\"p\">(</span>   <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;pulse_blaster&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">ClockLine</span><span class=\"p\">(</span>  <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;A1_clockline&#39;</span><span class=\"p\">,</span> <span class=\"n\">pseudoclock</span><span class=\"o\">=</span><span class=\"n\">pulse_blaster</span><span class=\"o\">.</span><span class=\"n\">pseudoclock</span><span class=\"p\">,</span>   <span class=\"n\">connection</span><span class=\"o\">=</span><span class=\"s1\">&#39;flag 0&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">NI_PCIe_6363</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;ni_card_0&#39;</span><span class=\"p\">,</span> <span class=\"n\">parent_device</span><span class=\"o\">=</span><span class=\"n\">A1_clockline</span><span class=\"p\">,</span> <span class=\"n\">clock_terminal</span><span class=\"o\">=</span><span class=\"s1\">&#39;ni_pcie_6363_0/PFI0&#39;</span><span class=\"p\">,</span> <span class=\"n\">MAX_name</span><span class=\"o\">=</span><span class=\"s1\">&#39;ni_pcie_6363_0&#39;</span><span class=\"p\">,</span> <span class=\"n\">acquisition_rate</span><span class=\"o\">=</span><span class=\"mf\">100e3</span><span class=\"p\">)</span>\n<span class=\"n\">AnalogOut</span><span class=\"p\">(</span>  <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;Pushout_Frequency&#39;</span><span class=\"p\">,</span>           <span class=\"n\">parent_device</span><span class=\"o\">=</span><span class=\"n\">ni_card_0</span><span class=\"p\">,</span>                <span class=\"n\">connection</span><span class=\"o\">=</span><span class=\"s1\">&#39;ao2&#39;</span><span class=\"p\">,</span> <span class=\"n\">limits</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"mi\">10</span><span class=\"p\">),</span> <span class=\"n\">default_value</span><span class=\"o\">=</span><span class=\"mf\">5.67</span><span class=\"p\">)</span>\n<span class=\"n\">AnalogOut</span><span class=\"p\">(</span>  <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;Pushout_Amplitude&#39;</span><span class=\"p\">,</span>           <span class=\"n\">parent_device</span><span class=\"o\">=</span><span class=\"n\">ni_card_0</span><span class=\"p\">,</span>                <span class=\"n\">connection</span><span class=\"o\">=</span><span class=\"s1\">&#39;ao3&#39;</span><span class=\"p\">,</span> <span class=\"n\">limits</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"mi\">10</span><span class=\"p\">),</span> <span class=\"n\">default_value</span><span class=\"o\">=</span><span class=\"mf\">0.0</span><span class=\"p\">)</span>\n\n<span class=\"n\">start</span><span class=\"p\">()</span>\n<span class=\"n\">t</span><span class=\"o\">=</span><span class=\"mf\">1.8061896326530613</span>\n<span class=\"n\">ramp_samplerate</span> <span class=\"o\">=</span> <span class=\"mf\">16000.0</span>\n<span class=\"n\">Pushout_Amplitude</span><span class=\"o\">.</span>  <span class=\"n\">ramp</span><span class=\"p\">(</span><span class=\"n\">t</span><span class=\"p\">,</span> <span class=\"n\">duration</span><span class=\"o\">=</span><span class=\"mf\">0.25</span><span class=\"p\">,</span> <span class=\"n\">initial</span><span class=\"o\">=</span><span class=\"mf\">5.00</span><span class=\"p\">,</span> <span class=\"n\">final</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">samplerate</span><span class=\"o\">=</span><span class=\"n\">ramp_samplerate</span><span class=\"p\">)</span>\n<span class=\"n\">t</span> <span class=\"o\">+=</span> <span class=\"mf\">0.25</span> <span class=\"o\">+</span> <span class=\"mf\">0.01</span>\n<span class=\"n\">stop</span><span class=\"p\">(</span><span class=\"n\">t</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>This should result in </p>\n<div class=\"codehilite\"><pre><span></span>Traceback (most recent call last):\n  File &quot;script.py&quot;, line 18, in &lt;module&gt;\n  File &quot;/Users/janwerkmann/labscript_suite/labscript/labscript.py&quot;, line 2143, in stop\n    generate_code()\n  File &quot;/Users/janwerkmann/labscript_suite/labscript/labscript.py&quot;, line 2045, in generate_code\n    device.generate_code(hdf5_file)\n  File &quot;/Users/janwerkmann/labscript_suite/labscript_devices/PulseBlaster_No_DDS.py&quot;, line 73, in generate_code\n    PseudoclockDevice.generate_code(self, hdf5_file)\n  File &quot;/Users/janwerkmann/labscript_suite/labscript/labscript.py&quot;, line 963, in generate_code\n    self.do_checks(outputs)\n  File &quot;/Users/janwerkmann/labscript_suite/labscript/labscript.py&quot;, line 943, in do_checks\n    output.do_checks(self.trigger_times)\n  File &quot;/Users/janwerkmann/labscript_suite/labscript/labscript.py&quot;, line 1128, in do_checks\n    self.add_instruction(instruction[&#39;end time&#39;], instruction[&#39;function&#39;](instruction[&#39;end time&#39;]-instruction[&#39;initial time&#39;]), instruction[&#39;units&#39;])\n  File &quot;/Users/janwerkmann/labscript_suite/labscript/labscript.py&quot;, line 1107, in add_instruction\n    raise LabscriptError(&#39;You cannot program the value %s (base units) to %s as it falls outside the limits (%d to %d)&#39;%(str(instruction), self.name, self.limits[0], self.limits[1]))\nLabscriptError: You cannot program the value -4.4408920985e-15 (base units) to Pushout_Amplitude as it falls outside the limits (0 to 10)\nCompilation aborted.\n</pre></div>", "type": "rendered"}, "created_on": "2018-03-15T17:41:10.471341+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": null, "type": "issue_comment", "id": 43939773}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/46/comments/43944362.json"}, "html": {"href": "#!/labscript_suite/labscript/issues/46#comment-43944362"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/46.json"}}, "type": "issue", "id": 46, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript.json"}, "html": {"href": "#!/labscript_suite/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{48848b08-1db5-463b-bbdc-911beadf8bbf}ts=249917"}}, "type": "repository", "name": "labscript", "full_name": "labscript_suite/labscript", "uuid": "{48848b08-1db5-463b-bbdc-911beadf8bbf}"}, "title": "Ramps can over-/undershoot their final value"}, "content": {"raw": "So this is **not** an issue with the quantised times code. It actually happens before any of the code for quantised times runs. I'm pretty sure it's an issue with the floating point calculation error (to do with the time) inside the ramp function because. Specifically, if you set `t=1.806189632` you see the crash, but if you set `t=1.80618963` then you don't. All this does is offset the `initial` parameter in the ramp function (the duration stays the same which is the only argument used to evaluate the value at the end time point (so it's agnostic of the end time point). Similarly, using `t=1.8061896327` works fine but `t=1.8061896326` does not.\n\nInvestigating further, this error is due to the fact that we directly use the duration when parameterising the ramp (aka, when we create the `lambda function` in `labscript.functions.ramp`) but then use a calculated duration when evaluating the end point. The solution should be to instead use a duration internally in `AnalogQuantity.ramp` that is calculated as `t + truncation * duration -t`. In a terminal, this works for me and successfully returns `0.0` when you evaluate the function at the end point. However, in labscript I still see the crash (and the error is now twice the size it was before)....\n\nNot sure why that is, I'll keep digging!\n\nIn the meantime, a quick solution for you would be to just work out why you have 17 digits of precision in your time and quantise that away manually in your script.", "markup": "markdown", "html": "<p>So this is <strong>not</strong> an issue with the quantised times code. It actually happens before any of the code for quantised times runs. I'm pretty sure it's an issue with the floating point calculation error (to do with the time) inside the ramp function because. Specifically, if you set <code>t=1.806189632</code> you see the crash, but if you set <code>t=1.80618963</code> then you don't. All this does is offset the <code>initial</code> parameter in the ramp function (the duration stays the same which is the only argument used to evaluate the value at the end time point (so it's agnostic of the end time point). Similarly, using <code>t=1.8061896327</code> works fine but <code>t=1.8061896326</code> does not.</p>\n<p>Investigating further, this error is due to the fact that we directly use the duration when parameterising the ramp (aka, when we create the <code>lambda function</code> in <code>labscript.functions.ramp</code>) but then use a calculated duration when evaluating the end point. The solution should be to instead use a duration internally in <code>AnalogQuantity.ramp</code> that is calculated as <code>t + truncation * duration -t</code>. In a terminal, this works for me and successfully returns <code>0.0</code> when you evaluate the function at the end point. However, in labscript I still see the crash (and the error is now twice the size it was before)....</p>\n<p>Not sure why that is, I'll keep digging!</p>\n<p>In the meantime, a quick solution for you would be to just work out why you have 17 digits of precision in your time and quantise that away manually in your script.</p>", "type": "rendered"}, "created_on": "2018-03-15T22:54:05.666153+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": null, "type": "issue_comment", "id": 43944362}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/46/comments/43944546.json"}, "html": {"href": "#!/labscript_suite/labscript/issues/46#comment-43944546"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/46.json"}}, "type": "issue", "id": 46, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript.json"}, "html": {"href": "#!/labscript_suite/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{48848b08-1db5-463b-bbdc-911beadf8bbf}ts=249917"}}, "type": "repository", "name": "labscript", "full_name": "labscript_suite/labscript", "uuid": "{48848b08-1db5-463b-bbdc-911beadf8bbf}"}, "title": "Ramps can over-/undershoot their final value"}, "content": {"raw": "Ok, got the solution. [This](#!/labscript_suite/labscript/src/c60f6b865902d5247fc02f4fe384ed678abad820/labscript.py?at=default&fileviewer=file-view-default#labscript.py-1300) line should have the `function` key be changed to: `'function': functions.ramp(round(t + truncation * duration, 10) - round(t, 10), initial, final)`\n\nCan you test and confirm it fixes the issue on your actual script and doesn't introduce other issues?", "markup": "markdown", "html": "<p>Ok, got the solution. <a data-is-external-link=\"true\" href=\"#!/labscript_suite/labscript/src/c60f6b865902d5247fc02f4fe384ed678abad820/labscript.py?at=default&amp;fileviewer=file-view-default#labscript.py-1300\" rel=\"nofollow\">This</a> line should have the <code>function</code> key be changed to: <code>'function': functions.ramp(round(t + truncation * duration, 10) - round(t, 10), initial, final)</code></p>\n<p>Can you test and confirm it fixes the issue on your actual script and doesn't introduce other issues?</p>", "type": "rendered"}, "created_on": "2018-03-15T23:18:19.177234+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2018-03-15T23:18:52.800471+00:00", "type": "issue_comment", "id": 43944546}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/46/comments/43948105.json"}, "html": {"href": "#!/labscript_suite/labscript/issues/46#comment-43948105"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/46.json"}}, "type": "issue", "id": 46, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript.json"}, "html": {"href": "#!/labscript_suite/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{48848b08-1db5-463b-bbdc-911beadf8bbf}ts=249917"}}, "type": "repository", "name": "labscript", "full_name": "labscript_suite/labscript", "uuid": "{48848b08-1db5-463b-bbdc-911beadf8bbf}"}, "title": "Ramps can over-/undershoot their final value"}, "content": {"raw": "Yes this fixes it thanks.", "markup": "markdown", "html": "<p>Yes this fixes it thanks.</p>", "type": "rendered"}, "created_on": "2018-03-16T06:20:55.240789+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": null, "type": "issue_comment", "id": 43948105}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/46/comments/44026292.json"}, "html": {"href": "#!/labscript_suite/labscript/issues/46#comment-44026292"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/46.json"}}, "type": "issue", "id": 46, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript.json"}, "html": {"href": "#!/labscript_suite/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{48848b08-1db5-463b-bbdc-911beadf8bbf}ts=249917"}}, "type": "repository", "name": "labscript", "full_name": "labscript_suite/labscript", "uuid": "{48848b08-1db5-463b-bbdc-911beadf8bbf}"}, "title": "Ramps can over-/undershoot their final value"}, "content": {"raw": "Fixes issue #46\n\n\u2192 <<cset 8340639b031e>>", "markup": "markdown", "html": "<p>Fixes issue <a href=\"#!/labscript_suite/labscript/issues/46/ramps-can-over-undershoot-their-final\" rel=\"nofollow\" title=\"Ramps can over-/undershoot their final value\" class=\"ap-connect-link\"><s>#46</s></a></p>\n<p>\u2192 &lt;&lt;cset <a href=\"#!/labscript_suite/labscript/commits/8340639b031e\" rel=\"nofollow\" class=\"ap-connect-link\">8340639b031e</a>&gt;&gt;</p>", "type": "rendered"}, "created_on": "2018-03-20T03:59:07.763618+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": null, "type": "issue_comment", "id": 44026292}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/46/comments/44026293.json"}, "html": {"href": "#!/labscript_suite/labscript/issues/46#comment-44026293"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/46.json"}}, "type": "issue", "id": 46, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript.json"}, "html": {"href": "#!/labscript_suite/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{48848b08-1db5-463b-bbdc-911beadf8bbf}ts=249917"}}, "type": "repository", "name": "labscript", "full_name": "labscript_suite/labscript", "uuid": "{48848b08-1db5-463b-bbdc-911beadf8bbf}"}, "title": "Ramps can over-/undershoot their final value"}, "content": {"raw": "fixed bug in last commit (fixing issue #46) where we included `truncation` in the duration calculation used to determine the duration used as a parameter of the function.\n\nThis was incorrect, since the function should be defined over the original duration, but evaluated over the truncated duration.\n\nThe fix was also applied to all ramping functions of AnalogQuantity.\n\n\u2192 <<cset 39ffde64a415>>", "markup": "markdown", "html": "<p>fixed bug in last commit (fixing issue <a href=\"#!/labscript_suite/labscript/issues/46/ramps-can-over-undershoot-their-final\" rel=\"nofollow\" title=\"Ramps can over-/undershoot their final value\" class=\"ap-connect-link\"><s>#46</s></a>) where we included <code>truncation</code> in the duration calculation used to determine the duration used as a parameter of the function.</p>\n<p>This was incorrect, since the function should be defined over the original duration, but evaluated over the truncated duration.</p>\n<p>The fix was also applied to all ramping functions of AnalogQuantity.</p>\n<p>\u2192 &lt;&lt;cset <a href=\"#!/labscript_suite/labscript/commits/39ffde64a415\" rel=\"nofollow\" class=\"ap-connect-link\">39ffde64a415</a>&gt;&gt;</p>", "type": "rendered"}, "created_on": "2018-03-20T03:59:07.817515+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": null, "type": "issue_comment", "id": 44026293}], "page": 1, "size": 9}