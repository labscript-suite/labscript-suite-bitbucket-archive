{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/47/comments/45818196.json"}, "html": {"href": "#!/labscript_suite/labscript/issues/47#comment-45818196"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/47.json"}}, "type": "issue", "id": 47, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript.json"}, "html": {"href": "#!/labscript_suite/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{48848b08-1db5-463b-bbdc-911beadf8bbf}ts=249917"}}, "type": "repository", "name": "labscript", "full_name": "labscript_suite/labscript", "uuid": "{48848b08-1db5-463b-bbdc-911beadf8bbf}"}, "title": "Missing WAIT instruction(s)"}, "content": {"raw": "labscript 3 (in progress, to be resumed post-thesis-submission) has a solution to this by quantising correctly based on the time since the wait preceding a given instruction.\n\nTo do similar here, one might want to modify `quantise_to_pseudoclock()` to partition the change times based on which wait preceded them, and then quantise them in terms of the time since the last wait, rather than the time since t=0.\n\nThe wait times themselves, when quantised to how long its been since themselves, will remain unchanged, which is what should resolve the root cause of this issue.", "markup": "markdown", "html": "<p>labscript 3 (in progress, to be resumed post-thesis-submission) has a solution to this by quantising correctly based on the time since the wait preceding a given instruction.</p>\n<p>To do similar here, one might want to modify <code>quantise_to_pseudoclock()</code> to partition the change times based on which wait preceded them, and then quantise them in terms of the time since the last wait, rather than the time since t=0.</p>\n<p>The wait times themselves, when quantised to how long its been since themselves, will remain unchanged, which is what should resolve the root cause of this issue.</p>", "type": "rendered"}, "created_on": "2018-05-30T02:21:28.755131+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": null, "type": "issue_comment", "id": 45818196}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/47/comments/45818650.json"}, "html": {"href": "#!/labscript_suite/labscript/issues/47#comment-45818650"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/47.json"}}, "type": "issue", "id": 47, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript.json"}, "html": {"href": "#!/labscript_suite/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{48848b08-1db5-463b-bbdc-911beadf8bbf}ts=249917"}}, "type": "repository", "name": "labscript", "full_name": "labscript_suite/labscript", "uuid": "{48848b08-1db5-463b-bbdc-911beadf8bbf}"}, "title": "Missing WAIT instruction(s)"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2018-05-30T03:19:49.239670+00:00", "user": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "updated_on": null, "type": "issue_comment", "id": 45818650}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/47/comments/45819011.json"}, "html": {"href": "#!/labscript_suite/labscript/issues/47#comment-45819011"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/47.json"}}, "type": "issue", "id": 47, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript.json"}, "html": {"href": "#!/labscript_suite/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{48848b08-1db5-463b-bbdc-911beadf8bbf}ts=249917"}}, "type": "repository", "name": "labscript", "full_name": "labscript_suite/labscript", "uuid": "{48848b08-1db5-463b-bbdc-911beadf8bbf}"}, "title": "Missing WAIT instruction(s)"}, "content": {"raw": "While I agree that modifying the code to quantise relative to each trigger point (as if t=0 each trigger time) is the best solution to resolving the issue, I suspect it's more practical to leave that until the next major version of labscript.\n\nI actually think the bug might just be that we quantise the stop time and don't quantise the trigger times [here](#!/labscript_suite/labscript/src/c7fd00487ddf54772bcd28de426d29bebeb56cf0/labscript.py#lines-1001). I'm not sure if there would be a lingering issue with the fact that the outputs offset their instructions times using pre-quantised trigger times (and then quantise after the subtraction) but I suspect that the rounding to 0.1ns we do everywhere probably prevents issues with that (by removing floating point rounding errors).\n\nRuss, do you want to try adding `self.trigger_times = self.quantise_to_pseudoclock(self.trigger_times)` at the bottom of `PseudoclockDevice.offset_instructions_from_trigger` to see if it fixes it?", "markup": "markdown", "html": "<p>While I agree that modifying the code to quantise relative to each trigger point (as if t=0 each trigger time) is the best solution to resolving the issue, I suspect it's more practical to leave that until the next major version of labscript.</p>\n<p>I actually think the bug might just be that we quantise the stop time and don't quantise the trigger times <a data-is-external-link=\"true\" href=\"#!/labscript_suite/labscript/src/c7fd00487ddf54772bcd28de426d29bebeb56cf0/labscript.py#lines-1001\" rel=\"nofollow\">here</a>. I'm not sure if there would be a lingering issue with the fact that the outputs offset their instructions times using pre-quantised trigger times (and then quantise after the subtraction) but I suspect that the rounding to 0.1ns we do everywhere probably prevents issues with that (by removing floating point rounding errors).</p>\n<p>Russ, do you want to try adding <code>self.trigger_times = self.quantise_to_pseudoclock(self.trigger_times)</code> at the bottom of <code>PseudoclockDevice.offset_instructions_from_trigger</code> to see if it fixes it?</p>", "type": "rendered"}, "created_on": "2018-05-30T04:07:56.075684+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": null, "type": "issue_comment", "id": 45819011}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/47/comments/45819024.json"}, "html": {"href": "#!/labscript_suite/labscript/issues/47#comment-45819024"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/47.json"}}, "type": "issue", "id": 47, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript.json"}, "html": {"href": "#!/labscript_suite/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{48848b08-1db5-463b-bbdc-911beadf8bbf}ts=249917"}}, "type": "repository", "name": "labscript", "full_name": "labscript_suite/labscript", "uuid": "{48848b08-1db5-463b-bbdc-911beadf8bbf}"}, "title": "Missing WAIT instruction(s)"}, "content": {"raw": "Absolutely happy with the quickest solution that resolves immediate problems, if  this solves it!", "markup": "markdown", "html": "<p>Absolutely happy with the quickest solution that resolves immediate problems, if  this solves it!</p>", "type": "rendered"}, "created_on": "2018-05-30T04:09:57.106381+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": null, "type": "issue_comment", "id": 45819024}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/47/comments/45819977.json"}, "html": {"href": "#!/labscript_suite/labscript/issues/47#comment-45819977"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/47.json"}}, "type": "issue", "id": 47, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript.json"}, "html": {"href": "#!/labscript_suite/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{48848b08-1db5-463b-bbdc-911beadf8bbf}ts=249917"}}, "type": "repository", "name": "labscript", "full_name": "labscript_suite/labscript", "uuid": "{48848b08-1db5-463b-bbdc-911beadf8bbf}"}, "title": "Missing WAIT instruction(s)"}, "content": {"raw": "> ... try adding `self.trigger_times = self.quantise_to_pseudoclock(self.trigger_times)` at the bottom of `PseudoclockDevice.offset_instructions_from_trigger` to see if it fixes it?\n\nThis fixed it.", "markup": "markdown", "html": "<blockquote>\n<p>... try adding <code>self.trigger_times = self.quantise_to_pseudoclock(self.trigger_times)</code> at the bottom of <code>PseudoclockDevice.offset_instructions_from_trigger</code> to see if it fixes it?</p>\n</blockquote>\n<p>This fixed it.</p>", "type": "rendered"}, "created_on": "2018-05-30T05:44:58.264220+00:00", "user": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "updated_on": null, "type": "issue_comment", "id": 45819977}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/47/comments/45821245.json"}, "html": {"href": "#!/labscript_suite/labscript/issues/47#comment-45821245"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/issues/47.json"}}, "type": "issue", "id": 47, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript.json"}, "html": {"href": "#!/labscript_suite/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{48848b08-1db5-463b-bbdc-911beadf8bbf}ts=249917"}}, "type": "repository", "name": "labscript", "full_name": "labscript_suite/labscript", "uuid": "{48848b08-1db5-463b-bbdc-911beadf8bbf}"}, "title": "Missing WAIT instruction(s)"}, "content": {"raw": "Resolves issue #47, where WAIT instructions were not issued to a clock.\n\n\u2192 <<cset 0f189af625ad>>", "markup": "markdown", "html": "<p>Resolves issue <a href=\"#!/labscript_suite/labscript/issues/47/missing-wait-instruction-s\" rel=\"nofollow\" title=\"Missing WAIT instruction(s)\" class=\"ap-connect-link\"><s>#47</s></a>, where WAIT instructions were not issued to a clock.</p>\n<p>\u2192 &lt;&lt;cset <a href=\"#!/labscript_suite/labscript/commits/0f189af625ad\" rel=\"nofollow\" class=\"ap-connect-link\">0f189af625ad</a>&gt;&gt;</p>", "type": "rendered"}, "created_on": "2018-05-30T07:09:26.968139+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": null, "type": "issue_comment", "id": 45821245}], "page": 1, "size": 6}