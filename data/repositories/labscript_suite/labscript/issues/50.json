{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript.json"}, "html": {"href": "#!/labscript_suite/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{48848b08-1db5-463b-bbdc-911beadf8bbf}ts=249917"}}, "type": "repository", "name": "labscript", "full_name": "labscript_suite/labscript", "uuid": "{48848b08-1db5-463b-bbdc-911beadf8bbf}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/labscript/issues/50/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/labscript/issues/50.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript/issues/50/watch"}, "comments": {"href": "data/repositories/labscript_suite/labscript/issues/50/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/labscript/issues/50/pseudoclock-wait_delay-is-probably-not"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript/issues/50/vote"}}, "reporter": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "title": "pseudoclock wait_delay is probably not respected", "component": null, "votes": 0, "watches": 1, "content": {"raw": "As per the comment chain in this [pull request](#!/labscript_suite/labscript_devices/pull-requests/50/cicero-opal-kelly-xem3001-pseudoclock/diff#comment-77422362) over on the labscript_devices repository, I suspect that the `wait_delay` attribute of secondary pseudoclocks is not being respected, and thus the master pseudoclock may not wait a sufficient time before emitting a trigger pulse to resume the shot.\r\n\r\nThis would result in secondary pseudoclocks becoming out of sync with the primary, which may explain the occasional dropped shots seen in the monash spinor BEC lab.\r\n\r\nWe should check to see if it is easy to fix in labscript 2, or if we need to wait until labscript 3 in order to correctly offset instruction times for secondary pseudoclocks.", "markup": "markdown", "html": "<p>As per the comment chain in this <a data-is-external-link=\"true\" href=\"#!/labscript_suite/labscript_devices/pull-requests/50/cicero-opal-kelly-xem3001-pseudoclock/diff#comment-77422362\" rel=\"nofollow\">pull request</a> over on the labscript_devices repository, I suspect that the <code>wait_delay</code> attribute of secondary pseudoclocks is not being respected, and thus the master pseudoclock may not wait a sufficient time before emitting a trigger pulse to resume the shot.</p>\n<p>This would result in secondary pseudoclocks becoming out of sync with the primary, which may explain the occasional dropped shots seen in the monash spinor BEC lab.</p>\n<p>We should check to see if it is easy to fix in labscript 2, or if we need to wait until labscript 3 in order to correctly offset instruction times for secondary pseudoclocks.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2018-10-30T04:44:22.020913+00:00", "milestone": null, "updated_on": "2018-10-30T04:44:22.020913+00:00", "type": "issue", "id": 50}