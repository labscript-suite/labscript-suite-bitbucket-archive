{"pagelen": 50, "values": [{"update": {"description": "This moves most of the state calculation to numpy and there by reduces compile time for sequences with many samples drastically.\r\n\r\nThis script went from 2681 ms to 313 ms compile time with this change:\r\n\r\n```Python\r\nstart()\r\nt = 0\r\nduration =  200 * ms\r\nperiode = 1 * us\r\nsequence = [(0, 1), (periode/2.0, 0)]\r\nsequence2 = [(0, 0), (periode/2.0, 1)]\r\nsamplerate = len(sequence)/periode\r\nOutput1.repeat_pulse_sequence(t, duration, sequence, periode, samplerate)\r\nOutput2.repeat_pulse_sequence(t, duration, sequence2, periode, samplerate)\r\nt += duration\r\nstop(t)\r\n```", "title": "Faster pulse_sequence", "destination": {"commit": {"hash": "028edc9b979e", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript/commit/028edc9b979e.json"}, "html": {"href": "#!/labscript_suite/labscript/commits/028edc9b979e"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript.json"}, "html": {"href": "#!/labscript_suite/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{48848b08-1db5-463b-bbdc-911beadf8bbf}ts=249917"}}, "type": "repository", "name": "labscript", "full_name": "labscript_suite/labscript", "uuid": "{48848b08-1db5-463b-bbdc-911beadf8bbf}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "f4461240942f", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/PhyNerd/labscript/commit/f4461240942f"}, "html": {"href": "#!/PhyNerd/labscript/commits/f4461240942f"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/PhyNerd/labscript"}, "html": {"href": "#!/PhyNerd/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7ae7c0f3-4119-4307-8b3f-652003761155}ts=python"}}, "type": "repository", "name": "labscript", "full_name": "PhyNerd/labscript", "uuid": "{7ae7c0f3-4119-4307-8b3f-652003761155}"}, "branch": {"name": "pulse_sequence_performance"}}, "state": "MERGED", "author": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "date": "2017-10-03T00:02:07.200582+00:00"}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21"}}, "title": "Faster pulse_sequence"}}, {"approval": {"date": "2017-10-03T00:01:44.061868+00:00", "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21"}}, "title": "Faster pulse_sequence"}, "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21"}}, "title": "Faster pulse_sequence"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21/comments/45675288.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21/_/diff#comment-45675288"}}, "parent": {"id": 45675113, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21/comments/45675113.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21/_/diff#comment-45675113"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21"}}, "title": "Faster pulse_sequence"}, "content": {"raw": "Ok so numpy does different things on different versions here it seems. I'll also add a cast to array.\n\n\u200c\n\n![test.png](https://bitbucket.org/repo/g75Ex9/images/2687732020-test.png 'test.png')\n\nUpdate: should be fixed now", "markup": "markdown", "html": "<p>Ok so numpy does different things on different versions here it seems. I'll also add a cast to array.</p>\n<p>\u200c</p>\n<p><img alt=\"test.png\" src=\"data/bitbucket.org/repo/g75Ex9/images/2687732020-test.png\" title=\"test.png\" /></p>\n<p>Update: should be fixed now</p>", "type": "rendered"}, "created_on": "2017-09-25T06:04:30.653032+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-09-25T06:50:24.313861+00:00", "type": "pullrequest_comment", "id": 45675288}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21"}}, "title": "Faster pulse_sequence"}}, {"update": {"description": "This moves most of the state calculation to numpy and there by reduces compile time for sequences with many samples drastically.\r\n\r\nThis script went from 2681 ms to 313 ms compile time with this change:\r\n\r\n```Python\r\nstart()\r\nt = 0\r\nduration =  200 * ms\r\nperiode = 1 * us\r\nsequence = [(0, 1), (periode/2.0, 0)]\r\nsequence2 = [(0, 0), (periode/2.0, 1)]\r\nsamplerate = len(sequence)/periode\r\nOutput1.repeat_pulse_sequence(t, duration, sequence, periode, samplerate)\r\nOutput2.repeat_pulse_sequence(t, duration, sequence2, periode, samplerate)\r\nt += duration\r\nstop(t)\r\n```", "title": "Faster pulse_sequence", "destination": {"commit": {"hash": "028edc9b979e", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript/commit/028edc9b979e.json"}, "html": {"href": "#!/labscript_suite/labscript/commits/028edc9b979e"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript.json"}, "html": {"href": "#!/labscript_suite/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{48848b08-1db5-463b-bbdc-911beadf8bbf}ts=249917"}}, "type": "repository", "name": "labscript", "full_name": "labscript_suite/labscript", "uuid": "{48848b08-1db5-463b-bbdc-911beadf8bbf}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "f4461240942f", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/PhyNerd/labscript/commit/f4461240942f"}, "html": {"href": "#!/PhyNerd/labscript/commits/f4461240942f"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/PhyNerd/labscript"}, "html": {"href": "#!/PhyNerd/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7ae7c0f3-4119-4307-8b3f-652003761155}ts=python"}}, "type": "repository", "name": "labscript", "full_name": "PhyNerd/labscript", "uuid": "{7ae7c0f3-4119-4307-8b3f-652003761155}"}, "branch": {"name": "pulse_sequence_performance"}}, "state": "OPEN", "author": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "date": "2017-09-25T06:48:31.855167+00:00"}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21"}}, "title": "Faster pulse_sequence"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21/comments/45675113.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21/_/diff#comment-45675113"}}, "parent": {"id": 45675008, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21/comments/45675008.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21/_/diff#comment-45675008"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21"}}, "title": "Faster pulse_sequence"}, "content": {"raw": "Oops, I accidentally made a typo in what I wrote above \\(but not the tests I did\\). I meant to show it only works if the time is an array as well as returning an array \\(at least that is what I see in a simple test case on numpy v1.9.1\\)", "markup": "markdown", "html": "<p>Oops, I accidentally made a typo in what I wrote above (but not the tests I did). I meant to show it only works if the time is an array as well as returning an array (at least that is what I see in a simple test case on numpy v1.9.1)</p>", "type": "rendered"}, "created_on": "2017-09-25T06:00:34.573427+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2017-09-25T06:00:34.576197+00:00", "type": "pullrequest_comment", "id": 45675113}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21"}}, "title": "Faster pulse_sequence"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21/comments/45674786.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21/_/diff#comment-45674786"}}, "parent": {"id": 45674406, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21/comments/45674406.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21/_/diff#comment-45674406"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21"}}, "title": "Faster pulse_sequence"}, "content": {"raw": "In a terminal, I've done:\n\n```Python\n>> x = np.array([1,2,3,4])\n>> np.digitize(2.5,x, right=False)\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\nValueError: object of too small depth for desired array\n```\n\nSimilarly, I can do `np.digitize([2.5], x, right=False)` but then I get `array([2])` as the result, and `x[np.digitize(2.5,x, right=False)]` results in `array([3])` as the result \\(and so you need to index it with 0 in order to get a single value out.\n\n\u200c", "markup": "markdown", "html": "<p>In a terminal, I've done:</p>\n<div class=\"codehilite language-Python\"><pre><span></span><span class=\"o\">&gt;&gt;</span> <span class=\"n\">x</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">])</span>\n<span class=\"o\">&gt;&gt;</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">digitize</span><span class=\"p\">(</span><span class=\"mf\">2.5</span><span class=\"p\">,</span><span class=\"n\">x</span><span class=\"p\">,</span> <span class=\"n\">right</span><span class=\"o\">=</span><span class=\"bp\">False</span><span class=\"p\">)</span>\n<span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"p\">):</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;&lt;stdin&gt;&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span>\n<span class=\"ne\">ValueError</span><span class=\"p\">:</span> <span class=\"nb\">object</span> <span class=\"n\">of</span> <span class=\"n\">too</span> <span class=\"n\">small</span> <span class=\"n\">depth</span> <span class=\"k\">for</span> <span class=\"n\">desired</span> <span class=\"n\">array</span>\n</pre></div>\n\n\n<p>Similarly, I can do <code>np.digitize([2.5], x, right=False)</code> but then I get <code>array([2])</code> as the result, and <code>x[np.digitize(2.5,x, right=False)]</code> results in <code>array([3])</code> as the result (and so you need to index it with 0 in order to get a single value out.</p>\n<p>\u200c</p>", "type": "rendered"}, "created_on": "2017-09-25T05:51:43.120830+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2017-09-25T05:59:45.708454+00:00", "type": "pullrequest_comment", "id": 45674786}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21"}}, "title": "Faster pulse_sequence"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21/comments/45675008.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21/_/diff#comment-45675008"}}, "parent": {"id": 45674786, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21/comments/45674786.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21/_/diff#comment-45674786"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21"}}, "title": "Faster pulse_sequence"}, "content": {"raw": "Ok I didn't check if the value was a array or not I just printed it and that gave me a single value. I'll readd the code to check if the input is a array and return a single value if that is the case.", "markup": "markdown", "html": "<p>Ok I didn't check if the value was a array or not I just printed it and that gave me a single value. I'll readd the code to check if the input is a array and return a single value if that is the case.</p>", "type": "rendered"}, "created_on": "2017-09-25T05:57:53.141128+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-09-25T05:58:08.789107+00:00", "type": "pullrequest_comment", "id": 45675008}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21"}}, "title": "Faster pulse_sequence"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21/comments/45674406.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21/_/diff#comment-45674406"}}, "parent": {"id": 45674285, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21/comments/45674285.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21/_/diff#comment-45674285"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21"}}, "title": "Faster pulse_sequence"}, "content": {"raw": "Are you sure? I passed a single value to the function and it worked fine.", "markup": "markdown", "html": "<p>Are you sure? I passed a single value to the function and it worked fine.</p>", "type": "rendered"}, "created_on": "2017-09-25T05:42:06.524652+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-09-25T05:42:06.562160+00:00", "type": "pullrequest_comment", "id": 45674406}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21"}}, "title": "Faster pulse_sequence"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21/comments/45674285.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21/_/diff#comment-45674285"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21"}}, "title": "Faster pulse_sequence"}, "content": {"raw": "This seems to have lost the code that handles the case where `t` is not an array. labscript does not enforce that `t` must be an array \\(in fact [here](#!/labscript_suite/labscript/src/028edc9b979eaf946d1e5fa1a2a4a10a9e8c5e7d/labscript.py?at=default&fileviewer=file-view-default#labscript.py-1102) is an instance where it explicitly passes something that is not an array, I suspect there are others\\).", "markup": "markdown", "html": "<p>This seems to have lost the code that handles the case where <code>t</code> is not an array. labscript does not enforce that <code>t</code> must be an array (in fact <a data-is-external-link=\"true\" href=\"#!/labscript_suite/labscript/src/028edc9b979eaf946d1e5fa1a2a4a10a9e8c5e7d/labscript.py?at=default&amp;fileviewer=file-view-default#labscript.py-1102\" rel=\"nofollow\">here</a> is an instance where it explicitly passes something that is not an array, I suspect there are others).</p>", "type": "rendered"}, "created_on": "2017-09-25T05:38:40.757693+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2017-09-25T05:38:40.760761+00:00", "type": "pullrequest_comment", "id": 45674285}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21"}}, "title": "Faster pulse_sequence"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21/comments/45330567.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21/_/diff#comment-45330567"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21"}}, "title": "Faster pulse_sequence"}, "content": {"raw": "I've timed running the old `pulse_function` vs the new one. Both functions scale linearly but the new function scales much better:\n\n![Figure\\_1.png](https://bitbucket.org/repo/g75Ex9/images/1616807758-Figure\\_1.png 'Figure\\_1.png')\n\n\u200c\n\nIf anyone wants to reproduce this here is the code: [https://pastebin.com/K0CB6DAU](https://pastebin.com/K0CB6DAU)", "markup": "markdown", "html": "<p>I've timed running the old <code>pulse_function</code> vs the new one. Both functions scale linearly but the new function scales much better:</p>\n<p><img alt=\"Figure_1.png\" src=\"data/bitbucket.org/repo/g75Ex9/images/1616807758-Figure951.png\" title=\"Figure_1.png\" /></p>\n<p>\u200c</p>\n<p>If anyone wants to reproduce this here is the code: <a data-is-external-link=\"true\" href=\"https://pastebin.com/K0CB6DAU\" rel=\"nofollow\">https://pastebin.com/K0CB6DAU</a></p>", "type": "rendered"}, "created_on": "2017-09-19T18:52:48.902871+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-09-19T18:52:48.978271+00:00", "type": "pullrequest_comment", "id": 45330567}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21"}}, "title": "Faster pulse_sequence"}}, {"update": {"description": "This moves most of the state calculation to numpy and there by reduces compile time for sequences with many samples drastically.\r\n\r\nThis script went from 2681 ms to 313 ms compile time with this change:\r\n\r\n```Python\r\nstart()\r\nt = 0\r\nduration =  200 * ms\r\nperiode = 1 * us\r\nsequence = [(0, 1), (periode/2.0, 0)]\r\nsequence2 = [(0, 0), (periode/2.0, 1)]\r\nsamplerate = len(sequence)/periode\r\nOutput1.repeat_pulse_sequence(t, duration, sequence, periode, samplerate)\r\nOutput2.repeat_pulse_sequence(t, duration, sequence2, periode, samplerate)\r\nt += duration\r\nstop(t)\r\n```", "title": "Faster pulse_sequence", "destination": {"commit": {"hash": "028edc9b979e", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript/commit/028edc9b979e.json"}, "html": {"href": "#!/labscript_suite/labscript/commits/028edc9b979e"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript.json"}, "html": {"href": "#!/labscript_suite/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{48848b08-1db5-463b-bbdc-911beadf8bbf}ts=249917"}}, "type": "repository", "name": "labscript", "full_name": "labscript_suite/labscript", "uuid": "{48848b08-1db5-463b-bbdc-911beadf8bbf}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "216332438205", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/PhyNerd/labscript/commit/216332438205"}, "html": {"href": "#!/PhyNerd/labscript/commits/216332438205"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/PhyNerd/labscript"}, "html": {"href": "#!/PhyNerd/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7ae7c0f3-4119-4307-8b3f-652003761155}ts=python"}}, "type": "repository", "name": "labscript", "full_name": "PhyNerd/labscript", "uuid": "{7ae7c0f3-4119-4307-8b3f-652003761155}"}, "branch": {"name": "pulse_sequence_performance"}}, "state": "OPEN", "author": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "date": "2017-09-19T08:22:37.508927+00:00"}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21"}}, "title": "Faster pulse_sequence"}}, {"update": {"description": "This moves most of the state calculation to numpy and there by reduces compile time for sequences with many samples drastically.\r\n\r\nThis script went from 2681 ms to 313 ms compile time with this change:\r\n\r\n```Python\r\nstart()\r\nt = 0\r\nduration =  200 * ms\r\nperiode = 1 * us\r\nsequence = [(0, 1), (periode/2.0, 0)]\r\nsequence2 = [(0, 0), (periode/2.0, 1)]\r\nsamplerate = len(sequence)/periode\r\nOutput1.repeat_pulse_sequence(t, duration, sequence, periode, samplerate)\r\nOutput2.repeat_pulse_sequence(t, duration, sequence2, periode, samplerate)\r\nt += duration\r\nstop(t)\r\n```", "title": "Faster pulse_sequence", "destination": {"commit": {"hash": "028edc9b979e", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript/commit/028edc9b979e.json"}, "html": {"href": "#!/labscript_suite/labscript/commits/028edc9b979e"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript.json"}, "html": {"href": "#!/labscript_suite/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{48848b08-1db5-463b-bbdc-911beadf8bbf}ts=249917"}}, "type": "repository", "name": "labscript", "full_name": "labscript_suite/labscript", "uuid": "{48848b08-1db5-463b-bbdc-911beadf8bbf}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "d36df8e35b4d", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/PhyNerd/labscript/commit/d36df8e35b4d"}, "html": {"href": "#!/PhyNerd/labscript/commits/d36df8e35b4d"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/PhyNerd/labscript"}, "html": {"href": "#!/PhyNerd/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7ae7c0f3-4119-4307-8b3f-652003761155}ts=python"}}, "type": "repository", "name": "labscript", "full_name": "PhyNerd/labscript", "uuid": "{7ae7c0f3-4119-4307-8b3f-652003761155}"}, "branch": {"name": "pulse_sequence_performance"}}, "state": "OPEN", "author": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "date": "2017-09-15T13:10:49.548870+00:00"}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21"}}, "title": "Faster pulse_sequence"}}, {"update": {"description": "This moves most of the state calculation to numpy and there by reduces compile time for sequences with many samples drastically.\r\n\r\nThis script went from 2681 ms to 313 ms compile time with this change:\r\n\r\n```Python\r\nstart()\r\nt = 0\r\nduration =  200 * ms\r\nperiode = 1 * us\r\nsequence = [(0, 1), (periode/2.0, 0)]\r\nsequence2 = [(0, 0), (periode/2.0, 1)]\r\nsamplerate = len(sequence)/periode\r\nOutput1.repeat_pulse_sequence(t, duration, sequence, periode, samplerate)\r\nOutput2.repeat_pulse_sequence(t, duration, sequence2, periode, samplerate)\r\nt += duration\r\nstop(t)\r\n```", "title": "Faster pulse_sequence", "destination": {"commit": {"hash": "028edc9b979e", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript/commit/028edc9b979e.json"}, "html": {"href": "#!/labscript_suite/labscript/commits/028edc9b979e"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript.json"}, "html": {"href": "#!/labscript_suite/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{48848b08-1db5-463b-bbdc-911beadf8bbf}ts=249917"}}, "type": "repository", "name": "labscript", "full_name": "labscript_suite/labscript", "uuid": "{48848b08-1db5-463b-bbdc-911beadf8bbf}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "d36df8e35b4d", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/PhyNerd/labscript/commit/d36df8e35b4d"}, "html": {"href": "#!/PhyNerd/labscript/commits/d36df8e35b4d"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/PhyNerd/labscript"}, "html": {"href": "#!/PhyNerd/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7ae7c0f3-4119-4307-8b3f-652003761155}ts=python"}}, "type": "repository", "name": "labscript", "full_name": "PhyNerd/labscript", "uuid": "{7ae7c0f3-4119-4307-8b3f-652003761155}"}, "branch": {"name": "pulse_sequence_performance"}}, "state": "OPEN", "author": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "date": "2017-09-15T13:10:49.476542+00:00"}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/21"}}, "title": "Faster pulse_sequence"}}]}