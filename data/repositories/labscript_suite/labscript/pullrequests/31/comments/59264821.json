{"links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/31/comments/59264821.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/31/_/diff#comment-59264821"}}, "parent": {"id": 59102971, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/31/comments/59102971.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/31/_/diff#comment-59102971"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 31, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/31.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/31"}}, "title": "Updates to RemoteWorker and similar classes"}, "content": {"raw": "Hi Ian,\n\nI've taken your comments on board and updated the pull request. The initial reason for the nested syntax proposed was so that we could represent arbitrarily complex network topologies \\(which many labs are unable to control due to institution wide enforced IT policies\\).\n\nIn order to keep this feature, and use the flatter syntax you \\(and others\\) propose, I am now moving the definition of the network hierarchy into the definitions of the `RemoteBLACS`objects in much the same way that we do when defining the hierarchy of devices via their clocking signals.\n\nAs such, the interface now becomes:\n\n```python\n# remote devices\r\nRemoteBLACS('raspberry_pi_1', 'rpi1.physics.monash.edu')\r\nRemoteBLACS('raspberry_pi_2', '192.168.0.13', parent=raspberry_pi_1) # pi-2 on private network only accessible to pi-1\r\nRemoteBLACS('raspberry_pi_3', 'rpi3.physics.monash.edu')\r\n\r\n# Connection Table\r\nNovaTechDDS9m(name='n1', com_port='COM1', gui=raspberry_pi_1) # worker and GUI on same machine\nNovaTechDDS9m(name='n2', com_port='COM1', gui=raspberry_pi_1, worker=raspberry_pi_2) # worker and GUI on separate remote machines\nNovaTechDDS9m(name='n3', com_port='COM1', worker=raspberry_pi_3) # only worker on remote machine\n```\n\nThis syntax also has additional benefits such as allowing us to explicitly enforce that the worker is a child \\(as far as the network topology goes\\) of the GUI and makes it clear \\(hopefully\\) that hostnames of remote PCs should be specified as the external hostname \\(and port\\) that the parent should connect on.", "markup": "markdown", "html": "<p>Hi Ian,</p>\n<p>I've taken your comments on board and updated the pull request. The initial reason for the nested syntax proposed was so that we could represent arbitrarily complex network topologies (which many labs are unable to control due to institution wide enforced IT policies).</p>\n<p>In order to keep this feature, and use the flatter syntax you (and others) propose, I am now moving the definition of the network hierarchy into the definitions of the <code>RemoteBLACS</code>objects in much the same way that we do when defining the hierarchy of devices via their clocking signals.</p>\n<p>As such, the interface now becomes:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"c1\"># remote devices</span>\n<span class=\"n\">RemoteBLACS</span><span class=\"p\">(</span><span class=\"s1\">&#39;raspberry_pi_1&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;rpi1.physics.monash.edu&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">RemoteBLACS</span><span class=\"p\">(</span><span class=\"s1\">&#39;raspberry_pi_2&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;192.168.0.13&#39;</span><span class=\"p\">,</span> <span class=\"n\">parent</span><span class=\"o\">=</span><span class=\"n\">raspberry_pi_1</span><span class=\"p\">)</span> <span class=\"c1\"># pi-2 on private network only accessible to pi-1</span>\n<span class=\"n\">RemoteBLACS</span><span class=\"p\">(</span><span class=\"s1\">&#39;raspberry_pi_3&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;rpi3.physics.monash.edu&#39;</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Connection Table</span>\n<span class=\"n\">NovaTechDDS9m</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;n1&#39;</span><span class=\"p\">,</span> <span class=\"n\">com_port</span><span class=\"o\">=</span><span class=\"s1\">&#39;COM1&#39;</span><span class=\"p\">,</span> <span class=\"n\">gui</span><span class=\"o\">=</span><span class=\"n\">raspberry_pi_1</span><span class=\"p\">)</span> <span class=\"c1\"># worker and GUI on same machine</span>\n<span class=\"n\">NovaTechDDS9m</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;n2&#39;</span><span class=\"p\">,</span> <span class=\"n\">com_port</span><span class=\"o\">=</span><span class=\"s1\">&#39;COM1&#39;</span><span class=\"p\">,</span> <span class=\"n\">gui</span><span class=\"o\">=</span><span class=\"n\">raspberry_pi_1</span><span class=\"p\">,</span> <span class=\"n\">worker</span><span class=\"o\">=</span><span class=\"n\">raspberry_pi_2</span><span class=\"p\">)</span> <span class=\"c1\"># worker and GUI on separate remote machines</span>\n<span class=\"n\">NovaTechDDS9m</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;n3&#39;</span><span class=\"p\">,</span> <span class=\"n\">com_port</span><span class=\"o\">=</span><span class=\"s1\">&#39;COM1&#39;</span><span class=\"p\">,</span> <span class=\"n\">worker</span><span class=\"o\">=</span><span class=\"n\">raspberry_pi_3</span><span class=\"p\">)</span> <span class=\"c1\"># only worker on remote machine</span>\n</pre></div>\n\n\n<p>This syntax also has additional benefits such as allowing us to explicitly enforce that the worker is a child (as far as the network topology goes) of the GUI and makes it clear (hopefully) that hostnames of remote PCs should be specified as the external hostname (and port) that the parent should connect on.</p>", "type": "rendered"}, "created_on": "2018-03-19T23:44:50.018430+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2018-03-19T23:44:50.025769+00:00", "type": "pullrequest_comment", "id": 59264821}