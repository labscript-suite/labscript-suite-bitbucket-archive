{"links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/9/comments/39417115.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/9/_/diff#comment-39417115"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 9, "links": {"self": {"href": "data/repositories/labscript_suite/labscript/pullrequests/9.json"}, "html": {"href": "#!/labscript_suite/labscript/pull-requests/9"}}, "title": "Check ramp collision and shutter delays"}, "content": {"raw": "You should probably move to initialising your shutters at `shutter1.close(shutter1.t0)` (or similarly `open(...)` if you want to open them). The `t0` parameter of each object will contain the earliest time that the channel can be commanded (based on trigger delays, etc. if you are on a secondary pseudoclock). For channels on the master pseudoclock, I believe it is set to 0 (so would be equivalent for you, but more maintainable in the long run)\n\nRight now this doesn't take into account the shutter delay, but I think we should probably modify the `t0` parameter of shutters so that it does include the delay (this is tricky though because it depends on whether it is an open or close event since the delay may be different...we might need to wait to fix that particular issue with labscript v3 whose aim will be to introduce a better instruction class that will not throw away information about times as triggers/delays/etc are taken into account...I think this is why the comment in issue #2 is \"aim to fix in labscript 2.0\" (which actually means labscript v3). It's too difficult to fix correctly, and efficiently without better labscript internals.)", "markup": "markdown", "html": "<p>You should probably move to initialising your shutters at <code>shutter1.close(shutter1.t0)</code> (or similarly <code>open(...)</code> if you want to open them). The <code>t0</code> parameter of each object will contain the earliest time that the channel can be commanded (based on trigger delays, etc. if you are on a secondary pseudoclock). For channels on the master pseudoclock, I believe it is set to 0 (so would be equivalent for you, but more maintainable in the long run)</p>\n<p>Right now this doesn't take into account the shutter delay, but I think we should probably modify the <code>t0</code> parameter of shutters so that it does include the delay (this is tricky though because it depends on whether it is an open or close event since the delay may be different...we might need to wait to fix that particular issue with labscript v3 whose aim will be to introduce a better instruction class that will not throw away information about times as triggers/delays/etc are taken into account...I think this is why the comment in issue <a href=\"#!/labscript_suite/labscript/issues/2/shutter-commands-can-be-reordered-due-to\" rel=\"nofollow\" title=\"Shutter commands can be reordered due to shutter delays\" class=\"ap-connect-link\">#2</a> is \"aim to fix in labscript 2.0\" (which actually means labscript v3). It's too difficult to fix correctly, and efficiently without better labscript internals.)</p>", "type": "rendered"}, "created_on": "2017-06-23T01:41:39.138039+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2017-06-23T01:41:39.140448+00:00", "type": "pullrequest_comment", "id": 39417115}