{"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/issues/1/comments/53372016.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/issues/1#comment-53372016"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/issues/1.json"}}, "type": "issue", "id": 1, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices.json"}, "html": {"href": "#!/labscript_suite/labscript_devices"}, "avatar": {"href": "data/bytebucket.org/ravatar/{30c94cb1-feec-4534-8885-92452023c9c9}ts=python"}}, "type": "repository", "name": "labscript_devices", "full_name": "labscript_suite/labscript_devices", "uuid": "{30c94cb1-feec-4534-8885-92452023c9c9}"}, "title": "Bug in NI_PCIe_6363 extract measurements"}, "content": {"raw": "This is still occurring in the new unified \u201cNI\\_DAQmx\u201d device code. \n\n```python\nTraceback (most recent call last):\r\n  File \"C:\\labscript_suite\\labscript_devices\\NI_DAQmx\\blacs_workers.py\", line 592, in transition_to_manual\r\n    self.extract_measurements(raw_data, waits_in_use)\r\n  File \"C:\\labscript_suite\\labscript_devices\\NI_DAQmx\\blacs_workers.py\", line 652, in extract_measurements\r\n    data['t'] = times\r\nValueError: could not broadcast input array from shape (1409738) into shape (1409500)\n```\n\nIt seems to just randomly occur, and after resetting the device it is usually fine to continue running the same shot again. The last few days it\u2019s been happening a few times a day, the only thing I\u2019ve changed in that time is that the total length of the experiments that I\u2019m running has grown, and so more data is being acquired for the duration.", "markup": "markdown", "html": "<p>This is still occurring in the new unified \u201cNI_DAQmx\u201d device code. </p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"p\">):</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\labscript_suite\\labscript_devices\\NI_DAQmx</span><span class=\"se\">\\b</span><span class=\"s2\">lacs_workers.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">592</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">transition_to_manual</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">extract_measurements</span><span class=\"p\">(</span><span class=\"n\">raw_data</span><span class=\"p\">,</span> <span class=\"n\">waits_in_use</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\labscript_suite\\labscript_devices\\NI_DAQmx</span><span class=\"se\">\\b</span><span class=\"s2\">lacs_workers.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">652</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">extract_measurements</span>\n    <span class=\"n\">data</span><span class=\"p\">[</span><span class=\"s1\">&#39;t&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">times</span>\n<span class=\"ne\">ValueError</span><span class=\"p\">:</span> <span class=\"n\">could</span> <span class=\"ow\">not</span> <span class=\"n\">broadcast</span> <span class=\"nb\">input</span> <span class=\"n\">array</span> <span class=\"kn\">from</span> <span class=\"nn\">shape</span> <span class=\"p\">(</span><span class=\"mi\">1409738</span><span class=\"p\">)</span> <span class=\"n\">into</span> <span class=\"n\">shape</span> <span class=\"p\">(</span><span class=\"mi\">1409500</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>It seems to just randomly occur, and after resetting the device it is usually fine to continue running the same shot again. The last few days it\u2019s been happening a few times a day, the only thing I\u2019ve changed in that time is that the total length of the experiments that I\u2019m running has grown, and so more data is being acquired for the duration.</p>", "type": "rendered"}, "created_on": "2019-08-12T05:22:44.880056+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": null, "type": "issue_comment", "id": 53372016}