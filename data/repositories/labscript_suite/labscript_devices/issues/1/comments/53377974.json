{"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/issues/1/comments/53377974.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/issues/1#comment-53377974"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/issues/1.json"}}, "type": "issue", "id": 1, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices.json"}, "html": {"href": "#!/labscript_suite/labscript_devices"}, "avatar": {"href": "data/bytebucket.org/ravatar/{30c94cb1-feec-4534-8885-92452023c9c9}ts=python"}}, "type": "repository", "name": "labscript_devices", "full_name": "labscript_suite/labscript_devices", "uuid": "{30c94cb1-feec-4534-8885-92452023c9c9}"}, "title": "Bug in NI_PCIe_6363 extract measurements"}, "content": {"raw": "So I'm guessing that it could be due to a few things:\n\n* Your acquisition looks like it's probably as long as the experiment?\n* We are not referencing our acquisition clock to 10 MHz\n* The variable delay between experiment ending and acquisition stopping \\(which happens in software time\\) doesn't always quite make up for discrepancies in the AI clock frequency vs pseudoclocks reference frequency\n\nWe should probably put something in the code that catches \\(and handles\\) this nicely anyway, but I would be interested to see if it was possible to reference the AI clock to 10 MHz and if it fixed the problem \\(because in theory, the acquisition should run significantly longer than the shot, but it seems like it's only just about the same length\\)\n\n\u200c\n\nFYI: I think you can do this by configuring the external reference clock to be fed in via a PFI. I'm unclear if you can configure this via MAX permanently or if you need to add in some daqmx calls to set the source and rate. It is not well documented in the manual!", "markup": "markdown", "html": "<p>So I'm guessing that it could be due to a few things:</p>\n<ul>\n<li>Your acquisition looks like it's probably as long as the experiment?</li>\n<li>We are not referencing our acquisition clock to 10 MHz</li>\n<li>The variable delay between experiment ending and acquisition stopping (which happens in software time) doesn't always quite make up for discrepancies in the AI clock frequency vs pseudoclocks reference frequency</li>\n</ul>\n<p>We should probably put something in the code that catches (and handles) this nicely anyway, but I would be interested to see if it was possible to reference the AI clock to 10 MHz and if it fixed the problem (because in theory, the acquisition should run significantly longer than the shot, but it seems like it's only just about the same length)</p>\n<p>\u200c</p>\n<p>FYI: I think you can do this by configuring the external reference clock to be fed in via a PFI. I'm unclear if you can configure this via MAX permanently or if you need to add in some daqmx calls to set the source and rate. It is not well documented in the manual!</p>", "type": "rendered"}, "created_on": "2019-08-12T12:54:43.378778+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{0147401a-13ed-4e39-a0d0-63108c18738b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D"}, "html": {"href": "https://bitbucket.org/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/fa0698c306b3470c00717c146b5296e9d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "philipstarkey", "type": "user", "account_id": "557058:2f99420c-1dbd-4837-952c-82c421b8fbdd"}, "updated_on": "2019-08-12T13:55:58.074591+00:00", "type": "issue_comment", "id": 53377974}