{"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/issues/1/comments/53380531.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/issues/1#comment-53380531"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/issues/1.json"}}, "type": "issue", "id": 1, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices.json"}, "html": {"href": "#!/labscript_suite/labscript_devices"}, "avatar": {"href": "data/bytebucket.org/ravatar/{30c94cb1-feec-4534-8885-92452023c9c9}ts=python"}}, "type": "repository", "name": "labscript_devices", "full_name": "labscript_suite/labscript_devices", "uuid": "{30c94cb1-feec-4534-8885-92452023c9c9}"}, "title": "Bug in NI_PCIe_6363 extract measurements"}, "content": {"raw": "Slices don't raise an `IndexError` if the final index is out of bounds, they just return what they got. Questionable design decision by Python maybe, but that's how it is, so that's probably why we don't see an error until later.\n\nWe can suppress the error just by truncating the time array to the length of however much data there is:\n```python\ndata['t'] = times[:len(values)]\n```\n\nAnd it's just the case that the data can't be trusted to have more accurate timing than what the card is capable of unless external referencing is implemented as Phil mentions. So the above is obviously a lie, but only because the measurements are inaccurate to that degree anyway, so it's not so bad.", "markup": "markdown", "html": "<p>Slices don't raise an <code>IndexError</code> if the final index is out of bounds, they just return what they got. Questionable design decision by Python maybe, but that's how it is, so that's probably why we don't see an error until later.</p>\n<p>We can suppress the error just by truncating the time array to the length of however much data there is:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">data</span><span class=\"p\">[</span><span class=\"s1\">&#39;t&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">times</span><span class=\"p\">[:</span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">values</span><span class=\"p\">)]</span>\n</pre></div>\n\n\n<p>And it's just the case that the data can't be trusted to have more accurate timing than what the card is capable of unless external referencing is implemented as Phil mentions. So the above is obviously a lie, but only because the measurements are inaccurate to that degree anyway, so it's not so bad.</p>", "type": "rendered"}, "created_on": "2019-08-12T15:56:13.007310+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-08-12T15:56:26.522348+00:00", "type": "issue_comment", "id": 53380531}