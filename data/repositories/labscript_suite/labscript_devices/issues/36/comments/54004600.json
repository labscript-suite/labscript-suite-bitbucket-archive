{"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/issues/36/comments/54004600.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/issues/36#comment-54004600"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/issues/36.json"}}, "type": "issue", "id": 36, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices.json"}, "html": {"href": "#!/labscript_suite/labscript_devices"}, "avatar": {"href": "data/bytebucket.org/ravatar/{30c94cb1-feec-4534-8885-92452023c9c9}ts=python"}}, "type": "repository", "name": "labscript_devices", "full_name": "labscript_suite/labscript_devices", "uuid": "{30c94cb1-feec-4534-8885-92452023c9c9}"}, "title": "BLACS hang with continuous camera acquisitions"}, "content": {"raw": "I was also simultaneously investigating along these lines. The relevant Qt code for repainting widgets is [here](https://github.com/qt/qtbase/blob/1e310b5a4508f25a59f0e54aea8636f38f17db44/src/widgets/kernel/qwidgetbackingstore.cpp#L474) from what I can tell. And it\u2019s linked to monitor refresh rate too, which may explain why it seemed to be fps related. I suggest updating qtutils inmain\\(\\_later\\) to allow an optional priority and to set it low \\(lower than Qt.LowEventPriority\\) for those specific update calls.\n\nAlternatively we could have all of our inmain\\(\\_later\\) calls be low priority, but I\u2019m uncertain if that would slow down our code more than we want\u2026", "markup": "markdown", "html": "<p>I was also simultaneously investigating along these lines. The relevant Qt code for repainting widgets is <a data-is-external-link=\"true\" href=\"https://github.com/qt/qtbase/blob/1e310b5a4508f25a59f0e54aea8636f38f17db44/src/widgets/kernel/qwidgetbackingstore.cpp#L474\" rel=\"nofollow\">here</a> from what I can tell. And it\u2019s linked to monitor refresh rate too, which may explain why it seemed to be fps related. I suggest updating qtutils inmain(_later) to allow an optional priority and to set it low (lower than Qt.LowEventPriority) for those specific update calls.</p>\n<p>Alternatively we could have all of our inmain(_later) calls be low priority, but I\u2019m uncertain if that would slow down our code more than we want\u2026</p>", "type": "rendered"}, "created_on": "2019-09-20T17:10:28.244222+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{0147401a-13ed-4e39-a0d0-63108c18738b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D"}, "html": {"href": "https://bitbucket.org/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/fa0698c306b3470c00717c146b5296e9d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "philipstarkey", "type": "user", "account_id": "557058:2f99420c-1dbd-4837-952c-82c421b8fbdd"}, "updated_on": null, "type": "issue_comment", "id": 54004600}