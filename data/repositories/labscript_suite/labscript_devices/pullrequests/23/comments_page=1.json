{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/23/comments/58403900.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/23/_/diff#comment-58403900"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 23, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/23.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/23"}}, "title": "Novatech default baudrate"}, "content": {"raw": "note that some changes are due to me since I did manual merging with hg graft - I changed the strings to be explicitly bytestrings to be friendlier to the upcoming Python 3 changes, I changed the way of indicating \"no default baud rate\" to `None` instead of 0, and I added backward compatibility about the BLACS connection.\n\nRegarding the BLACS connection: in 2014 I changed it to be a `COM_port,baudrate` tuple, and now that there are more settings everything is in the connection table properties and we could remove the baudrate from the BLACS_connection. In fact, in this pull request the com port is in connection table properties too, and the backward compatibility is only even looking at BLACS_connection if it doesn't get everything it needs from the connection table properties. (but BLACS won't make a tab unless the BLACS connection is a nonempty string)", "markup": "markdown", "html": "<p>note that some changes are due to me since I did manual merging with hg graft - I changed the strings to be explicitly bytestrings to be friendlier to the upcoming Python 3 changes, I changed the way of indicating \"no default baud rate\" to <code>None</code> instead of 0, and I added backward compatibility about the BLACS connection.</p>\n<p>Regarding the BLACS connection: in 2014 I changed it to be a <code>COM_port,baudrate</code> tuple, and now that there are more settings everything is in the connection table properties and we could remove the baudrate from the BLACS_connection. In fact, in this pull request the com port is in connection table properties too, and the backward compatibility is only even looking at BLACS_connection if it doesn't get everything it needs from the connection table properties. (but BLACS won't make a tab unless the BLACS connection is a nonempty string)</p>", "type": "rendered"}, "created_on": "2018-03-09T12:06:33.102671+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2018-03-09T12:06:33.106244+00:00", "type": "pullrequest_comment", "id": 58403900}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/23/comments/58405782.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/23/_/diff#comment-58405782"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 23, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/23.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/23"}}, "title": "Novatech default baudrate"}, "content": {"raw": "If you are interested I've worked out a general way to configure any baud rate even when the current baud rate is unknown for our Novatech 409Bs. The code is [here](https://bitbucket.org/dihm/naqslab_devices/src/f752216883e46e2392437d1c795aafa29135a7d1/NovaTechDDS409B_AC.py?at=default&fileviewer=file-view-default#NovaTechDDS409B_AC.py-265) in the worker init\\(\\) method. We've been using it for a while and it seems robust.", "markup": "markdown", "html": "<p>If you are interested I've worked out a general way to configure any baud rate even when the current baud rate is unknown for our Novatech 409Bs. The code is <a data-is-external-link=\"true\" href=\"https://bitbucket.org/dihm/naqslab_devices/src/f752216883e46e2392437d1c795aafa29135a7d1/NovaTechDDS409B_AC.py?at=default&amp;fileviewer=file-view-default#NovaTechDDS409B_AC.py-265\" rel=\"nofollow\">here</a> in the worker init() method. We've been using it for a while and it seems robust.</p>", "type": "rendered"}, "created_on": "2018-03-09T12:26:16.629649+00:00", "user": {"display_name": "David Meyer", "uuid": "{8df655d6-8661-4957-b4ba-669cef19bf2d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D"}, "html": {"href": "https://bitbucket.org/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2a4efe81a17e5aeccdbc4ef2ca2cc463d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDM-0.png"}}, "nickname": "dihm", "type": "user", "account_id": "557058:411f7712-e1fa-438c-b578-0359da2d9f06"}, "updated_on": "2018-03-09T12:26:16.695867+00:00", "type": "pullrequest_comment", "id": 58405782}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/23/comments/94764030.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/23/_/diff#comment-94764030"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 23, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/23.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/23"}}, "title": "Novatech default baudrate"}, "content": {"raw": "Hi David,\n\nI started testing this pull request\u2019s code today and got tripped up a bit, something about it is unreliable, even though I had though that all the kinks were worked out. I may steal your code to try and make talking to the device more robust, if that\u2019s OK!", "markup": "markdown", "html": "<p>Hi David,</p>\n<p>I started testing this pull request\u2019s code today and got tripped up a bit, something about it is unreliable, even though I had though that all the kinks were worked out. I may steal your code to try and make talking to the device more robust, if that\u2019s OK!</p>", "type": "rendered"}, "created_on": "2019-03-13T01:59:51.557857+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-03-13T01:59:51.564825+00:00", "type": "pullrequest_comment", "id": 94764030}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/23/comments/94766805.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/23/_/diff#comment-94766805"}}, "parent": {"id": 94764030, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/23/comments/94764030.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/23/_/diff#comment-94764030"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 23, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/23.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/23"}}, "title": "Novatech default baudrate"}, "content": {"raw": "Totally fine by me! Getting the baud rate was definitely annoying since the only way to know what the current baud rate is is to just try them all and see which one gives a sensible response.\n\nWe\u2019ve been using this code without issue for almost a year now. The linked code appears to be up to date with all my bugfixes on that feature, but I won\u2019t guarantee it since I recently ported everything over to the arbitrary subfolder architecture so code diffs are a little harder to track \\(ie the linked file no longer exists in the mainline\\). The spiritual successor is now [here](https://bitbucket.org/dihm/naqslab_devices/src/default/NovaTechDDS/blacs_worker.py).", "markup": "markdown", "html": "<p>Totally fine by me! Getting the baud rate was definitely annoying since the only way to know what the current baud rate is is to just try them all and see which one gives a sensible response.</p>\n<p>We\u2019ve been using this code without issue for almost a year now. The linked code appears to be up to date with all my bugfixes on that feature, but I won\u2019t guarantee it since I recently ported everything over to the arbitrary subfolder architecture so code diffs are a little harder to track (ie the linked file no longer exists in the mainline). The spiritual successor is now <a data-is-external-link=\"true\" href=\"https://bitbucket.org/dihm/naqslab_devices/src/default/NovaTechDDS/blacs_worker.py\" rel=\"nofollow\">here</a>.</p>", "type": "rendered"}, "created_on": "2019-03-13T03:02:41.133264+00:00", "user": {"display_name": "David Meyer", "uuid": "{8df655d6-8661-4957-b4ba-669cef19bf2d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D"}, "html": {"href": "https://bitbucket.org/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2a4efe81a17e5aeccdbc4ef2ca2cc463d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDM-0.png"}}, "nickname": "dihm", "type": "user", "account_id": "557058:411f7712-e1fa-438c-b578-0359da2d9f06"}, "updated_on": "2019-03-13T03:02:41.205326+00:00", "type": "pullrequest_comment", "id": 94766805}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/23/comments/94768696.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/23/_/diff#comment-94768696"}}, "parent": {"id": 94766805, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/23/comments/94766805.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/23/_/diff#comment-94766805"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 23, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/23.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/23"}}, "title": "Novatech default baudrate"}, "content": {"raw": "Ah, fantastic. I\u2019ll just look at the successor then. Thanks!", "markup": "markdown", "html": "<p>Ah, fantastic. I\u2019ll just look at the successor then. Thanks!</p>", "type": "rendered"}, "created_on": "2019-03-13T03:41:20.773039+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-03-13T03:41:20.784465+00:00", "type": "pullrequest_comment", "id": 94768696}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/23/comments/94893068.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/23/_/diff#comment-94893068"}}, "parent": {"id": 94766805, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/23/comments/94766805.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/23/_/diff#comment-94766805"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 23, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/23.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/23"}}, "title": "Novatech default baudrate"}, "content": {"raw": "Thanks David, your method \\(now included in this PR\\) worked an absolute treat.\n\nBasically the remaining issue with this pull request prior to including your method was that restarting a tab in BLACS does _not_ run shutdown code for that tab, even if the tab is not in an error state. Therefore the \u2018default baud rate\u2019 was not being restored upon tab restart, and so the initialisation code could not talk to the device. The only way around this previously was to power cycle the device to restore its default baud rate, but with your trick the startup code can now work with the device in either case. It seems to be working excellently.", "markup": "markdown", "html": "<p>Thanks David, your method (now included in this PR) worked an absolute treat.</p>\n<p>Basically the remaining issue with this pull request prior to including your method was that restarting a tab in BLACS does <em>not</em> run shutdown code for that tab, even if the tab is not in an error state. Therefore the \u2018default baud rate\u2019 was not being restored upon tab restart, and so the initialisation code could not talk to the device. The only way around this previously was to power cycle the device to restore its default baud rate, but with your trick the startup code can now work with the device in either case. It seems to be working excellently.</p>", "type": "rendered"}, "created_on": "2019-03-13T16:56:33.523848+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-03-13T16:56:33.546583+00:00", "type": "pullrequest_comment", "id": 94893068}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/23/comments/94939780.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/23/_/diff#comment-94939780"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 23, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/23.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/23"}}, "title": "Novatech default baudrate"}, "content": {"raw": "I\u2019m pretty happy with this one, and will be using it in the coming weeks. If all goes well I will merge it. Anyone else who wants to test should let me know how it goes, otherwise at some point I will give about a week\u2019s notice and then merge.", "markup": "markdown", "html": "<p>I\u2019m pretty happy with this one, and will be using it in the coming weeks. If all goes well I will merge it. Anyone else who wants to test should let me know how it goes, otherwise at some point I will give about a week\u2019s notice and then merge.</p>", "type": "rendered"}, "created_on": "2019-03-14T01:03:06.550457+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-03-14T01:03:06.557143+00:00", "type": "pullrequest_comment", "id": 94939780}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/23/comments/96090967.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/23/_/diff#comment-96090967"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 23, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/23.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/23"}}, "title": "Novatech default baudrate"}, "content": {"raw": "This is working fine so far. I\u2019ll merge it Monday week \\(April 1st\\) if there are no further comments.", "markup": "markdown", "html": "<p>This is working fine so far. I\u2019ll merge it Monday week (April 1st) if there are no further comments.</p>", "type": "rendered"}, "created_on": "2019-03-22T17:52:08.631437+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-03-22T17:52:08.640430+00:00", "type": "pullrequest_comment", "id": 96090967}], "page": 1, "size": 8}