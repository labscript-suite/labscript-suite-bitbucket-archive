{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/33/comments/66152890.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/33/_/diff#comment-66152890"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 33, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/33.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/33"}}, "title": "Python3 NIBoards"}, "content": {"raw": "We only tested the NIBoard.py wich is a bit modified in our lab as we use NI card with multiple DIO ports and a modified generic NI Class.", "markup": "markdown", "html": "<p>We only tested the NIBoard.py wich is a bit modified in our lab as we use NI card with multiple DIO ports and a modified generic NI Class.</p>", "type": "rendered"}, "created_on": "2018-06-05T06:28:16.378284+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2018-06-05T06:28:16.437519+00:00", "type": "pullrequest_comment", "id": 66152890}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/33/comments/71119649.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_devices/diff/cbillington/labscript_devices:6c639d535f53..52f0e264f612?path=NI_PCIe_6363.py"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/33/_/diff#comment-71119649"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 33, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/33.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/33"}}, "title": "Python3 NIBoards"}, "content": {"raw": "This doesn't work in Python 3. The channel names returned from reading the `acquisitions` table using h5py are byte strings, which cannot be used to index a structured array. Easily amended by decoding `connection`:\n\n```python\nvalues = self.buffered_data[connection.decode()][start_index:end_index+1]\n```\n\nI\u2019ve tested this change on Python 2 and 3. It will need to be applied to the other NI devices.", "markup": "markdown", "html": "<p>This doesn't work in Python 3. The channel names returned from reading the <code>acquisitions</code> table using h5py are byte strings, which cannot be used to index a structured array. Easily amended by decoding <code>connection</code>:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">values</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">buffered_data</span><span class=\"p\">[</span><span class=\"n\">connection</span><span class=\"o\">.</span><span class=\"n\">decode</span><span class=\"p\">()][</span><span class=\"n\">start_index</span><span class=\"p\">:</span><span class=\"n\">end_index</span><span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"p\">]</span>\n</pre></div>\n\n\n<p>I\u2019ve tested this change on Python 2 and 3. It will need to be applied to the other NI devices.</p>", "type": "rendered"}, "created_on": "2018-07-26T10:56:46.439422+00:00", "user": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "inline": {"to": null, "from": 600, "path": "NI_PCIe_6363.py"}, "updated_on": "2018-07-26T10:56:46.449334+00:00", "type": "pullrequest_comment", "id": 71119649}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/33/comments/71454170.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_devices/diff/cbillington/labscript_devices:6c639d535f53..52f0e264f612?path=NI_PCIe_6363.py"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/33/_/diff#comment-71454170"}}, "parent": {"id": 71119649, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/33/comments/71119649.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/33/_/diff#comment-71119649"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 33, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/33.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/33"}}, "title": "Python3 NIBoards"}, "content": {"raw": "Oh I must have missed this line. \n\nIn our modified NI\\_DAQmx file we have solved this similarly:\n\n    values = self.buffered_data[connection.decode('utf-8')][start_index:end_index+1]", "markup": "markdown", "html": "<p>Oh I must have missed this line. </p>\n<p>In our modified NI_DAQmx file we have solved this similarly:</p>\n<div class=\"codehilite\"><pre><span></span>values = self.buffered_data[connection.decode(&#39;utf-8&#39;)][start_index:end_index+1]\n</pre></div>", "type": "rendered"}, "created_on": "2018-07-30T20:28:38.980747+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "inline": {"to": null, "from": null, "path": "NI_PCIe_6363.py"}, "updated_on": "2018-07-30T20:28:39.040982+00:00", "type": "pullrequest_comment", "id": 71454170}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/33/comments/71454363.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_devices/diff/cbillington/labscript_devices:6c639d535f53..52f0e264f612?path=NI_PCIe_6363.py"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/33/_/diff#comment-71454363"}}, "parent": {"id": 71454170, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/33/comments/71454170.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/33/_/diff#comment-71454170"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 33, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/33.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/33"}}, "title": "Python3 NIBoards"}, "content": {"raw": "I'll use `_ensure_str()` (from labscript_utils.connections) to allow for the fact that it might already be a unicode string if we switch to storing unicode strings in the HDF5 file in the future (which we have done in places).", "markup": "markdown", "html": "<p>I'll use <code>_ensure_str()</code> (from labscript_utils.connections) to allow for the fact that it might already be a unicode string if we switch to storing unicode strings in the HDF5 file in the future (which we have done in places).</p>", "type": "rendered"}, "created_on": "2018-07-30T20:30:46.561370+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "inline": {"to": null, "from": null, "path": "NI_PCIe_6363.py"}, "updated_on": "2018-07-30T20:32:06.599741+00:00", "type": "pullrequest_comment", "id": 71454363}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/33/comments/71120020.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/33/_/diff#comment-71120020"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 33, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/33.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/33"}}, "title": "Python3 NIBoards"}, "content": {"raw": "Tested on Python 2 and 3 with NI-PCI-6733 and NI-PCIe-6363. The latter requires the modification to `extract_measurements` detailed in the comment below.", "markup": "markdown", "html": "<p>Tested on Python 2 and 3 with NI-PCI-6733 and NI-PCIe-6363. The latter requires the modification to <code>extract_measurements</code> detailed in the comment below.</p>", "type": "rendered"}, "created_on": "2018-07-26T10:59:49.737325+00:00", "user": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "updated_on": "2018-07-26T10:59:49.749881+00:00", "type": "pullrequest_comment", "id": 71120020}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/33/comments/71568442.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/33/_/diff#comment-71568442"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 33, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/33.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/33"}}, "title": "Python3 NIBoards"}, "content": {"raw": "Thanks for testing! Modifications to extract_measurements have been implemented.\n\nThe fix used here is forward compatible with the acquisitions table in the future storing unicode strings instead of bytestrings for the connection names, acquisition names etc. ", "markup": "markdown", "html": "<p>Thanks for testing! Modifications to extract_measurements have been implemented.</p>\n<p>The fix used here is forward compatible with the acquisitions table in the future storing unicode strings instead of bytestrings for the connection names, acquisition names etc. </p>", "type": "rendered"}, "created_on": "2018-07-31T16:03:27.739685+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2018-07-31T16:03:43.637838+00:00", "type": "pullrequest_comment", "id": 71568442}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/33/comments/71610917.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_devices/diff/cbillington/labscript_devices:461c91cc066e..52f0e264f612?path=NI_PCIe_6363.py"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/33/_/diff#comment-71610917"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 33, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/33.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/33"}}, "title": "Python3 NIBoards"}, "content": {"raw": "This requires a change to the labscript\\_utils `check_version` to 2.7.1 or greater.", "markup": "markdown", "html": "<p>This requires a change to the labscript_utils <code>check_version</code> to 2.7.1 or greater.</p>", "type": "rendered"}, "created_on": "2018-08-01T00:47:19.637798+00:00", "user": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "inline": {"to": 26, "from": null, "path": "NI_PCIe_6363.py"}, "updated_on": "2018-08-01T00:47:19.644463+00:00", "type": "pullrequest_comment", "id": 71610917}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/33/comments/71611375.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_devices/diff/cbillington/labscript_devices:461c91cc066e..52f0e264f612?path=NI_PCIe_6363.py"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/33/_/diff#comment-71611375"}}, "parent": {"id": 71610917, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/33/comments/71610917.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/33/_/diff#comment-71610917"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 33, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/33.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/33"}}, "title": "Python3 NIBoards"}, "content": {"raw": "Good catch - I've bumped labscript_device's version check to 2.7.1 in `__init__.py`", "markup": "markdown", "html": "<p>Good catch - I've bumped labscript_device's version check to 2.7.1 in <code>__init__.py</code></p>", "type": "rendered"}, "created_on": "2018-08-01T00:57:18.582727+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "inline": {"to": null, "from": null, "path": "NI_PCIe_6363.py"}, "updated_on": "2018-08-01T00:57:18.590923+00:00", "type": "pullrequest_comment", "id": 71611375}], "page": 1, "size": 8}