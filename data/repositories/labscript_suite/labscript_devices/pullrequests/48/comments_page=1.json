{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/48/comments/82748510.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/48/_/diff#comment-82748510"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 48, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/48.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/48"}}, "title": "Imaqdx server"}, "content": {"raw": "Merging my updates to this camera server class:\n\n* Permit integer serial number.\n* Fixed `ImaqDxError` handling in `get_attribute` and `get_attribute_options`.\n* Amended typo in function name `configure_aqqisition`.\n* Increased verbosity of print statements in `grab_multiple`.\n* Attempt to get stop time of experiment by walking the device hierarchy, to inform acquisition timeout.\n* Set exposure time and acquisition timeout explicitly per shot, and any IMAQdx properties specified in `added_properties`.\n* Get exposure time, width, height \\(mandatory\\) and binning and pixel format \\(optional\\) to write as per-shot attributes in `transition_to_static`.\n* Base image path in h5 file on image\\_path prefix:\n\n    * Append orientation to image path \\(camera\\_name if orientation unspecified\\)\n    * Save separate datasets for each named frame if named\\_exposures is True.\n    \n* Add IMAQdx attributes ExposureTimeAbs, Width, Height, & Binning parameters \\(if they exist\\) to the image group.\n* Use HDF5 image attributes to make images viewable in HDFView if imageify.\n\nImage paths and dataset naming conform to the original \\(undocumented?\\) specification of images in labscript saved to `/images/<orientation>/<frametype>/<name>` when calling `camera.expose(name, t, frametype)`, e.g.\n\n    /images\n    \u251c\u2500\u2500 side/\n        \u251c\u2500\u2500 absorption/\n            \u251c\u2500\u2500 probe\n            \u251c\u2500\u2500 atoms\n            \u251c\u2500\u2500 dark\n\nThis structure is what `lyse.get_images`, etc. is based on.\n\nThe original behaviour of this script\u2014whereby images are saved as a single 3D dataset named 'Raw' in `/data/images<cameraname>`\u2014can be achieved by adding the following to labconfig:\n\n    [imaqdx_server]\n    image_path = data/images\n    named_exposures = False\n\n\u2026and specifying `orientation=None` when instantiating camera.", "markup": "markdown", "html": "<p>Merging my updates to this camera server class:</p>\n<ul>\n<li>Permit integer serial number.</li>\n<li>Fixed <code>ImaqDxError</code> handling in <code>get_attribute</code> and <code>get_attribute_options</code>.</li>\n<li>Amended typo in function name <code>configure_aqqisition</code>.</li>\n<li>Increased verbosity of print statements in <code>grab_multiple</code>.</li>\n<li>Attempt to get stop time of experiment by walking the device hierarchy, to inform acquisition timeout.</li>\n<li>Set exposure time and acquisition timeout explicitly per shot, and any IMAQdx properties specified in <code>added_properties</code>.</li>\n<li>Get exposure time, width, height (mandatory) and binning and pixel format (optional) to write as per-shot attributes in <code>transition_to_static</code>.</li>\n<li>\n<p>Base image path in h5 file on image_path prefix:</p>\n<ul>\n<li>Append orientation to image path (camera_name if orientation unspecified)</li>\n<li>Save separate datasets for each named frame if named_exposures is True.</li>\n</ul>\n</li>\n<li>\n<p>Add IMAQdx attributes ExposureTimeAbs, Width, Height, &amp; Binning parameters (if they exist) to the image group.</p>\n</li>\n<li>Use HDF5 image attributes to make images viewable in HDFView if imageify.</li>\n</ul>\n<p>Image paths and dataset naming conform to the original (undocumented?) specification of images in labscript saved to <code>/images/&lt;orientation&gt;/&lt;frametype&gt;/&lt;name&gt;</code> when calling <code>camera.expose(name, t, frametype)</code>, e.g.</p>\n<div class=\"codehilite\"><pre><span></span>/images\n\u251c\u2500\u2500 side/\n    \u251c\u2500\u2500 absorption/\n        \u251c\u2500\u2500 probe\n        \u251c\u2500\u2500 atoms\n        \u251c\u2500\u2500 dark\n</pre></div>\n\n\n<p>This structure is what <code>lyse.get_images</code>, etc. is based on.</p>\n<p>The original behaviour of this script\u2014whereby images are saved as a single 3D dataset named 'Raw' in <code>/data/images&lt;cameraname&gt;</code>\u2014can be achieved by adding the following to labconfig:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"k\">[imaqdx_server]</span>\n<span class=\"na\">image_path</span> <span class=\"o\">=</span> <span class=\"s\">data/images</span>\n<span class=\"na\">named_exposures</span> <span class=\"o\">=</span> <span class=\"s\">False</span>\n</pre></div>\n\n\n<p>\u2026and specifying <code>orientation=None</code> when instantiating camera.</p>", "type": "rendered"}, "created_on": "2018-11-17T00:45:31.759267+00:00", "user": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "updated_on": "2018-11-17T01:57:29.852393+00:00", "type": "pullrequest_comment", "id": 82748510}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/48/comments/82787084.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/48/_/diff#comment-82787084"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 48, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/48.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/48"}}, "title": "Imaqdx server"}, "content": {"raw": "I\u2019ve soak tested the abort functionality, sending \u2018abort\u2019 to the server at the following times:\n\n* While the acquisition thread is alive, i.e. before any/all images have been acquired and `grab_multiple()` is running,\n* After all images have been acquired, but before `transition_to_static()`.\n\nThis revealed the following bugs:\n\n* In subsequent shot\\(s\\), `abort()` would be called erroneously as the `camera._acquisition_abort` flag was not always reset.\n* `grab_multiple()` was not interrupted by issuing 'abort' until the experiment shot duration had elapsed, raising a `TimeoutError` in `Camera.abort()`.\n\nThese were resolved in c20831a.", "markup": "markdown", "html": "<p>I\u2019ve soak tested the abort functionality, sending \u2018abort\u2019 to the server at the following times:</p>\n<ul>\n<li>While the acquisition thread is alive, i.e. before any/all images have been acquired and <code>grab_multiple()</code> is running,</li>\n<li>After all images have been acquired, but before <code>transition_to_static()</code>.</li>\n</ul>\n<p>This revealed the following bugs:</p>\n<ul>\n<li>In subsequent shot(s), <code>abort()</code> would be called erroneously as the <code>camera._acquisition_abort</code> flag was not always reset.</li>\n<li><code>grab_multiple()</code> was not interrupted by issuing 'abort' until the experiment shot duration had elapsed, raising a <code>TimeoutError</code> in <code>Camera.abort()</code>.</li>\n</ul>\n<p>These were resolved in <a href=\"#!/labscript_suite/labscript_devices/commits/c20831a\" rel=\"nofollow\" class=\"ap-connect-link\">c20831a</a>.</p>", "type": "rendered"}, "created_on": "2018-11-19T06:55:17.487615+00:00", "user": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "updated_on": "2018-11-20T00:39:27.051428+00:00", "type": "pullrequest_comment", "id": 82787084}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/48/comments/83063291.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/48/_/diff#comment-83063291"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 48, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/48.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/48"}}, "title": "Imaqdx server"}, "content": {"raw": "Thanks for all the hard work Russ!\n\nI'm inclined to merge this, despite other existing users of this code not testing it, since it's a new file and so won't break anything for anyone even if there are remaining issues.", "markup": "markdown", "html": "<p>Thanks for all the hard work Russ!</p>\n<p>I'm inclined to merge this, despite other existing users of this code not testing it, since it's a new file and so won't break anything for anyone even if there are remaining issues.</p>", "type": "rendered"}, "created_on": "2018-11-20T21:58:07.950440+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2018-11-20T21:58:07.964934+00:00", "type": "pullrequest_comment", "id": 83063291}], "page": 1, "size": 3}