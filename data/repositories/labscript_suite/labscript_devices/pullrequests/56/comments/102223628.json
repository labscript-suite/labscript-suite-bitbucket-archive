{"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/56/comments/102223628.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/56/_/diff#comment-102223628"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/56.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/56"}}, "title": "Universal NI DAQmx support"}, "content": {"raw": "By the way, if anyone is wondering why this isn't merged yet, it's because BLACS' `transition_to_manual` is still serialised, i.e. one device at a time, and this creates a deadlock if an NI DAQmx device doing analog input is waiting for information about waits from another NI DAQmx device. This is the case at Monash, and although the bug exists in the existing classes, dictionaries in Python 2 have an arbitrary order and so merging this code could cause a deadlock on Monash's setups that just so happen to have an arbitrary order that presently works.\n\nSo this will be merged once [BLACS PR #47](#!/labscript_suite/blacs/pull-requests/47/deserialise-transition_to_manual/diff) or something equivalent is merged, which is on my list of things to do.", "markup": "markdown", "html": "<p>By the way, if anyone is wondering why this isn't merged yet, it's because BLACS' <code>transition_to_manual</code> is still serialised, i.e. one device at a time, and this creates a deadlock if an NI DAQmx device doing analog input is waiting for information about waits from another NI DAQmx device. This is the case at Monash, and although the bug exists in the existing classes, dictionaries in Python 2 have an arbitrary order and so merging this code could cause a deadlock on Monash's setups that just so happen to have an arbitrary order that presently works.</p>\n<p>So this will be merged once <a data-is-external-link=\"true\" href=\"#!/labscript_suite/blacs/pull-requests/47/deserialise-transition_to_manual/diff\" rel=\"nofollow\">BLACS PR #47</a> or something equivalent is merged, which is on my list of things to do.</p>", "type": "rendered"}, "created_on": "2019-05-16T03:38:10.991093+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-05-16T03:38:36.136847+00:00", "type": "pullrequest_comment", "id": 102223628}