{"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/56/comments/96950195.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/56/_/diff#comment-96950195"}}, "parent": {"id": 96942607, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/56/comments/96942607.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/56/_/diff#comment-96942607"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/56.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/56"}}, "title": "Universal NI DAQmx support"}, "content": {"raw": "Excellent. So they are just not showing up because the manual-mode analog input pull request from your group hasn\u2019t been merged into mainline yet, whereas you were presumably using it previously. I will get it merged at some point and modify this driver to use it, and then the AI widgets will reappear.\n\nGood to hear everything else is working.\n\nI\u2019m not sure it is worth trying to do anything about the number of samples needing to be a multiple of four. This is pretty tricky given labscript\u2019s design, and is not a requirement for all but the oldest NI DAQ devices. But if it is something you want to automate jsut for your lab, there are hacky ways to do it that might be worth putting in your own setup, but I would be hesitant to make the change to mainline labscript. Basically you would modify the pseudoclock\u2019s collect\\_change\\_times method to modify the change times to be a multiple of four by inserting extra ones, perhaps at the end \\(but before the final instruction\\). But then it\u2019s up to you to make sure this doesn\u2019t violate any timing requirements. Only the pseudoclock controlling that DAQmx device would need the change.\n\n\u200c\n\nEdit: actually it\u2019s not even that simple because collect\\_change\\_times hasn\u2019t expanded ramps yet. This is a hard problem and maybe not worth solving!", "markup": "markdown", "html": "<p>Excellent. So they are just not showing up because the manual-mode analog input pull request from your group hasn\u2019t been merged into mainline yet, whereas you were presumably using it previously. I will get it merged at some point and modify this driver to use it, and then the AI widgets will reappear.</p>\n<p>Good to hear everything else is working.</p>\n<p>I\u2019m not sure it is worth trying to do anything about the number of samples needing to be a multiple of four. This is pretty tricky given labscript\u2019s design, and is not a requirement for all but the oldest NI DAQ devices. But if it is something you want to automate jsut for your lab, there are hacky ways to do it that might be worth putting in your own setup, but I would be hesitant to make the change to mainline labscript. Basically you would modify the pseudoclock\u2019s collect_change_times method to modify the change times to be a multiple of four by inserting extra ones, perhaps at the end (but before the final instruction). But then it\u2019s up to you to make sure this doesn\u2019t violate any timing requirements. Only the pseudoclock controlling that DAQmx device would need the change.</p>\n<p>\u200c</p>\n<p>Edit: actually it\u2019s not even that simple because collect_change_times hasn\u2019t expanded ramps yet. This is a hard problem and maybe not worth solving!</p>", "type": "rendered"}, "created_on": "2019-03-29T16:23:07.211720+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-03-29T17:13:26.263843+00:00", "type": "pullrequest_comment", "id": 96950195}