{"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/62/comments/97523996.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/62/_/diff#comment-97523996"}}, "parent": {"id": 97515652, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/62/comments/97515652.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/62/_/diff#comment-97515652"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 62, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/62.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/62"}}, "title": "Pulseblaster phase resets"}, "content": {"raw": "I agree with subclassing over monkey patching.\n\nHowever, I think this means we need to rename the existing `DDS` class to something like `DDSQuantity` and then create a new `DDS` class that just is a stub of `DDSQuantity`. Then for the PulseBlaster we can subclass `DDSQuantity`, ensuring that the new `PulseBlasterDDS` class cannot be attached to Novatech/RFBlaster devices that allow children of type `DDS` \\(or their subclasses\\). PulseBlaster classes should be updated to support both `DDS` and `PulseBlasterDDS` children \\(for backwards compatibility\\) with `generate_code()` updated to use the original behaviour if the child is of instance `DDS` and the new behaviour if the child is an instance of `PulseBlasterDDS`.\n\nDoes that make sense?", "markup": "markdown", "html": "<p>I agree with subclassing over monkey patching.</p>\n<p>However, I think this means we need to rename the existing <code>DDS</code> class to something like <code>DDSQuantity</code> and then create a new <code>DDS</code> class that just is a stub of <code>DDSQuantity</code>. Then for the PulseBlaster we can subclass <code>DDSQuantity</code>, ensuring that the new <code>PulseBlasterDDS</code> class cannot be attached to Novatech/RFBlaster devices that allow children of type <code>DDS</code> (or their subclasses). PulseBlaster classes should be updated to support both <code>DDS</code> and <code>PulseBlasterDDS</code> children (for backwards compatibility) with <code>generate_code()</code> updated to use the original behaviour if the child is of instance <code>DDS</code> and the new behaviour if the child is an instance of <code>PulseBlasterDDS</code>.</p>\n<p>Does that make sense?</p>", "type": "rendered"}, "created_on": "2019-04-04T00:41:39.946657+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{0147401a-13ed-4e39-a0d0-63108c18738b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D"}, "html": {"href": "https://bitbucket.org/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/fa0698c306b3470c00717c146b5296e9d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "philipstarkey", "type": "user", "account_id": "557058:2f99420c-1dbd-4837-952c-82c421b8fbdd"}, "updated_on": "2019-04-04T00:41:39.956055+00:00", "type": "pullrequest_comment", "id": 97523996}