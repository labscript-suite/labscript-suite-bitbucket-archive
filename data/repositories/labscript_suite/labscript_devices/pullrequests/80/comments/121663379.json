{"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/80/comments/121663379.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/80/_/diff#comment-121663379"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 80, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/80.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/80"}}, "title": "AndorCamera"}, "content": {"raw": "Nice subclass! I tested this on an iXon 888 Ultra over USB3, and noticed the following:\n\n* `self.number_of_preamp_gains` is overestimated by 1. For the camera I tested, `GetNumberPreAmpGains()` returned 3, but calling `GetPreAmpGain(2)` returned code 20066 \\(`DRV_P1INVALID`\\). Weird given you tested with the same model.\n* `check_output` is not fit for use in `GetTemperature` and `GetTemperatureF` as it raises an `AndorException` for non-null return codes that represent a valid status.\n* The commented-out example code in `__main__` of andor\\_utils.py is super useful for debugging outside of BLACS/labscript, but contains deprecated functions like `snap` and `grab_acquisition`. Can you update it to reflect the current functions?\n* The `enable_cooldown` function in andor\\_utils.py:\n\n    * assumes water cooling is present and turns fans off \\(make this optional\\)\n    * isn\u2019t used anywhere in blacs\\_workers.py. Why? \\(Presumably you control the cooling using another tool like SOLIS?\\)\n    * should print temperature and status while temperature is stabilising.\n    * has erroneous bounds checking for the set point. See suggestion in code comment.\n    \n* andor\\_solis.py only looks for the DLL in a SOLIS directory. Fallback to looking in the SDK directory.\n\n\u200c", "markup": "markdown", "html": "<p>Nice subclass! I tested this on an iXon 888 Ultra over USB3, and noticed the following:</p>\n<ul>\n<li><code>self.number_of_preamp_gains</code> is overestimated by 1. For the camera I tested, <code>GetNumberPreAmpGains()</code> returned 3, but calling <code>GetPreAmpGain(2)</code> returned code 20066 (<code>DRV_P1INVALID</code>). Weird given you tested with the same model.</li>\n<li><code>check_output</code> is not fit for use in <code>GetTemperature</code> and <code>GetTemperatureF</code> as it raises an <code>AndorException</code> for non-null return codes that represent a valid status.</li>\n<li>The commented-out example code in <code>__main__</code> of andor_utils.py is super useful for debugging outside of BLACS/labscript, but contains deprecated functions like <code>snap</code> and <code>grab_acquisition</code>. Can you update it to reflect the current functions?</li>\n<li>\n<p>The <code>enable_cooldown</code> function in andor_utils.py:</p>\n<ul>\n<li>assumes water cooling is present and turns fans off (make this optional)</li>\n<li>isn\u2019t used anywhere in blacs_workers.py. Why? (Presumably you control the cooling using another tool like SOLIS?)</li>\n<li>should print temperature and status while temperature is stabilising.</li>\n<li>has erroneous bounds checking for the set point. See suggestion in code comment.</li>\n</ul>\n</li>\n<li>\n<p>andor_solis.py only looks for the DLL in a SOLIS directory. Fallback to looking in the SDK directory.</p>\n</li>\n</ul>\n<p>\u200c</p>", "type": "rendered"}, "created_on": "2019-10-22T10:04:08.842913+00:00", "user": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "updated_on": "2019-10-22T11:39:24.189063+00:00", "type": "pullrequest_comment", "id": 121663379}