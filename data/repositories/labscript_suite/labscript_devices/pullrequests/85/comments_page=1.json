{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/85/comments/122164711.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/85/_/diff#comment-122164711"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/85"}}, "title": "Restore Zaber stage support"}, "content": {"raw": "It looks like some models support the \u201cASCII protocol\u201d and others support the \u201cbinary protocol\u201d,  and that some support both. So I think I need to add a kwarg to choose which protocol to use, and implement use of the ascii protocol as well. The necessary code is a trivial couple of lines, but I won\u2019t be able to test it unless I actually come across a device that supports it. We may have one already, I\u2019ll have a poke around.", "markup": "markdown", "html": "<p>It looks like some models support the \u201cASCII protocol\u201d and others support the \u201cbinary protocol\u201d,  and that some support both. So I think I need to add a kwarg to choose which protocol to use, and implement use of the ascii protocol as well. The necessary code is a trivial couple of lines, but I won\u2019t be able to test it unless I actually come across a device that supports it. We may have one already, I\u2019ll have a poke around.</p>", "type": "rendered"}, "created_on": "2019-10-24T22:52:13.382751+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-10-24T22:52:13.388619+00:00", "type": "pullrequest_comment", "id": 122164711}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/85/comments/122282730.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/85/_/diff#comment-122282730"}}, "parent": {"id": 122164711, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/85/comments/122164711.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/85/_/diff#comment-122164711"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/85"}}, "title": "Restore Zaber stage support"}, "content": {"raw": "It looks to me like all devices support the binary protocol. It is slower \\(9600bps\\), but since not much data is transferred this isn\u2019t such a big deal.\n\nOne question I\u2019m looking to answer is whether a stage always accurately knows its current position, or whether it only is guaranteed to be correct if the device has been homed since being power cycled. If the latter, are requests for absolute position changes potentially wrong if the device has not been homed? If so, then we should have an option to always home the device at worker startup, to ensure positions are accurate. The docs don\u2019t seem to be full of warnings about potential inaccuracy of setting absolute positions, so it looks like its not a problem, but I would like to verify it.  \n  \nEdit: [Potentially might be a problem](https://www.zaber.com/manuals/T-LS):\n\n> When operating manually, you should home the device by retracting it completely every time you disconnect or turn off the power. You will not be able to achieve the maximum travel until you have homed the device or sent a command to tell the device its current position. After the device retracts completely it will stop automatically and you can turn the potentiometer clockwise to move the device. If you have a model without a potentiometer, you cannot control the device manually. Instead you must connect the device to a computer and issue a home instruction.\n\n\u200c", "markup": "markdown", "html": "<p>It looks to me like all devices support the binary protocol. It is slower (9600bps), but since not much data is transferred this isn\u2019t such a big deal.</p>\n<p>One question I\u2019m looking to answer is whether a stage always accurately knows its current position, or whether it only is guaranteed to be correct if the device has been homed since being power cycled. If the latter, are requests for absolute position changes potentially wrong if the device has not been homed? If so, then we should have an option to always home the device at worker startup, to ensure positions are accurate. The docs don\u2019t seem to be full of warnings about potential inaccuracy of setting absolute positions, so it looks like its not a problem, but I would like to verify it.  </p>\n<p>Edit: <a data-is-external-link=\"true\" href=\"https://www.zaber.com/manuals/T-LS\" rel=\"nofollow\">Potentially might be a problem</a>:</p>\n<blockquote>\n<p>When operating manually, you should home the device by retracting it completely every time you disconnect or turn off the power. You will not be able to achieve the maximum travel until you have homed the device or sent a command to tell the device its current position. After the device retracts completely it will stop automatically and you can turn the potentiometer clockwise to move the device. If you have a model without a potentiometer, you cannot control the device manually. Instead you must connect the device to a computer and issue a home instruction.</p>\n</blockquote>\n<p>\u200c</p>", "type": "rendered"}, "created_on": "2019-10-25T15:24:54.031358+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-10-25T15:38:14.378143+00:00", "type": "pullrequest_comment", "id": 122282730}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/85/comments/122493862.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/85/_/diff#comment-122493862"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/85"}}, "title": "Restore Zaber stage support"}, "content": {"raw": "Ok, so I\u2019ve confirmed the devices only have a concept of absolute position if they have been homed since they were last powered on. However, they can tell you whether this is the case. I\u2019ll make the BLACS tab check this before moving them, and refuse to move them if they have not been homed. I\u2019ll add a button to the front panel to home each device.", "markup": "markdown", "html": "<p>Ok, so I\u2019ve confirmed the devices only have a concept of absolute position if they have been homed since they were last powered on. However, they can tell you whether this is the case. I\u2019ll make the BLACS tab check this before moving them, and refuse to move them if they have not been homed. I\u2019ll add a button to the front panel to home each device.</p>", "type": "rendered"}, "created_on": "2019-10-28T18:54:30.558351+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-10-28T18:54:30.563791+00:00", "type": "pullrequest_comment", "id": 122493862}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/85/comments/133514574.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/85/_/diff#comment-133514574"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/85"}}, "title": "Restore Zaber stage support"}, "content": {"raw": "The check-if-homed functionality is tricky.\n\nAs it stands, if not homed, one gets an error saying that the position is not as expected \\(remote value check reports the max position if not homed\\), and one can say \u2018keep remote value\u2019 then tell the device to go to position 0 in the GUI to actually home it.\n\nI\u2019ve been playing with ways of getting it to explicitly say \u2018hey the device isn\u2019t homed', but have been fighting BLACS' state machine to do so, it\u2019s not really fitting in neatly. I\u2019ll file a separate issue for it and merge this for now. ", "markup": "markdown", "html": "<p>The check-if-homed functionality is tricky.</p>\n<p>As it stands, if not homed, one gets an error saying that the position is not as expected (remote value check reports the max position if not homed), and one can say \u2018keep remote value\u2019 then tell the device to go to position 0 in the GUI to actually home it.</p>\n<p>I\u2019ve been playing with ways of getting it to explicitly say \u2018hey the device isn\u2019t homed', but have been fighting BLACS' state machine to do so, it\u2019s not really fitting in neatly. I\u2019ll file a separate issue for it and merge this for now. </p>", "type": "rendered"}, "created_on": "2020-01-28T21:36:35.314262+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2020-01-28T21:36:35.320272+00:00", "type": "pullrequest_comment", "id": 133514574}], "page": 1, "size": 4}