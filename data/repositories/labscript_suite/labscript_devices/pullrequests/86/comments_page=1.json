{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/86/comments/124929113.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/86/_/diff#comment-124929113"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 86, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/86.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/86"}}, "title": "Added a 'device' that runs arbitrary functions before/after the experiment."}, "content": {"raw": "For a bit more explanation about what\u2019s going on, the functions are serialised and saved to the HDF5 file in the form of their source code, and the arguments and keyword arguments are serialised using `labscript_utils.properties.(de)serialise`. Nothing else is serialised with them, if they use globals or imports from outside their own function bodies they will not work. So the way they are serialised is very portable, and not too magical - trying to pull in used modules and global variables etc automatically would be going a bit too far I think.\n\nAlso, I\u2019ve changed it so that the deserialised functions find themselves in a namespace with `__file__` set to the name of the software device. This means that if the function creates a `lyse.Run`, it will \\(after [lyse PR #72](#!/labscript_suite/lyse/pull-requests/72)\\) set the results group name to the device name.", "markup": "markdown", "html": "<p>For a bit more explanation about what\u2019s going on, the functions are serialised and saved to the HDF5 file in the form of their source code, and the arguments and keyword arguments are serialised using <code>labscript_utils.properties.(de)serialise</code>. Nothing else is serialised with them, if they use globals or imports from outside their own function bodies they will not work. So the way they are serialised is very portable, and not too magical - trying to pull in used modules and global variables etc automatically would be going a bit too far I think.</p>\n<p>Also, I\u2019ve changed it so that the deserialised functions find themselves in a namespace with <code>__file__</code> set to the name of the software device. This means that if the function creates a <code>lyse.Run</code>, it will (after <a data-is-external-link=\"true\" href=\"#!/labscript_suite/lyse/pull-requests/72\" rel=\"nofollow\">lyse PR #72</a>) set the results group name to the device name.</p>", "type": "rendered"}, "created_on": "2019-11-15T03:45:31.862742+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-11-15T03:45:31.869010+00:00", "type": "pullrequest_comment", "id": 124929113}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/86/comments/131895546.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/86/_/diff#comment-131895546"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 86, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_devices/pullrequests/86.json"}, "html": {"href": "#!/labscript_suite/labscript_devices/pull-requests/86"}}, "title": "Added a 'device' that runs arbitrary functions before/after the experiment."}, "content": {"raw": "Given this is entirely new code I think it should be merged.", "markup": "markdown", "html": "<p>Given this is entirely new code I think it should be merged.</p>", "type": "rendered"}, "created_on": "2020-01-16T09:52:52.924669+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{0147401a-13ed-4e39-a0d0-63108c18738b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D"}, "html": {"href": "https://bitbucket.org/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/fa0698c306b3470c00717c146b5296e9d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "philipstarkey", "type": "user", "account_id": "557058:2f99420c-1dbd-4837-952c-82c421b8fbdd"}, "updated_on": "2020-01-16T09:52:52.932237+00:00", "type": "pullrequest_comment", "id": 131895546}], "page": 1, "size": 2}