{"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/issues/14/comments/38891701.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/issues/14#comment-38891701"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/issues/14.json"}}, "type": "issue", "id": 14, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "title": "Labconfig hostname"}, "content": {"raw": "[it looks like](https://support.apple.com/kb/PH25384?viewlocale=en_US&locale=en_US) ComputerName probably is a hostname - possibly isn't pingable without appending \".local\" to it, but I think it ought to be good enough for us.\n\nPerhaps @PhyNerd can confirm, and if it looks good then we can make the labconfig module have a `if sys.platform == 'darwin'` and then do a call out to `scutil --get ComputerName`. \n\nWe would then have to get rid of the places where the labconfig file is hard coded to be `socket.gethostname()` instead of getting it from the labconfig module:\n\n\n```\n#!python\n\nlabscript_suite $ grep -r 'hostname()' --include '*.py' *\nblacs/__main__.py:    config_path = os.path.join(config_prefix,'%s.ini'%socket.gethostname())\nblacs/__main__.py:    settings_path = os.path.join(config_prefix,'%s_BLACS.h5'%socket.gethostname())\nblacs/standalone_device.py:    config_path = r'C:\\labconfig\\\\'+socket.gethostname()+r'.ini'\nblacs/standalone_device.py:    settings_path = r'C:\\labconfig\\\\'+socket.gethostname()+r'_BLACS.h5'\nlabscript_utils/labconfig.py:default_config_path = os.path.join(config_prefix,'%s.ini'%socket.gethostname())\nlyse/__main__.py:        config_path = os.path.join(config_prefix, '%s.ini' % socket.gethostname())\nrunmanager/__main__.py:        config_path = os.path.join(config_prefix, '%s.ini' % socket.gethostname())\nrunviewer/__main__.py:    config_path = os.path.join(config_prefix, '%s.ini' % socket.gethostname())\n\n```", "markup": "markdown", "html": "<p><a data-is-external-link=\"true\" href=\"https://support.apple.com/kb/PH25384?viewlocale=en_US&amp;locale=en_US\" rel=\"nofollow\">it looks like</a> ComputerName probably is a hostname - possibly isn't pingable without appending \".local\" to it, but I think it ought to be good enough for us.</p>\n<p>Perhaps @PhyNerd can confirm, and if it looks good then we can make the labconfig module have a <code>if sys.platform == 'darwin'</code> and then do a call out to <code>scutil --get ComputerName</code>. </p>\n<p>We would then have to get rid of the places where the labconfig file is hard coded to be <code>socket.gethostname()</code> instead of getting it from the labconfig module:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">labscript_suite</span> <span class=\"err\">$</span> <span class=\"n\">grep</span> <span class=\"o\">-</span><span class=\"n\">r</span> <span class=\"s1\">&#39;hostname()&#39;</span> <span class=\"o\">--</span><span class=\"n\">include</span> <span class=\"s1\">&#39;*.py&#39;</span> <span class=\"o\">*</span>\n<span class=\"n\">blacs</span><span class=\"o\">/</span><span class=\"n\">__main__</span><span class=\"o\">.</span><span class=\"n\">py</span><span class=\"p\">:</span>    <span class=\"n\">config_path</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"n\">config_prefix</span><span class=\"p\">,</span><span class=\"s1\">&#39;</span><span class=\"si\">%s</span><span class=\"s1\">.ini&#39;</span><span class=\"o\">%</span><span class=\"n\">socket</span><span class=\"o\">.</span><span class=\"n\">gethostname</span><span class=\"p\">())</span>\n<span class=\"n\">blacs</span><span class=\"o\">/</span><span class=\"n\">__main__</span><span class=\"o\">.</span><span class=\"n\">py</span><span class=\"p\">:</span>    <span class=\"n\">settings_path</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"n\">config_prefix</span><span class=\"p\">,</span><span class=\"s1\">&#39;</span><span class=\"si\">%s</span><span class=\"s1\">_BLACS.h5&#39;</span><span class=\"o\">%</span><span class=\"n\">socket</span><span class=\"o\">.</span><span class=\"n\">gethostname</span><span class=\"p\">())</span>\n<span class=\"n\">blacs</span><span class=\"o\">/</span><span class=\"n\">standalone_device</span><span class=\"o\">.</span><span class=\"n\">py</span><span class=\"p\">:</span>    <span class=\"n\">config_path</span> <span class=\"o\">=</span> <span class=\"sa\">r</span><span class=\"s1\">&#39;C:\\labconfig</span><span class=\"se\">\\\\</span><span class=\"s1\">&#39;</span><span class=\"o\">+</span><span class=\"n\">socket</span><span class=\"o\">.</span><span class=\"n\">gethostname</span><span class=\"p\">()</span><span class=\"o\">+</span><span class=\"sa\">r</span><span class=\"s1\">&#39;.ini&#39;</span>\n<span class=\"n\">blacs</span><span class=\"o\">/</span><span class=\"n\">standalone_device</span><span class=\"o\">.</span><span class=\"n\">py</span><span class=\"p\">:</span>    <span class=\"n\">settings_path</span> <span class=\"o\">=</span> <span class=\"sa\">r</span><span class=\"s1\">&#39;C:\\labconfig</span><span class=\"se\">\\\\</span><span class=\"s1\">&#39;</span><span class=\"o\">+</span><span class=\"n\">socket</span><span class=\"o\">.</span><span class=\"n\">gethostname</span><span class=\"p\">()</span><span class=\"o\">+</span><span class=\"sa\">r</span><span class=\"s1\">&#39;_BLACS.h5&#39;</span>\n<span class=\"n\">labscript_utils</span><span class=\"o\">/</span><span class=\"n\">labconfig</span><span class=\"o\">.</span><span class=\"n\">py</span><span class=\"p\">:</span><span class=\"n\">default_config_path</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"n\">config_prefix</span><span class=\"p\">,</span><span class=\"s1\">&#39;</span><span class=\"si\">%s</span><span class=\"s1\">.ini&#39;</span><span class=\"o\">%</span><span class=\"n\">socket</span><span class=\"o\">.</span><span class=\"n\">gethostname</span><span class=\"p\">())</span>\n<span class=\"n\">lyse</span><span class=\"o\">/</span><span class=\"n\">__main__</span><span class=\"o\">.</span><span class=\"n\">py</span><span class=\"p\">:</span>        <span class=\"n\">config_path</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"n\">config_prefix</span><span class=\"p\">,</span> <span class=\"s1\">&#39;</span><span class=\"si\">%s</span><span class=\"s1\">.ini&#39;</span> <span class=\"o\">%</span> <span class=\"n\">socket</span><span class=\"o\">.</span><span class=\"n\">gethostname</span><span class=\"p\">())</span>\n<span class=\"n\">runmanager</span><span class=\"o\">/</span><span class=\"n\">__main__</span><span class=\"o\">.</span><span class=\"n\">py</span><span class=\"p\">:</span>        <span class=\"n\">config_path</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"n\">config_prefix</span><span class=\"p\">,</span> <span class=\"s1\">&#39;</span><span class=\"si\">%s</span><span class=\"s1\">.ini&#39;</span> <span class=\"o\">%</span> <span class=\"n\">socket</span><span class=\"o\">.</span><span class=\"n\">gethostname</span><span class=\"p\">())</span>\n<span class=\"n\">runviewer</span><span class=\"o\">/</span><span class=\"n\">__main__</span><span class=\"o\">.</span><span class=\"n\">py</span><span class=\"p\">:</span>    <span class=\"n\">config_path</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"n\">config_prefix</span><span class=\"p\">,</span> <span class=\"s1\">&#39;</span><span class=\"si\">%s</span><span class=\"s1\">.ini&#39;</span> <span class=\"o\">%</span> <span class=\"n\">socket</span><span class=\"o\">.</span><span class=\"n\">gethostname</span><span class=\"p\">())</span>\n</pre></div>", "type": "rendered"}, "created_on": "2017-08-04T08:44:52.972734+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": null, "type": "issue_comment", "id": 38891701}