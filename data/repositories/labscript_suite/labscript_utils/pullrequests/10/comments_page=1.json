{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/10/comments/39031491.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/10/_/diff#comment-39031491"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/10"}}, "title": "Qt widget for eliding QLabel with rich text"}, "content": {"raw": "Sorry, there are so many pull requests and issue tracker comments going on that I forgot about this one!\n\nCouple of questions:\n\n* Can the scroll area be accidentally scrolled somehow? Should we stop this? Or should we allow you to scroll? Or even scroll it on mouse over?\n* Does this work with widget promotion in Qt Designer? Maybe it is not worth it if you need to add QWidget -> QScrollArea -> QLabel and promote the first 2 in order to make it work (at that point it's probably easier to just use your convenience function)", "markup": "markdown", "html": "<p>Sorry, there are so many pull requests and issue tracker comments going on that I forgot about this one!</p>\n<p>Couple of questions:</p>\n<ul>\n<li>Can the scroll area be accidentally scrolled somehow? Should we stop this? Or should we allow you to scroll? Or even scroll it on mouse over?</li>\n<li>Does this work with widget promotion in Qt Designer? Maybe it is not worth it if you need to add QWidget -&gt; QScrollArea -&gt; QLabel and promote the first 2 in order to make it work (at that point it's probably easier to just use your convenience function)</li>\n</ul>", "type": "rendered"}, "created_on": "2017-06-18T02:06:23.925274+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2017-06-18T02:06:23.928663+00:00", "type": "pullrequest_comment", "id": 39031491}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/10/comments/39031513.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/10/_/diff#comment-39031513"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/10"}}, "title": "Qt widget for eliding QLabel with rich text"}, "content": {"raw": "No problem! As usual there were fixes I had to make anyway.\n\nI don't think it can. I've been trying and can't seem to make it scroll. Early in making it I could scroll with alt+mousewheel, and then I stopped being able to do so when I set `self.setHorizontalScrollBarPolicy(Qt.ScrollBarAlwaysOff)` on the `QScrollArea`. Previously the scrollbar was on, but had zero size.\n\nIf it's discovered that it can scroll (perhaps platform-dependent behaviour), I could simply hook up `self.scroll_area.horizontalScrollBar().valueChanged.connect(self.update_elide_widget)`, which is currently commented out because it seemed unneeded and I don't want to connect more slots than necessary. I don't think we should allow scrolling. If we want tiny scrolling textboxes, we can use read-only LineEdits, or some other widget that people expect to be able to scroll - or we could make a similar widget like this that has a different background colour or something so that it is obviously not a QLabel. But I think that's a different job, ellipsis does most of the job for making BLACS' interface a bit less jumpy.\n\nIt probably would work with the promotion, but it's pretty funky! I was disappointed that I couldn't seem to actually subclass QLabel to do this. I mean I could have if I wanted to be writing my own paint() methods, which seemed super complicated if you wanted to support rich text (for plain text it would be dead simple). So, the convenience function seems to work pretty well. You have to give it the parent layout though, which means keeping things in sync as you move things around in Qt Designer. I accidentally gave it the wrong parent layout when trying to use this in BLACS, and reparented the label to somewhere totally different. Was very confused for a while. So I think probably using the convenience function is better than adding an extra 2 layers for each label in Qt designer.\n\nActually, that's an important improvement I can make. Whilst it's probably not worth trying to automatically find the layout that the widget is in (this isn't trivial, since `QWidget.parent()` skips layouts and goes directly to the layout's parent), I could at least add a check that the widget is in fact in the layout you specified, so that you get an error message instead of a misplaced widget if you give the wrong layout.\n\nHere's the current state of changes I'm making to BLACS with this, among a few other GUI tweaks:\n\n![blacs_elision.png](data/bitbucket.org/repo/xg9BdE/images/2330923503-blacs_elision.png)\n\n", "markup": "markdown", "html": "<p>No problem! As usual there were fixes I had to make anyway.</p>\n<p>I don't think it can. I've been trying and can't seem to make it scroll. Early in making it I could scroll with alt+mousewheel, and then I stopped being able to do so when I set <code>self.setHorizontalScrollBarPolicy(Qt.ScrollBarAlwaysOff)</code> on the <code>QScrollArea</code>. Previously the scrollbar was on, but had zero size.</p>\n<p>If it's discovered that it can scroll (perhaps platform-dependent behaviour), I could simply hook up <code>self.scroll_area.horizontalScrollBar().valueChanged.connect(self.update_elide_widget)</code>, which is currently commented out because it seemed unneeded and I don't want to connect more slots than necessary. I don't think we should allow scrolling. If we want tiny scrolling textboxes, we can use read-only LineEdits, or some other widget that people expect to be able to scroll - or we could make a similar widget like this that has a different background colour or something so that it is obviously not a QLabel. But I think that's a different job, ellipsis does most of the job for making BLACS' interface a bit less jumpy.</p>\n<p>It probably would work with the promotion, but it's pretty funky! I was disappointed that I couldn't seem to actually subclass QLabel to do this. I mean I could have if I wanted to be writing my own paint() methods, which seemed super complicated if you wanted to support rich text (for plain text it would be dead simple). So, the convenience function seems to work pretty well. You have to give it the parent layout though, which means keeping things in sync as you move things around in Qt Designer. I accidentally gave it the wrong parent layout when trying to use this in BLACS, and reparented the label to somewhere totally different. Was very confused for a while. So I think probably using the convenience function is better than adding an extra 2 layers for each label in Qt designer.</p>\n<p>Actually, that's an important improvement I can make. Whilst it's probably not worth trying to automatically find the layout that the widget is in (this isn't trivial, since <code>QWidget.parent()</code> skips layouts and goes directly to the layout's parent), I could at least add a check that the widget is in fact in the layout you specified, so that you get an error message instead of a misplaced widget if you give the wrong layout.</p>\n<p>Here's the current state of changes I'm making to BLACS with this, among a few other GUI tweaks:</p>\n<p><img alt=\"blacs_elision.png\" src=\"data/bitbucket.org/repo/xg9BdE/images/2330923503-blacs_elision.png\" /></p>", "type": "rendered"}, "created_on": "2017-06-18T02:22:58.781050+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-06-18T02:26:08.061475+00:00", "type": "pullrequest_comment", "id": 39031513}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/10/comments/39031797.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/10/_/diff#comment-39031797"}}, "parent": {"id": 39031513, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/10/comments/39031513.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/10/_/diff#comment-39031513"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/10"}}, "title": "Qt widget for eliding QLabel with rich text"}, "content": {"raw": "To clarify, it would only work with promotion if you put a QLabel in a QScrollArea in a QWidget in Qt designer, and then promoted the QScrollArea and QWidget to my sublasses. And by \"work\" I mean \"could be made to work\", if I changed the interface a bit. But it seemed like nobody would do that, so it's not what I was going for.", "markup": "markdown", "html": "<p>To clarify, it would only work with promotion if you put a QLabel in a QScrollArea in a QWidget in Qt designer, and then promoted the QScrollArea and QWidget to my sublasses. And by \"work\" I mean \"could be made to work\", if I changed the interface a bit. But it seemed like nobody would do that, so it's not what I was going for.</p>", "type": "rendered"}, "created_on": "2017-06-18T04:25:33.606452+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-06-18T04:25:33.609017+00:00", "type": "pullrequest_comment", "id": 39031797}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/10/comments/39038462.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/10/_/diff#comment-39038462"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/10"}}, "title": "Qt widget for eliding QLabel with rich text"}, "content": {"raw": "Merging since this is uncontroversial", "markup": "markdown", "html": "<p>Merging since this is uncontroversial</p>", "type": "rendered"}, "created_on": "2017-06-18T22:53:26.068508+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-06-18T22:53:26.070565+00:00", "type": "pullrequest_comment", "id": 39038462}], "page": 1, "size": 4}