{"rendered": {"description": {"raw": "Fix bug in which ToolPalette would not shrink to its minimum size when placed in a layout, not shrinking smaller than a certain size. For larger vertical sizes (larger than QScrollArea's default minimumSizeHint of about 75 pixels it seems) it was not noticeable, but once there was only one or two rows of widgets they would be allocated too much space. In BLACS the DigitalOutput buttons don't don't grow like the tool buttons do in the below screenshots, so in BLACS instead this resulted in a large amount of space between the rows of buttons. \r\n\r\nThe problem was because size in a layout is set be the sizeHint and minimumSizeHint properties, rather than the minimumSize property (confusingly).\r\n\r\nSo I implemented ToolPalette.sizeHint() and ToolPalette.minimumSizeHint(),\r\nwhich communicate to the parent layout what the size should be in a layout.\r\n\r\nAlso fixed minor error in height calculation, which did not distinguish between\r\nmargins and spacing and so was off by a few pixels (likely not noticeable before I changed the spacing and margins to be different from each other in an earlier pull request).\r\n\r\nSo total height is now calculated as (for number of rows n):\r\n\r\n `n * widget_height + (n - 1) * spacing + top_margin + bottom_margin`\r\n\r\nBefore:\r\n\r\n![toolpalette_before.png](data/bitbucket.org/repo/KEMMje/images/1129253231-toolpalette_before.png)\r\n\r\nAfter:\r\n\r\n![tool_palette_after.png](data/bitbucket.org/repo/KEMMje/images/4041797923-tool_palette_after.png)", "markup": "markdown", "html": "<p>Fix bug in which ToolPalette would not shrink to its minimum size when placed in a layout, not shrinking smaller than a certain size. For larger vertical sizes (larger than QScrollArea's default minimumSizeHint of about 75 pixels it seems) it was not noticeable, but once there was only one or two rows of widgets they would be allocated too much space. In BLACS the DigitalOutput buttons don't don't grow like the tool buttons do in the below screenshots, so in BLACS instead this resulted in a large amount of space between the rows of buttons. </p>\n<p>The problem was because size in a layout is set be the sizeHint and minimumSizeHint properties, rather than the minimumSize property (confusingly).</p>\n<p>So I implemented ToolPalette.sizeHint() and ToolPalette.minimumSizeHint(),\nwhich communicate to the parent layout what the size should be in a layout.</p>\n<p>Also fixed minor error in height calculation, which did not distinguish between\nmargins and spacing and so was off by a few pixels (likely not noticeable before I changed the spacing and margins to be different from each other in an earlier pull request).</p>\n<p>So total height is now calculated as (for number of rows n):</p>\n<p><code>n * widget_height + (n - 1) * spacing + top_margin + bottom_margin</code></p>\n<p>Before:</p>\n<p><img alt=\"toolpalette_before.png\" src=\"data/bitbucket.org/repo/KEMMje/images/1129253231-toolpalette_before.png\" /></p>\n<p>After:</p>\n<p><img alt=\"tool_palette_after.png\" src=\"data/bitbucket.org/repo/KEMMje/images/4041797923-tool_palette_after.png\" /></p>", "type": "rendered"}, "title": {"raw": "ToolPalette vertical size bugfix", "markup": "markdown", "html": "<p>ToolPalette vertical size bugfix</p>", "type": "rendered"}}, "type": "pullrequest", "description": "Fix bug in which ToolPalette would not shrink to its minimum size when placed in a layout, not shrinking smaller than a certain size. For larger vertical sizes (larger than QScrollArea's default minimumSizeHint of about 75 pixels it seems) it was not noticeable, but once there was only one or two rows of widgets they would be allocated too much space. In BLACS the DigitalOutput buttons don't don't grow like the tool buttons do in the below screenshots, so in BLACS instead this resulted in a large amount of space between the rows of buttons. \r\n\r\nThe problem was because size in a layout is set be the sizeHint and minimumSizeHint properties, rather than the minimumSize property (confusingly).\r\n\r\nSo I implemented ToolPalette.sizeHint() and ToolPalette.minimumSizeHint(),\r\nwhich communicate to the parent layout what the size should be in a layout.\r\n\r\nAlso fixed minor error in height calculation, which did not distinguish between\r\nmargins and spacing and so was off by a few pixels (likely not noticeable before I changed the spacing and margins to be different from each other in an earlier pull request).\r\n\r\nSo total height is now calculated as (for number of rows n):\r\n\r\n `n * widget_height + (n - 1) * spacing + top_margin + bottom_margin`\r\n\r\nBefore:\r\n\r\n![toolpalette_before.png](data/bitbucket.org/repo/KEMMje/images/1129253231-toolpalette_before.png)\r\n\r\nAfter:\r\n\r\n![tool_palette_after.png](data/bitbucket.org/repo/KEMMje/images/4041797923-tool_palette_after.png)", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_utils/pullrequests/13/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_utils/diffstat/labscript_suite/labscript_utils:2905e1ae98b9%0Ddaea43c65b1a?from_pullrequest_id=13"}, "commits": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/13/commits.json"}, "self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/13.json"}, "comments": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/13/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_utils/pullrequests/13/merge"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/13"}, "activity": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/13/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_utils/diff/labscript_suite/labscript_utils:2905e1ae98b9%0Ddaea43c65b1a?from_pullrequest_id=13"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_utils/pullrequests/13/approve"}, "statuses": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/13/statuses_page=1.json"}}, "title": "ToolPalette vertical size bugfix", "close_source_branch": false, "reviewers": [{"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}], "id": 13, "destination": {"commit": {"hash": "daea43c65b1a", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/daea43c65b1a.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/daea43c65b1a"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "created_on": "2017-06-20T00:59:18.733957+00:00", "summary": {"raw": "Fix bug in which ToolPalette would not shrink to its minimum size when placed in a layout, not shrinking smaller than a certain size. For larger vertical sizes (larger than QScrollArea's default minimumSizeHint of about 75 pixels it seems) it was not noticeable, but once there was only one or two rows of widgets they would be allocated too much space. In BLACS the DigitalOutput buttons don't don't grow like the tool buttons do in the below screenshots, so in BLACS instead this resulted in a large amount of space between the rows of buttons. \r\n\r\nThe problem was because size in a layout is set be the sizeHint and minimumSizeHint properties, rather than the minimumSize property (confusingly).\r\n\r\nSo I implemented ToolPalette.sizeHint() and ToolPalette.minimumSizeHint(),\r\nwhich communicate to the parent layout what the size should be in a layout.\r\n\r\nAlso fixed minor error in height calculation, which did not distinguish between\r\nmargins and spacing and so was off by a few pixels (likely not noticeable before I changed the spacing and margins to be different from each other in an earlier pull request).\r\n\r\nSo total height is now calculated as (for number of rows n):\r\n\r\n `n * widget_height + (n - 1) * spacing + top_margin + bottom_margin`\r\n\r\nBefore:\r\n\r\n![toolpalette_before.png](data/bitbucket.org/repo/KEMMje/images/1129253231-toolpalette_before.png)\r\n\r\nAfter:\r\n\r\n![tool_palette_after.png](data/bitbucket.org/repo/KEMMje/images/4041797923-tool_palette_after.png)", "markup": "markdown", "html": "<p>Fix bug in which ToolPalette would not shrink to its minimum size when placed in a layout, not shrinking smaller than a certain size. For larger vertical sizes (larger than QScrollArea's default minimumSizeHint of about 75 pixels it seems) it was not noticeable, but once there was only one or two rows of widgets they would be allocated too much space. In BLACS the DigitalOutput buttons don't don't grow like the tool buttons do in the below screenshots, so in BLACS instead this resulted in a large amount of space between the rows of buttons. </p>\n<p>The problem was because size in a layout is set be the sizeHint and minimumSizeHint properties, rather than the minimumSize property (confusingly).</p>\n<p>So I implemented ToolPalette.sizeHint() and ToolPalette.minimumSizeHint(),\nwhich communicate to the parent layout what the size should be in a layout.</p>\n<p>Also fixed minor error in height calculation, which did not distinguish between\nmargins and spacing and so was off by a few pixels (likely not noticeable before I changed the spacing and margins to be different from each other in an earlier pull request).</p>\n<p>So total height is now calculated as (for number of rows n):</p>\n<p><code>n * widget_height + (n - 1) * spacing + top_margin + bottom_margin</code></p>\n<p>Before:</p>\n<p><img alt=\"toolpalette_before.png\" src=\"data/bitbucket.org/repo/KEMMje/images/1129253231-toolpalette_before.png\" /></p>\n<p>After:</p>\n<p><img alt=\"tool_palette_after.png\" src=\"data/bitbucket.org/repo/KEMMje/images/4041797923-tool_palette_after.png\" /></p>", "type": "rendered"}, "source": {"commit": {"hash": "69b3924c883c", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/69b3924c883c"}, "html": {"href": "#!/cbillington/labscript_utils/commits/69b3924c883c"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "bugfix2"}}, "comment_count": 3, "state": "MERGED", "task_count": 0, "participants": [{"role": "PARTICIPANT", "participated_on": "2017-06-20T07:09:12.831088+00:00", "type": "participant", "approved": false, "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}}, {"role": "PARTICIPANT", "participated_on": "2017-06-20T01:29:48.418668+00:00", "type": "participant", "approved": false, "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}}, {"role": "REVIEWER", "participated_on": "2017-06-20T10:29:55.265140+00:00", "type": "participant", "approved": true, "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}}], "reason": "", "updated_on": "2017-06-20T10:30:02.350695+00:00", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "merge_commit": {"hash": "2905e1ae98b9", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/2905e1ae98b9.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/2905e1ae98b9"}}}, "closed_by": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}}