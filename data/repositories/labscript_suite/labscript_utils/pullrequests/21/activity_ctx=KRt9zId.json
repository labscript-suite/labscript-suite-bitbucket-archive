{"pagelen": 50, "values": [{"update": {"description": "* Reimplemented dragdroptab.\r\n\r\n    Lost: ~~mouse icon changing during drag~~, animation when moving tabs\r\n    within a tabbar.\r\n\r\n    Gained: Doesn't crash or lose tabs.\r\n\r\n    The lost functionality can plausible be re-added without compromising\r\n    on the lack of crashing. I just haven't looked into it much yet.\r\n\r\nThis pull request may fix issue #13 (I can't test, I don't have a mac, but I expect it will since I'm now storing which tab is being dragged based on the position of the mouse click rather than which tab was active at the time of the click), [likely fixes BLACS issue #17](#!/labscript_suite/blacs/issues/17/tab-becomes-unselected-when-moving), and does fix the issue I've seen in testing pull request #20.\r\n\r\nThis reimplementation is based on abandoning Qt's drag and drop functionality, and implementing it instead with just mouseEvents. It turns out to be much easier, since there was unending subtleties with Qt's drag events. The main one being that if during an event you called functions that modified the GUI, this could actually cause *new events to be processed, including the very event handler you were already in*. So you would have to write all the code to be re-entrant even though it's single threaded. I attempted to serialise the events by catching them and putting them in a queue to process in order rather than re-entrantly but that caused Qt to fire seemingly nonsensical events like two leave events in a row for the same widget and other nonsense that entirely defeats the purpose of the drag events if you can't trust anything about them.\r\n\r\nThis change is compatible with the Qt5 pull request (it just has a try/except for the imports for now so that it works regardless, can be changed to just use qtutils.qt after that branch is merged), though the merge might have to be done locally to discard the other file as otherwise it looks like a merge conflict.", "title": "Dragdroptab", "destination": {"commit": {"hash": "e5becb62eedf", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/e5becb62eedf.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/e5becb62eedf"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "ac8a6f0473b6", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/ac8a6f0473b6"}, "html": {"href": "#!/cbillington/labscript_utils/commits/ac8a6f0473b6"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "dragdroptab"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-08-06T23:15:52.106776+00:00"}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"update": {"description": "* Reimplemented dragdroptab.\r\n\r\n    Lost: ~~mouse icon changing during drag~~, animation when moving tabs\r\n    within a tabbar.\r\n\r\n    Gained: Doesn't crash or lose tabs.\r\n\r\n    The lost functionality can plausible be re-added without compromising\r\n    on the lack of crashing. I just haven't looked into it much yet.\r\n\r\nThis pull request may fix issue #13 (I can't test, I don't have a mac, but I expect it will since I'm now storing which tab is being dragged based on the position of the mouse click rather than which tab was active at the time of the click), [likely fixes BLACS issue #17](#!/labscript_suite/blacs/issues/17/tab-becomes-unselected-when-moving), and does fix the issue I've seen in testing pull request #20.\r\n\r\nThis reimplementation is based on abandoning Qt's drag and drop functionality, and implementing it instead with just mouseEvents. It turns out to be much easier, since there was unending subtleties with Qt's drag events. The main one being that if during an event you called functions that modified the GUI, this could actually cause *new events to be processed, including the very event handler you were already in*. So you would have to write all the code to be re-entrant even though it's single threaded. I attempted to serialise the events by catching them and putting them in a queue to process in order rather than re-entrantly but that caused Qt to fire seemingly nonsensical events like two leave events in a row for the same widget and other nonsense that entirely defeats the purpose of the drag events if you can't trust anything about them.\r\n\r\nThis change is compatible with the Qt5 pull request (it just has a try/except for the imports for now so that it works regardless, can be changed to just use qtutils.qt after that branch is merged), though the merge might have to be done locally to discard the other file as otherwise it looks like a merge conflict.", "title": "Dragdroptab", "destination": {"commit": {"hash": "e5becb62eedf", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/e5becb62eedf.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/e5becb62eedf"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "bb78b2e087e3", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/bb78b2e087e3"}, "html": {"href": "#!/cbillington/labscript_utils/commits/bb78b2e087e3"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "dragdroptab"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-08-06T22:35:53.709163+00:00"}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42251766.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42251766"}}, "parent": {"id": 42251759, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42251759.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42251759"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Nop doesn't fix it. \nI'll test on windows tomorrow morning (in about 9 hours) to see of the alignment is different there. Maybe it's one of those mac only bugs again ^^", "markup": "markdown", "html": "<p>Nop doesn't fix it. \nI'll test on windows tomorrow morning (in about 9 hours) to see of the alignment is different there. Maybe it's one of those mac only bugs again ^^</p>", "type": "rendered"}, "created_on": "2017-08-06T22:16:34.184931+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-06T22:19:18.188416+00:00", "type": "pullrequest_comment", "id": 42251766}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42251759.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42251759"}}, "parent": {"id": 42251645, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42251645.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42251645"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Cool. I'm not quite done yet with the animation,  but the changes I've made since might fix it, so I've pushed them in case you want to find out. Looks like there's a region on the right where both \"put the tab back in\" and \"take the tab out\" conditions are satisfied - or more likely, that taking the tab out changes the geometry of the tab bar (I see foo moving to the middle - they're left aligned for me) making the \"put it back in\" condition immediately satisfied.", "markup": "markdown", "html": "<p>Cool. I'm not quite done yet with the animation,  but the changes I've made since might fix it, so I've pushed them in case you want to find out. Looks like there's a region on the right where both \"put the tab back in\" and \"take the tab out\" conditions are satisfied - or more likely, that taking the tab out changes the geometry of the tab bar (I see foo moving to the middle - they're left aligned for me) making the \"put it back in\" condition immediately satisfied.</p>", "type": "rendered"}, "created_on": "2017-08-06T22:14:31.846710+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-06T22:14:31.850300+00:00", "type": "pullrequest_comment", "id": 42251759}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"update": {"description": "* Reimplemented dragdroptab.\r\n\r\n    Lost: ~~mouse icon changing during drag~~, animation when moving tabs\r\n    within a tabbar.\r\n\r\n    Gained: Doesn't crash or lose tabs.\r\n\r\n    The lost functionality can plausible be re-added without compromising\r\n    on the lack of crashing. I just haven't looked into it much yet.\r\n\r\nThis pull request may fix issue #13 (I can't test, I don't have a mac, but I expect it will since I'm now storing which tab is being dragged based on the position of the mouse click rather than which tab was active at the time of the click), [likely fixes BLACS issue #17](#!/labscript_suite/blacs/issues/17/tab-becomes-unselected-when-moving), and does fix the issue I've seen in testing pull request #20.\r\n\r\nThis reimplementation is based on abandoning Qt's drag and drop functionality, and implementing it instead with just mouseEvents. It turns out to be much easier, since there was unending subtleties with Qt's drag events. The main one being that if during an event you called functions that modified the GUI, this could actually cause *new events to be processed, including the very event handler you were already in*. So you would have to write all the code to be re-entrant even though it's single threaded. I attempted to serialise the events by catching them and putting them in a queue to process in order rather than re-entrantly but that caused Qt to fire seemingly nonsensical events like two leave events in a row for the same widget and other nonsense that entirely defeats the purpose of the drag events if you can't trust anything about them.\r\n\r\nThis change is compatible with the Qt5 pull request (it just has a try/except for the imports for now so that it works regardless, can be changed to just use qtutils.qt after that branch is merged), though the merge might have to be done locally to discard the other file as otherwise it looks like a merge conflict.", "title": "Dragdroptab", "destination": {"commit": {"hash": "e5becb62eedf", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/e5becb62eedf.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/e5becb62eedf"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "0d220b791df8", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/0d220b791df8"}, "html": {"href": "#!/cbillington/labscript_utils/commits/0d220b791df8"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "dragdroptab"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-08-06T22:12:37.309330+00:00"}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42251645.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42251645"}}, "parent": {"id": 42251630, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42251630.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42251630"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "no it is but the flickering happens only in the area around the windows right side and starts in the edge which is why I'm staying there to demonstrate. And at the end the tab is stuck on the side for some reason after release.", "markup": "markdown", "html": "<p>no it is but the flickering happens only in the area around the windows right side and starts in the edge which is why I'm staying there to demonstrate. And at the end the tab is stuck on the side for some reason after release.</p>", "type": "rendered"}, "created_on": "2017-08-06T21:55:16.867079+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-06T21:55:16.925441+00:00", "type": "pullrequest_comment", "id": 42251645}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42251630.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42251630"}}, "parent": {"id": 42251608, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42251608.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42251608"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Looks pretty weird - is it not letting your mouse go outside the window?", "markup": "markdown", "html": "<p>Looks pretty weird - is it not letting your mouse go outside the window?</p>", "type": "rendered"}, "created_on": "2017-08-06T21:53:22.861723+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-06T21:53:22.864327+00:00", "type": "pullrequest_comment", "id": 42251630}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42251608.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42251608"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "I like the new animation but found some unexpected behavior that is not really breaking anything:\n![tab_ani-2.gif](data/bitbucket.org/repo/xg9BdE/images/4218997367-tab_ani-2.gif)", "markup": "markdown", "html": "<p>I like the new animation but found some unexpected behavior that is not really breaking anything:\n<img alt=\"tab_ani-2.gif\" src=\"data/bitbucket.org/repo/xg9BdE/images/4218997367-tab_ani-2.gif\" /></p>", "type": "rendered"}, "created_on": "2017-08-06T21:49:16.730104+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-06T21:49:16.790097+00:00", "type": "pullrequest_comment", "id": 42251608}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"update": {"description": "* Reimplemented dragdroptab.\r\n\r\n    Lost: ~~mouse icon changing during drag~~, animation when moving tabs\r\n    within a tabbar.\r\n\r\n    Gained: Doesn't crash or lose tabs.\r\n\r\n    The lost functionality can plausible be re-added without compromising\r\n    on the lack of crashing. I just haven't looked into it much yet.\r\n\r\nThis pull request may fix issue #13 (I can't test, I don't have a mac, but I expect it will since I'm now storing which tab is being dragged based on the position of the mouse click rather than which tab was active at the time of the click), [likely fixes BLACS issue #17](#!/labscript_suite/blacs/issues/17/tab-becomes-unselected-when-moving), and does fix the issue I've seen in testing pull request #20.\r\n\r\nThis reimplementation is based on abandoning Qt's drag and drop functionality, and implementing it instead with just mouseEvents. It turns out to be much easier, since there was unending subtleties with Qt's drag events. The main one being that if during an event you called functions that modified the GUI, this could actually cause *new events to be processed, including the very event handler you were already in*. So you would have to write all the code to be re-entrant even though it's single threaded. I attempted to serialise the events by catching them and putting them in a queue to process in order rather than re-entrantly but that caused Qt to fire seemingly nonsensical events like two leave events in a row for the same widget and other nonsense that entirely defeats the purpose of the drag events if you can't trust anything about them.\r\n\r\nThis change is compatible with the Qt5 pull request (it just has a try/except for the imports for now so that it works regardless, can be changed to just use qtutils.qt after that branch is merged), though the merge might have to be done locally to discard the other file as otherwise it looks like a merge conflict.", "title": "Dragdroptab", "destination": {"commit": {"hash": "e5becb62eedf", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/e5becb62eedf.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/e5becb62eedf"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "b768243c45ea", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/b768243c45ea"}, "html": {"href": "#!/cbillington/labscript_utils/commits/b768243c45ea"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "dragdroptab"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-08-06T19:52:14.878528+00:00"}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42248724.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42248724"}}, "parent": {"id": 42240762, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42240762.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42240762"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Yep! I agree, I'll get it back.", "markup": "markdown", "html": "<p>Yep! I agree, I'll get it back.</p>", "type": "rendered"}, "created_on": "2017-08-06T13:59:57.582450+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-06T13:59:57.586296+00:00", "type": "pullrequest_comment", "id": 42248724}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42240762.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42240762"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Would be nice if you could restore the lost functionality. I don't think it will cause problems. Almost surprised it's lost....suspect it's a trivial change (possibly just because you return before accepting the event? Not sure, it doesn't look like you handle the parent class `mouseMoveEvent` much different than I did)", "markup": "markdown", "html": "<p>Would be nice if you could restore the lost functionality. I don't think it will cause problems. Almost surprised it's lost....suspect it's a trivial change (possibly just because you return before accepting the event? Not sure, it doesn't look like you handle the parent class <code>mouseMoveEvent</code> much different than I did)</p>", "type": "rendered"}, "created_on": "2017-08-05T05:34:17.486851+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2017-08-05T05:34:17.489144+00:00", "type": "pullrequest_comment", "id": 42240762}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42217540.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42217540"}}, "parent": {"id": 42217256, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42217256.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42217256"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Yep! it's changing it to time.time() - that's to test that while dragging the tab data can be updated.\n\nI changed the dragging 'icon' to actually be a real QTabBar, which means the tab text and icon and everything can be updated at any time regardless of whether a tab is being dragged or not. At the moment there's a bit of a hack in BLACS where tabs check to see if they are in a QTabBar before changing anything about their tabs, and if they're not in a tab bar they queue up the change for later instead. It's pretty hacky and it would be great if the tabs were just always in a QTabBar, even if that QTabBar was a single tab floating by itself in free space.", "markup": "markdown", "html": "<p>Yep! it's changing it to time.time() - that's to test that while dragging the tab data can be updated.</p>\n<p>I changed the dragging 'icon' to actually be a real QTabBar, which means the tab text and icon and everything can be updated at any time regardless of whether a tab is being dragged or not. At the moment there's a bit of a hack in BLACS where tabs check to see if they are in a QTabBar before changing anything about their tabs, and if they're not in a tab bar they queue up the change for later instead. It's pretty hacky and it would be great if the tabs were just always in a QTabBar, even if that QTabBar was a single tab floating by itself in free space.</p>", "type": "rendered"}, "created_on": "2017-08-04T16:21:41.636094+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-04T16:21:41.638910+00:00", "type": "pullrequest_comment", "id": 42217540}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42217256.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42217256"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "newest commit changes tabs name to some number on draging. (maybe make that a debug thing?)", "markup": "markdown", "html": "<p>newest commit changes tabs name to some number on draging. (maybe make that a debug thing?)</p>", "type": "rendered"}, "created_on": "2017-08-04T16:18:20.790716+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-04T16:20:11.544436+00:00", "type": "pullrequest_comment", "id": 42217256}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"update": {"description": "* Reimplemented dragdroptab.\r\n\r\n    Lost: ~~mouse icon changing during drag~~, animation when moving tabs\r\n    within a tabbar.\r\n\r\n    Gained: Doesn't crash or lose tabs.\r\n\r\n    The lost functionality can plausible be re-added without compromising\r\n    on the lack of crashing. I just haven't looked into it much yet.\r\n\r\nThis pull request may fix issue #13 (I can't test, I don't have a mac, but I expect it will since I'm now storing which tab is being dragged based on the position of the mouse click rather than which tab was active at the time of the click), [likely fixes BLACS issue #17](#!/labscript_suite/blacs/issues/17/tab-becomes-unselected-when-moving), and does fix the issue I've seen in testing pull request #20.\r\n\r\nThis reimplementation is based on abandoning Qt's drag and drop functionality, and implementing it instead with just mouseEvents. It turns out to be much easier, since there was unending subtleties with Qt's drag events. The main one being that if during an event you called functions that modified the GUI, this could actually cause *new events to be processed, including the very event handler you were already in*. So you would have to write all the code to be re-entrant even though it's single threaded. I attempted to serialise the events by catching them and putting them in a queue to process in order rather than re-entrantly but that caused Qt to fire seemingly nonsensical events like two leave events in a row for the same widget and other nonsense that entirely defeats the purpose of the drag events if you can't trust anything about them.\r\n\r\nThis change is compatible with the Qt5 pull request (it just has a try/except for the imports for now so that it works regardless, can be changed to just use qtutils.qt after that branch is merged), though the merge might have to be done locally to discard the other file as otherwise it looks like a merge conflict.", "title": "Dragdroptab", "destination": {"commit": {"hash": "2f3efa609916", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/2f3efa609916.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/2f3efa609916"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "4223a7d14fd0", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/4223a7d14fd0"}, "html": {"href": "#!/cbillington/labscript_utils/commits/4223a7d14fd0"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "dragdroptab"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-08-04T15:28:48.480323+00:00"}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42198752.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42198752"}}, "parent": {"id": 42197922, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42197922.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42197922"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Excellent. I found another bug however - introduced by the fact that I decided to handle leaveEvent - leaveEvent is now being called from within mouseReleaseEvent if you drag a tab down to the tabWidget below it and drop it in the empty space in the middle of the tabWidget (not in the tab bar). But since I understand exactly what's going on at this point I know I can safely ignore the leaveEvent. So I'll fix that. Since leaveEvent is the only event I'm handling that can be generated non-spontaneously (i.e. by other event processing rather than by a human), this should be the end of any re-entrant problems.\n\nEdit: should be fixed now!", "markup": "markdown", "html": "<p>Excellent. I found another bug however - introduced by the fact that I decided to handle leaveEvent - leaveEvent is now being called from within mouseReleaseEvent if you drag a tab down to the tabWidget below it and drop it in the empty space in the middle of the tabWidget (not in the tab bar). But since I understand exactly what's going on at this point I know I can safely ignore the leaveEvent. So I'll fix that. Since leaveEvent is the only event I'm handling that can be generated non-spontaneously (i.e. by other event processing rather than by a human), this should be the end of any re-entrant problems.</p>\n<p>Edit: should be fixed now!</p>", "type": "rendered"}, "created_on": "2017-08-04T13:05:04.330432+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-04T13:16:24.770546+00:00", "type": "pullrequest_comment", "id": 42198752}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"update": {"description": "* Reimplemented dragdroptab.\r\n\r\n    Lost: ~~mouse icon changing during drag~~, animation when moving tabs\r\n    within a tabbar.\r\n\r\n    Gained: Doesn't crash or lose tabs.\r\n\r\n    The lost functionality can plausible be re-added without compromising\r\n    on the lack of crashing. I just haven't looked into it much yet.\r\n\r\nThis pull request may fix issue #13 (I can't test, I don't have a mac, but I expect it will since I'm now storing which tab is being dragged based on the position of the mouse click rather than which tab was active at the time of the click), [likely fixes BLACS issue #17](#!/labscript_suite/blacs/issues/17/tab-becomes-unselected-when-moving), and does fix the issue I've seen in testing pull request #20.\r\n\r\nThis reimplementation is based on abandoning Qt's drag and drop functionality, and implementing it instead with just mouseEvents. It turns out to be much easier, since there was unending subtleties with Qt's drag events. The main one being that if during an event you called functions that modified the GUI, this could actually cause *new events to be processed, including the very event handler you were already in*. So you would have to write all the code to be re-entrant even though it's single threaded. I attempted to serialise the events by catching them and putting them in a queue to process in order rather than re-entrantly but that caused Qt to fire seemingly nonsensical events like two leave events in a row for the same widget and other nonsense that entirely defeats the purpose of the drag events if you can't trust anything about them.\r\n\r\nThis change is compatible with the Qt5 pull request (it just has a try/except for the imports for now so that it works regardless, can be changed to just use qtutils.qt after that branch is merged), though the merge might have to be done locally to discard the other file as otherwise it looks like a merge conflict.", "title": "Dragdroptab", "destination": {"commit": {"hash": "2f3efa609916", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/2f3efa609916.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/2f3efa609916"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "1479ae96d6e2", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/1479ae96d6e2"}, "html": {"href": "#!/cbillington/labscript_utils/commits/1479ae96d6e2"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "dragdroptab"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-08-04T13:15:36.901210+00:00"}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42197922.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42197922"}}, "parent": {"id": 42197755, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42197755.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42197755"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Still works with debug off. (and is much less laggy)\n\nAnd windows is fine as always if thats of interest.", "markup": "markdown", "html": "<p>Still works with debug off. (and is much less laggy)</p>\n<p>And windows is fine as always if thats of interest.</p>", "type": "rendered"}, "created_on": "2017-08-04T12:56:13.055475+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-04T12:57:28.553508+00:00", "type": "pullrequest_comment", "id": 42197922}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42197277.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42197277"}}, "parent": {"id": 42197060, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42197060.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42197060"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Doesn't crash anymore but your debug has a typo ;) PyQt5 isn't listed instead there is PyQt4 twice\n\nI'll test some more but approve for now as I don't have any more ideas on how I could make things break.", "markup": "markdown", "html": "<p>Doesn't crash anymore but your debug has a typo ;) PyQt5 isn't listed instead there is PyQt4 twice</p>\n<p>I'll test some more but approve for now as I don't have any more ideas on how I could make things break.</p>", "type": "rendered"}, "created_on": "2017-08-04T12:48:39.086162+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-04T12:54:48.160025+00:00", "type": "pullrequest_comment", "id": 42197277}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42197755.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42197755"}}, "parent": {"id": 42197277, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42197277.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42197277"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Really, it doesn't crash! That's fantastic. I guess it's not OK to just set parentless widgets to None and expect them to be garbage collected when the main window doesn't have focus on macos, or something like that.\n\nJust because I'm paranoid, could you verify that it still doesn't crash when you disable the debugging? Printing text to the terminal slows down execution enough that if it's timing sensitive that could make a difference. Not that the test code is multithreaded, but depending on how the window manager/display server works on macos there could still be race conditions with interacting with it if I'm doing something wrong.", "markup": "markdown", "html": "<p>Really, it doesn't crash! That's fantastic. I guess it's not OK to just set parentless widgets to None and expect them to be garbage collected when the main window doesn't have focus on macos, or something like that.</p>\n<p>Just because I'm paranoid, could you verify that it still doesn't crash when you disable the debugging? Printing text to the terminal slows down execution enough that if it's timing sensitive that could make a difference. Not that the test code is multithreaded, but depending on how the window manager/display server works on macos there could still be race conditions with interacting with it if I'm doing something wrong.</p>", "type": "rendered"}, "created_on": "2017-08-04T12:54:17.683253+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-04T12:54:17.685854+00:00", "type": "pullrequest_comment", "id": 42197755}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42197060.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42197060"}}, "parent": {"id": 42195669, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42195669.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42195669"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "I made a small change just in case - I'm now re-using the little widgets instead of creating and destroying them each time, in case I missed something about whether you're allowed to just let widgets get garbage collected like that. Now they live for the whole program so removed the possibility of their destruction going wrong.\n\nAnd I added detailed debug printlines. Could you set DEBUG = True in the `debug` class at the top, make it break and show me the output?\n\nThanks for the testing! ", "markup": "markdown", "html": "<p>I made a small change just in case - I'm now re-using the little widgets instead of creating and destroying them each time, in case I missed something about whether you're allowed to just let widgets get garbage collected like that. Now they live for the whole program so removed the possibility of their destruction going wrong.</p>\n<p>And I added detailed debug printlines. Could you set DEBUG = True in the <code>debug</code> class at the top, make it break and show me the output?</p>\n<p>Thanks for the testing! </p>", "type": "rendered"}, "created_on": "2017-08-04T12:46:11.110825+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-04T12:46:11.114241+00:00", "type": "pullrequest_comment", "id": 42197060}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"update": {"description": "* Reimplemented dragdroptab.\r\n\r\n    Lost: ~~mouse icon changing during drag~~, animation when moving tabs\r\n    within a tabbar.\r\n\r\n    Gained: Doesn't crash or lose tabs.\r\n\r\n    The lost functionality can plausible be re-added without compromising\r\n    on the lack of crashing. I just haven't looked into it much yet.\r\n\r\nThis pull request may fix issue #13 (I can't test, I don't have a mac, but I expect it will since I'm now storing which tab is being dragged based on the position of the mouse click rather than which tab was active at the time of the click), [likely fixes BLACS issue #17](#!/labscript_suite/blacs/issues/17/tab-becomes-unselected-when-moving), and does fix the issue I've seen in testing pull request #20.\r\n\r\nThis reimplementation is based on abandoning Qt's drag and drop functionality, and implementing it instead with just mouseEvents. It turns out to be much easier, since there was unending subtleties with Qt's drag events. The main one being that if during an event you called functions that modified the GUI, this could actually cause *new events to be processed, including the very event handler you were already in*. So you would have to write all the code to be re-entrant even though it's single threaded. I attempted to serialise the events by catching them and putting them in a queue to process in order rather than re-entrantly but that caused Qt to fire seemingly nonsensical events like two leave events in a row for the same widget and other nonsense that entirely defeats the purpose of the drag events if you can't trust anything about them.\r\n\r\nThis change is compatible with the Qt5 pull request (it just has a try/except for the imports for now so that it works regardless, can be changed to just use qtutils.qt after that branch is merged), though the merge might have to be done locally to discard the other file as otherwise it looks like a merge conflict.", "title": "Dragdroptab", "destination": {"commit": {"hash": "2f3efa609916", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/2f3efa609916.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/2f3efa609916"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "bd868a884251", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/bd868a884251"}, "html": {"href": "#!/cbillington/labscript_utils/commits/bd868a884251"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "dragdroptab"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-08-04T12:42:42.816954+00:00"}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"update": {"description": "* Reimplemented dragdroptab.\r\n\r\n    Lost: ~~mouse icon changing during drag~~, animation when moving tabs\r\n    within a tabbar.\r\n\r\n    Gained: Doesn't crash or lose tabs.\r\n\r\n    The lost functionality can plausible be re-added without compromising\r\n    on the lack of crashing. I just haven't looked into it much yet.\r\n\r\nThis pull request may fix issue #13 (I can't test, I don't have a mac, but I expect it will since I'm now storing which tab is being dragged based on the position of the mouse click rather than which tab was active at the time of the click), [likely fixes BLACS issue #17](#!/labscript_suite/blacs/issues/17/tab-becomes-unselected-when-moving), and does fix the issue I've seen in testing pull request #20.\r\n\r\nThis reimplementation is based on abandoning Qt's drag and drop functionality, and implementing it instead with just mouseEvents. It turns out to be much easier, since there was unending subtleties with Qt's drag events. The main one being that if during an event you called functions that modified the GUI, this could actually cause *new events to be processed, including the very event handler you were already in*. So you would have to write all the code to be re-entrant even though it's single threaded. I attempted to serialise the events by catching them and putting them in a queue to process in order rather than re-entrantly but that caused Qt to fire seemingly nonsensical events like two leave events in a row for the same widget and other nonsense that entirely defeats the purpose of the drag events if you can't trust anything about them.\r\n\r\nThis change is compatible with the Qt5 pull request (it just has a try/except for the imports for now so that it works regardless, can be changed to just use qtutils.qt after that branch is merged), though the merge might have to be done locally to discard the other file as otherwise it looks like a merge conflict.", "title": "Dragdroptab", "destination": {"commit": {"hash": "2f3efa609916", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/2f3efa609916.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/2f3efa609916"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "ae0ea06f6bb2", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/ae0ea06f6bb2"}, "html": {"href": "#!/cbillington/labscript_utils/commits/ae0ea06f6bb2"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "dragdroptab"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-08-04T12:40:01.595529+00:00"}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42195669.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42195669"}}, "parent": {"id": 42192838, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42192838.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42192838"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Nop inside the window everything is fine but once I dare drag and drop it over the line byebye python.", "markup": "markdown", "html": "<p>Nop inside the window everything is fine but once I dare drag and drop it over the line byebye python.</p>", "type": "rendered"}, "created_on": "2017-08-04T12:29:01.297133+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-04T12:30:24.987431+00:00", "type": "pullrequest_comment", "id": 42195669}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42192838.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42192838"}}, "parent": {"id": 42191567, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42191567.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42191567"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Ugh, how annoying. No, it's not present under Linux. Does the same thing occur if you release the tab inside the main window, but when the tab is not in a tab widget? Or only if you drag it outside the whole window?\n\nI'm cancelling the drag on both mouse release events and leave events, I didn't think there were any others. I'm interested in fixing it though - I'll push a commit with debug lines.", "markup": "markdown", "html": "<p>Ugh, how annoying. No, it's not present under Linux. Does the same thing occur if you release the tab inside the main window, but when the tab is not in a tab widget? Or only if you drag it outside the whole window?</p>\n<p>I'm cancelling the drag on both mouse release events and leave events, I didn't think there were any others. I'm interested in fixing it though - I'll push a commit with debug lines.</p>", "type": "rendered"}, "created_on": "2017-08-04T11:52:38.436334+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-04T11:52:38.438648+00:00", "type": "pullrequest_comment", "id": 42192838}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42191567.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42191567"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Found a new bug that seems to be mac specific(it's not present under windows). If you drag the tab out of the window and drop it there it will crash python. If this is not present under linux I would be fine with this not being fixed.", "markup": "markdown", "html": "<p>Found a new bug that seems to be mac specific(it's not present under windows). If you drag the tab out of the window and drop it there it will crash python. If this is not present under linux I would be fine with this not being fixed.</p>", "type": "rendered"}, "created_on": "2017-08-04T11:35:46.002328+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-04T11:35:46.065385+00:00", "type": "pullrequest_comment", "id": 42191567}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42191244.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42191244"}}, "parent": {"id": 42187709, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42187709.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42187709"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Now everything is working nicely under both macOS and windows. Both of them show the dragged tab.\n", "markup": "markdown", "html": "<p>Now everything is working nicely under both macOS and windows. Both of them show the dragged tab.</p>", "type": "rendered"}, "created_on": "2017-08-04T11:31:39.675786+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-04T11:31:39.722502+00:00", "type": "pullrequest_comment", "id": 42191244}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42187709.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42187709"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "OK I replaced the cursor with just drawing and moving around a little widget instead - hopefully now should work the same on all platforms!", "markup": "markdown", "html": "<p>OK I replaced the cursor with just drawing and moving around a little widget instead - hopefully now should work the same on all platforms!</p>", "type": "rendered"}, "created_on": "2017-08-04T10:41:53.706242+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-04T10:41:53.709116+00:00", "type": "pullrequest_comment", "id": 42187709}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"update": {"description": "* Reimplemented dragdroptab.\r\n\r\n    Lost: ~~mouse icon changing during drag~~, animation when moving tabs\r\n    within a tabbar.\r\n\r\n    Gained: Doesn't crash or lose tabs.\r\n\r\n    The lost functionality can plausible be re-added without compromising\r\n    on the lack of crashing. I just haven't looked into it much yet.\r\n\r\nThis pull request may fix issue #13 (I can't test, I don't have a mac, but I expect it will since I'm now storing which tab is being dragged based on the position of the mouse click rather than which tab was active at the time of the click), [likely fixes BLACS issue #17](#!/labscript_suite/blacs/issues/17/tab-becomes-unselected-when-moving), and does fix the issue I've seen in testing pull request #20.\r\n\r\nThis reimplementation is based on abandoning Qt's drag and drop functionality, and implementing it instead with just mouseEvents. It turns out to be much easier, since there was unending subtleties with Qt's drag events. The main one being that if during an event you called functions that modified the GUI, this could actually cause *new events to be processed, including the very event handler you were already in*. So you would have to write all the code to be re-entrant even though it's single threaded. I attempted to serialise the events by catching them and putting them in a queue to process in order rather than re-entrantly but that caused Qt to fire seemingly nonsensical events like two leave events in a row for the same widget and other nonsense that entirely defeats the purpose of the drag events if you can't trust anything about them.\r\n\r\nThis change is compatible with the Qt5 pull request (it just has a try/except for the imports for now so that it works regardless, can be changed to just use qtutils.qt after that branch is merged), though the merge might have to be done locally to discard the other file as otherwise it looks like a merge conflict.", "title": "Dragdroptab", "destination": {"commit": {"hash": "2f3efa609916", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/2f3efa609916.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/2f3efa609916"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "3049aa3debf8", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/3049aa3debf8"}, "html": {"href": "#!/cbillington/labscript_utils/commits/3049aa3debf8"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "dragdroptab"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-08-04T10:40:40.189071+00:00"}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42185349.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42185349"}}, "parent": {"id": 42173951, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42173951.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42173951"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Thanks for testing!\n\nInteresting. I think I understand about the cursor disappearing - it might be fixed now (I'm just setting the cursor more often instead of just once) \n\nAs for Windows, maybe I'll just replace it with some other standard mouse icon then.", "markup": "markdown", "html": "<p>Thanks for testing!</p>\n<p>Interesting. I think I understand about the cursor disappearing - it might be fixed now (I'm just setting the cursor more often instead of just once) </p>\n<p>As for Windows, maybe I'll just replace it with some other standard mouse icon then.</p>", "type": "rendered"}, "created_on": "2017-08-04T10:07:33.403207+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-04T10:07:33.408209+00:00", "type": "pullrequest_comment", "id": 42185349}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"update": {"description": "* Reimplemented dragdroptab.\r\n\r\n    Lost: ~~mouse icon changing during drag~~, animation when moving tabs\r\n    within a tabbar.\r\n\r\n    Gained: Doesn't crash or lose tabs.\r\n\r\n    The lost functionality can plausible be re-added without compromising\r\n    on the lack of crashing. I just haven't looked into it much yet.\r\n\r\nThis pull request may fix issue #13 (I can't test, I don't have a mac, but I expect it will since I'm now storing which tab is being dragged based on the position of the mouse click rather than which tab was active at the time of the click), [likely fixes BLACS issue #17](#!/labscript_suite/blacs/issues/17/tab-becomes-unselected-when-moving), and does fix the issue I've seen in testing pull request #20.\r\n\r\nThis reimplementation is based on abandoning Qt's drag and drop functionality, and implementing it instead with just mouseEvents. It turns out to be much easier, since there was unending subtleties with Qt's drag events. The main one being that if during an event you called functions that modified the GUI, this could actually cause *new events to be processed, including the very event handler you were already in*. So you would have to write all the code to be re-entrant even though it's single threaded. I attempted to serialise the events by catching them and putting them in a queue to process in order rather than re-entrantly but that caused Qt to fire seemingly nonsensical events like two leave events in a row for the same widget and other nonsense that entirely defeats the purpose of the drag events if you can't trust anything about them.\r\n\r\nThis change is compatible with the Qt5 pull request (it just has a try/except for the imports for now so that it works regardless, can be changed to just use qtutils.qt after that branch is merged), though the merge might have to be done locally to discard the other file as otherwise it looks like a merge conflict.", "title": "Dragdroptab", "destination": {"commit": {"hash": "2f3efa609916", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/2f3efa609916.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/2f3efa609916"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "7a195c2e74cb", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/7a195c2e74cb"}, "html": {"href": "#!/cbillington/labscript_utils/commits/7a195c2e74cb"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "dragdroptab"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-08-04T10:05:19.017655+00:00"}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42173951.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42173951"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "I'll do some testing on mac and windows later today and update here but this definitely sounds great.\n\nUpdate:\nOk everything looking fine on macOS the mouse turns into the tab on drag which is really nice. But there is one thing that I noticed that is strange: When pulling the tab outside of the window the tab animation vanishes and it's just the mouse. I'll create a gif to demonstrate. (This should not really happen that often anyway)\n\n![dragdrop-3.gif](data/bitbucket.org/repo/xg9BdE/images/2586118514-dragdrop-3.gif)\n\nUpate 2.0: Ok so the tab vanishing is linked to the mouse crossing a window edge that allows resizing if I exit the window through the top everything is fine.\n\nUpdate 3.0: Under windows there is no animation at all (PyQt4). Also the mac test happened under PyQt5 and PyQt4.", "markup": "markdown", "html": "<p>I'll do some testing on mac and windows later today and update here but this definitely sounds great.</p>\n<p>Update:\nOk everything looking fine on macOS the mouse turns into the tab on drag which is really nice. But there is one thing that I noticed that is strange: When pulling the tab outside of the window the tab animation vanishes and it's just the mouse. I'll create a gif to demonstrate. (This should not really happen that often anyway)</p>\n<p><img alt=\"dragdrop-3.gif\" src=\"data/bitbucket.org/repo/xg9BdE/images/2586118514-dragdrop-3.gif\" /></p>\n<p>Upate 2.0: Ok so the tab vanishing is linked to the mouse crossing a window edge that allows resizing if I exit the window through the top everything is fine.</p>\n<p>Update 3.0: Under windows there is no animation at all (PyQt4). Also the mac test happened under PyQt5 and PyQt4.</p>", "type": "rendered"}, "created_on": "2017-08-04T07:58:52.233961+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-04T09:19:38.964092+00:00", "type": "pullrequest_comment", "id": 42173951}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"update": {"description": "* Reimplemented dragdroptab.\r\n\r\n    Lost: ~~mouse icon changing during drag~~, animation when moving tabs\r\n    within a tabbar.\r\n\r\n    Gained: Doesn't crash or lose tabs.\r\n\r\n    The lost functionality can plausible be re-added without compromising\r\n    on the lack of crashing. I just haven't looked into it much yet.\r\n\r\nThis pull request may fix issue #13 (I can't test, I don't have a mac, but I expect it will since I'm now storing which tab is being dragged based on the position of the mouse click rather than which tab was active at the time of the click), [likely fixes BLACS issue #17](#!/labscript_suite/blacs/issues/17/tab-becomes-unselected-when-moving), and does fix the issue I've seen in testing pull request #20.\r\n\r\nThis reimplementation is based on abandoning Qt's drag and drop functionality, and implementing it instead with just mouseEvents. It turns out to be much easier, since there was unending subtleties with Qt's drag events. The main one being that if during an event you called functions that modified the GUI, this could actually cause *new events to be processed, including the very event handler you were already in*. So you would have to write all the code to be re-entrant even though it's single threaded. I attempted to serialise the events by catching them and putting them in a queue to process in order rather than re-entrantly but that caused Qt to fire seemingly nonsensical events like two leave events in a row for the same widget and other nonsense that entirely defeats the purpose of the drag events if you can't trust anything about them.\r\n\r\nThis change is compatible with the Qt5 pull request (it just has a try/except for the imports for now so that it works regardless, can be changed to just use qtutils.qt after that branch is merged), though the merge might have to be done locally to discard the other file as otherwise it looks like a merge conflict.", "title": "Dragdroptab", "destination": {"commit": {"hash": "2f3efa609916", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/2f3efa609916.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/2f3efa609916"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "0c4bf15a59af", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/0c4bf15a59af"}, "html": {"href": "#!/cbillington/labscript_utils/commits/0c4bf15a59af"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "dragdroptab"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-08-04T07:57:37.280845+00:00"}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"update": {"description": "* Reimplemented dragdroptab.\r\n\r\n    Lost: ~~mouse icon changing during drag~~, animation when moving tabs\r\n    within a tabbar.\r\n\r\n    Gained: Doesn't crash or lose tabs.\r\n\r\n    The lost functionality can plausible be re-added without compromising\r\n    on the lack of crashing. I just haven't looked into it much yet.\r\n\r\nThis pull request may fix issue #13 (I can't test, I don't have a mac, but I expect it will since I'm now storing which tab is being dragged based on the position of the mouse click rather than which tab was active at the time of the click), [likely fixes BLACS issue #17](#!/labscript_suite/blacs/issues/17/tab-becomes-unselected-when-moving), and does fix the issue I've seen in testing pull request #20.\r\n\r\nThis reimplementation is based on abandoning Qt's drag and drop functionality, and implementing it instead with just mouseEvents. It turns out to be much easier, since there was unending subtleties with Qt's drag events. The main one being that if during an event you called functions that modified the GUI, this could actually cause *new events to be processed, including the very event handler you were already in*. So you would have to write all the code to be re-entrant even though it's single threaded. I attempted to serialise the events by catching them and putting them in a queue to process in order rather than re-entrantly but that caused Qt to fire seemingly nonsensical events like two leave events in a row for the same widget and other nonsense that entirely defeats the purpose of the drag events if you can't trust anything about them.\r\n\r\nThis change is compatible with the Qt5 pull request (it just has a try/except for the imports for now so that it works regardless, can be changed to just use qtutils.qt after that branch is merged), though the merge might have to be done locally to discard the other file as otherwise it looks like a merge conflict.", "title": "Dragdroptab", "destination": {"commit": {"hash": "2f3efa609916", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/2f3efa609916.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/2f3efa609916"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "f90844d98ffc", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/f90844d98ffc"}, "html": {"href": "#!/cbillington/labscript_utils/commits/f90844d98ffc"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "dragdroptab"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-08-04T07:48:04.118743+00:00"}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"update": {"description": "* Reimplemented dragdroptab.\r\n\r\n    Lost: ~~mouse icon changing during drag~~, animation when moving tabs\r\n    within a tabbar.\r\n\r\n    Gained: Doesn't crash or lose tabs.\r\n\r\n    The lost functionality can plausible be re-added without compromising\r\n    on the lack of crashing. I just haven't looked into it much yet.\r\n\r\nThis pull request may fix issue #13 (I can't test, I don't have a mac, but I expect it will since I'm now storing which tab is being dragged based on the position of the mouse click rather than which tab was active at the time of the click), [likely fixes BLACS issue #17](#!/labscript_suite/blacs/issues/17/tab-becomes-unselected-when-moving), and does fix the issue I've seen in testing pull request #20.\r\n\r\nThis reimplementation is based on abandoning Qt's drag and drop functionality, and implementing it instead with just mouseEvents. It turns out to be much easier, since there was unending subtleties with Qt's drag events. The main one being that if during an event you called functions that modified the GUI, this could actually cause *new events to be processed, including the very event handler you were already in*. So you would have to write all the code to be re-entrant even though it's single threaded. I attempted to serialise the events by catching them and putting them in a queue to process in order rather than re-entrantly but that caused Qt to fire seemingly nonsensical events like two leave events in a row for the same widget and other nonsense that entirely defeats the purpose of the drag events if you can't trust anything about them.\r\n\r\nThis change is compatible with the Qt5 pull request (it just has a try/except for the imports for now so that it works regardless, can be changed to just use qtutils.qt after that branch is merged), though the merge might have to be done locally to discard the other file as otherwise it looks like a merge conflict.", "title": "Dragdroptab", "destination": {"commit": {"hash": "2f3efa609916", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/2f3efa609916.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/2f3efa609916"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "7f0c6c990d91", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/7f0c6c990d91"}, "html": {"href": "#!/cbillington/labscript_utils/commits/7f0c6c990d91"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "dragdroptab"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-08-04T07:44:15.010814+00:00"}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"update": {"description": "* Reimplemented dragdroptab.\r\n\r\n    Lost: ~~mouse icon changing during drag~~, animation when moving tabs\r\n    within a tabbar.\r\n\r\n    Gained: Doesn't crash or lose tabs.\r\n\r\n    The lost functionality can plausible be re-added without compromising\r\n    on the lack of crashing. I just haven't looked into it much yet.\r\n\r\nThis pull request may fix issue #13 (I can't test, I don't have a mac, but I expect it will since I'm now storing which tab is being dragged based on the position of the mouse click rather than which tab was active at the time of the click), [likely fixes BLACS issue #17](#!/labscript_suite/blacs/issues/17/tab-becomes-unselected-when-moving), and does fix the issue I've seen in testing pull request #20.\r\n\r\nThis reimplementation is based on abandoning Qt's drag and drop functionality, and implementing it instead with just mouseEvents. It turns out to be much easier, since there was unending subtleties with Qt's drag events. The main one being that if during an event you called functions that modified the GUI, this could actually cause *new events to be processed, including the very event handler you were already in*. So you would have to write all the code to be re-entrant even though it's single threaded. I attempted to serialise the events by catching them and putting them in a queue to process in order rather than re-entrantly but that caused Qt would to fire seemingly nonsensical events like two leave events in a row for the same widget.\r\n\r\nThis change is compatible with the Qt5 pull request (it just has a try/except for the imports for now so that it works regardless, can be changed to just use qtutils.qt after that branch is merged), though the merge might have to be done locally to discard the other file as otherwise it looks like a merge conflict.", "title": "Dragdroptab", "destination": {"commit": {"hash": "2f3efa609916", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/2f3efa609916.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/2f3efa609916"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "7f0c6c990d91", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/7f0c6c990d91"}, "html": {"href": "#!/cbillington/labscript_utils/commits/7f0c6c990d91"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "dragdroptab"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-08-04T07:41:18.228447+00:00"}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"update": {"description": "* Reimplemented dragdroptab.\r\n\r\n    Lost: ~~mouse icon changing during drag~~, animation when moving tabs\r\n    within a tabbar.\r\n\r\n    Gained: Doesn't crash or lose tabs.\r\n\r\n    The lost functionality can plausible be re-added without compromising\r\n    on the lack of crashing. I just haven't looked into it much yet.\r\n\r\nThis pull request may fix issue #13 (I can't test, I don't have a mac, but I expect it will since I'm now storing which tab is being dragged based on the position of the mouse click rather than which tab was active at the time of the click), [likely fixes BLACS issue #17](#!/labscript_suite/blacs/issues/17/tab-becomes-unselected-when-moving), and does fix the issue I've seen in testing pull request #20.\r\n\r\nThis reimplementation is based on abandoning Qt's drag and drop functionality, and implementing it instead with just mouseEvents. It turns out to be much easier, since there was unending subtleties with Qt's drag events. The main one being that if during an event you called functions that modified the GUI, this could actually cause *new events to be processed, including the very event handler you were already in*. So you would have to write all the code to be re-entrant even though it's single threaded. I attempted to serialise the events by catching them and putting them in a queue to process in order rather than re-entrantly but that caused Qt would to fire seemingly nonsensical events like two leave events in a row for the same widget.\r\n\r\nThis change is compatible with the Qt5 pull request (it just has a try/except for the imports for now so that it works regardless, can be changed to just use qtutils.qt after that branch is merged), though the merge might have to be done locally to discard the other file as otherwise it looks like a merge conflict.", "title": "Dragdroptab", "destination": {"commit": {"hash": "2f3efa609916", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/2f3efa609916.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/2f3efa609916"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "0fc389edc985", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/0fc389edc985"}, "html": {"href": "#!/cbillington/labscript_utils/commits/0fc389edc985"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "dragdroptab"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-08-04T07:34:13.379239+00:00"}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"update": {"description": "* Reimplemented dragdroptab.\r\n\r\n    Lost: ~~mouse icon changing during drag~~, animation when moving tabs\r\n    within a tabbar.\r\n\r\n    Gained: Doesn't crash or lose tabs.\r\n\r\n    The lost functionality can plausible be re-added without compromising\r\n    on the lack of crashing. I just haven't looked into it much yet.\r\n\r\nThis pull request may fix issue #13 (I can't test, I don't have a mac), [likely fixes BLACS issue #17](#!/labscript_suite/blacs/issues/17/tab-becomes-unselected-when-moving), and does fix the issue I've seen in testing pull request #20.\r\n\r\nThis reimplementation is based on abandoning Qt's drag and drop functionality, and implementing it instead with just mouseEvents. It turns out to be much easier, since there was unending subtleties with Qt's drag events. The main one being that if during an event you called functions that modified the GUI, this could actually cause *new events to be processed, including the very event handler you were already in*. So you would have to write all the code to be re-entrant even though it's single threaded. I attempted to serialise the events by catching them and putting them in a queue to process in order rather than re-entrantly but that caused Qt would to fire seemingly nonsensical events like two leave events in a row for the same widget.\r\n\r\nThis change is compatible with the Qt5 pull request (it just has a try/except for the imports for now so that it works regardless, can be changed to just use qtutils.qt after that branch is merged), though the merge might have to be done locally to discard the other file as otherwise it looks like a merge conflict.", "title": "Dragdroptab", "destination": {"commit": {"hash": "2f3efa609916", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/2f3efa609916.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/2f3efa609916"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "0fc389edc985", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/0fc389edc985"}, "html": {"href": "#!/cbillington/labscript_utils/commits/0fc389edc985"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "dragdroptab"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-08-04T07:33:13.307476+00:00"}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42170815.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42170815"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Woo, I made it turn the mouse cursor into a floating picture of the tab! Don't know if it works on other platforms - Qt says there might be size restrictions, so it might scale it down or something.\n\n", "markup": "markdown", "html": "<p>Woo, I made it turn the mouse cursor into a floating picture of the tab! Don't know if it works on other platforms - Qt says there might be size restrictions, so it might scale it down or something.</p>", "type": "rendered"}, "created_on": "2017-08-04T07:17:07.619234+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-04T07:17:58.835942+00:00", "type": "pullrequest_comment", "id": 42170815}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"update": {"description": "* Reimplemented dragdroptab.\r\n\r\n    Lost: mouse icon changing during drag, animation when moving tabs\r\n    within a tabbar.\r\n\r\n    Gained: Doesn't crash or lose tabs.\r\n\r\n    The lost functionality can plausible be re-added without compromising\r\n    on the lack of crashing. I just haven't looked into it much yet.\r\n\r\nThis pull request may fix issue #13 (I can't test, I don't have a mac), [likely fixes BLACS issue #17](#!/labscript_suite/blacs/issues/17/tab-becomes-unselected-when-moving), and does fix the issue I've seen in testing pull request #20.\r\n\r\nThis reimplementation is based on abandoning Qt's drag and drop functionality, and implementing it instead with just mouseEvents. It turns out to be much easier, since there was unending subtleties with Qt's drag events. The main one being that if during an event you called functions that modified the GUI, this could actually cause *new events to be processed, including the very event handler you were already in*. So you would have to write all the code to be re-entrant even though it's single threaded. I attempted to serialise the events by catching them and putting them in a queue to process in order rather than re-entrantly but that caused Qt would to fire seemingly nonsensical events like two leave events in a row for the same widget.\r\n\r\nThis change is compatible with the Qt5 pull request (it just has a try/except for the imports for now so that it works regardless, can be changed to just use qtutils.qt after that branch is merged), though the merge might have to be done locally to discard the other file as otherwise it looks like a merge conflict.", "title": "Dragdroptab", "destination": {"commit": {"hash": "2f3efa609916", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/2f3efa609916.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/2f3efa609916"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "0fc389edc985", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/0fc389edc985"}, "html": {"href": "#!/cbillington/labscript_utils/commits/0fc389edc985"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "dragdroptab"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-08-04T07:07:29.167740+00:00"}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"update": {"description": "* Reimplemented dragdroptab.\r\n\r\n    Lost: mouse icon changing during drag, animation when moving tabs\r\n    within a tabbar.\r\n\r\n    Gained: Doesn't crash or lose tabs.\r\n\r\n    The lost functionality can plausible be re-added without compromising\r\n    on the lack of crashing. I just haven't looked into it much yet.\r\n\r\nThis pull request may fix issue #13 (I can't test, I don't have a mac), [likely fixes BLACS issue #17](#!/labscript_suite/blacs/issues/17/tab-becomes-unselected-when-moving), and does fix the issue I've seen in testing pull request #20.\r\n\r\nThis reimplementation is based on abandoning Qt's drag and drop functionality, and implementing it instead with just mouseEvents. It turns out to be much easier, since there was unending subtleties with Qt's drag events. The main one being that if during an event you called functions that modified the GUI, this could actually cause *new events to be processed, including the very event handler you were already in*. So you would have to write all the code to be re-entrant even though it's single threaded. I attempted to serialise the events by catching them and putting them in a queue to process in order rather than re-entrantly but that caused Qt would to fire seemingly nonsensical events like two leave events in a row for the same widget.\r\n\r\nThis change is compatible with the Qt5 pull request (it just has a try/except for the imports for now so that it works regardless, can be changed to just use qtutils.qt after that branch is merged), though the merge might have to be done locally to discard the other file as otherwise it looks like a merge conflict.", "title": "Dragdroptab", "destination": {"commit": {"hash": "2f3efa609916", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/2f3efa609916.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/2f3efa609916"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "f559bd949619", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/f559bd949619"}, "html": {"href": "#!/cbillington/labscript_utils/commits/f559bd949619"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "dragdroptab"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-08-04T06:40:11.130093+00:00"}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"update": {"description": "* Reimplemented dragdroptab.\r\n\r\n    Lost: mouse icon changing during drag, animation when moving tabs\r\n    within a tabbar.\r\n\r\n    Gained: Doesn't crash or lose tabs.\r\n\r\n    The lost functionality can plausible be re-added without compromising\r\n    on the lack of crashing. I just haven't looked into it much yet.\r\n\r\nThis pull request may fix issue #13 (I can't test, I don't have a mac), [likely fixes BLACS issue #17](#!/labscript_suite/blacs/issues/17/tab-becomes-unselected-when-moving), and does fix the issue I've seen in testing pull request #20.\r\n\r\nThis reimplementation is based on abandoning Qt's drag and drop functionality, and implementing it instead with just mouseEvents. It turns out to be much easier, since there was unending subtleties with Qt's drag events. The main one being that if during an event you called functions that modified the GUI, this could actually cause *new events to be processed, including the very event handler you were already in*. So you would have to write all the code to be re-entrant even though it's single threaded. I attempted to serialise the events by catching them and putting them in a queue to process in order rather than re-entrantly but that caused Qt would to fire seemingly nonsensical events like two leave events in a row for the same widget.\r\n\r\nThis change is compatible with the Qt5 pull request (it just has a try/except for the imports for now so that it works regardless, can be changed to just use qtutils.qt after that branch is merged), though the merge might have to be done locally to discard the other file as otherwise it looks like a merge conflict.", "title": "Dragdroptab", "destination": {"commit": {"hash": "2f3efa609916", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/2f3efa609916.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/2f3efa609916"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "a80f335681e5", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/a80f335681e5"}, "html": {"href": "#!/cbillington/labscript_utils/commits/a80f335681e5"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "dragdroptab"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-08-04T06:38:31.483544+00:00"}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}, {"update": {"description": "* Reimplemented dragdroptab.\r\n\r\n    Lost: mouse icon changing during drag, animation when moving tabs\r\n    within a tabbar.\r\n\r\n    Gained: Doesn't crash or lose tabs.\r\n\r\n    The lost functionality can plausible be re-added without compromising\r\n    on the lack of crashing. I just haven't looked into it much yet.\r\n\r\nThis pull request may fix issue #13 (I can't test, I don't have a mac), [likely fixes BLACS issue #17](#!/labscript_suite/blacs/issues/17/tab-becomes-unselected-when-moving), and does fix the issue I've seen in testing pull request #20.\r\n\r\nThis reimplementation is based on abandoning Qt's drag and drop functionality, and implementing it instead with just mouseEvents. It turns out to be much easier, since there was unending subtleties with Qt's drag events. The main one being that if during an event you called functions that modified the GUI, this could actually cause *new events to be processed, including the very event handler you were already in*. So you would have to write all the code to be re-entrant even though it's single threaded. I attempted to serialise the events by catching them and putting them in a queue to process in order rather than re-entrantly but that caused Qt would to fire seemingly nonsensical events like two leave events in a row for the same widget.\r\n\r\nThis change is compatible with the Qt5 pull request (it just has a try/except for the imports for now so that it works regardless, can be changed to just use qtutils.qt after that branch is merged), though the merge might have to be done locally to discard the other file as otherwise it looks like a merge conflict.", "title": "Dragdroptab", "destination": {"commit": {"hash": "2f3efa609916", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/2f3efa609916.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/2f3efa609916"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "a80f335681e5", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/a80f335681e5"}, "html": {"href": "#!/cbillington/labscript_utils/commits/a80f335681e5"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "dragdroptab"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2017-08-04T06:38:31.423716+00:00"}, "pull_request": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}}]}