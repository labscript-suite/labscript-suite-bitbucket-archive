{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42170815.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42170815"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Woo, I made it turn the mouse cursor into a floating picture of the tab! Don't know if it works on other platforms - Qt says there might be size restrictions, so it might scale it down or something.\n\n", "markup": "markdown", "html": "<p>Woo, I made it turn the mouse cursor into a floating picture of the tab! Don't know if it works on other platforms - Qt says there might be size restrictions, so it might scale it down or something.</p>", "type": "rendered"}, "created_on": "2017-08-04T07:17:07.619234+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-04T07:17:58.835942+00:00", "type": "pullrequest_comment", "id": 42170815}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42173951.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42173951"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "I'll do some testing on mac and windows later today and update here but this definitely sounds great.\n\nUpdate:\nOk everything looking fine on macOS the mouse turns into the tab on drag which is really nice. But there is one thing that I noticed that is strange: When pulling the tab outside of the window the tab animation vanishes and it's just the mouse. I'll create a gif to demonstrate. (This should not really happen that often anyway)\n\n![dragdrop-3.gif](data/bitbucket.org/repo/xg9BdE/images/2586118514-dragdrop-3.gif)\n\nUpate 2.0: Ok so the tab vanishing is linked to the mouse crossing a window edge that allows resizing if I exit the window through the top everything is fine.\n\nUpdate 3.0: Under windows there is no animation at all (PyQt4). Also the mac test happened under PyQt5 and PyQt4.", "markup": "markdown", "html": "<p>I'll do some testing on mac and windows later today and update here but this definitely sounds great.</p>\n<p>Update:\nOk everything looking fine on macOS the mouse turns into the tab on drag which is really nice. But there is one thing that I noticed that is strange: When pulling the tab outside of the window the tab animation vanishes and it's just the mouse. I'll create a gif to demonstrate. (This should not really happen that often anyway)</p>\n<p><img alt=\"dragdrop-3.gif\" src=\"data/bitbucket.org/repo/xg9BdE/images/2586118514-dragdrop-3.gif\" /></p>\n<p>Upate 2.0: Ok so the tab vanishing is linked to the mouse crossing a window edge that allows resizing if I exit the window through the top everything is fine.</p>\n<p>Update 3.0: Under windows there is no animation at all (PyQt4). Also the mac test happened under PyQt5 and PyQt4.</p>", "type": "rendered"}, "created_on": "2017-08-04T07:58:52.233961+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-04T09:19:38.964092+00:00", "type": "pullrequest_comment", "id": 42173951}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42185349.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42185349"}}, "parent": {"id": 42173951, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42173951.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42173951"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Thanks for testing!\n\nInteresting. I think I understand about the cursor disappearing - it might be fixed now (I'm just setting the cursor more often instead of just once) \n\nAs for Windows, maybe I'll just replace it with some other standard mouse icon then.", "markup": "markdown", "html": "<p>Thanks for testing!</p>\n<p>Interesting. I think I understand about the cursor disappearing - it might be fixed now (I'm just setting the cursor more often instead of just once) </p>\n<p>As for Windows, maybe I'll just replace it with some other standard mouse icon then.</p>", "type": "rendered"}, "created_on": "2017-08-04T10:07:33.403207+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-04T10:07:33.408209+00:00", "type": "pullrequest_comment", "id": 42185349}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42187709.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42187709"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "OK I replaced the cursor with just drawing and moving around a little widget instead - hopefully now should work the same on all platforms!", "markup": "markdown", "html": "<p>OK I replaced the cursor with just drawing and moving around a little widget instead - hopefully now should work the same on all platforms!</p>", "type": "rendered"}, "created_on": "2017-08-04T10:41:53.706242+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-04T10:41:53.709116+00:00", "type": "pullrequest_comment", "id": 42187709}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42191244.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42191244"}}, "parent": {"id": 42187709, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42187709.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42187709"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Now everything is working nicely under both macOS and windows. Both of them show the dragged tab.\n", "markup": "markdown", "html": "<p>Now everything is working nicely under both macOS and windows. Both of them show the dragged tab.</p>", "type": "rendered"}, "created_on": "2017-08-04T11:31:39.675786+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-04T11:31:39.722502+00:00", "type": "pullrequest_comment", "id": 42191244}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42191567.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42191567"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Found a new bug that seems to be mac specific(it's not present under windows). If you drag the tab out of the window and drop it there it will crash python. If this is not present under linux I would be fine with this not being fixed.", "markup": "markdown", "html": "<p>Found a new bug that seems to be mac specific(it's not present under windows). If you drag the tab out of the window and drop it there it will crash python. If this is not present under linux I would be fine with this not being fixed.</p>", "type": "rendered"}, "created_on": "2017-08-04T11:35:46.002328+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-04T11:35:46.065385+00:00", "type": "pullrequest_comment", "id": 42191567}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42192838.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42192838"}}, "parent": {"id": 42191567, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42191567.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42191567"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Ugh, how annoying. No, it's not present under Linux. Does the same thing occur if you release the tab inside the main window, but when the tab is not in a tab widget? Or only if you drag it outside the whole window?\n\nI'm cancelling the drag on both mouse release events and leave events, I didn't think there were any others. I'm interested in fixing it though - I'll push a commit with debug lines.", "markup": "markdown", "html": "<p>Ugh, how annoying. No, it's not present under Linux. Does the same thing occur if you release the tab inside the main window, but when the tab is not in a tab widget? Or only if you drag it outside the whole window?</p>\n<p>I'm cancelling the drag on both mouse release events and leave events, I didn't think there were any others. I'm interested in fixing it though - I'll push a commit with debug lines.</p>", "type": "rendered"}, "created_on": "2017-08-04T11:52:38.436334+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-04T11:52:38.438648+00:00", "type": "pullrequest_comment", "id": 42192838}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42195669.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42195669"}}, "parent": {"id": 42192838, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42192838.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42192838"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Nop inside the window everything is fine but once I dare drag and drop it over the line byebye python.", "markup": "markdown", "html": "<p>Nop inside the window everything is fine but once I dare drag and drop it over the line byebye python.</p>", "type": "rendered"}, "created_on": "2017-08-04T12:29:01.297133+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-04T12:30:24.987431+00:00", "type": "pullrequest_comment", "id": 42195669}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42197060.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42197060"}}, "parent": {"id": 42195669, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42195669.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42195669"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "I made a small change just in case - I'm now re-using the little widgets instead of creating and destroying them each time, in case I missed something about whether you're allowed to just let widgets get garbage collected like that. Now they live for the whole program so removed the possibility of their destruction going wrong.\n\nAnd I added detailed debug printlines. Could you set DEBUG = True in the `debug` class at the top, make it break and show me the output?\n\nThanks for the testing! ", "markup": "markdown", "html": "<p>I made a small change just in case - I'm now re-using the little widgets instead of creating and destroying them each time, in case I missed something about whether you're allowed to just let widgets get garbage collected like that. Now they live for the whole program so removed the possibility of their destruction going wrong.</p>\n<p>And I added detailed debug printlines. Could you set DEBUG = True in the <code>debug</code> class at the top, make it break and show me the output?</p>\n<p>Thanks for the testing! </p>", "type": "rendered"}, "created_on": "2017-08-04T12:46:11.110825+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-04T12:46:11.114241+00:00", "type": "pullrequest_comment", "id": 42197060}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42197277.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42197277"}}, "parent": {"id": 42197060, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42197060.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42197060"}}, "depth": 4}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Doesn't crash anymore but your debug has a typo ;) PyQt5 isn't listed instead there is PyQt4 twice\n\nI'll test some more but approve for now as I don't have any more ideas on how I could make things break.", "markup": "markdown", "html": "<p>Doesn't crash anymore but your debug has a typo ;) PyQt5 isn't listed instead there is PyQt4 twice</p>\n<p>I'll test some more but approve for now as I don't have any more ideas on how I could make things break.</p>", "type": "rendered"}, "created_on": "2017-08-04T12:48:39.086162+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-04T12:54:48.160025+00:00", "type": "pullrequest_comment", "id": 42197277}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42197755.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42197755"}}, "parent": {"id": 42197277, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42197277.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42197277"}}, "depth": 5}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Really, it doesn't crash! That's fantastic. I guess it's not OK to just set parentless widgets to None and expect them to be garbage collected when the main window doesn't have focus on macos, or something like that.\n\nJust because I'm paranoid, could you verify that it still doesn't crash when you disable the debugging? Printing text to the terminal slows down execution enough that if it's timing sensitive that could make a difference. Not that the test code is multithreaded, but depending on how the window manager/display server works on macos there could still be race conditions with interacting with it if I'm doing something wrong.", "markup": "markdown", "html": "<p>Really, it doesn't crash! That's fantastic. I guess it's not OK to just set parentless widgets to None and expect them to be garbage collected when the main window doesn't have focus on macos, or something like that.</p>\n<p>Just because I'm paranoid, could you verify that it still doesn't crash when you disable the debugging? Printing text to the terminal slows down execution enough that if it's timing sensitive that could make a difference. Not that the test code is multithreaded, but depending on how the window manager/display server works on macos there could still be race conditions with interacting with it if I'm doing something wrong.</p>", "type": "rendered"}, "created_on": "2017-08-04T12:54:17.683253+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-04T12:54:17.685854+00:00", "type": "pullrequest_comment", "id": 42197755}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42197922.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42197922"}}, "parent": {"id": 42197755, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42197755.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42197755"}}, "depth": 6}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Still works with debug off. (and is much less laggy)\n\nAnd windows is fine as always if thats of interest.", "markup": "markdown", "html": "<p>Still works with debug off. (and is much less laggy)</p>\n<p>And windows is fine as always if thats of interest.</p>", "type": "rendered"}, "created_on": "2017-08-04T12:56:13.055475+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-04T12:57:28.553508+00:00", "type": "pullrequest_comment", "id": 42197922}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42198752.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42198752"}}, "parent": {"id": 42197922, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42197922.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42197922"}}, "depth": 7}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Excellent. I found another bug however - introduced by the fact that I decided to handle leaveEvent - leaveEvent is now being called from within mouseReleaseEvent if you drag a tab down to the tabWidget below it and drop it in the empty space in the middle of the tabWidget (not in the tab bar). But since I understand exactly what's going on at this point I know I can safely ignore the leaveEvent. So I'll fix that. Since leaveEvent is the only event I'm handling that can be generated non-spontaneously (i.e. by other event processing rather than by a human), this should be the end of any re-entrant problems.\n\nEdit: should be fixed now!", "markup": "markdown", "html": "<p>Excellent. I found another bug however - introduced by the fact that I decided to handle leaveEvent - leaveEvent is now being called from within mouseReleaseEvent if you drag a tab down to the tabWidget below it and drop it in the empty space in the middle of the tabWidget (not in the tab bar). But since I understand exactly what's going on at this point I know I can safely ignore the leaveEvent. So I'll fix that. Since leaveEvent is the only event I'm handling that can be generated non-spontaneously (i.e. by other event processing rather than by a human), this should be the end of any re-entrant problems.</p>\n<p>Edit: should be fixed now!</p>", "type": "rendered"}, "created_on": "2017-08-04T13:05:04.330432+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-04T13:16:24.770546+00:00", "type": "pullrequest_comment", "id": 42198752}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42217256.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42217256"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "newest commit changes tabs name to some number on draging. (maybe make that a debug thing?)", "markup": "markdown", "html": "<p>newest commit changes tabs name to some number on draging. (maybe make that a debug thing?)</p>", "type": "rendered"}, "created_on": "2017-08-04T16:18:20.790716+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-04T16:20:11.544436+00:00", "type": "pullrequest_comment", "id": 42217256}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42217540.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42217540"}}, "parent": {"id": 42217256, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42217256.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42217256"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Yep! it's changing it to time.time() - that's to test that while dragging the tab data can be updated.\n\nI changed the dragging 'icon' to actually be a real QTabBar, which means the tab text and icon and everything can be updated at any time regardless of whether a tab is being dragged or not. At the moment there's a bit of a hack in BLACS where tabs check to see if they are in a QTabBar before changing anything about their tabs, and if they're not in a tab bar they queue up the change for later instead. It's pretty hacky and it would be great if the tabs were just always in a QTabBar, even if that QTabBar was a single tab floating by itself in free space.", "markup": "markdown", "html": "<p>Yep! it's changing it to time.time() - that's to test that while dragging the tab data can be updated.</p>\n<p>I changed the dragging 'icon' to actually be a real QTabBar, which means the tab text and icon and everything can be updated at any time regardless of whether a tab is being dragged or not. At the moment there's a bit of a hack in BLACS where tabs check to see if they are in a QTabBar before changing anything about their tabs, and if they're not in a tab bar they queue up the change for later instead. It's pretty hacky and it would be great if the tabs were just always in a QTabBar, even if that QTabBar was a single tab floating by itself in free space.</p>", "type": "rendered"}, "created_on": "2017-08-04T16:21:41.636094+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-04T16:21:41.638910+00:00", "type": "pullrequest_comment", "id": 42217540}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42240762.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42240762"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Would be nice if you could restore the lost functionality. I don't think it will cause problems. Almost surprised it's lost....suspect it's a trivial change (possibly just because you return before accepting the event? Not sure, it doesn't look like you handle the parent class `mouseMoveEvent` much different than I did)", "markup": "markdown", "html": "<p>Would be nice if you could restore the lost functionality. I don't think it will cause problems. Almost surprised it's lost....suspect it's a trivial change (possibly just because you return before accepting the event? Not sure, it doesn't look like you handle the parent class <code>mouseMoveEvent</code> much different than I did)</p>", "type": "rendered"}, "created_on": "2017-08-05T05:34:17.486851+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2017-08-05T05:34:17.489144+00:00", "type": "pullrequest_comment", "id": 42240762}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42248724.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42248724"}}, "parent": {"id": 42240762, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42240762.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42240762"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Yep! I agree, I'll get it back.", "markup": "markdown", "html": "<p>Yep! I agree, I'll get it back.</p>", "type": "rendered"}, "created_on": "2017-08-06T13:59:57.582450+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-06T13:59:57.586296+00:00", "type": "pullrequest_comment", "id": 42248724}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42251608.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42251608"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "I like the new animation but found some unexpected behavior that is not really breaking anything:\n![tab_ani-2.gif](data/bitbucket.org/repo/xg9BdE/images/4218997367-tab_ani-2.gif)", "markup": "markdown", "html": "<p>I like the new animation but found some unexpected behavior that is not really breaking anything:\n<img alt=\"tab_ani-2.gif\" src=\"data/bitbucket.org/repo/xg9BdE/images/4218997367-tab_ani-2.gif\" /></p>", "type": "rendered"}, "created_on": "2017-08-06T21:49:16.730104+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-06T21:49:16.790097+00:00", "type": "pullrequest_comment", "id": 42251608}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42251630.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42251630"}}, "parent": {"id": 42251608, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42251608.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42251608"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Looks pretty weird - is it not letting your mouse go outside the window?", "markup": "markdown", "html": "<p>Looks pretty weird - is it not letting your mouse go outside the window?</p>", "type": "rendered"}, "created_on": "2017-08-06T21:53:22.861723+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-06T21:53:22.864327+00:00", "type": "pullrequest_comment", "id": 42251630}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42251645.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42251645"}}, "parent": {"id": 42251630, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42251630.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42251630"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "no it is but the flickering happens only in the area around the windows right side and starts in the edge which is why I'm staying there to demonstrate. And at the end the tab is stuck on the side for some reason after release.", "markup": "markdown", "html": "<p>no it is but the flickering happens only in the area around the windows right side and starts in the edge which is why I'm staying there to demonstrate. And at the end the tab is stuck on the side for some reason after release.</p>", "type": "rendered"}, "created_on": "2017-08-06T21:55:16.867079+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-06T21:55:16.925441+00:00", "type": "pullrequest_comment", "id": 42251645}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42251759.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42251759"}}, "parent": {"id": 42251645, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42251645.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42251645"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Cool. I'm not quite done yet with the animation,  but the changes I've made since might fix it, so I've pushed them in case you want to find out. Looks like there's a region on the right where both \"put the tab back in\" and \"take the tab out\" conditions are satisfied - or more likely, that taking the tab out changes the geometry of the tab bar (I see foo moving to the middle - they're left aligned for me) making the \"put it back in\" condition immediately satisfied.", "markup": "markdown", "html": "<p>Cool. I'm not quite done yet with the animation,  but the changes I've made since might fix it, so I've pushed them in case you want to find out. Looks like there's a region on the right where both \"put the tab back in\" and \"take the tab out\" conditions are satisfied - or more likely, that taking the tab out changes the geometry of the tab bar (I see foo moving to the middle - they're left aligned for me) making the \"put it back in\" condition immediately satisfied.</p>", "type": "rendered"}, "created_on": "2017-08-06T22:14:31.846710+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-06T22:14:31.850300+00:00", "type": "pullrequest_comment", "id": 42251759}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42251766.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42251766"}}, "parent": {"id": 42251759, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42251759.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42251759"}}, "depth": 4}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Nop doesn't fix it. \nI'll test on windows tomorrow morning (in about 9 hours) to see of the alignment is different there. Maybe it's one of those mac only bugs again ^^", "markup": "markdown", "html": "<p>Nop doesn't fix it. \nI'll test on windows tomorrow morning (in about 9 hours) to see of the alignment is different there. Maybe it's one of those mac only bugs again ^^</p>", "type": "rendered"}, "created_on": "2017-08-06T22:16:34.184931+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-06T22:19:18.188416+00:00", "type": "pullrequest_comment", "id": 42251766}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42252795.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42252795"}}, "parent": {"id": 42251608, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42251608.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42251608"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "I found a problem that caused the tab to not animate back (the underlying tab had the right position but the animation had not been prodded to run), so that might be fixed. And I'm not sure about the flickering, but I just added a buffer zone - so that you have to drag ten pixels out for the tab to pop out, and then you would have to go ten pixels back again before it popped back in, rather than it just being neighbouring pixels counting as in or out.", "markup": "markdown", "html": "<p>I found a problem that caused the tab to not animate back (the underlying tab had the right position but the animation had not been prodded to run), so that might be fixed. And I'm not sure about the flickering, but I just added a buffer zone - so that you have to drag ten pixels out for the tab to pop out, and then you would have to go ten pixels back again before it popped back in, rather than it just being neighbouring pixels counting as in or out.</p>", "type": "rendered"}, "created_on": "2017-08-07T00:01:51.672976+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-07T00:01:51.675633+00:00", "type": "pullrequest_comment", "id": 42252795}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42260090.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42260090"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "OK. Pending bugfixes I'm done with this now. It was a lot of work, and I now understand why I've never seen a Qt app (other than BLACS) with drag-drop tabs before. It's practically a quarter of the length of the actual Qt code for the tab bar itself, and given the normal python to C++ verbosity ratio, that means you're reimplementing a decent chunk of the behaviour of the whole thing just to get the tabs to move.", "markup": "markdown", "html": "<p>OK. Pending bugfixes I'm done with this now. It was a lot of work, and I now understand why I've never seen a Qt app (other than BLACS) with drag-drop tabs before. It's practically a quarter of the length of the actual Qt code for the tab bar itself, and given the normal python to C++ verbosity ratio, that means you're reimplementing a decent chunk of the behaviour of the whole thing just to get the tabs to move.</p>", "type": "rendered"}, "created_on": "2017-08-07T05:57:23.026923+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-07T05:57:23.028914+00:00", "type": "pullrequest_comment", "id": 42260090}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42260621.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42260621"}}, "parent": {"id": 42260090, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42260090.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42260090"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Cool. We'll try and test in our lab soon. We should probably hold off merging until it's been soak tested a bit if that's OK?", "markup": "markdown", "html": "<p>Cool. We'll try and test in our lab soon. We should probably hold off merging until it's been soak tested a bit if that's OK?</p>", "type": "rendered"}, "created_on": "2017-08-07T06:11:55.373499+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2017-08-07T06:11:55.378034+00:00", "type": "pullrequest_comment", "id": 42260621}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42260681.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42260681"}}, "parent": {"id": 42260621, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42260621.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42260621"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "I'll do some testing later too on windows and mac as always.\n\nUpdate: Everything seems to work fine and I was not able to create any unexpected behavior on my test machines. Will add it to our lab machine now for longtime testing.", "markup": "markdown", "html": "<p>I'll do some testing later too on windows and mac as always.</p>\n<p>Update: Everything seems to work fine and I was not able to create any unexpected behavior on my test machines. Will add it to our lab machine now for longtime testing.</p>", "type": "rendered"}, "created_on": "2017-08-07T06:13:27.016750+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-07T15:34:22.884788+00:00", "type": "pullrequest_comment", "id": 42260681}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42260742.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42260742"}}, "parent": {"id": 42260621, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42260621.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42260621"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Absolutely! Sounds great.", "markup": "markdown", "html": "<p>Absolutely! Sounds great.</p>", "type": "rendered"}, "created_on": "2017-08-07T06:14:52.567193+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-07T06:14:52.570477+00:00", "type": "pullrequest_comment", "id": 42260742}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42471471.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42471471"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Ok so guys in the lab noticed that the tabs don't display icons anymore when not being dragged.\nI'll removed the new tabs from our lab again until this is fixed, as it's important for quickly finding error states.\n\nThis screenshot shows the tab being dragged left and not dragged right.\n![tabbug.png](data/bitbucket.org/repo/xg9BdE/images/2962113669-tabbug.png)", "markup": "markdown", "html": "<p>Ok so guys in the lab noticed that the tabs don't display icons anymore when not being dragged.\nI'll removed the new tabs from our lab again until this is fixed, as it's important for quickly finding error states.</p>\n<p>This screenshot shows the tab being dragged left and not dragged right.\n<img alt=\"tabbug.png\" src=\"data/bitbucket.org/repo/xg9BdE/images/2962113669-tabbug.png\" /></p>", "type": "rendered"}, "created_on": "2017-08-09T12:02:17.163300+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-09T12:04:34.853374+00:00", "type": "pullrequest_comment", "id": 42471471}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42509056.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42509056"}}, "parent": {"id": 42471471, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42471471.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42471471"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Thanks for testing!\n\nThat's pretty annoying - it looks like it's about the painting - that the icons are still set correctly but just not being painted. I am simply calling the exact same sequence of:\n\n\n```\n#!python\n\nself.initStyleOption(option, index)\npainter.drawControl(QStyle.CE_TabBarTab, option)\n```\n\nin my paint method that the qtabbar itself does in its paint method - this is supposed to draw the whole tab! I can easily add in 'and draw the icon too please', but I didn't expect to have to (and I don't have to on linux).\n\nI'll try to reproduce on Windows and see what I can do!", "markup": "markdown", "html": "<p>Thanks for testing!</p>\n<p>That's pretty annoying - it looks like it's about the painting - that the icons are still set correctly but just not being painted. I am simply calling the exact same sequence of:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">initStyleOption</span><span class=\"p\">(</span><span class=\"n\">option</span><span class=\"p\">,</span> <span class=\"n\">index</span><span class=\"p\">)</span>\n<span class=\"n\">painter</span><span class=\"o\">.</span><span class=\"n\">drawControl</span><span class=\"p\">(</span><span class=\"n\">QStyle</span><span class=\"o\">.</span><span class=\"n\">CE_TabBarTab</span><span class=\"p\">,</span> <span class=\"n\">option</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>in my paint method that the qtabbar itself does in its paint method - this is supposed to draw the whole tab! I can easily add in 'and draw the icon too please', but I didn't expect to have to (and I don't have to on linux).</p>\n<p>I'll try to reproduce on Windows and see what I can do!</p>", "type": "rendered"}, "created_on": "2017-08-09T18:20:03.798135+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-09T18:20:03.801322+00:00", "type": "pullrequest_comment", "id": 42509056}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42510238.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42510238"}}, "parent": {"id": 42509056, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42509056.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42509056"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Our lab computer is running on windows so you shouldn't have problems to reproduce this.\n\nJust tested icons on mac and same problem. \nInterestingly icons are way too huge on mac in tabs this is a [qt problem](http://blog.qt.io/blog/2013/04/25/retina-display-support-for-mac-os-ios-and-x11/) though and fixed in qt5 so one more reason to switch. And the bug of no icons is not present under PyQt5 on mac either.", "markup": "markdown", "html": "<p>Our lab computer is running on windows so you shouldn't have problems to reproduce this.</p>\n<p>Just tested icons on mac and same problem. \nInterestingly icons are way too huge on mac in tabs this is a <a data-is-external-link=\"true\" href=\"http://blog.qt.io/blog/2013/04/25/retina-display-support-for-mac-os-ios-and-x11/\" rel=\"nofollow\">qt problem</a> though and fixed in qt5 so one more reason to switch. And the bug of no icons is not present under PyQt5 on mac either.</p>", "type": "rendered"}, "created_on": "2017-08-09T18:35:54.519390+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-09T18:55:21.926932+00:00", "type": "pullrequest_comment", "id": 42510238}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42517201.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42517201"}}, "parent": {"id": 42510238, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42510238.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42510238"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "It looks like this is a bug in Qt4, and it is not platform specific. I just didn't notice it because I was only testing the icons in BLACS which I was running in PyQt5.\n\nSo everything is great in Qt5. But I'll add a workaround for Qt4.", "markup": "markdown", "html": "<p>It looks like this is a bug in Qt4, and it is not platform specific. I just didn't notice it because I was only testing the icons in BLACS which I was running in PyQt5.</p>\n<p>So everything is great in Qt5. But I'll add a workaround for Qt4.</p>", "type": "rendered"}, "created_on": "2017-08-09T20:18:33.621781+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-09T20:18:33.624366+00:00", "type": "pullrequest_comment", "id": 42517201}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42521048.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42521048"}}, "parent": {"id": 42517201, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42517201.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42517201"}}, "depth": 4}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Fixed. Wasn't really a bug, it was a backward compatibility thing of their own. They had this class called `QStyleOptionTab` which you use if you want to reimplement the painting of widgets themselves. Qt itself on two occasions updated the way the tabs painted by default, but so as to not break other people's custom painting code, they named the new objects `QStyleOptionTabV2` and `QStyleOptionTabV3` and used them internally - letting existing painting code continue to use the older objects that worked in the old way. So to reproduce the default behaviour I just needed to use `QStyleOptionTabV3` in PyQt4. In PyQt5 they removed these backward compatibility objects and there is only one `QStyleOptionTab` referring to the latest functionality.\n\nIf the Qt wrapper were really pedantic, it could alias the name `QStyleOptionTab` to refer to  `QStyleOptionTabV3` in PyQt4, but unless there is a complete list of renames somewhere I suspect this isn't worth it. I just put a flag in there.\n\nGood to hear macos icon size is fixed in Qt5 - I saw your screenshot of runmanager was looking pretty miserable and wasn't looking forward to fixing it!", "markup": "markdown", "html": "<p>Fixed. Wasn't really a bug, it was a backward compatibility thing of their own. They had this class called <code>QStyleOptionTab</code> which you use if you want to reimplement the painting of widgets themselves. Qt itself on two occasions updated the way the tabs painted by default, but so as to not break other people's custom painting code, they named the new objects <code>QStyleOptionTabV2</code> and <code>QStyleOptionTabV3</code> and used them internally - letting existing painting code continue to use the older objects that worked in the old way. So to reproduce the default behaviour I just needed to use <code>QStyleOptionTabV3</code> in PyQt4. In PyQt5 they removed these backward compatibility objects and there is only one <code>QStyleOptionTab</code> referring to the latest functionality.</p>\n<p>If the Qt wrapper were really pedantic, it could alias the name <code>QStyleOptionTab</code> to refer to  <code>QStyleOptionTabV3</code> in PyQt4, but unless there is a complete list of renames somewhere I suspect this isn't worth it. I just put a flag in there.</p>\n<p>Good to hear macos icon size is fixed in Qt5 - I saw your screenshot of runmanager was looking pretty miserable and wasn't looking forward to fixing it!</p>", "type": "rendered"}, "created_on": "2017-08-09T21:16:11.579218+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-09T21:16:11.581881+00:00", "type": "pullrequest_comment", "id": 42521048}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42521741.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42521741"}}, "parent": {"id": 42521048, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42521048.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42521048"}}, "depth": 5}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Great! I'll test a bit and then deploy in the lab again tomorrow.\n\nWell I aliased the progress bars already so why not add QStyleOptionTab as well? I'm gone do that in a minute.\n\nOhhh you haven't seen macOS + PyQt4 + BLACS yet.\n![blacs.png](data/bitbucket.org/repo/xg9BdE/images/3729578202-blacs.png)\nI always though that PyQt5 looked much cleaner but couldn't pin down what it was until I found that blog post. I don't mind the design bugs as long as functionality is not affected.\n\n", "markup": "markdown", "html": "<p>Great! I'll test a bit and then deploy in the lab again tomorrow.</p>\n<p>Well I aliased the progress bars already so why not add QStyleOptionTab as well? I'm gone do that in a minute.</p>\n<p>Ohhh you haven't seen macOS + PyQt4 + BLACS yet.\n<img alt=\"blacs.png\" src=\"data/bitbucket.org/repo/xg9BdE/images/3729578202-blacs.png\" />\nI always though that PyQt5 looked much cleaner but couldn't pin down what it was until I found that blog post. I don't mind the design bugs as long as functionality is not affected.</p>", "type": "rendered"}, "created_on": "2017-08-09T21:27:15.957473+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-09T21:27:16.029489+00:00", "type": "pullrequest_comment", "id": 42521741}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42607203.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42607203"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Approving my own pull request here indicates that I think this is ready to be in the next round of things pulled to lab working copies for testing.\n\nEdit: actually, approving my own pull request doesn't show up in bitbucket's list of pull requests - only reviewers show up. And I can't be a reviewer for my own pull request.\n\nI'll just like, email a list of pull requests to Shaun and Phil instead, like a caveman.", "markup": "markdown", "html": "<p>Approving my own pull request here indicates that I think this is ready to be in the next round of things pulled to lab working copies for testing.</p>\n<p>Edit: actually, approving my own pull request doesn't show up in bitbucket's list of pull requests - only reviewers show up. And I can't be a reviewer for my own pull request.</p>\n<p>I'll just like, email a list of pull requests to Shaun and Phil instead, like a caveman.</p>", "type": "rendered"}, "created_on": "2017-08-10T19:22:37.194933+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-10T19:25:32.889353+00:00", "type": "pullrequest_comment", "id": 42607203}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42886531.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42886531"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "This pull request has merge conflicts due to the qtutils 2 merge.", "markup": "markdown", "html": "<p>This pull request has merge conflicts due to the qtutils 2 merge.</p>", "type": "rendered"}, "created_on": "2017-08-16T06:39:38.013983+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-16T06:39:38.053818+00:00", "type": "pullrequest_comment", "id": 42886531}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42953470.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42953470"}}, "parent": {"id": 42886531, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42886531.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42886531"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Resolved!", "markup": "markdown", "html": "<p>Resolved!</p>", "type": "rendered"}, "created_on": "2017-08-16T19:08:15.348716+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-16T19:08:15.352114+00:00", "type": "pullrequest_comment", "id": 42953470}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42953906.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42953906"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "@PhyNerd has said that they've had this live in their lab for about a week (in a PyQt4 environment, pre-qtutils v2, but now they are running on qtutils v2 - still with PyQt4, so it's live there too).\n\n@pstarkey or @shjohnst are you happy for it to be merged on that basis?\n\nOnce it's merged then the main repo's default branches will have no known problems with PyQt5, which would be a nice place to be.", "markup": "markdown", "html": "<p>@PhyNerd has said that they've had this live in their lab for about a week (in a PyQt4 environment, pre-qtutils v2, but now they are running on qtutils v2 - still with PyQt4, so it's live there too).</p>\n<p>@pstarkey or @shjohnst are you happy for it to be merged on that basis?</p>\n<p>Once it's merged then the main repo's default branches will have no known problems with PyQt5, which would be a nice place to be.</p>", "type": "rendered"}, "created_on": "2017-08-16T19:14:09.310981+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-16T19:14:09.329031+00:00", "type": "pullrequest_comment", "id": 42953906}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42955624.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42955624"}}, "parent": {"id": 42953906, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/42953906.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-42953906"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Just checked my change log it's exactly 7 days ago that I added it to our labs main machine. \nNo problems until now. \n\nI also think that since tabs don't get dragged that often it will take a long time to find bugs (if there are any). \nSo we might as well merge now.", "markup": "markdown", "html": "<p>Just checked my change log it's exactly 7 days ago that I added it to our labs main machine. \nNo problems until now. </p>\n<p>I also think that since tabs don't get dragged that often it will take a long time to find bugs (if there are any). \nSo we might as well merge now.</p>", "type": "rendered"}, "created_on": "2017-08-16T19:39:26.297041+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-16T19:39:40.347876+00:00", "type": "pullrequest_comment", "id": 42955624}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150008.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150008"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Ok so I noticed something strange under mac with both PyQt4 and PyQt5 in BLACS with the new Tabs. I haven't checked on windows yet.\nIf you drag the tabs once everything works just fine. But if you then drag any tab after that dragging will stop after less then a second.\n![bug.gif](data/bitbucket.org/repo/xg9BdE/images/1467006556-bug.gif)\n\nThis only happens in BLACS and only 90% of the time and I have no clue on why/when it is happening.\n", "markup": "markdown", "html": "<p>Ok so I noticed something strange under mac with both PyQt4 and PyQt5 in BLACS with the new Tabs. I haven't checked on windows yet.\nIf you drag the tabs once everything works just fine. But if you then drag any tab after that dragging will stop after less then a second.\n<img alt=\"bug.gif\" src=\"data/bitbucket.org/repo/xg9BdE/images/1467006556-bug.gif\" /></p>\n<p>This only happens in BLACS and only 90% of the time and I have no clue on why/when it is happening.</p>", "type": "rendered"}, "created_on": "2017-08-19T12:48:04.347025+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-19T13:05:57.781709+00:00", "type": "pullrequest_comment", "id": 43150008}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150144.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150144"}}, "parent": {"id": 43150008, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150008.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150008"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "I haven't noticed this under Windows - I deployed this update to a lab at NIST using Windows because they wanted to use Qt5. I was definitely able to drag tabs more than once!\n\n\n Could you enable debugging in dragdroptab.py and post what it prints to the terminal?\n\nDragging is cancelled on a leaveEvent and a mouseReleaseEvent, so one guess is that spurious leaveEvents are being generated. The debug output will print what event triggered the cancelling.", "markup": "markdown", "html": "<p>I haven't noticed this under Windows - I deployed this update to a lab at NIST using Windows because they wanted to use Qt5. I was definitely able to drag tabs more than once!</p>\n<p>Could you enable debugging in dragdroptab.py and post what it prints to the terminal?</p>\n<p>Dragging is cancelled on a leaveEvent and a mouseReleaseEvent, so one guess is that spurious leaveEvents are being generated. The debug output will print what event triggered the cancelling.</p>", "type": "rendered"}, "created_on": "2017-08-19T13:12:38.180199+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-19T13:12:38.182651+00:00", "type": "pullrequest_comment", "id": 43150144}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150192.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150192"}}, "parent": {"id": 43150144, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150144.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150144"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Sure but the output with debug active is really long after just one drag. [Output](https://pastebin.com/iTLsm2TN)\n\nUpdate:\nI replaced the followning code in ```leaveEvent``` with just ```return``` and everything is working fine\n```\n#!python\n\n        if not self.drag_in_progress:\n            return\n```\n\nSo somewhere ```self.drag_in_progress``` is set to False. I'll investigate.", "markup": "markdown", "html": "<p>Sure but the output with debug active is really long after just one drag. <a data-is-external-link=\"true\" href=\"https://pastebin.com/iTLsm2TN\" rel=\"nofollow\">Output</a></p>\n<p>Update:\nI replaced the followning code in <code>leaveEvent</code> with just <code>return</code> and everything is working fine</p>\n<div class=\"codehilite language-python\"><pre><span></span>        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">drag_in_progress</span><span class=\"p\">:</span>\n            <span class=\"k\">return</span>\n</pre></div>\n\n\n<p>So somewhere <code>self.drag_in_progress</code> is set to False. I'll investigate.</p>", "type": "rendered"}, "created_on": "2017-08-19T13:20:05.656975+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-19T13:27:54.814075+00:00", "type": "pullrequest_comment", "id": 43150192}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150268.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150268"}}, "parent": {"id": 43150192, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150192.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150192"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Well, at least on linux, if you drag a tab outside the whole window, and then release it, you get both a mouseRelease event and a leaveEvent. So the idea was that whichever happens first sets  `self.drag_in_progress = False` so that the other one doesn't run as well. \n\nBut I'll look at the debug info. So does the debug output show what happens when you do a successful drag, and then one that gets cut short by this bug?", "markup": "markdown", "html": "<p>Well, at least on linux, if you drag a tab outside the whole window, and then release it, you get both a mouseRelease event and a leaveEvent. So the idea was that whichever happens first sets  <code>self.drag_in_progress = False</code> so that the other one doesn't run as well. </p>\n<p>But I'll look at the debug info. So does the debug output show what happens when you do a successful drag, and then one that gets cut short by this bug?</p>", "type": "rendered"}, "created_on": "2017-08-19T13:32:01.678533+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-19T13:32:01.681001+00:00", "type": "pullrequest_comment", "id": 43150268}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150285.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150285"}}, "parent": {"id": 43150268, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150268.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150268"}}, "depth": 4}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "No it's just a buggy drag. Do you want a successful one too?", "markup": "markdown", "html": "<p>No it's just a buggy drag. Do you want a successful one too?</p>", "type": "rendered"}, "created_on": "2017-08-19T13:34:06.269107+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-19T13:34:06.316458+00:00", "type": "pullrequest_comment", "id": 43150285}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150308.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150308"}}, "parent": {"id": 43150285, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150285.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150285"}}, "depth": 5}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Yes, please! The way the successful drag ends may be leaving things in an incorrect state.", "markup": "markdown", "html": "<p>Yes, please! The way the successful drag ends may be leaving things in an incorrect state.</p>", "type": "rendered"}, "created_on": "2017-08-19T13:36:44.904513+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-19T13:36:44.906794+00:00", "type": "pullrequest_comment", "id": 43150308}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150347.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150347"}}, "parent": {"id": 43150308, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150308.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150308"}}, "depth": 6}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "[Output both](https://pastebin.com/tpRSEBkX)", "markup": "markdown", "html": "<p><a data-is-external-link=\"true\" href=\"https://pastebin.com/tpRSEBkX\" rel=\"nofollow\">Output both</a></p>", "type": "rendered"}, "created_on": "2017-08-19T13:41:57.209855+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-19T13:41:57.255847+00:00", "type": "pullrequest_comment", "id": 43150347}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150366.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150366"}}, "parent": {"id": 43150347, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150347.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150347"}}, "depth": 7}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Thanks!", "markup": "markdown", "html": "<p>Thanks!</p>", "type": "rendered"}, "created_on": "2017-08-19T13:44:45.585095+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-19T13:44:45.587331+00:00", "type": "pullrequest_comment", "id": 43150366}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150365.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150365"}}, "parent": {"id": 43150192, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150192.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150192"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Actually, the fact that replacing\n\n```\n#!python\n\nif not self.drag_in_progress:\n            return\n```\nwith `return` makes that function not do anything means that `self.drag_in_progress` is `True`. Which is all good - it's just that I didn't expect for the code to get leaveEvents except in situations where the drag was actually supposed to be cancelled. Perhaps there are extra leaveEvents on macos.", "markup": "markdown", "html": "<p>Actually, the fact that replacing</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">drag_in_progress</span><span class=\"p\">:</span>\n            <span class=\"k\">return</span>\n</pre></div>\n\n\n<p>with <code>return</code> makes that function not do anything means that <code>self.drag_in_progress</code> is <code>True</code>. Which is all good - it's just that I didn't expect for the code to get leaveEvents except in situations where the drag was actually supposed to be cancelled. Perhaps there are extra leaveEvents on macos.</p>", "type": "rendered"}, "created_on": "2017-08-19T13:44:35.270868+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-19T13:44:35.273801+00:00", "type": "pullrequest_comment", "id": 43150365}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150428.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150428"}}, "parent": {"id": 43150365, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150365.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150365"}}, "depth": 4}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Ok I found out a bit more. \nIt seems to be linked to the window having focus/being active. For some reason windows are not active on first start of a python app on mac. If the window is not active everything works just fine. If the window becomes active (by clicking in it somewhere) tabs become buggy. That also applies to the demo code. So it's not just a BLACS problem anymore.", "markup": "markdown", "html": "<p>Ok I found out a bit more. \nIt seems to be linked to the window having focus/being active. For some reason windows are not active on first start of a python app on mac. If the window is not active everything works just fine. If the window becomes active (by clicking in it somewhere) tabs become buggy. That also applies to the demo code. So it's not just a BLACS problem anymore.</p>", "type": "rendered"}, "created_on": "2017-08-19T13:54:12.261009+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-19T13:54:12.312668+00:00", "type": "pullrequest_comment", "id": 43150428}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150443.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150443"}}, "parent": {"id": 43150428, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150428.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150428"}}, "depth": 5}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Excellent. Thanks for investigating. This makes sense.\n\nThe code is getting leaveEvents when I didn't expect them. I thought leaveEvents would not occur after a mousePressEvent but before a mouseReleaseEvent unless the application lost focus. Handling the leaveEvent is solely so that the drag gets cancelled if the application loses focus. When the application does not have focus, of course there are no leaveEvents, so that's why you're not seeing any problems when it has no focus. When it does have focus, it looks like Qt goes ahead and passes leaveEvents to the application after a mouse press but before a mouse release, which it does not do on Windows or linux. Perhaps I can use focusOutEvent or whatever its called instead to detect the application losing focus.\n\nThe problem being that if the application loses focus, it never gets the mouse release event, and so we need some way to still cancel the drag in this case otherwise you have a tab hovering in limbo forever.", "markup": "markdown", "html": "<p>Excellent. Thanks for investigating. This makes sense.</p>\n<p>The code is getting leaveEvents when I didn't expect them. I thought leaveEvents would not occur after a mousePressEvent but before a mouseReleaseEvent unless the application lost focus. Handling the leaveEvent is solely so that the drag gets cancelled if the application loses focus. When the application does not have focus, of course there are no leaveEvents, so that's why you're not seeing any problems when it has no focus. When it does have focus, it looks like Qt goes ahead and passes leaveEvents to the application after a mouse press but before a mouse release, which it does not do on Windows or linux. Perhaps I can use focusOutEvent or whatever its called instead to detect the application losing focus.</p>\n<p>The problem being that if the application loses focus, it never gets the mouse release event, and so we need some way to still cancel the drag in this case otherwise you have a tab hovering in limbo forever.</p>", "type": "rendered"}, "created_on": "2017-08-19T13:57:15.170043+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-19T13:58:38.439873+00:00", "type": "pullrequest_comment", "id": 43150443}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150459.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150459"}}, "parent": {"id": 43150443, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150443.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150443"}}, "depth": 6}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Tabs can be dragged in the tabbar without problems even in the buggy state. \n\nSo maybe a leave event is triggered, when the current parent widget is left? (this is just a guess but would make sense to me) ", "markup": "markdown", "html": "<p>Tabs can be dragged in the tabbar without problems even in the buggy state. </p>\n<p>So maybe a leave event is triggered, when the current parent widget is left? (this is just a guess but would make sense to me) </p>", "type": "rendered"}, "created_on": "2017-08-19T14:00:05.686678+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-19T14:00:30.940265+00:00", "type": "pullrequest_comment", "id": 43150459}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150585.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150585"}}, "parent": {"id": 43150459, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150459.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150459"}}, "depth": 7}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Yes, exactly - it's just that in windows and linux, the leave events are supressed whilst a drag is in progress. Not supressing them makes mose sense honestly, but I needed some way to detect loss of focus (focusOutEvent doesn't seem to be called).\n\nIf I simply don't handle the leaveEvents - just delete the leaveEvent method completely - everything is fine for me in PyQt4. However, in PyQt5, I have one remaining problem - if you click and drag outside the application, and then press another mouse button (say you right click whilst not releasing the left mouse button), then the origin tabBar doesn't get a mouseRelease event (even if you subsequently release the mouse) - it only gets a leaveEvent. So handling that leaveEvent was important for ensuring the drag was cancelled in that case.\n\nHowever, since if you do this, you are clicking on the floating tab, perhaps i can make the floating tab detect the extra mousePressEvent and use that to cancel the drag (I could keep the drag going but that would be too much work - should just cancel it if the user is doing funky things with their mouse).\n\nHonestly this looks like a bug in Qt - really it should make up its mind - either keep delivering mouse events to the original widget, or if you're going to start delivering them somewhere else, please send the original widget a focusOutEvent so that it knows it's never going to see the mouseRelease event. But I think I can deal with it fine.\n", "markup": "markdown", "html": "<p>Yes, exactly - it's just that in windows and linux, the leave events are supressed whilst a drag is in progress. Not supressing them makes mose sense honestly, but I needed some way to detect loss of focus (focusOutEvent doesn't seem to be called).</p>\n<p>If I simply don't handle the leaveEvents - just delete the leaveEvent method completely - everything is fine for me in PyQt4. However, in PyQt5, I have one remaining problem - if you click and drag outside the application, and then press another mouse button (say you right click whilst not releasing the left mouse button), then the origin tabBar doesn't get a mouseRelease event (even if you subsequently release the mouse) - it only gets a leaveEvent. So handling that leaveEvent was important for ensuring the drag was cancelled in that case.</p>\n<p>However, since if you do this, you are clicking on the floating tab, perhaps i can make the floating tab detect the extra mousePressEvent and use that to cancel the drag (I could keep the drag going but that would be too much work - should just cancel it if the user is doing funky things with their mouse).</p>\n<p>Honestly this looks like a bug in Qt - really it should make up its mind - either keep delivering mouse events to the original widget, or if you're going to start delivering them somewhere else, please send the original widget a focusOutEvent so that it knows it's never going to see the mouseRelease event. But I think I can deal with it fine.</p>", "type": "rendered"}, "created_on": "2017-08-19T14:18:41.454335+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-19T14:18:41.456878+00:00", "type": "pullrequest_comment", "id": 43150585}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150613.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150613"}}, "parent": {"id": 43150585, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150585.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150585"}}, "depth": 8}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "I think I found a fix.\n\nI can call `self.grabMouse()` to insist that the widget receive all future mouse events, until mouse release, then I can call `self.releaseMouse()` That way we're guaranteed to get the mouseRelease event and we don't need to handle that edge case of losing focus before getting the mouseRelease event. Then I can just not handle leaveEvent and you won't see the premature drag cancelling.", "markup": "markdown", "html": "<p>I think I found a fix.</p>\n<p>I can call <code>self.grabMouse()</code> to insist that the widget receive all future mouse events, until mouse release, then I can call <code>self.releaseMouse()</code> That way we're guaranteed to get the mouseRelease event and we don't need to handle that edge case of losing focus before getting the mouseRelease event. Then I can just not handle leaveEvent and you won't see the premature drag cancelling.</p>", "type": "rendered"}, "created_on": "2017-08-19T14:21:38.514425+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-19T14:21:38.516816+00:00", "type": "pullrequest_comment", "id": 43150613}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150639.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150639"}}, "parent": {"id": 43150613, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150613.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150613"}}, "depth": 9}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "Thanks for taking the time to fix this. \n\nIt is mostly annoyance  when testing plugin tabs at the moment so it is really nice to get that fixed.", "markup": "markdown", "html": "<p>Thanks for taking the time to fix this. </p>\n<p>It is mostly annoyance  when testing plugin tabs at the moment so it is really nice to get that fixed.</p>", "type": "rendered"}, "created_on": "2017-08-19T14:25:03.369426+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-19T14:25:03.409036+00:00", "type": "pullrequest_comment", "id": 43150639}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150680.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150680"}}, "parent": {"id": 43150639, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150639.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150639"}}, "depth": 10}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "No problem. Just pushed what should be a fix.\n\nIt's a very simple fix and I didn't know about `grabMouse()` and `releaseMouse()`, hence the workaround with leaveEvent to detect when we were not going to receive future mouse events anymore. Now that I know about these two it's a cleaner implementation less likely to lose mouse events in any other unforseen ways. I was able to just delete the `leaveEvent()` method entirely.", "markup": "markdown", "html": "<p>No problem. Just pushed what should be a fix.</p>\n<p>It's a very simple fix and I didn't know about <code>grabMouse()</code> and <code>releaseMouse()</code>, hence the workaround with leaveEvent to detect when we were not going to receive future mouse events anymore. Now that I know about these two it's a cleaner implementation less likely to lose mouse events in any other unforseen ways. I was able to just delete the <code>leaveEvent()</code> method entirely.</p>", "type": "rendered"}, "created_on": "2017-08-19T14:30:52.572208+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-19T14:31:31.161976+00:00", "type": "pullrequest_comment", "id": 43150680}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150702.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150702"}}, "parent": {"id": 43150680, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43150680.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43150680"}}, "depth": 11}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "The fix works! Thanks :)", "markup": "markdown", "html": "<p>The fix works! Thanks :)</p>", "type": "rendered"}, "created_on": "2017-08-19T14:33:18.580920+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-19T14:33:18.616448+00:00", "type": "pullrequest_comment", "id": 43150702}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43654378.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43654378"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "So finally got around to testing this. Couple of lost features/unexpected changes I've found are:\n\n* You can't drop a tab onto the widget of another tab anymore (but you can if the notebook doesn't have any tabs yet)\n* If you have lots of tabs, the width of each tab shrinks rather than allowing scrolling\n\nThe second one looks like it is [by design](#!/labscript_suite/labscript_utils/pull-requests/21/dragdroptab/diff#Lqtwidgets/dragdroptab.pyT379). If this is personal taste, we should perhaps make it configurable through the preferences pane at a later date. The first one may be a bug. It's not a big bug though, so I may consider just merging this anyway and it can be fixed later when Chris Billington is available again.", "markup": "markdown", "html": "<p>So finally got around to testing this. Couple of lost features/unexpected changes I've found are:</p>\n<ul>\n<li>You can't drop a tab onto the widget of another tab anymore (but you can if the notebook doesn't have any tabs yet)</li>\n<li>If you have lots of tabs, the width of each tab shrinks rather than allowing scrolling</li>\n</ul>\n<p>The second one looks like it is <a data-is-external-link=\"true\" href=\"#!/labscript_suite/labscript_utils/pull-requests/21/dragdroptab/diff#Lqtwidgets/dragdroptab.pyT379\" rel=\"nofollow\">by design</a>. If this is personal taste, we should perhaps make it configurable through the preferences pane at a later date. The first one may be a bug. It's not a big bug though, so I may consider just merging this anyway and it can be fixed later when Chris Billington is available again.</p>", "type": "rendered"}, "created_on": "2017-08-28T00:06:28.720160+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2017-08-28T00:06:28.722937+00:00", "type": "pullrequest_comment", "id": 43654378}, {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43654641.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43654641"}}, "parent": {"id": 43654378, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21/comments/43654378.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21/_/diff#comment-43654378"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 21, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/21.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/21"}}, "title": "Dragdroptab"}, "content": {"raw": "First is by design too - but I was undecided about it. Not sure which is more jarring, not being able to drop on a widget or having the tab snap to the tabBar when it's potentially miles away from your mouse.\n\nIt's trivial to change so you can revert it to accept drops anywhere by setting `accept_drops_bar_only=False` as the default in the `DragDropTabWidget` `__init__` args. I'm pretty ambivalent about this one.\n\nSecond was because it was going to involve reimplementing the scrolling and keeping track of the scroll position to work with that. It would have involved a lot more code at the pixel-pushing level than I already had to do!", "markup": "markdown", "html": "<p>First is by design too - but I was undecided about it. Not sure which is more jarring, not being able to drop on a widget or having the tab snap to the tabBar when it's potentially miles away from your mouse.</p>\n<p>It's trivial to change so you can revert it to accept drops anywhere by setting <code>accept_drops_bar_only=False</code> as the default in the <code>DragDropTabWidget</code> <code>__init__</code> args. I'm pretty ambivalent about this one.</p>\n<p>Second was because it was going to involve reimplementing the scrolling and keeping track of the scroll position to work with that. It would have involved a lot more code at the pixel-pushing level than I already had to do!</p>", "type": "rendered"}, "created_on": "2017-08-28T00:23:49.123709+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-28T00:26:10.264879+00:00", "type": "pullrequest_comment", "id": 43654641}], "page": 1, "size": 57}