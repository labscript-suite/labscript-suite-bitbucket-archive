{"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/22/comments/42224112.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/22/_/diff#comment-42224112"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 22, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/22.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/22"}}, "title": "Fix dynamic hostnames under macOS (#14)"}, "content": {"raw": "Thanks!\n\nA suggestion to be more kosher and forward compatible with Python 3. Even though it doesn't matter in this case the subprocess module is the standard for running commands, so you could replace `os.popen()` with:\n\n``hostname = subprocess.check_output(['scutil', '--get', 'LocalHostName']).decode('utf8').strip()``\n\ndoing a `strip()` rather than `[:-1]` (hostnames can't end or start with whitespace anyway), and decoding the output so it converts the bytestring to a unicode string on Python 3. Then hopefully it won't break once it's running in Python 3 in the not too distant future!\n\n`os.popen` and friends are deprecated because they don't raise exceptions on failure, they do silly things like return None and require you to do checks yourself, leading to confusing tracebacks about not being able to do string operations on `None`.", "markup": "markdown", "html": "<p>Thanks!</p>\n<p>A suggestion to be more kosher and forward compatible with Python 3. Even though it doesn't matter in this case the subprocess module is the standard for running commands, so you could replace <code>os.popen()</code> with:</p>\n<p><code>hostname = subprocess.check_output(['scutil', '--get', 'LocalHostName']).decode('utf8').strip()</code></p>\n<p>doing a <code>strip()</code> rather than <code>[:-1]</code> (hostnames can't end or start with whitespace anyway), and decoding the output so it converts the bytestring to a unicode string on Python 3. Then hopefully it won't break once it's running in Python 3 in the not too distant future!</p>\n<p><code>os.popen</code> and friends are deprecated because they don't raise exceptions on failure, they do silly things like return None and require you to do checks yourself, leading to confusing tracebacks about not being able to do string operations on <code>None</code>.</p>", "type": "rendered"}, "created_on": "2017-08-04T18:04:04.279954+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-04T18:05:26.858587+00:00", "type": "pullrequest_comment", "id": 42224112}