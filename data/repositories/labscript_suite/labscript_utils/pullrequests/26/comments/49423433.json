{"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/26/comments/49423433.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/26/_/diff#comment-49423433"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 26, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/26.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/26"}}, "title": "Feature PyCaptureCamServer"}, "content": {"raw": "I found a bug that occurs during aborted shots. I've updated the code to make sure blacs and the camera server stay sync'd:\n\n\n```\n#!diff\n\n@@ -419,7 +419,9 @@\n                     cam.setImageMode(width, height, offX, offY)\n                 continue # skip put into results_queue\n             elif command == 'abort':\n-                continue # dummy command to cause grabMultiple to break\n+                # command to cause grabMultiple to break\n+                results_queue.get(timeout=1) # Pull bad images out of queue.\n+                continue\n             elif command == 'quit':\n                 break\n             else:\n```\n\n@dihm , you may want to add a similar line to your server as well.", "markup": "markdown", "html": "<p>I found a bug that occurs during aborted shots. I've updated the code to make sure blacs and the camera server stay sync'd:</p>\n<div class=\"codehilite language-diff\"><pre><span></span><span class=\"gu\">@@ -419,7 +419,9 @@</span>\n                     cam.setImageMode(width, height, offX, offY)\n                 continue # skip put into results_queue\n             elif command == &#39;abort&#39;:\n<span class=\"gd\">-                continue # dummy command to cause grabMultiple to break</span>\n<span class=\"gi\">+                # command to cause grabMultiple to break</span>\n<span class=\"gi\">+                results_queue.get(timeout=1) # Pull bad images out of queue.</span>\n<span class=\"gi\">+                continue</span>\n             elif command == &#39;quit&#39;:\n                 break\n             else:\n</pre></div>\n\n\n<p>@dihm , you may want to add a similar line to your server as well.</p>", "type": "rendered"}, "created_on": "2017-11-13T14:39:56.800383+00:00", "user": {"display_name": "Daniel Barker", "uuid": "{6f3f4446-92ab-4af6-83ed-bb2906b3a304}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6f3f4446-92ab-4af6-83ed-bb2906b3a304%7D"}, "html": {"href": "https://bitbucket.org/%7B6f3f4446-92ab-4af6-83ed-bb2906b3a304%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/fbcf4c479308ad530548be5884a7c70fd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDB-4.png"}}, "nickname": "dsbarker", "type": "user", "account_id": "557058:02be919f-267c-4793-9e86-ef07d163b58b"}, "updated_on": "2017-11-13T14:39:56.898991+00:00", "type": "pullrequest_comment", "id": 49423433}