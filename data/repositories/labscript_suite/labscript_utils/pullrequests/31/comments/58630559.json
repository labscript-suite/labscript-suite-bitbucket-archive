{"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/31/comments/58630559.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/31/_/diff#comment-58630559"}}, "parent": {"id": 58624861, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/31/comments/58624861.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/31/_/diff#comment-58624861"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 31, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/31.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/31"}}, "title": "Unit conversions Python3 bugfix and cleanup"}, "content": {"raw": "Ah, ok I've added aliases for backward compatibility. No deprecation warning because you can't make a property for a class attribute without way more metaprogramming than is warranted for this.\n\n\nHere's the diff of the backward compatibility:\n\n\n```\n#!diff\n\n# HG changeset patch\n# User chrisjbillington\n# Date 1520926984 -39600\n#      Tue Mar 13 18:43:04 2018 +1100\n# Branch bugfix\n# Node ID 54afef439300cb5920fe2655501dc6cdc23e47d4\n# Parent  41bb9023a443f1a19b2efcb64158e603de7d4e56\nAdded .units and .unit_list for backward compat\n\ndiff -r 41bb9023a443 -r 54afef439300 unitconversions/UnitConversionBase.py\n--- a/unitconversions/UnitConversionBase.py\tFri Mar 02 16:24:43 2018 +1100\n+++ b/unitconversions/UnitConversionBase.py\tTue Mar 13 18:43:04 2018 +1100\n@@ -51,6 +51,9 @@\n class UnitConversion(object):\n     _magnitude_list = {'p': 1e-12,'n':1e-9, 'u':1e-6,'m': 1e-3,\n                        'k': 1e3, 'M': 1e6,'G': 1e9,'T': 1e12}\n+\n+    unit_list = _magnitude_list # alias for backward compat\n+\n     def __init__(self, params):\n         magnitudes = params.get('magnitudes', [])\n         \n@@ -85,3 +88,5 @@\n         # list of derived_units without prefixes, then by magnitude:\n         derived_units_sortlist.sort()\n         self.derived_units = [unit for sortinfo, unit in derived_units_sortlist]\n+\n+        self.units = self._magnitudes # alias for backward compat\n\n```\n", "markup": "markdown", "html": "<p>Ah, ok I've added aliases for backward compatibility. No deprecation warning because you can't make a property for a class attribute without way more metaprogramming than is warranted for this.</p>\n<p>Here's the diff of the backward compatibility:</p>\n<div class=\"codehilite language-diff\"><pre><span></span># HG changeset patch\n# User chrisjbillington\n# Date 1520926984 -39600\n#      Tue Mar 13 18:43:04 2018 +1100\n# Branch bugfix\n# Node ID 54afef439300cb5920fe2655501dc6cdc23e47d4\n# Parent  41bb9023a443f1a19b2efcb64158e603de7d4e56\nAdded .units and .unit_list for backward compat\n\n<span class=\"gh\">diff -r 41bb9023a443 -r 54afef439300 unitconversions/UnitConversionBase.py</span>\n<span class=\"gd\">--- a/unitconversions/UnitConversionBase.py Fri Mar 02 16:24:43 2018 +1100</span>\n<span class=\"gi\">+++ b/unitconversions/UnitConversionBase.py Tue Mar 13 18:43:04 2018 +1100</span>\n<span class=\"gu\">@@ -51,6 +51,9 @@</span>\n class UnitConversion(object):\n     _magnitude_list = {&#39;p&#39;: 1e-12,&#39;n&#39;:1e-9, &#39;u&#39;:1e-6,&#39;m&#39;: 1e-3,\n                        &#39;k&#39;: 1e3, &#39;M&#39;: 1e6,&#39;G&#39;: 1e9,&#39;T&#39;: 1e12}\n<span class=\"gi\">+</span>\n<span class=\"gi\">+    unit_list = _magnitude_list # alias for backward compat</span>\n<span class=\"gi\">+</span>\n     def __init__(self, params):\n         magnitudes = params.get(&#39;magnitudes&#39;, [])\n\n<span class=\"gu\">@@ -85,3 +88,5 @@</span>\n         # list of derived_units without prefixes, then by magnitude:\n         derived_units_sortlist.sort()\n         self.derived_units = [unit for sortinfo, unit in derived_units_sortlist]\n<span class=\"gi\">+</span>\n<span class=\"gi\">+        self.units = self._magnitudes # alias for backward compat</span>\n</pre></div>", "type": "rendered"}, "created_on": "2018-03-13T07:46:20.586677+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2018-03-13T07:46:20.589558+00:00", "type": "pullrequest_comment", "id": 58630559}