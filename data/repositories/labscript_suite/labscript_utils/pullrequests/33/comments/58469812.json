{"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/33/comments/58469812.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/33/_/diff#comment-58469812"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 33, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/33.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/33"}}, "title": "Double import denier"}, "content": {"raw": "Here's a minimal example that makes a little more sense than the confusion that BLACS is going through:\n\n\n```\n#!python\n\nimport sys\nimport os\nimport labscript_utils\n# Import numpy.linalg twice under different names:\nimport numpy as np\n# Add the numpy folder to the search path so that the linalg module is\n# directly available:\nsys.path.append(os.path.dirname(np.__file__))\n# Import it again:\nimport linalg\n```\n\n```\n#!python\n\nRuntimeError: Double import! The same file has been imported under two\ndifferent names, resulting in two copies of the module. This is almost\ncertainly a mistake. If you are running a script from within a package and\nwant to import another submodule of that package, import it by its full path:\n'import module.submodule' instead of just 'import submodule.'\n\nPath imported: /home/bilbo/anaconda3/lib/python3.6/site-packages/numpy/linalg\n\nTraceback (first time imported, as numpy.linalg):\n------------\n  File \"33.py\", line 5, in <module>\n    import numpy as np\n  File \"/home/bilbo/anaconda3/lib/python3.6/site-packages/numpy/__init__.py\", line 142, in <module>\n    from . import add_newdocs\n  File \"/home/bilbo/anaconda3/lib/python3.6/site-packages/numpy/add_newdocs.py\", line 13, in <module>\n    from numpy.lib import add_newdoc\n  File \"/home/bilbo/anaconda3/lib/python3.6/site-packages/numpy/lib/__init__.py\", line 19, in <module>\n    from .polynomial import *\n  File \"/home/bilbo/anaconda3/lib/python3.6/site-packages/numpy/lib/polynomial.py\", line 20, in <module>\n    from numpy.linalg import eigvals, lstsq, inv\n------------\n\nTraceback (second time imported, as linalg):\n------------\n  File \"33.py\", line 10, in <module>\n    import linalg\n------------\n```\n", "markup": "markdown", "html": "<p>Here's a minimal example that makes a little more sense than the confusion that BLACS is going through:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">sys</span>\n<span class=\"kn\">import</span> <span class=\"nn\">os</span>\n<span class=\"kn\">import</span> <span class=\"nn\">labscript_utils</span>\n<span class=\"c1\"># Import numpy.linalg twice under different names:</span>\n<span class=\"kn\">import</span> <span class=\"nn\">numpy</span> <span class=\"kn\">as</span> <span class=\"nn\">np</span>\n<span class=\"c1\"># Add the numpy folder to the search path so that the linalg module is</span>\n<span class=\"c1\"># directly available:</span>\n<span class=\"n\">sys</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">dirname</span><span class=\"p\">(</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"vm\">__file__</span><span class=\"p\">))</span>\n<span class=\"c1\"># Import it again:</span>\n<span class=\"kn\">import</span> <span class=\"nn\">linalg</span>\n</pre></div>\n\n\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"ne\">RuntimeError</span><span class=\"p\">:</span> <span class=\"n\">Double</span> <span class=\"n\">import</span><span class=\"err\">!</span> <span class=\"n\">The</span> <span class=\"n\">same</span> <span class=\"nb\">file</span> <span class=\"n\">has</span> <span class=\"n\">been</span> <span class=\"n\">imported</span> <span class=\"n\">under</span> <span class=\"n\">two</span>\n<span class=\"n\">different</span> <span class=\"n\">names</span><span class=\"p\">,</span> <span class=\"n\">resulting</span> <span class=\"ow\">in</span> <span class=\"n\">two</span> <span class=\"n\">copies</span> <span class=\"n\">of</span> <span class=\"n\">the</span> <span class=\"n\">module</span><span class=\"o\">.</span> <span class=\"n\">This</span> <span class=\"ow\">is</span> <span class=\"n\">almost</span>\n<span class=\"n\">certainly</span> <span class=\"n\">a</span> <span class=\"n\">mistake</span><span class=\"o\">.</span> <span class=\"n\">If</span> <span class=\"n\">you</span> <span class=\"n\">are</span> <span class=\"n\">running</span> <span class=\"n\">a</span> <span class=\"n\">script</span> <span class=\"kn\">from</span> <span class=\"nn\">within</span> <span class=\"nn\">a</span> <span class=\"nn\">package</span> <span class=\"nn\">and</span>\n<span class=\"n\">want</span> <span class=\"n\">to</span> <span class=\"kn\">import</span> <span class=\"nn\">another</span> <span class=\"nn\">submodule</span> <span class=\"nn\">of</span> <span class=\"nn\">that</span> <span class=\"nn\">package</span><span class=\"o\">,</span> <span class=\"nn\">import</span> <span class=\"nn\">it</span> <span class=\"nn\">by</span> <span class=\"nn\">its</span> <span class=\"nn\">full</span> <span class=\"nn\">path</span><span class=\"p\">:</span>\n<span class=\"s1\">&#39;import module.submodule&#39;</span> <span class=\"n\">instead</span> <span class=\"n\">of</span> <span class=\"n\">just</span> <span class=\"s1\">&#39;import submodule.&#39;</span>\n\n<span class=\"n\">Path</span> <span class=\"n\">imported</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">bilbo</span><span class=\"o\">/</span><span class=\"n\">anaconda3</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">python3</span><span class=\"o\">.</span><span class=\"mi\">6</span><span class=\"o\">/</span><span class=\"n\">site</span><span class=\"o\">-</span><span class=\"n\">packages</span><span class=\"o\">/</span><span class=\"n\">numpy</span><span class=\"o\">/</span><span class=\"n\">linalg</span>\n\n<span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">first</span> <span class=\"n\">time</span> <span class=\"n\">imported</span><span class=\"p\">,</span> <span class=\"k\">as</span> <span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">linalg</span><span class=\"p\">):</span>\n<span class=\"o\">------------</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;33.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span>\n    <span class=\"kn\">import</span> <span class=\"nn\">numpy</span> <span class=\"kn\">as</span> <span class=\"nn\">np</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/home/bilbo/anaconda3/lib/python3.6/site-packages/numpy/__init__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">142</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span>\n    <span class=\"kn\">from</span> <span class=\"nn\">.</span> <span class=\"kn\">import</span> <span class=\"n\">add_newdocs</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/home/bilbo/anaconda3/lib/python3.6/site-packages/numpy/add_newdocs.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">13</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span>\n    <span class=\"kn\">from</span> <span class=\"nn\">numpy.lib</span> <span class=\"kn\">import</span> <span class=\"n\">add_newdoc</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/home/bilbo/anaconda3/lib/python3.6/site-packages/numpy/lib/__init__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">19</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span>\n    <span class=\"kn\">from</span> <span class=\"nn\">.polynomial</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/home/bilbo/anaconda3/lib/python3.6/site-packages/numpy/lib/polynomial.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">20</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span>\n    <span class=\"kn\">from</span> <span class=\"nn\">numpy.linalg</span> <span class=\"kn\">import</span> <span class=\"n\">eigvals</span><span class=\"p\">,</span> <span class=\"n\">lstsq</span><span class=\"p\">,</span> <span class=\"n\">inv</span>\n<span class=\"o\">------------</span>\n\n<span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">second</span> <span class=\"n\">time</span> <span class=\"n\">imported</span><span class=\"p\">,</span> <span class=\"k\">as</span> <span class=\"n\">linalg</span><span class=\"p\">):</span>\n<span class=\"o\">------------</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;33.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span>\n    <span class=\"kn\">import</span> <span class=\"nn\">linalg</span>\n<span class=\"o\">------------</span>\n</pre></div>", "type": "rendered"}, "created_on": "2018-03-10T10:45:04.783790+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2018-03-10T11:02:44.695423+00:00", "type": "pullrequest_comment", "id": 58469812}