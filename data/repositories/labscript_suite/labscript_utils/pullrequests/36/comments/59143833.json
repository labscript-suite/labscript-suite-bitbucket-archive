{"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/36/comments/59143833.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/36/_/diff#comment-59143833"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/36.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/36"}}, "title": "ConnectionTable improvements"}, "content": {"raw": "I'm not sure if `remove_device` is implemented correctly. It assumes that all BLACS tabs are top level devices, but that is not true as far as I'm aware. So I think that method will raise an exception in a lot of cases.\n\nIt might be good to outline what we want to achieve by removing the device from the connection table \\(so it's documented somewhere\\). I assume we are removing the device and all the children of that device from `self.table` but that we are leaving `self.raw_table` intact. I guess if the device is a top level device we should remove it from that list too. Do we also need to check if the device removed was the master pseudoclock and how do we handle that \\(and what roll-on effects does that have?\\).", "markup": "markdown", "html": "<p>I'm not sure if <code>remove_device</code> is implemented correctly. It assumes that all BLACS tabs are top level devices, but that is not true as far as I'm aware. So I think that method will raise an exception in a lot of cases.</p>\n<p>It might be good to outline what we want to achieve by removing the device from the connection table (so it's documented somewhere). I assume we are removing the device and all the children of that device from <code>self.table</code> but that we are leaving <code>self.raw_table</code> intact. I guess if the device is a top level device we should remove it from that list too. Do we also need to check if the device removed was the master pseudoclock and how do we handle that (and what roll-on effects does that have?).</p>", "type": "rendered"}, "created_on": "2018-03-19T02:41:07.356958+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2018-03-19T02:41:07.360897+00:00", "type": "pullrequest_comment", "id": 59143833}