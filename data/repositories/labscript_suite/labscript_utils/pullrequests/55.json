{"rendered": {"description": {"raw": "Raise TypeError rather than silently converting non-string keys in JSON encoding.\r\n\r\nPython's JSON encoder silently converts non-string dict keys to strings. This can cause subtle bugs, and the user should be made aware that they can only store strings as keys. Conversion to strings should be done explicitly to minimise surprise.\r\n\r\nThis bit me whilst adding some connection table properties to a device class I'm working on. One of the properties was a dictionary mapping ints to ints, and when read in in BLACS, the int keys had magically turned into strings. I could of course just convert them back to ints, but I'd rather be forced to store strings in the first place, if this is a limitation of JSON.\r\n\r\nThis change should be tested, as it's possible that code somewhere is relying on this implicit conversion.", "markup": "markdown", "html": "<p>Raise TypeError rather than silently converting non-string keys in JSON encoding.</p>\n<p>Python's JSON encoder silently converts non-string dict keys to strings. This can cause subtle bugs, and the user should be made aware that they can only store strings as keys. Conversion to strings should be done explicitly to minimise surprise.</p>\n<p>This bit me whilst adding some connection table properties to a device class I'm working on. One of the properties was a dictionary mapping ints to ints, and when read in in BLACS, the int keys had magically turned into strings. I could of course just convert them back to ints, but I'd rather be forced to store strings in the first place, if this is a limitation of JSON.</p>\n<p>This change should be tested, as it's possible that code somewhere is relying on this implicit conversion.</p>", "type": "rendered"}, "title": {"raw": "Raise TypeError rather than silently converting non-string keys in JSON encoding.", "markup": "markdown", "html": "<p>Raise TypeError rather than silently converting non-string keys in JSON encoding.</p>", "type": "rendered"}}, "type": "pullrequest", "description": "Raise TypeError rather than silently converting non-string keys in JSON encoding.\r\n\r\nPython's JSON encoder silently converts non-string dict keys to strings. This can cause subtle bugs, and the user should be made aware that they can only store strings as keys. Conversion to strings should be done explicitly to minimise surprise.\r\n\r\nThis bit me whilst adding some connection table properties to a device class I'm working on. One of the properties was a dictionary mapping ints to ints, and when read in in BLACS, the int keys had magically turned into strings. I could of course just convert them back to ints, but I'd rather be forced to store strings in the first place, if this is a limitation of JSON.\r\n\r\nThis change should be tested, as it's possible that code somewhere is relying on this implicit conversion.", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_utils/pullrequests/55/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_utils/diffstat/labscript_suite/labscript_utils:6f10cc76b2de%0D7075805627aa?from_pullrequest_id=55"}, "commits": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/55/commits.json"}, "self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/55.json"}, "comments": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/55/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_utils/pullrequests/55/merge"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/55"}, "activity": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/55/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_utils/diff/labscript_suite/labscript_utils:6f10cc76b2de%0D7075805627aa?from_pullrequest_id=55"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_utils/pullrequests/55/approve"}, "statuses": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/55/statuses_page=1.json"}}, "title": "Raise TypeError rather than silently converting non-string keys in JSON encoding.", "close_source_branch": true, "reviewers": [{"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}], "id": 55, "destination": {"commit": {"hash": "7075805627aa", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/7075805627aa.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/7075805627aa"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "created_on": "2018-09-18T17:56:41.270179+00:00", "summary": {"raw": "Raise TypeError rather than silently converting non-string keys in JSON encoding.\r\n\r\nPython's JSON encoder silently converts non-string dict keys to strings. This can cause subtle bugs, and the user should be made aware that they can only store strings as keys. Conversion to strings should be done explicitly to minimise surprise.\r\n\r\nThis bit me whilst adding some connection table properties to a device class I'm working on. One of the properties was a dictionary mapping ints to ints, and when read in in BLACS, the int keys had magically turned into strings. I could of course just convert them back to ints, but I'd rather be forced to store strings in the first place, if this is a limitation of JSON.\r\n\r\nThis change should be tested, as it's possible that code somewhere is relying on this implicit conversion.", "markup": "markdown", "html": "<p>Raise TypeError rather than silently converting non-string keys in JSON encoding.</p>\n<p>Python's JSON encoder silently converts non-string dict keys to strings. This can cause subtle bugs, and the user should be made aware that they can only store strings as keys. Conversion to strings should be done explicitly to minimise surprise.</p>\n<p>This bit me whilst adding some connection table properties to a device class I'm working on. One of the properties was a dictionary mapping ints to ints, and when read in in BLACS, the int keys had magically turned into strings. I could of course just convert them back to ints, but I'd rather be forced to store strings in the first place, if this is a limitation of JSON.</p>\n<p>This change should be tested, as it's possible that code somewhere is relying on this implicit conversion.</p>", "type": "rendered"}, "source": {"commit": {"hash": "3cefb40dd871", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/3cefb40dd871"}, "html": {"href": "#!/cbillington/labscript_utils/commits/3cefb40dd871"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "bugfix"}}, "comment_count": 1, "state": "MERGED", "task_count": 0, "participants": [{"role": "REVIEWER", "participated_on": "2018-09-19T00:55:49.177991+00:00", "type": "participant", "approved": false, "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}}], "reason": "", "updated_on": "2018-10-01T18:58:15.151762+00:00", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "merge_commit": {"hash": "6f10cc76b2de", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/6f10cc76b2de.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/6f10cc76b2de"}}}, "closed_by": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}}