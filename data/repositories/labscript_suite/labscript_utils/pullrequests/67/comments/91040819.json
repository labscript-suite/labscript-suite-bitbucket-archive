{"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/67/comments/91040819.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/67/_/diff#comment-91040819"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 67, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/67.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/67"}}, "title": "Update hook to clean .pyc files and empty folders"}, "content": {"raw": "Ok, I\u2019m happy with this now. Installing the hook copies it into the .hg directory so that it is self-contained and will work no matter whether the user moves the repository on disk or updates it to any revision. A list of Python interpreters that have been used to install the hook is saved so that on Windows the hook knows where Python is and can run, but if it can\u2019t because no Python interpreter exists, it just prints a warning and so doesn\u2019t prevent you from using mercurial normally.\n\nThe hook is not installed automatically every time you import labscript\\_utils. Instead I\u2019ll make the installer add the hook as part of registering the labscript install with the Python environment.\n\nOnce merged, you can also add the hook yourself to any repo by going to the repo in question and running:\n\n    python -m labscript_utils.clean_repo_hook install", "markup": "markdown", "html": "<p>Ok, I\u2019m happy with this now. Installing the hook copies it into the .hg directory so that it is self-contained and will work no matter whether the user moves the repository on disk or updates it to any revision. A list of Python interpreters that have been used to install the hook is saved so that on Windows the hook knows where Python is and can run, but if it can\u2019t because no Python interpreter exists, it just prints a warning and so doesn\u2019t prevent you from using mercurial normally.</p>\n<p>The hook is not installed automatically every time you import labscript_utils. Instead I\u2019ll make the installer add the hook as part of registering the labscript install with the Python environment.</p>\n<p>Once merged, you can also add the hook yourself to any repo by going to the repo in question and running:</p>\n<div class=\"codehilite\"><pre><span></span>python -m labscript_utils.clean_repo_hook install\n</pre></div>", "type": "rendered"}, "created_on": "2019-02-10T19:30:46.667081+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-02-10T19:30:46.674222+00:00", "type": "pullrequest_comment", "id": 91040819}