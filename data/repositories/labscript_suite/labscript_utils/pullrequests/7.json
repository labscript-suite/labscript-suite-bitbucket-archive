{"rendered": {"description": {"raw": "Change to setup_logging so that it attempts to use the program name to determine log location instead of the `__main__` module. This is because sometimes the `__main__` module is actually `zprocess.process_class_wrapper`, for subprocesses started using the zprocess.Process class. To prevent their logs ending up in the zprocess directory, we can use the name of the program to determine the location of that program's `__main__.py` module instead. This code falls back to the existing behaviour of using the `__main__` module for the filepath in the case of there being no importable module with the same name as the log.\r\n\r\nThis is particularly important on linux if you are not using\r\nanaconda then zprocess may be installed somewhere without write permissions,\r\nso the log file is not just misplaced but throws a permissions error.\r\n\r\nThe code here includes a hack to try the lowercase version of the program name, which is just for BLACS because the log name is 'BLACS' but the module name is 'blacs'.", "markup": "markdown", "html": "<p>Change to setup_logging so that it attempts to use the program name to determine log location instead of the <code>__main__</code> module. This is because sometimes the <code>__main__</code> module is actually <code>zprocess.process_class_wrapper</code>, for subprocesses started using the zprocess.Process class. To prevent their logs ending up in the zprocess directory, we can use the name of the program to determine the location of that program's <code>__main__.py</code> module instead. This code falls back to the existing behaviour of using the <code>__main__</code> module for the filepath in the case of there being no importable module with the same name as the log.</p>\n<p>This is particularly important on linux if you are not using\nanaconda then zprocess may be installed somewhere without write permissions,\nso the log file is not just misplaced but throws a permissions error.</p>\n<p>The code here includes a hack to try the lowercase version of the program name, which is just for BLACS because the log name is 'BLACS' but the module name is 'blacs'.</p>", "type": "rendered"}, "title": {"raw": "setup_logging use program name instead of __main__ location for log file location", "markup": "markdown", "html": "<p>setup_logging use program name instead of <strong>main</strong> location for log file location</p>", "type": "rendered"}}, "type": "pullrequest", "description": "Change to setup_logging so that it attempts to use the program name to determine log location instead of the `__main__` module. This is because sometimes the `__main__` module is actually `zprocess.process_class_wrapper`, for subprocesses started using the zprocess.Process class. To prevent their logs ending up in the zprocess directory, we can use the name of the program to determine the location of that program's `__main__.py` module instead. This code falls back to the existing behaviour of using the `__main__` module for the filepath in the case of there being no importable module with the same name as the log.\r\n\r\nThis is particularly important on linux if you are not using\r\nanaconda then zprocess may be installed somewhere without write permissions,\r\nso the log file is not just misplaced but throws a permissions error.\r\n\r\nThe code here includes a hack to try the lowercase version of the program name, which is just for BLACS because the log name is 'BLACS' but the module name is 'blacs'.", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_utils/pullrequests/7/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_utils/diffstat/labscript_suite/labscript_utils:ccb7e2ed4928%0D3d6e4fb345e6?from_pullrequest_id=7"}, "commits": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/7/commits.json"}, "self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/7.json"}, "comments": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/7/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_utils/pullrequests/7/merge"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/7"}, "activity": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/7/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_utils/diff/labscript_suite/labscript_utils:ccb7e2ed4928%0D3d6e4fb345e6?from_pullrequest_id=7"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_utils/pullrequests/7/approve"}, "statuses": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/7/statuses_page=1.json"}}, "title": "setup_logging use program name instead of __main__ location for log file location", "close_source_branch": false, "reviewers": [{"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}], "id": 7, "destination": {"commit": {"hash": "3d6e4fb345e6", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/3d6e4fb345e6.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/3d6e4fb345e6"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "created_on": "2017-05-22T20:25:36.786966+00:00", "summary": {"raw": "Change to setup_logging so that it attempts to use the program name to determine log location instead of the `__main__` module. This is because sometimes the `__main__` module is actually `zprocess.process_class_wrapper`, for subprocesses started using the zprocess.Process class. To prevent their logs ending up in the zprocess directory, we can use the name of the program to determine the location of that program's `__main__.py` module instead. This code falls back to the existing behaviour of using the `__main__` module for the filepath in the case of there being no importable module with the same name as the log.\r\n\r\nThis is particularly important on linux if you are not using\r\nanaconda then zprocess may be installed somewhere without write permissions,\r\nso the log file is not just misplaced but throws a permissions error.\r\n\r\nThe code here includes a hack to try the lowercase version of the program name, which is just for BLACS because the log name is 'BLACS' but the module name is 'blacs'.", "markup": "markdown", "html": "<p>Change to setup_logging so that it attempts to use the program name to determine log location instead of the <code>__main__</code> module. This is because sometimes the <code>__main__</code> module is actually <code>zprocess.process_class_wrapper</code>, for subprocesses started using the zprocess.Process class. To prevent their logs ending up in the zprocess directory, we can use the name of the program to determine the location of that program's <code>__main__.py</code> module instead. This code falls back to the existing behaviour of using the <code>__main__</code> module for the filepath in the case of there being no importable module with the same name as the log.</p>\n<p>This is particularly important on linux if you are not using\nanaconda then zprocess may be installed somewhere without write permissions,\nso the log file is not just misplaced but throws a permissions error.</p>\n<p>The code here includes a hack to try the lowercase version of the program name, which is just for BLACS because the log name is 'BLACS' but the module name is 'blacs'.</p>", "type": "rendered"}, "source": {"commit": {"hash": "79687c0fa787", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/79687c0fa787"}, "html": {"href": "#!/cbillington/labscript_utils/commits/79687c0fa787"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "bugfix"}}, "comment_count": 0, "state": "MERGED", "task_count": 0, "participants": [{"role": "REVIEWER", "participated_on": "2017-05-22T22:54:48.550623+00:00", "type": "participant", "approved": true, "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}}], "reason": "", "updated_on": "2017-05-22T22:54:52.526822+00:00", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "merge_commit": {"hash": "ccb7e2ed4928", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/ccb7e2ed4928.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/ccb7e2ed4928"}}}, "closed_by": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}}