{"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/80/comments/101391695.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/80/_/diff#comment-101391695"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 80, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/80.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/80"}}, "title": "wrapped ZMQClient fix"}, "content": {"raw": "This breaks `zmq_get`:\n\n```python\nfrom labscript_utils.ls_zprocess import zmq_get\r\nzmq_get(42519, 'localhost', 'hello', timeout=1)\n```\n\nReturns:\n\n```python\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"C:\\labscript_suite\\labscript_utils\\ls_zprocess.py\", line 255, in zmq_get\r\n    return ZMQClient.instance().get(*args, **kwargs)\r\n  File \"C:\\labscript_suite\\labscript_utils\\ls_zprocess.py\", line 205, in instance\r\n    allow_insecure=config['allow_insecure'],\r\nTypeError: __init__() got an unexpected keyword argument 'shared_secret'\n```", "markup": "markdown", "html": "<p>This breaks <code>zmq_get</code>:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">labscript_utils.ls_zprocess</span> <span class=\"kn\">import</span> <span class=\"n\">zmq_get</span>\n<span class=\"n\">zmq_get</span><span class=\"p\">(</span><span class=\"mi\">42519</span><span class=\"p\">,</span> <span class=\"s1\">&#39;localhost&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">,</span> <span class=\"n\">timeout</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>Returns:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"p\">):</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;&lt;stdin&gt;&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\labscript_suite\\labscript_utils\\ls_zprocess.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">255</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">zmq_get</span>\n    <span class=\"k\">return</span> <span class=\"n\">ZMQClient</span><span class=\"o\">.</span><span class=\"n\">instance</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\labscript_suite\\labscript_utils\\ls_zprocess.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">205</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">instance</span>\n    <span class=\"n\">allow_insecure</span><span class=\"o\">=</span><span class=\"n\">config</span><span class=\"p\">[</span><span class=\"s1\">&#39;allow_insecure&#39;</span><span class=\"p\">],</span>\n<span class=\"ne\">TypeError</span><span class=\"p\">:</span> <span class=\"fm\">__init__</span><span class=\"p\">()</span> <span class=\"n\">got</span> <span class=\"n\">an</span> <span class=\"n\">unexpected</span> <span class=\"n\">keyword</span> <span class=\"n\">argument</span> <span class=\"s1\">&#39;shared_secret&#39;</span>\n</pre></div>", "type": "rendered"}, "created_on": "2019-05-09T01:35:23.752039+00:00", "user": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "updated_on": "2019-05-09T01:35:23.758383+00:00", "type": "pullrequest_comment", "id": 101391695}