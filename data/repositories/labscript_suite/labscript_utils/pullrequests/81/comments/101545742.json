{"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/81/comments/101545742.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/81/_/diff#comment-101545742"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 81, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/81.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/81"}}, "title": "Include all package dirs in Modulewatcher whitelist"}, "content": {"raw": "Great, I've fixed my silly bugs, and tested that with this bit commented out:\n```python\nif any(module_file.startswith(s + os.path.sep) for s in PKGDIRS):\n    # Whitelist modules in package install directories:\n    self.whitelist.add(name)\n``` \n\nI see your originally reported bug, and with it uncommented I don't see the bug. Let me know whether it works on your system now or not, since the paths can be pretty different so there could still be some issues to sort out.", "markup": "markdown", "html": "<p>Great, I've fixed my silly bugs, and tested that with this bit commented out:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"k\">if</span> <span class=\"nb\">any</span><span class=\"p\">(</span><span class=\"n\">module_file</span><span class=\"o\">.</span><span class=\"n\">startswith</span><span class=\"p\">(</span><span class=\"n\">s</span> <span class=\"o\">+</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">sep</span><span class=\"p\">)</span> <span class=\"k\">for</span> <span class=\"n\">s</span> <span class=\"ow\">in</span> <span class=\"n\">PKGDIRS</span><span class=\"p\">):</span>\n    <span class=\"c1\"># Whitelist modules in package install directories:</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">whitelist</span><span class=\"o\">.</span><span class=\"n\">add</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>I see your originally reported bug, and with it uncommented I don't see the bug. Let me know whether it works on your system now or not, since the paths can be pretty different so there could still be some issues to sort out.</p>", "type": "rendered"}, "created_on": "2019-05-10T02:18:01.144208+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-05-10T02:18:50.668953+00:00", "type": "pullrequest_comment", "id": 101545742}