{"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/84/comments/105020350.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/84/_/diff#comment-105020350"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 84, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/84.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/84"}}, "title": "Delay handling SIGTERM until HDF5 files are closed"}, "content": {"raw": "Will delay merging for a bit - our lab has seen a frozen runmanager in the last few days, sounding a lot like the aforementioned deadlock. It's not clear what version was being run at the time, whether it included the fix for the deadlock or not, so I'll wait to see if it recurs. I've hooked up the `faulthandler` module to dump tracebacks of all threads every 60 seconds so that we can diagnose a deadlock if it occurs (so long as the deadlock isn't holding the GIL, which the previous one was not). So I'll give it at least 2 weeks before merging this.", "markup": "markdown", "html": "<p>Will delay merging for a bit - our lab has seen a frozen runmanager in the last few days, sounding a lot like the aforementioned deadlock. It's not clear what version was being run at the time, whether it included the fix for the deadlock or not, so I'll wait to see if it recurs. I've hooked up the <code>faulthandler</code> module to dump tracebacks of all threads every 60 seconds so that we can diagnose a deadlock if it occurs (so long as the deadlock isn't holding the GIL, which the previous one was not). So I'll give it at least 2 weeks before merging this.</p>", "type": "rendered"}, "created_on": "2019-06-09T16:31:25.094058+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-06-09T16:31:25.100274+00:00", "type": "pullrequest_comment", "id": 105020350}