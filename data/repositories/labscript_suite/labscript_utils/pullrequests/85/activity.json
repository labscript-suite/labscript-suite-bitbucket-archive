{"pagelen": 50, "values": [{"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85/comments/104203534.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85/_/diff#comment-104203534"}}, "parent": {"id": 103293246, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85/comments/103293246.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85/_/diff#comment-103293246"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}, "content": {"raw": "Also, you can get the faulthandler to dump tracebacks upon hitting ctrl-C by adding the following at the top of `blacs/__main__.py`:\n\n```python\nimport signal\nimport faulthandler\nfaulthandler.register(signal.SIGINT)\n```\n\nAnd then hitting ctrl+c in the console when BLACS is hanging. There's a possibility it won't work, but I think it will.", "markup": "markdown", "html": "<p>Also, you can get the faulthandler to dump tracebacks upon hitting ctrl-C by adding the following at the top of <code>blacs/__main__.py</code>:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">signal</span>\n<span class=\"kn\">import</span> <span class=\"nn\">faulthandler</span>\n<span class=\"n\">faulthandler</span><span class=\"o\">.</span><span class=\"n\">register</span><span class=\"p\">(</span><span class=\"n\">signal</span><span class=\"o\">.</span><span class=\"n\">SIGINT</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>And then hitting ctrl+c in the console when BLACS is hanging. There's a possibility it won't work, but I think it will.</p>", "type": "rendered"}, "created_on": "2019-06-03T03:52:04.479022+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-06-03T03:52:13.617305+00:00", "type": "pullrequest_comment", "id": 104203534}, "pull_request": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85/comments/103379569.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85/_/diff#comment-103379569"}}, "parent": {"id": 103293246, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85/comments/103293246.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85/_/diff#comment-103293246"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}, "content": {"raw": "Well, that's progress, but still pretty annoying.\n\nIf you could get a copy of the tracelog file while BLACS is hanging at shutdown, we might be able to work out why it is hanging. It may or may not be related to the previous issue.", "markup": "markdown", "html": "<p>Well, that's progress, but still pretty annoying.</p>\n<p>If you could get a copy of the tracelog file while BLACS is hanging at shutdown, we might be able to work out why it is hanging. It may or may not be related to the previous issue.</p>", "type": "rendered"}, "created_on": "2019-05-24T23:16:49.139277+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-05-24T23:16:49.149317+00:00", "type": "pullrequest_comment", "id": 103379569}, "pull_request": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85/comments/103293246.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85/_/diff#comment-103293246"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}, "content": {"raw": "Removing the BLACS save file did help. However python now hangs up when closing it. If I see correct, the faulthandler is useless in this cause as python does not crash. But the bug also not so severe that we could not work. \n\nBy the way I tried different qt and labscript version but it did not make a difference.", "markup": "markdown", "html": "<p>Removing the BLACS save file did help. However python now hangs up when closing it. If I see correct, the faulthandler is useless in this cause as python does not crash. But the bug also not so severe that we could not work. </p>\n<p>By the way I tried different qt and labscript version but it did not make a difference.</p>", "type": "rendered"}, "created_on": "2019-05-24T10:22:36.184423+00:00", "user": {"display_name": "Lars Kohfahl", "uuid": "{14b59397-cbc0-4d8c-8a4a-fe99fb4d2d4a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B14b59397-cbc0-4d8c-8a4a-fe99fb4d2d4a%7D"}, "html": {"href": "https://bitbucket.org/%7B14b59397-cbc0-4d8c-8a4a-fe99fb4d2d4a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/630642264cd55e22515678a3a0489ac7d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsLK-2.png"}}, "nickname": "lkohfahl", "type": "user", "account_id": "5aafc5d11396802a57aa7f3b"}, "updated_on": "2019-05-24T10:22:36.334301+00:00", "type": "pullrequest_comment", "id": 103293246}, "pull_request": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85/comments/103211365.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85/_/diff#comment-103211365"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}, "content": {"raw": "I've just learned that conda only very recently updated to Qt 5.9 (28 days ago), which you are seeing the bug with. I thought they were going to skip 5.9 and go straight to 5.12, but it looks like they didn't. So they might be stuck on 5.9 for a while.\n\nYou might consider downgrading qt with `conda install qt==5.6.3` and seeing if that makes the issue go away. Perhaps the issue is with Qt 5.9 only, as mentioned I found it to be sensitive to exactly which version of Qt was in use.\n\nEdit: oh, actually they've been on 5.9 for a while. Hm, I'm not sure whether the versions are likely to make a difference then.", "markup": "markdown", "html": "<p>I've just learned that conda only very recently updated to Qt 5.9 (28 days ago), which you are seeing the bug with. I thought they were going to skip 5.9 and go straight to 5.12, but it looks like they didn't. So they might be stuck on 5.9 for a while.</p>\n<p>You might consider downgrading qt with <code>conda install qt==5.6.3</code> and seeing if that makes the issue go away. Perhaps the issue is with Qt 5.9 only, as mentioned I found it to be sensitive to exactly which version of Qt was in use.</p>\n<p>Edit: oh, actually they've been on 5.9 for a while. Hm, I'm not sure whether the versions are likely to make a difference then.</p>", "type": "rendered"}, "created_on": "2019-05-23T18:51:04.516141+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-05-23T19:02:33.194585+00:00", "type": "pullrequest_comment", "id": 103211365}, "pull_request": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85/comments/103210699.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85/_/diff#comment-103210699"}}, "parent": {"id": 103209387, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85/comments/103209387.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85/_/diff#comment-103209387"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}, "content": {"raw": "I've looked for anything about the time I encountered a similar issue, but I don't think I documented it anywhere unfortunately.", "markup": "markdown", "html": "<p>I've looked for anything about the time I encountered a similar issue, but I don't think I documented it anywhere unfortunately.</p>", "type": "rendered"}, "created_on": "2019-05-23T18:44:20.198816+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-05-23T18:44:20.213525+00:00", "type": "pullrequest_comment", "id": 103210699}, "pull_request": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85/comments/103209387.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85/_/diff#comment-103209387"}}, "parent": {"id": 103202138, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85/comments/103202138.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85/_/diff#comment-103202138"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}, "content": {"raw": "The long delay is when Python is importing modules that tracelog has been told not to log about. It is still slow, just doesn't appear in the output file. So that is normal.\n\nExcellent, the faulthandler has 34 threads doing nothing (they are all waiting on zeromq messages or other things), and one thread laying out Qt widgets:\n\n```\nCurrent thread 0x00000978 (most recent call first):\n  File \"C:\\labscript_suite\\labscript_utils\\qtwidgets\\toolpalette.py\", line 348 in _layout_widgets\n  File \"C:\\labscript_suite\\labscript_utils\\qtwidgets\\toolpalette.py\", line 405 in resizeEvent\n  File \"C:\\labscript_suite\\blacs\\__main__.py\", line 844 in execute_program\n  File \"C:\\labscript_suite\\blacs\\__main__.py\", line 846 in <module>\n  File \"C:\\Users\\APQ\\Anaconda3\\lib\\runpy.py\", line 85 in _run_code\n  File \"C:\\Users\\APQ\\Anaconda3\\lib\\runpy.py\", line 193 in _run_module_as_main\n```\n\nSo it looks like this is probably where the crash is happening (`File \"C:\\labscript_suite\\labscript_utils\\qtwidgets\\toolpalette.py\", line 348 in _layout_widgets`).\n\nLine 348 is:\n\n```\nself.setMinimumSize(QSize(self.minimumSize().width(), total_height))\n```\n\nAh, this is sounding familiar now. I recall an obtuse bug where the sizes of Qt widgets were coming back as (0,0) despite having been set to something nonzero, and that this was causing segfaults for some reason. But it was improbable to occur, and only occurred on some Qt versions, and I was very confident that it was a bug in Qt itself.\n\nI would hope that conda releases a package for Qt 5.12 soon, which has some chance of having fixed the bug, though in the meantime on a specific computer we could for example, wrap the above line 348 in an `if` statement, like:\n\n```\nif self.minimumSize().width() > 0:\n    self.setMinimumSize(QSize(self.minimumSize().width(), total_height))\n```\n\nYou might also want to print out `self.minimumSize().width()` there and see what it is. I bet it is zero. (possibly check what `total_height` is as well)\n\nI also recall that when I encountered the similar issue, whether or not it was being triggered was very sensitive to the contents of the BLACS save file: `labscript_suite/labconfig/<your-hostname>_BLACS.h5`. So as one check, you could try deleting or renaming that file. This will cause BLACS to forget all of its settings, so you might want to rename it instead of deleting it so you can restore it if this doesn't fix the problem.\n\nI'll try to dig up any threads from the time I was encountering a similar issue, and see if there are any other insights there.", "markup": "markdown", "html": "<p>The long delay is when Python is importing modules that tracelog has been told not to log about. It is still slow, just doesn't appear in the output file. So that is normal.</p>\n<p>Excellent, the faulthandler has 34 threads doing nothing (they are all waiting on zeromq messages or other things), and one thread laying out Qt widgets:</p>\n<div class=\"codehilite\"><pre><span></span>Current thread 0x00000978 (most recent call first):\n  File &quot;C:\\labscript_suite\\labscript_utils\\qtwidgets\\toolpalette.py&quot;, line 348 in _layout_widgets\n  File &quot;C:\\labscript_suite\\labscript_utils\\qtwidgets\\toolpalette.py&quot;, line 405 in resizeEvent\n  File &quot;C:\\labscript_suite\\blacs\\__main__.py&quot;, line 844 in execute_program\n  File &quot;C:\\labscript_suite\\blacs\\__main__.py&quot;, line 846 in &lt;module&gt;\n  File &quot;C:\\Users\\APQ\\Anaconda3\\lib\\runpy.py&quot;, line 85 in _run_code\n  File &quot;C:\\Users\\APQ\\Anaconda3\\lib\\runpy.py&quot;, line 193 in _run_module_as_main\n</pre></div>\n\n\n<p>So it looks like this is probably where the crash is happening (<code>File \"C:\\labscript_suite\\labscript_utils\\qtwidgets\\toolpalette.py\", line 348 in _layout_widgets</code>).</p>\n<p>Line 348 is:</p>\n<div class=\"codehilite\"><pre><span></span>self.setMinimumSize(QSize(self.minimumSize().width(), total_height))\n</pre></div>\n\n\n<p>Ah, this is sounding familiar now. I recall an obtuse bug where the sizes of Qt widgets were coming back as (0,0) despite having been set to something nonzero, and that this was causing segfaults for some reason. But it was improbable to occur, and only occurred on some Qt versions, and I was very confident that it was a bug in Qt itself.</p>\n<p>I would hope that conda releases a package for Qt 5.12 soon, which has some chance of having fixed the bug, though in the meantime on a specific computer we could for example, wrap the above line 348 in an <code>if</code> statement, like:</p>\n<div class=\"codehilite\"><pre><span></span>if self.minimumSize().width() &gt; 0:\n    self.setMinimumSize(QSize(self.minimumSize().width(), total_height))\n</pre></div>\n\n\n<p>You might also want to print out <code>self.minimumSize().width()</code> there and see what it is. I bet it is zero. (possibly check what <code>total_height</code> is as well)</p>\n<p>I also recall that when I encountered the similar issue, whether or not it was being triggered was very sensitive to the contents of the BLACS save file: <code>labscript_suite/labconfig/&lt;your-hostname&gt;_BLACS.h5</code>. So as one check, you could try deleting or renaming that file. This will cause BLACS to forget all of its settings, so you might want to rename it instead of deleting it so you can restore it if this doesn't fix the problem.</p>\n<p>I'll try to dig up any threads from the time I was encountering a similar issue, and see if there are any other insights there.</p>", "type": "rendered"}, "created_on": "2019-05-23T18:33:06.123330+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-05-23T18:36:52.775543+00:00", "type": "pullrequest_comment", "id": 103209387}, "pull_request": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85/comments/103202138.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85/_/diff#comment-103202138"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}, "content": {"raw": "Thanks for all the advices for testing. the outputbox is working fine \\(printing a lot of funny stuff :smiley: \\) and I think there is only conda python installed. We basically updated from some labscript version at the end of april \\(25th of April/ labscript\\_utils 2.12.3 and all changes from before in all labscript programs\\). For updating we upgraded zprocess to 2.15.1 but also tried 2.12.5 \\(which was the old one\\) and some in between.\n\nThe tracelog file and the faulthandler output \\(at least what I could copy from the terminal\\) can be found here: [https://www.dropbox.com/sh/26hpobyjtljtogn/AAA4fCAUs94L86KDZZdyPMVva?dl=0](https://www.dropbox.com/sh/26hpobyjtljtogn/AAA4fCAUs94L86KDZZdyPMVva?dl=0)  \n\nIn the tracelog in line 1233 there is a very long wait which I find strange but python keeps running.", "markup": "markdown", "html": "<p>Thanks for all the advices for testing. the outputbox is working fine (printing a lot of funny stuff <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f603.png\" alt=\"\ud83d\ude03\" title=\":smiley:\" data-emoji-short-name=\":smiley:\" /> ) and I think there is only conda python installed. We basically updated from some labscript version at the end of april (25th of April/ labscript_utils 2.12.3 and all changes from before in all labscript programs). For updating we upgraded zprocess to 2.15.1 but also tried 2.12.5 (which was the old one) and some in between.</p>\n<p>The tracelog file and the faulthandler output (at least what I could copy from the terminal) can be found here: <a data-is-external-link=\"true\" href=\"https://www.dropbox.com/sh/26hpobyjtljtogn/AAA4fCAUs94L86KDZZdyPMVva?dl=0\" rel=\"nofollow\">https://www.dropbox.com/sh/26hpobyjtljtogn/AAA4fCAUs94L86KDZZdyPMVva?dl=0</a>  </p>\n<p>In the tracelog in line 1233 there is a very long wait which I find strange but python keeps running.</p>", "type": "rendered"}, "created_on": "2019-05-23T17:29:32.742849+00:00", "user": {"display_name": "Lars Kohfahl", "uuid": "{14b59397-cbc0-4d8c-8a4a-fe99fb4d2d4a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B14b59397-cbc0-4d8c-8a4a-fe99fb4d2d4a%7D"}, "html": {"href": "https://bitbucket.org/%7B14b59397-cbc0-4d8c-8a4a-fe99fb4d2d4a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/630642264cd55e22515678a3a0489ac7d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsLK-2.png"}}, "nickname": "lkohfahl", "type": "user", "account_id": "5aafc5d11396802a57aa7f3b"}, "updated_on": "2019-05-23T17:29:32.896569+00:00", "type": "pullrequest_comment", "id": 103202138}, "pull_request": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85/comments/103198015.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85/_/diff#comment-103198015"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}, "content": {"raw": "Since the issue was happening previously, it is still pretty likely to be environment issue, just not the same as what happens if conda environments aren't activated. It is possible for example that the *wrong* qt dll is being loaded, if there is more than one on the system. Are you aware of any unusual setups on these computers? For example, has python been installed both from python.org as well as conda?\n\nYou might also test if other Qt code works. A simple test might be to run `python -m qtutils.outputbox` from a console (from the 'anaconda prompt' if you are using anaconda). This should pop up a test of the output box widget we use in all the programs. It is pretty simple, so if it doesn't work we know it is a deeper issue, whereas if it does work, then the issue might be with BLACS or labscript suite programs specifically.", "markup": "markdown", "html": "<p>Since the issue was happening previously, it is still pretty likely to be environment issue, just not the same as what happens if conda environments aren't activated. It is possible for example that the <em>wrong</em> qt dll is being loaded, if there is more than one on the system. Are you aware of any unusual setups on these computers? For example, has python been installed both from python.org as well as conda?</p>\n<p>You might also test if other Qt code works. A simple test might be to run <code>python -m qtutils.outputbox</code> from a console (from the 'anaconda prompt' if you are using anaconda). This should pop up a test of the output box widget we use in all the programs. It is pretty simple, so if it doesn't work we know it is a deeper issue, whereas if it does work, then the issue might be with BLACS or labscript suite programs specifically.</p>", "type": "rendered"}, "created_on": "2019-05-23T16:52:31.783151+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-05-23T16:54:50.932095+00:00", "type": "pullrequest_comment", "id": 103198015}, "pull_request": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85/comments/103197495.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85/_/diff#comment-103197495"}}, "parent": {"id": 103196906, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85/comments/103196906.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85/_/diff#comment-103196906"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}, "content": {"raw": "If using Anaconda on Windows, run the above commands from the \u2018Anaconda Prompt\u2019, not a vanilla command prompt.", "markup": "markdown", "html": "<p>If using Anaconda on Windows, run the above commands from the \u2018Anaconda Prompt\u2019, not a vanilla command prompt.</p>", "type": "rendered"}, "created_on": "2019-05-23T16:48:13.895075+00:00", "user": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "updated_on": "2019-05-23T16:48:13.904476+00:00", "type": "pullrequest_comment", "id": 103197495}, "pull_request": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85/comments/103196906.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85/_/diff#comment-103196906"}}, "parent": {"id": 103194773, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85/comments/103194773.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85/_/diff#comment-103194773"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}, "content": {"raw": "This sounds unrelated, it sounds like something in Qt5 is crashing after the DLL is loaded. So there doesn't appear to be an issue with conda environments.\n\nTo debug, you could turn on Python's 'faulthandler' as well as our 'tracelog' logger.\n\nTo try with the faulthandler, run BLACS from the command line with:\n```\npython -X faulthandler -m blacs\n```\n\nIf we are lucky, this should print a traceback of where the app crashed.\n\nOtherwise, try running with our 'tracelogger':\n```\npython -m blacs tracelog\n```\nThis will create a file `blacs_trace.log` in the BLACS directory. After a crash we can see in the log file where it got up to (note: running with tracelog is very slow, it may take a while to start up).\n\nWhat version were you running prior to updating? You might want to try downgrading until you find a version that does not crash, and then we can figure out which change cause the issue.", "markup": "markdown", "html": "<p>This sounds unrelated, it sounds like something in Qt5 is crashing after the DLL is loaded. So there doesn't appear to be an issue with conda environments.</p>\n<p>To debug, you could turn on Python's 'faulthandler' as well as our 'tracelog' logger.</p>\n<p>To try with the faulthandler, run BLACS from the command line with:</p>\n<div class=\"codehilite\"><pre><span></span>python -X faulthandler -m blacs\n</pre></div>\n\n\n<p>If we are lucky, this should print a traceback of where the app crashed.</p>\n<p>Otherwise, try running with our 'tracelogger':</p>\n<div class=\"codehilite\"><pre><span></span>python -m blacs tracelog\n</pre></div>\n\n\n<p>This will create a file <code>blacs_trace.log</code> in the BLACS directory. After a crash we can see in the log file where it got up to (note: running with tracelog is very slow, it may take a while to start up).</p>\n<p>What version were you running prior to updating? You might want to try downgrading until you find a version that does not crash, and then we can figure out which change cause the issue.</p>", "type": "rendered"}, "created_on": "2019-05-23T16:43:20.519941+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-05-23T16:44:04.505539+00:00", "type": "pullrequest_comment", "id": 103196906}, "pull_request": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85/comments/103194773.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85/_/diff#comment-103194773"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}, "content": {"raw": "Hey,\n\nI hoped that this would remove an error we faced recently when updating labscript: Python crashes when starting blacs. The crash occurs after blacs the info message \u201cBLACS instantiated\u201d. It says the module causing the error is Qt5Widgets.dll. I will add some pics from the windows error message.\n\nBefore it was that the error occurred first when clicking on the tab of a specific NI\\_card. Python crashed only for one DO-card out \\(not for the other DO-card and not for any other NI-card\\). But after a restart the error changed to what I wrote above.\n\nActually, we had this error on a second experiment computer as well but on this one I somehow managed to get around it \\(probably by restarting the computer\\)\n\nSo one the second computer the problem stays and blacs does not launch anymore.\n\n![](data/bitbucket.org/repo/xg9BdE/images/2822184549-DSC_2312.JPG)\n![](data/bitbucket.org/repo/xg9BdE/images/1331840835-DSC_2311.JPG)\n![](data/bitbucket.org/repo/xg9BdE/images/3033597980-DSC_2313.JPG)\n", "markup": "markdown", "html": "<p>Hey,</p>\n<p>I hoped that this would remove an error we faced recently when updating labscript: Python crashes when starting blacs. The crash occurs after blacs the info message \u201cBLACS instantiated\u201d. It says the module causing the error is Qt5Widgets.dll. I will add some pics from the windows error message.</p>\n<p>Before it was that the error occurred first when clicking on the tab of a specific NI_card. Python crashed only for one DO-card out (not for the other DO-card and not for any other NI-card). But after a restart the error changed to what I wrote above.</p>\n<p>Actually, we had this error on a second experiment computer as well but on this one I somehow managed to get around it (probably by restarting the computer)</p>\n<p>So one the second computer the problem stays and blacs does not launch anymore.</p>\n<p><img alt=\"\" src=\"data/bitbucket.org/repo/xg9BdE/images/2822184549-DSC_2312.JPG\" />\n<img alt=\"\" src=\"data/bitbucket.org/repo/xg9BdE/images/1331840835-DSC_2311.JPG\" />\n<img alt=\"\" src=\"data/bitbucket.org/repo/xg9BdE/images/3033597980-DSC_2313.JPG\" /></p>", "type": "rendered"}, "created_on": "2019-05-23T16:26:40.652372+00:00", "user": {"display_name": "Lars Kohfahl", "uuid": "{14b59397-cbc0-4d8c-8a4a-fe99fb4d2d4a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B14b59397-cbc0-4d8c-8a4a-fe99fb4d2d4a%7D"}, "html": {"href": "https://bitbucket.org/%7B14b59397-cbc0-4d8c-8a4a-fe99fb4d2d4a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/630642264cd55e22515678a3a0489ac7d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsLK-2.png"}}, "nickname": "lkohfahl", "type": "user", "account_id": "5aafc5d11396802a57aa7f3b"}, "updated_on": "2019-05-23T16:26:40.959409+00:00", "type": "pullrequest_comment", "id": 103194773}, "pull_request": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}}, {"update": {"description": "Add function fix_shortcuts() to winshell, and have it run if winshell is run as main with:\r\n\r\npython -m labscript_utils.winshell --fix-shortcuts\r\n\r\nThis function will re-make labscript suite application shortcuts and start menu\r\nentries. This can fix broken shortcuts in the case that old shortcuts were from\r\nbefore winshell could make shortcuts interact well with newer versions of conda.\r\n\r\nCatch DLL load error upon importing Qt in the splash submodule, and raise\r\nan exception advising that the user might try running the above command to fix\r\ntheir shortcuts, since this DLL load error is the first one to be hit in the\r\napplications when they are launched from incorrect shortcuts.\r\n\r\nAlso modified `set_appusermodel()` to ignore the incorrect relaunch information as passed from current versions of the apps. This way pinning of current versions of the apps will work without them having to be updated to not pass bad details to `set_appusermodel()` (though I will still update them).", "title": "Add fix_shortcuts() function and catch DLL load error", "destination": {"commit": {"hash": "a3a4077301b7", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/a3a4077301b7.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/a3a4077301b7"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "1abd329a722a", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/1abd329a722a"}, "html": {"href": "#!/cbillington/labscript_utils/commits/1abd329a722a"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "fix-shortcuts"}}, "state": "MERGED", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-05-20T13:59:59.840221+00:00"}, "pull_request": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}}, {"update": {"description": "Add function fix_shortcuts() to winshell, and have it run if winshell is run as main with:\r\n\r\npython -m labscript_utils.winshell --fix-shortcuts\r\n\r\nThis function will re-make labscript suite application shortcuts and start menu\r\nentries. This can fix broken shortcuts in the case that old shortcuts were from\r\nbefore winshell could make shortcuts interact well with newer versions of conda.\r\n\r\nCatch DLL load error upon importing Qt in the splash submodule, and raise\r\nan exception advising that the user might try running the above command to fix\r\ntheir shortcuts, since this DLL load error is the first one to be hit in the\r\napplications when they are launched from incorrect shortcuts.\r\n\r\nAlso modified `set_appusermodel()` to ignore the incorrect relaunch information as passed from current versions of the apps. This way pinning of current versions of the apps will work without them having to be updated to not pass bad details to `set_appusermodel()` (though I will still update them).", "title": "Add fix_shortcuts() function and catch DLL load error", "destination": {"commit": {"hash": "a3a4077301b7", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/a3a4077301b7.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/a3a4077301b7"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "1abd329a722a", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/1abd329a722a"}, "html": {"href": "#!/cbillington/labscript_utils/commits/1abd329a722a"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "fix-shortcuts"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-05-20T13:59:58.309799+00:00"}, "pull_request": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}}, {"approval": {"date": "2019-05-19T09:56:54.841845+00:00", "pullrequest": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}, "user": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}}, "pull_request": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}}, {"update": {"description": "Add function fix_shortcuts() to winshell, and have it run if winshell is run as main with:\r\n\r\npython -m labscript_utils.winshell --fix-shortcuts\r\n\r\nThis function will re-make labscript suite application shortcuts and start menu\r\nentries. This can fix broken shortcuts in the case that old shortcuts were from\r\nbefore winshell could make shortcuts interact well with newer versions of conda.\r\n\r\nCatch DLL load error upon importing Qt in the splash submodule, and raise\r\nan exception advising that the user might try running the above command to fix\r\ntheir shortcuts, since this DLL load error is the first one to be hit in the\r\napplications when they are launched from incorrect shortcuts.\r\n\r\nAlso modified `set_appusermodel()` to ignore the incorrect relaunch information as passed from current versions of the apps. This way pinning of current versions of the apps will work without them having to be updated to not pass bad details to `set_appusermodel()` (though I will still update them).", "title": "Add fix_shortcuts() function and catch DLL load error", "destination": {"commit": {"hash": "a3a4077301b7", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/a3a4077301b7.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/a3a4077301b7"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "1abd329a722a", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/1abd329a722a"}, "html": {"href": "#!/cbillington/labscript_utils/commits/1abd329a722a"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "fix-shortcuts"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-05-19T03:47:20.019563+00:00"}, "pull_request": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}}, {"update": {"description": "Add function fix_shortcuts() to winshell, and have it run if winshell is run as main with:\r\n\r\npython -m labscript_utils.winshell --fix-shortcuts\r\n\r\nThis function will re-make labscript suite application shortcuts and start menu\r\nentries. This can fix broken shortcuts in the case that old shortcuts were from\r\nbefore winshell could make shortcuts interact well with newer versions of conda.\r\n\r\nCatch DLL load error upon importing Qt in the splash submodule, and raise\r\nan exception advising that the user might try running the above command to fix\r\ntheir shortcuts, since this DLL load error is the first one to be hit in the\r\napplications when they are launched from incorrect shortcuts.\r\n\r\nAlso modified `set_appusermodel()` to ignore the incorrect relaunch information as passed from current versions of the apps. This way pinning of current versions of the apps will work without them having to be updated to not pass bad details to `set_appusermodel()` (though I will still update them).", "title": "Add fix_shortcuts() function and catch DLL load error", "destination": {"commit": {"hash": "a3a4077301b7", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/a3a4077301b7.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/a3a4077301b7"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "8b0229da42c7", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/8b0229da42c7"}, "html": {"href": "#!/cbillington/labscript_utils/commits/8b0229da42c7"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "fix-shortcuts"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-05-19T03:46:55.805933+00:00"}, "pull_request": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}}, {"update": {"description": "Add function fix_shortcuts() to winshell, and have it run if winshell is run as main with:\r\n\r\npython -m labscript_utils.winshell --fix-shortcuts\r\n\r\nThis function will re-make labscript suite application shortcuts and start menu\r\nentries. This can fix broken shortcuts in the case that old shortcuts were from\r\nbefore winshell could make shortcuts interact well with newer versions of conda.\r\n\r\nCatch DLL load error upon importing Qt in the splash submodule, and raise\r\nan exception advising that the user might try running the above command to fix\r\ntheir shortcuts, since this DLL load error is the first one to be hit in the\r\napplications when they are launched from incorrect shortcuts.\r\n\r\nAlso modified `set_appusermodel()` to ignore the incorrect relaunch information as passed from current versions of the apps. This way pinning of current versions of the apps will work without them having to be updated to not pass bad details to `set_appusermodel()` (though I will still update them).", "title": "Add fix_shortcuts() function and catch DLL load error", "destination": {"commit": {"hash": "a3a4077301b7", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/a3a4077301b7.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/a3a4077301b7"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "8b0229da42c7", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/8b0229da42c7"}, "html": {"href": "#!/cbillington/labscript_utils/commits/8b0229da42c7"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "fix-shortcuts"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-05-19T03:46:55.756331+00:00"}, "pull_request": {"type": "pullrequest", "id": 85, "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/85.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/85"}}, "title": "Add fix_shortcuts() function and catch DLL load error"}}]}