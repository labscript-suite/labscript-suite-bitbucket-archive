{"rendered": {"description": {"raw": "It was pointed out to me that our automatic metric prefixes for unit conversions don't have the correct behaviour when the unit conversion isn't a linear function.\r\n\r\nFor example, if you're going from say, MHz (non base unit) to V (base unit) via a nonlinear function, you want to *first* convert to Hz, *then* call the Hz \u2192 base conversion function. We had it the wrong way around and were only applying the factor of 10^6 *after* going through the unit conversion function to base units. This gives the same results if the conversion function is linear, which is why we probably didn't notice the problem before. The same argument applies for the reverse transformation: We should convert from base to derived, *then* apply the metric prefix factor.\r\n\r\nSo this fix makes sense to me, but worth someone else verifying that it makes sense to them too.", "markup": "markdown", "html": "<p>It was pointed out to me that our automatic metric prefixes for unit conversions don't have the correct behaviour when the unit conversion isn't a linear function.</p>\n<p>For example, if you're going from say, MHz (non base unit) to V (base unit) via a nonlinear function, you want to <em>first</em> convert to Hz, <em>then</em> call the Hz \u2192 base conversion function. We had it the wrong way around and were only applying the factor of 10^6 <em>after</em> going through the unit conversion function to base units. This gives the same results if the conversion function is linear, which is why we probably didn't notice the problem before. The same argument applies for the reverse transformation: We should convert from base to derived, <em>then</em> apply the metric prefix factor.</p>\n<p>So this fix makes sense to me, but worth someone else verifying that it makes sense to them too.</p>", "type": "rendered"}, "title": {"raw": "unit conversions: fix metrix prefixes for nonlinear conversions", "markup": "markdown", "html": "<p>unit conversions: fix metrix prefixes for nonlinear conversions</p>", "type": "rendered"}}, "type": "pullrequest", "description": "It was pointed out to me that our automatic metric prefixes for unit conversions don't have the correct behaviour when the unit conversion isn't a linear function.\r\n\r\nFor example, if you're going from say, MHz (non base unit) to V (base unit) via a nonlinear function, you want to *first* convert to Hz, *then* call the Hz \u2192 base conversion function. We had it the wrong way around and were only applying the factor of 10^6 *after* going through the unit conversion function to base units. This gives the same results if the conversion function is linear, which is why we probably didn't notice the problem before. The same argument applies for the reverse transformation: We should convert from base to derived, *then* apply the metric prefix factor.\r\n\r\nSo this fix makes sense to me, but worth someone else verifying that it makes sense to them too.", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_utils/pullrequests/87/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_utils/diffstat/labscript_suite/labscript_utils:2a1cbf0e5be9%0D76fa74b8d20e?from_pullrequest_id=87"}, "commits": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/87/commits.json"}, "self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/87.json"}, "comments": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/87/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_utils/pullrequests/87/merge"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/87"}, "activity": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/87/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_utils/diff/labscript_suite/labscript_utils:2a1cbf0e5be9%0D76fa74b8d20e?from_pullrequest_id=87"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_utils/pullrequests/87/approve"}, "statuses": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/87/statuses_page=1.json"}}, "title": "unit conversions: fix metrix prefixes for nonlinear conversions", "close_source_branch": true, "reviewers": [{"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, {"display_name": "Philip Starkey", "uuid": "{0147401a-13ed-4e39-a0d0-63108c18738b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D"}, "html": {"href": "https://bitbucket.org/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/fa0698c306b3470c00717c146b5296e9d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "philipstarkey", "type": "user", "account_id": "557058:2f99420c-1dbd-4837-952c-82c421b8fbdd"}], "id": 87, "destination": {"commit": {"hash": "76fa74b8d20e", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/76fa74b8d20e.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/76fa74b8d20e"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "created_on": "2019-07-09T01:42:40.505878+00:00", "summary": {"raw": "It was pointed out to me that our automatic metric prefixes for unit conversions don't have the correct behaviour when the unit conversion isn't a linear function.\r\n\r\nFor example, if you're going from say, MHz (non base unit) to V (base unit) via a nonlinear function, you want to *first* convert to Hz, *then* call the Hz \u2192 base conversion function. We had it the wrong way around and were only applying the factor of 10^6 *after* going through the unit conversion function to base units. This gives the same results if the conversion function is linear, which is why we probably didn't notice the problem before. The same argument applies for the reverse transformation: We should convert from base to derived, *then* apply the metric prefix factor.\r\n\r\nSo this fix makes sense to me, but worth someone else verifying that it makes sense to them too.", "markup": "markdown", "html": "<p>It was pointed out to me that our automatic metric prefixes for unit conversions don't have the correct behaviour when the unit conversion isn't a linear function.</p>\n<p>For example, if you're going from say, MHz (non base unit) to V (base unit) via a nonlinear function, you want to <em>first</em> convert to Hz, <em>then</em> call the Hz \u2192 base conversion function. We had it the wrong way around and were only applying the factor of 10^6 <em>after</em> going through the unit conversion function to base units. This gives the same results if the conversion function is linear, which is why we probably didn't notice the problem before. The same argument applies for the reverse transformation: We should convert from base to derived, <em>then</em> apply the metric prefix factor.</p>\n<p>So this fix makes sense to me, but worth someone else verifying that it makes sense to them too.</p>", "type": "rendered"}, "source": {"commit": {"hash": "f93989fb456b", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/f93989fb456b"}, "html": {"href": "#!/cbillington/labscript_utils/commits/f93989fb456b"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "bugfix"}}, "comment_count": 0, "state": "MERGED", "task_count": 0, "participants": [{"role": "REVIEWER", "participated_on": null, "type": "participant", "approved": false, "user": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}}, {"role": "REVIEWER", "participated_on": null, "type": "participant", "approved": false, "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}}, {"role": "REVIEWER", "participated_on": null, "type": "participant", "approved": false, "user": {"display_name": "Philip Starkey", "uuid": "{0147401a-13ed-4e39-a0d0-63108c18738b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D"}, "html": {"href": "https://bitbucket.org/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/fa0698c306b3470c00717c146b5296e9d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "philipstarkey", "type": "user", "account_id": "557058:2f99420c-1dbd-4837-952c-82c421b8fbdd"}}], "reason": "", "updated_on": "2019-12-05T03:02:21.826384+00:00", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "merge_commit": {"hash": "2a1cbf0e5be9", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/2a1cbf0e5be9.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/2a1cbf0e5be9"}}}, "closed_by": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}}