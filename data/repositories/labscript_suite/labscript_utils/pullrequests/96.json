{"rendered": {"description": {"raw": "Here are some changes for the upcoming shift to regular PyPI packages, as described [here](#!/labscript_suite/installer/issues/31/tasks-required-before-moving-to-standard)\r\n\r\n* Rename `labscript_suite_install_dir` to `labscript_suite_profile` (keeping the\r\n    old name as an alias for backward compatibility), since in the\r\n    upcoming restructuring, this will not be where the applications and libraries\r\n    are installed to, it will instead be the user's code, config and save data, and\r\n    app launchers, which we're calling a 'profile'.\r\n\r\n    Modify winshell functions to use the import path of each app instead of assuming\r\n    their locations within the profile directory (since they will not longer be\r\n    there in future).\r\n\r\n    Modify `versions._get_import_path()` to detect whether a package within the\r\n    `labscript_suite_profile` directory is a restructured repository with a\r\n    `setup.py`. If it is, then return the repository as the import\r\n    path, rather than the `labscript_suite_profile` directory.\r\n\r\n    This combined with 'shim' `__init__.py` and `__main__.py` files in restructured\r\n    packages to redirect imports and running `__main__.py` to the package one\r\n    directory down will allow these repositories to continue functioning as\r\n    previously even after they are restructured.\r\n\r\n    Minor version bump so that restructured packages can depend on the changed\r\n    functionality.\r\n\r\n* Automatically updated pinned apps when running fix_shortcuts()\r\n\r\n    Make fix_shortcuts() more cautious in deleting shortcuts, only deleting\r\n    a shortcut from the labscript suite install directory if it has a matching\r\n    entry in the start menu and has the name of one of the apps in it.\r\n\r\n    This makes it safer for code to call fix_shortcuts() automatically.\r\n\r\n* Start applications with current working directory set to userlib", "markup": "markdown", "html": "<p>Here are some changes for the upcoming shift to regular PyPI packages, as described <a data-is-external-link=\"true\" href=\"#!/labscript_suite/installer/issues/31/tasks-required-before-moving-to-standard\" rel=\"nofollow\">here</a></p>\n<ul>\n<li>\n<p>Rename <code>labscript_suite_install_dir</code> to <code>labscript_suite_profile</code> (keeping the\n    old name as an alias for backward compatibility), since in the\n    upcoming restructuring, this will not be where the applications and libraries\n    are installed to, it will instead be the user's code, config and save data, and\n    app launchers, which we're calling a 'profile'.</p>\n<p>Modify winshell functions to use the import path of each app instead of assuming\ntheir locations within the profile directory (since they will not longer be\nthere in future).</p>\n<p>Modify <code>versions._get_import_path()</code> to detect whether a package within the\n<code>labscript_suite_profile</code> directory is a restructured repository with a\n<code>setup.py</code>. If it is, then return the repository as the import\npath, rather than the <code>labscript_suite_profile</code> directory.</p>\n<p>This combined with 'shim' <code>__init__.py</code> and <code>__main__.py</code> files in restructured\npackages to redirect imports and running <code>__main__.py</code> to the package one\ndirectory down will allow these repositories to continue functioning as\npreviously even after they are restructured.</p>\n<p>Minor version bump so that restructured packages can depend on the changed\nfunctionality.</p>\n</li>\n<li>\n<p>Automatically updated pinned apps when running fix_shortcuts()</p>\n<p>Make fix_shortcuts() more cautious in deleting shortcuts, only deleting\na shortcut from the labscript suite install directory if it has a matching\nentry in the start menu and has the name of one of the apps in it.</p>\n<p>This makes it safer for code to call fix_shortcuts() automatically.</p>\n</li>\n<li>\n<p>Start applications with current working directory set to userlib</p>\n</li>\n</ul>", "type": "rendered"}, "title": {"raw": "Preparations for apps to be restructured as standard Python packages", "markup": "markdown", "html": "<p>Preparations for apps to be restructured as standard Python packages</p>", "type": "rendered"}}, "type": "pullrequest", "description": "Here are some changes for the upcoming shift to regular PyPI packages, as described [here](#!/labscript_suite/installer/issues/31/tasks-required-before-moving-to-standard)\r\n\r\n* Rename `labscript_suite_install_dir` to `labscript_suite_profile` (keeping the\r\n    old name as an alias for backward compatibility), since in the\r\n    upcoming restructuring, this will not be where the applications and libraries\r\n    are installed to, it will instead be the user's code, config and save data, and\r\n    app launchers, which we're calling a 'profile'.\r\n\r\n    Modify winshell functions to use the import path of each app instead of assuming\r\n    their locations within the profile directory (since they will not longer be\r\n    there in future).\r\n\r\n    Modify `versions._get_import_path()` to detect whether a package within the\r\n    `labscript_suite_profile` directory is a restructured repository with a\r\n    `setup.py`. If it is, then return the repository as the import\r\n    path, rather than the `labscript_suite_profile` directory.\r\n\r\n    This combined with 'shim' `__init__.py` and `__main__.py` files in restructured\r\n    packages to redirect imports and running `__main__.py` to the package one\r\n    directory down will allow these repositories to continue functioning as\r\n    previously even after they are restructured.\r\n\r\n    Minor version bump so that restructured packages can depend on the changed\r\n    functionality.\r\n\r\n* Automatically updated pinned apps when running fix_shortcuts()\r\n\r\n    Make fix_shortcuts() more cautious in deleting shortcuts, only deleting\r\n    a shortcut from the labscript suite install directory if it has a matching\r\n    entry in the start menu and has the name of one of the apps in it.\r\n\r\n    This makes it safer for code to call fix_shortcuts() automatically.\r\n\r\n* Start applications with current working directory set to userlib", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_utils/pullrequests/96/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_utils/diffstat/labscript_suite/labscript_utils:76fa74b8d20e%0Dbc839f104a06?from_pullrequest_id=96"}, "commits": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/96/commits.json"}, "self": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/96.json"}, "comments": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/96/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_utils/pullrequests/96/merge"}, "html": {"href": "#!/labscript_suite/labscript_utils/pull-requests/96"}, "activity": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/96/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_utils/diff/labscript_suite/labscript_utils:76fa74b8d20e%0Dbc839f104a06?from_pullrequest_id=96"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/labscript_utils/pullrequests/96/approve"}, "statuses": {"href": "data/repositories/labscript_suite/labscript_utils/pullrequests/96/statuses_page=1.json"}}, "title": "Preparations for apps to be restructured as standard Python packages", "close_source_branch": true, "reviewers": [{"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, {"display_name": "Philip Starkey", "uuid": "{0147401a-13ed-4e39-a0d0-63108c18738b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D"}, "html": {"href": "https://bitbucket.org/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/fa0698c306b3470c00717c146b5296e9d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "philipstarkey", "type": "user", "account_id": "557058:2f99420c-1dbd-4837-952c-82c421b8fbdd"}], "id": 96, "destination": {"commit": {"hash": "bc839f104a06", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/bc839f104a06.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/bc839f104a06"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils.json"}, "html": {"href": "#!/labscript_suite/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68347210-fb1e-4b58-86c0-bd2c04396e63}ts=249922"}}, "type": "repository", "name": "labscript_utils", "full_name": "labscript_suite/labscript_utils", "uuid": "{68347210-fb1e-4b58-86c0-bd2c04396e63}"}, "branch": {"name": "default"}}, "created_on": "2019-11-30T04:39:10.389608+00:00", "summary": {"raw": "Here are some changes for the upcoming shift to regular PyPI packages, as described [here](#!/labscript_suite/installer/issues/31/tasks-required-before-moving-to-standard)\r\n\r\n* Rename `labscript_suite_install_dir` to `labscript_suite_profile` (keeping the\r\n    old name as an alias for backward compatibility), since in the\r\n    upcoming restructuring, this will not be where the applications and libraries\r\n    are installed to, it will instead be the user's code, config and save data, and\r\n    app launchers, which we're calling a 'profile'.\r\n\r\n    Modify winshell functions to use the import path of each app instead of assuming\r\n    their locations within the profile directory (since they will not longer be\r\n    there in future).\r\n\r\n    Modify `versions._get_import_path()` to detect whether a package within the\r\n    `labscript_suite_profile` directory is a restructured repository with a\r\n    `setup.py`. If it is, then return the repository as the import\r\n    path, rather than the `labscript_suite_profile` directory.\r\n\r\n    This combined with 'shim' `__init__.py` and `__main__.py` files in restructured\r\n    packages to redirect imports and running `__main__.py` to the package one\r\n    directory down will allow these repositories to continue functioning as\r\n    previously even after they are restructured.\r\n\r\n    Minor version bump so that restructured packages can depend on the changed\r\n    functionality.\r\n\r\n* Automatically updated pinned apps when running fix_shortcuts()\r\n\r\n    Make fix_shortcuts() more cautious in deleting shortcuts, only deleting\r\n    a shortcut from the labscript suite install directory if it has a matching\r\n    entry in the start menu and has the name of one of the apps in it.\r\n\r\n    This makes it safer for code to call fix_shortcuts() automatically.\r\n\r\n* Start applications with current working directory set to userlib", "markup": "markdown", "html": "<p>Here are some changes for the upcoming shift to regular PyPI packages, as described <a data-is-external-link=\"true\" href=\"#!/labscript_suite/installer/issues/31/tasks-required-before-moving-to-standard\" rel=\"nofollow\">here</a></p>\n<ul>\n<li>\n<p>Rename <code>labscript_suite_install_dir</code> to <code>labscript_suite_profile</code> (keeping the\n    old name as an alias for backward compatibility), since in the\n    upcoming restructuring, this will not be where the applications and libraries\n    are installed to, it will instead be the user's code, config and save data, and\n    app launchers, which we're calling a 'profile'.</p>\n<p>Modify winshell functions to use the import path of each app instead of assuming\ntheir locations within the profile directory (since they will not longer be\nthere in future).</p>\n<p>Modify <code>versions._get_import_path()</code> to detect whether a package within the\n<code>labscript_suite_profile</code> directory is a restructured repository with a\n<code>setup.py</code>. If it is, then return the repository as the import\npath, rather than the <code>labscript_suite_profile</code> directory.</p>\n<p>This combined with 'shim' <code>__init__.py</code> and <code>__main__.py</code> files in restructured\npackages to redirect imports and running <code>__main__.py</code> to the package one\ndirectory down will allow these repositories to continue functioning as\npreviously even after they are restructured.</p>\n<p>Minor version bump so that restructured packages can depend on the changed\nfunctionality.</p>\n</li>\n<li>\n<p>Automatically updated pinned apps when running fix_shortcuts()</p>\n<p>Make fix_shortcuts() more cautious in deleting shortcuts, only deleting\na shortcut from the labscript suite install directory if it has a matching\nentry in the start menu and has the name of one of the apps in it.</p>\n<p>This makes it safer for code to call fix_shortcuts() automatically.</p>\n</li>\n<li>\n<p>Start applications with current working directory set to userlib</p>\n</li>\n</ul>", "type": "rendered"}, "source": {"commit": {"hash": "62a9cc80249e", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils/commit/62a9cc80249e"}, "html": {"href": "#!/cbillington/labscript_utils/commits/62a9cc80249e"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/labscript_utils"}, "html": {"href": "#!/cbillington/labscript_utils"}, "avatar": {"href": "data/bytebucket.org/ravatar/{455d0b5d-4852-4e4a-b8b1-f5ba77882210}ts=python"}}, "type": "repository", "name": "labscript_utils", "full_name": "cbillington/labscript_utils", "uuid": "{455d0b5d-4852-4e4a-b8b1-f5ba77882210}"}, "branch": {"name": "restructuring-preparations"}}, "comment_count": 11, "state": "MERGED", "task_count": 0, "participants": [{"role": "REVIEWER", "participated_on": "2020-01-01T08:54:33.590267+00:00", "type": "participant", "approved": false, "user": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}}, {"role": "PARTICIPANT", "participated_on": "2020-01-01T06:55:11.325223+00:00", "type": "participant", "approved": false, "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}}, {"role": "REVIEWER", "participated_on": "2020-01-01T07:21:14.654717+00:00", "type": "participant", "approved": false, "user": {"display_name": "Philip Starkey", "uuid": "{0147401a-13ed-4e39-a0d0-63108c18738b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D"}, "html": {"href": "https://bitbucket.org/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/fa0698c306b3470c00717c146b5296e9d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "philipstarkey", "type": "user", "account_id": "557058:2f99420c-1dbd-4837-952c-82c421b8fbdd"}}], "reason": "", "updated_on": "2020-01-01T08:54:33.590267+00:00", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "merge_commit": {"hash": "76fa74b8d20e", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/labscript_utils/commit/76fa74b8d20e.json"}, "html": {"href": "#!/labscript_suite/labscript_utils/commits/76fa74b8d20e"}}}, "closed_by": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}}