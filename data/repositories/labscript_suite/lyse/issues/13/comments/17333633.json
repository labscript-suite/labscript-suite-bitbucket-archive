{"links": {"self": {"href": "data/repositories/labscript_suite/lyse/issues/13/comments/17333633.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/13#comment-17333633"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse/issues/13.json"}}, "type": "issue", "id": 13, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "title": "Empty rows added to lyse dataframe, causing \"Multiple items found\" lookup error"}, "content": {"raw": "All modifications to the dataframe are done in the main thread via inmain() and friends. Most reading of the dataframe is also done with inmain(), though the server sending the dataframe to analysis subprocesses is not done in the main thread. I should investigate whether pickling is atomic, like, if it holds the GIL and thus the dataframe can't be modified mid-pickle.\n\nBut that's not the issue we've seen today, since writing to the dataframe was f'd up at some point. I'm not seeing any obvious causes of this bug so far. I'm starting to wonder if lyse was sent malformed data.", "markup": "markdown", "html": "<p>All modifications to the dataframe are done in the main thread via inmain() and friends. Most reading of the dataframe is also done with inmain(), though the server sending the dataframe to analysis subprocesses is not done in the main thread. I should investigate whether pickling is atomic, like, if it holds the GIL and thus the dataframe can't be modified mid-pickle.</p>\n<p>But that's not the issue we've seen today, since writing to the dataframe was f'd up at some point. I'm not seeing any obvious causes of this bug so far. I'm starting to wonder if lyse was sent malformed data.</p>", "type": "rendered"}, "created_on": "2015-04-13T02:24:09.331368+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": null, "type": "issue_comment", "id": 17333633}