{"links": {"self": {"href": "data/repositories/labscript_suite/lyse/issues/22/comments/37628514.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/22#comment-37628514"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse/issues/22.json"}}, "type": "issue", "id": 22, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "title": "Allow Multishot Routines to add to dataframe"}, "content": {"raw": "There used to be something like this, where a multishot analysis routine would be passed a a path to a h5 file for storing results in. I'm not sure if the results ended up in the dataframe, but you could use them by opening the h5 file from other routines. This saving of results would be done with something along the lines of:\n\n```\n#!python\n\nseq = Sequence(path, df)\nseq.save_result('result name',result)\n\n```\n\nIn fact, this was all listed in the (out of date) [documentation](https://bytebucket.org/labscript_suite/lyse/raw/gtk/docs/lyse.pdf) (based on the older gtk version). Somewhere along the way something was changed so that lyse.path = None for multishot, perhaps in the port to qt? @cbillington, was there a reason for this change, or is it just that no one here at Monash has been using the Sequence class in their scripts, so the functionality was forgotten about and broken as other things were changed?\n\nPerhaps rather than saving to a routine specific h5 file, we should be saving the result to each individual h5 file in the sequence? When you call Sequence.save_result() it could check if path == None, in which case it will then save to every run_path instead?", "markup": "markdown", "html": "<p>There used to be something like this, where a multishot analysis routine would be passed a a path to a h5 file for storing results in. I'm not sure if the results ended up in the dataframe, but you could use them by opening the h5 file from other routines. This saving of results would be done with something along the lines of:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">seq</span> <span class=\"o\">=</span> <span class=\"n\">Sequence</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"p\">,</span> <span class=\"n\">df</span><span class=\"p\">)</span>\n<span class=\"n\">seq</span><span class=\"o\">.</span><span class=\"n\">save_result</span><span class=\"p\">(</span><span class=\"s1\">&#39;result name&#39;</span><span class=\"p\">,</span><span class=\"n\">result</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>In fact, this was all listed in the (out of date) <a data-is-external-link=\"true\" href=\"data/bytebucket.org/labscript_suite/lyse/raw/gtk/docs/lyse.pdf" rel=\"nofollow\">documentation</a> (based on the older gtk version). Somewhere along the way something was changed so that lyse.path = None for multishot, perhaps in the port to qt? @cbillington, was there a reason for this change, or is it just that no one here at Monash has been using the Sequence class in their scripts, so the functionality was forgotten about and broken as other things were changed?</p>\n<p>Perhaps rather than saving to a routine specific h5 file, we should be saving the result to each individual h5 file in the sequence? When you call Sequence.save_result() it could check if path == None, in which case it will then save to every run_path instead?</p>", "type": "rendered"}, "created_on": "2017-06-16T06:46:26.857779+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": null, "type": "issue_comment", "id": 37628514}