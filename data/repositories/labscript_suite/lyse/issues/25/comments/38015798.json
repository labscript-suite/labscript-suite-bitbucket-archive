{"links": {"self": {"href": "data/repositories/labscript_suite/lyse/issues/25/comments/38015798.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/25#comment-38015798"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse/issues/25.json"}}, "type": "issue", "id": 25, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "title": "Plots don't update after error"}, "content": {"raw": "Ok so I was finally able to reproduce the bug and narrowed it down a bit.\nIt occurs, when a new multishot script is added to lyse and during it's first execution a new runfile gets aded (by BLACS). Plots will not appear on subsequent executions of the script even if there are no errors.\nIf we however paused BLACS, and then add the multishot script and then unpaused BLACS it ran just fine.\nThe error I got was:\n```\n#!\n\nTraceback (most recent call last):\nFile \"C:\\labscript_suite\\userlib\\analysislib\\Einzelatom\\Multishot_Umpumper_Pulslaengenscan.py\", line 10, in <module>\natoms0 = df['Atoms', 'Atom0']\nFile \"C:\\ProgramData\\Anaconda2\\lib\\site-packages\\pandas\\core\\frame.py\", line 2057, in __getitem__\nreturn self._getitem_multilevel(key)\nFile \"C:\\ProgramData\\Anaconda2\\lib\\site-packages\\pandas\\core\\frame.py\", line 2101, in _getitem_multilevel\nloc = self.columns.get_loc(key)\nFile \"C:\\ProgramData\\Anaconda2\\lib\\site-packages\\pandas\\indexes\\multi.py\", line 1663, in get_loc\nreturn self._engine.get_loc(key)\nFile \"pandas\\index.pyx\", line 132, in pandas.index.IndexEngine.get_loc (pandas\\index.c:4433)\nFile \"pandas\\index.pyx\", line 154, in pandas.index.IndexEngine.get_loc (pandas\\index.c:4279)\nFile \"pandas\\src\\hashtable_class_helper.pxi\", line 732, in pandas.hashtable.PyObjectHashTable.get_item (pandas\\hashtable.c:13742)\nFile \"pandas\\src\\hashtable_class_helper.pxi\", line 740, in pandas.hashtable.PyObjectHashTable.get_item (pandas\\hashtable.c:13696)\nKeyError: ('Atoms', 'Atom0')\n```\nFor context Atoms is a single shot script and Atom0 a result of it", "markup": "markdown", "html": "<p>Ok so I was finally able to reproduce the bug and narrowed it down a bit.\nIt occurs, when a new multishot script is added to lyse and during it's first execution a new runfile gets aded (by BLACS). Plots will not appear on subsequent executions of the script even if there are no errors.\nIf we however paused BLACS, and then add the multishot script and then unpaused BLACS it ran just fine.\nThe error I got was:</p>\n<div class=\"codehilite\"><pre><span></span>Traceback (most recent call last):\nFile &quot;C:\\labscript_suite\\userlib\\analysislib\\Einzelatom\\Multishot_Umpumper_Pulslaengenscan.py&quot;, line 10, in &lt;module&gt;\natoms0 = df[&#39;Atoms&#39;, &#39;Atom0&#39;]\nFile &quot;C:\\ProgramData\\Anaconda2\\lib\\site-packages\\pandas\\core\\frame.py&quot;, line 2057, in __getitem__\nreturn self._getitem_multilevel(key)\nFile &quot;C:\\ProgramData\\Anaconda2\\lib\\site-packages\\pandas\\core\\frame.py&quot;, line 2101, in _getitem_multilevel\nloc = self.columns.get_loc(key)\nFile &quot;C:\\ProgramData\\Anaconda2\\lib\\site-packages\\pandas\\indexes\\multi.py&quot;, line 1663, in get_loc\nreturn self._engine.get_loc(key)\nFile &quot;pandas\\index.pyx&quot;, line 132, in pandas.index.IndexEngine.get_loc (pandas\\index.c:4433)\nFile &quot;pandas\\index.pyx&quot;, line 154, in pandas.index.IndexEngine.get_loc (pandas\\index.c:4279)\nFile &quot;pandas\\src\\hashtable_class_helper.pxi&quot;, line 732, in pandas.hashtable.PyObjectHashTable.get_item (pandas\\hashtable.c:13742)\nFile &quot;pandas\\src\\hashtable_class_helper.pxi&quot;, line 740, in pandas.hashtable.PyObjectHashTable.get_item (pandas\\hashtable.c:13696)\nKeyError: (&#39;Atoms&#39;, &#39;Atom0&#39;)\n</pre></div>\n\n\n<p>For context Atoms is a single shot script and Atom0 a result of it</p>", "type": "rendered"}, "created_on": "2017-07-04T13:39:04.789523+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": null, "type": "issue_comment", "id": 38015798}