{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/43/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/43.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/43/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/43/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/43/configuration-file-not-created-if-it-does"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/43/vote"}}, "reporter": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "title": "Configuration file not created if it does not exist", "component": null, "votes": 0, "watches": 2, "content": {"raw": "On a fresh install of the labscript suite on Windows, lyse thinks that its configuration file should be at `C:\\labscript_suite\\userlib\\app_saved_configs\\example_experiment\\lyse` however this lyse folder does not exist (i.e. is not created by the installer). This results in the following message being printed to the lyse output on startup:\r\n\r\n```\r\n#!python\r\n\r\nLoading default config file C:\\labscript_suite\\userlib\\app_saved_configs\\example_experiment\\lyse\\lyse.ini...\r\nCould not load config file: WindowsError: [Error 3] The system cannot find the path specified: 'C:\\\\labscript_suite\\\\userlib\\\\app_saved_configs\\\\example_experiment\\\\lyse'\r\n\r\n```\r\n\r\nIf you then click the \"Save configuration\" button in the File menu, the following traceback occurs:\r\n\r\n```\r\n#!python\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\labscript_suite\\lyse\\__main__.py\", line 1969, in on_save_configuration_triggered\r\n    self.save_configuration(self.last_save_config_file)\r\n  File \"C:\\labscript_suite\\lyse\\__main__.py\", line 2047, in save_configuration\r\n    lyse_config = LabConfig(save_file)\r\n  File \"C:\\labscript_suite\\labscript_utils\\labconfig.py\", line 72, in __init__\r\n    os.mkdir(os.path.dirname(self.config_path))\r\nWindowsError: [Error 3] The system cannot find the path specified: 'C:\\\\labscript_suite\\\\userlib\\\\app_saved_configs\\\\example_experiment\\\\lyse'\r\n\r\n```\r\n\r\nPerhaps we should have lyse check if the file listed in the labconfig file exists, and if not, create it on startup? We probably should also have default app configurations created by the installer.", "markup": "markdown", "html": "<p>On a fresh install of the labscript suite on Windows, lyse thinks that its configuration file should be at <code>C:\\labscript_suite\\userlib\\app_saved_configs\\example_experiment\\lyse</code> however this lyse folder does not exist (i.e. is not created by the installer). This results in the following message being printed to the lyse output on startup:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">Loading</span> <span class=\"n\">default</span> <span class=\"n\">config</span> <span class=\"nb\">file</span> <span class=\"n\">C</span><span class=\"p\">:</span>\\<span class=\"n\">labscript_suite</span>\\<span class=\"n\">userlib</span>\\<span class=\"n\">app_saved_configs</span>\\<span class=\"n\">example_experiment</span>\\<span class=\"n\">lyse</span>\\<span class=\"n\">lyse</span><span class=\"o\">.</span><span class=\"n\">ini</span><span class=\"o\">...</span>\n<span class=\"n\">Could</span> <span class=\"ow\">not</span> <span class=\"n\">load</span> <span class=\"n\">config</span> <span class=\"nb\">file</span><span class=\"p\">:</span> <span class=\"ne\">WindowsError</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"n\">Error</span> <span class=\"mi\">3</span><span class=\"p\">]</span> <span class=\"n\">The</span> <span class=\"n\">system</span> <span class=\"n\">cannot</span> <span class=\"n\">find</span> <span class=\"n\">the</span> <span class=\"n\">path</span> <span class=\"n\">specified</span><span class=\"p\">:</span> <span class=\"s1\">&#39;C:</span><span class=\"se\">\\\\</span><span class=\"s1\">labscript_suite</span><span class=\"se\">\\\\</span><span class=\"s1\">userlib</span><span class=\"se\">\\\\</span><span class=\"s1\">app_saved_configs</span><span class=\"se\">\\\\</span><span class=\"s1\">example_experiment</span><span class=\"se\">\\\\</span><span class=\"s1\">lyse&#39;</span>\n</pre></div>\n\n\n<p>If you then click the \"Save configuration\" button in the File menu, the following traceback occurs:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"p\">):</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\labscript_suite\\lyse\\__main__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">1969</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">on_save_configuration_triggered</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">save_configuration</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">last_save_config_file</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\labscript_suite\\lyse\\__main__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">2047</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">save_configuration</span>\n    <span class=\"n\">lyse_config</span> <span class=\"o\">=</span> <span class=\"n\">LabConfig</span><span class=\"p\">(</span><span class=\"n\">save_file</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\labscript_suite\\labscript_utils\\labconfig.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">72</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"fm\">__init__</span>\n    <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">mkdir</span><span class=\"p\">(</span><span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">dirname</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">config_path</span><span class=\"p\">))</span>\n<span class=\"ne\">WindowsError</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"n\">Error</span> <span class=\"mi\">3</span><span class=\"p\">]</span> <span class=\"n\">The</span> <span class=\"n\">system</span> <span class=\"n\">cannot</span> <span class=\"n\">find</span> <span class=\"n\">the</span> <span class=\"n\">path</span> <span class=\"n\">specified</span><span class=\"p\">:</span> <span class=\"s1\">&#39;C:</span><span class=\"se\">\\\\</span><span class=\"s1\">labscript_suite</span><span class=\"se\">\\\\</span><span class=\"s1\">userlib</span><span class=\"se\">\\\\</span><span class=\"s1\">app_saved_configs</span><span class=\"se\">\\\\</span><span class=\"s1\">example_experiment</span><span class=\"se\">\\\\</span><span class=\"s1\">lyse&#39;</span>\n</pre></div>\n\n\n<p>Perhaps we should have lyse check if the file listed in the labconfig file exists, and if not, create it on startup? We probably should also have default app configurations created by the installer.</p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2018-11-06T03:43:50.568106+00:00", "milestone": null, "updated_on": "2018-11-26T16:15:15.170326+00:00", "type": "issue", "id": 43}