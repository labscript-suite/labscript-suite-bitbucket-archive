{"links": {"self": {"href": "data/repositories/labscript_suite/lyse/issues/48/comments/51927740.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/48#comment-51927740"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse/issues/48.json"}}, "type": "issue", "id": 48, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "title": "Unable to fork a process from a lyse script with multiprocessing"}, "content": {"raw": "The patch fixes the issue. Some observations:\n\n* The print statement output does not appear in the OutputBox when run as a single script or when 'farm' is imported to your example `__main__` method above.\n* This also fixes the same bug I observed with running `threading.Thread`.\n* I've observed a subsequent bug if the thread is long-lived and the analysis script is modified. `labscript_utils.modulewatcher` detects the latter and reloads all modules \\(at the\\) next run. I get the following exception:\n\n```\nFile \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\win32\\lib\\pywintypes.py\", line 129, in import_pywin32_system_module\n  assert sys.modules[modname] is not old_mod\nAssertionError\n```\n\nI\u2019ll try to produce a minimum example of this.", "markup": "markdown", "html": "<p>The patch fixes the issue. Some observations:</p>\n<ul>\n<li>The print statement output does not appear in the OutputBox when run as a single script or when 'farm' is imported to your example <code>__main__</code> method above.</li>\n<li>This also fixes the same bug I observed with running <code>threading.Thread</code>.</li>\n<li>I've observed a subsequent bug if the thread is long-lived and the analysis script is modified. <code>labscript_utils.modulewatcher</code> detects the latter and reloads all modules (at the) next run. I get the following exception:</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span>File &quot;C:\\ProgramData\\Anaconda3\\lib\\site-packages\\win32\\lib\\pywintypes.py&quot;, line 129, in import_pywin32_system_module\n  assert sys.modules[modname] is not old_mod\nAssertionError\n</pre></div>\n\n\n<p>I\u2019ll try to produce a minimum example of this.</p>", "type": "rendered"}, "created_on": "2019-05-01T23:35:24.585126+00:00", "user": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "updated_on": "2019-05-01T23:35:39.685647+00:00", "type": "issue_comment", "id": 51927740}