{"pagelen": 100, "values": [{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/1/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/1.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/1/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/1/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/1/files-no-longer-added-to-list-after-file"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/1/vote"}}, "reporter": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "title": "Files no longer added to list after file access problem", "component": null, "votes": 0, "watches": 2, "content": {"raw": "lyse appears to fail to read a .h5 file that it is adding to its list, after which new incoming files fail to be added to the list.\r\nI can see them coming in in the terminal as Webserver requests, but then the usual \"INFO LYSE.FileBox.incoming: adding some files\" line never comes.\r\n\r\nThe traceback from the read fail is:\r\n\r\n```\r\n#!python\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\pythonlib\\labscript_utils\\excepthook\\__init__.py\", line 32, in run\r\n    run_old(*args, **kwargs)\r\n  File \"C:\\Python27\\lib\\threading.py\", line 483, in run\r\n    self.__target(*self.__args, **self.__kwargs)\r\n  File \"main.pyw\", line 570, in incoming_buffer_loop\r\n    self.add_files(filepaths, marked=True)\r\n  File \"main.pyw\", line 690, in add_files\r\n    row = get_dataframe_from_shot(filepath)\r\n  File \"C:\\pythonlib\\lyse\\dataframe_utilities.py\", line 165, in get_dataframe_from_shot\r\n    nested_dict = get_nested_dict_from_shot(filepath)\r\n  File \"C:\\pythonlib\\lyse\\dataframe_utilities.py\", line 62, in get_nested_dict_from_shot\r\n    with h5py.File(filepath,'r') as h5_file:\r\n  File \"C:\\pythonlib\\labscript_utils\\h5_lock.py\", line 42, in __init__\r\n    _orig_init(self, name, mode, driver, libver, **kwds)\r\n  File \"C:\\Python27\\lib\\site-packages\\h5py\\_hl\\files.py\", line 207, in __init__\r\n    fid = make_fid(name, mode, userblock_size, fapl)\r\n  File \"C:\\Python27\\lib\\site-packages\\h5py\\_hl\\files.py\", line 79, in make_fid\r\n    fid = h5f.open(name, h5f.ACC_RDONLY, fapl=fapl)\r\n  File \"h5f.pyx\", line 71, in h5py.h5f.open (h5py\\h5f.c:1745)\r\nIOError: unable to open file (File accessability: Unable to open file)\r\n\r\n```\r\n\r\nThis should fail more gracefully and allow lyse to continue operating rather than requiring a restart. As far as BLACS is concerned, everything is OK and lyse is accepting the files for analysis, so it doesn't even queue them up to send to lyse once it is restarted.", "markup": "markdown", "html": "<p>lyse appears to fail to read a .h5 file that it is adding to its list, after which new incoming files fail to be added to the list.\nI can see them coming in in the terminal as Webserver requests, but then the usual \"INFO LYSE.FileBox.incoming: adding some files\" line never comes.</p>\n<p>The traceback from the read fail is:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"p\">):</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\pythonlib\\labscript_utils\\excepthook\\__init__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">32</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">run</span>\n    <span class=\"n\">run_old</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Python27\\lib</span><span class=\"se\">\\t</span><span class=\"s2\">hreading.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">483</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">run</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">__target</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">__args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">__kwargs</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;main.pyw&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">570</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">incoming_buffer_loop</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">add_files</span><span class=\"p\">(</span><span class=\"n\">filepaths</span><span class=\"p\">,</span> <span class=\"n\">marked</span><span class=\"o\">=</span><span class=\"bp\">True</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;main.pyw&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">690</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">add_files</span>\n    <span class=\"n\">row</span> <span class=\"o\">=</span> <span class=\"n\">get_dataframe_from_shot</span><span class=\"p\">(</span><span class=\"n\">filepath</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\pythonlib\\lyse\\dataframe_utilities.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">165</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">get_dataframe_from_shot</span>\n    <span class=\"n\">nested_dict</span> <span class=\"o\">=</span> <span class=\"n\">get_nested_dict_from_shot</span><span class=\"p\">(</span><span class=\"n\">filepath</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\pythonlib\\lyse\\dataframe_utilities.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">62</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">get_nested_dict_from_shot</span>\n    <span class=\"k\">with</span> <span class=\"n\">h5py</span><span class=\"o\">.</span><span class=\"n\">File</span><span class=\"p\">(</span><span class=\"n\">filepath</span><span class=\"p\">,</span><span class=\"s1\">&#39;r&#39;</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">h5_file</span><span class=\"p\">:</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\pythonlib\\labscript_utils\\h5_lock.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">42</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"fm\">__init__</span>\n    <span class=\"n\">_orig_init</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">mode</span><span class=\"p\">,</span> <span class=\"n\">driver</span><span class=\"p\">,</span> <span class=\"n\">libver</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwds</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Python27\\lib\\site-packages\\h5py\\_hl</span><span class=\"se\">\\f</span><span class=\"s2\">iles.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">207</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"fm\">__init__</span>\n    <span class=\"n\">fid</span> <span class=\"o\">=</span> <span class=\"n\">make_fid</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">mode</span><span class=\"p\">,</span> <span class=\"n\">userblock_size</span><span class=\"p\">,</span> <span class=\"n\">fapl</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Python27\\lib\\site-packages\\h5py\\_hl</span><span class=\"se\">\\f</span><span class=\"s2\">iles.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">79</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">make_fid</span>\n    <span class=\"n\">fid</span> <span class=\"o\">=</span> <span class=\"n\">h5f</span><span class=\"o\">.</span><span class=\"n\">open</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">h5f</span><span class=\"o\">.</span><span class=\"n\">ACC_RDONLY</span><span class=\"p\">,</span> <span class=\"n\">fapl</span><span class=\"o\">=</span><span class=\"n\">fapl</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;h5f.pyx&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">71</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">h5py</span><span class=\"o\">.</span><span class=\"n\">h5f</span><span class=\"o\">.</span><span class=\"n\">open</span> <span class=\"p\">(</span><span class=\"n\">h5py</span>\\<span class=\"n\">h5f</span><span class=\"o\">.</span><span class=\"n\">c</span><span class=\"p\">:</span><span class=\"mi\">1745</span><span class=\"p\">)</span>\n<span class=\"ne\">IOError</span><span class=\"p\">:</span> <span class=\"n\">unable</span> <span class=\"n\">to</span> <span class=\"nb\">open</span> <span class=\"nb\">file</span> <span class=\"p\">(</span><span class=\"n\">File</span> <span class=\"n\">accessability</span><span class=\"p\">:</span> <span class=\"n\">Unable</span> <span class=\"n\">to</span> <span class=\"nb\">open</span> <span class=\"nb\">file</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>This should fail more gracefully and allow lyse to continue operating rather than requiring a restart. As far as BLACS is concerned, everything is OK and lyse is accepting the files for analysis, so it doesn't even queue them up to send to lyse once it is restarted.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2014-05-29T06:35:30.862945+00:00", "milestone": null, "updated_on": "2014-07-10T01:28:01.519376+00:00", "type": "issue", "id": 1}, {"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/2/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/2.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/2/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/2/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/2/shots-arriving-during-multi-shot-analysis"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/2/vote"}}, "reporter": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "title": "Shots arriving during multi-shot analysis are not analysed", "component": null, "votes": 0, "watches": 2, "content": {"raw": "There is a flaw in the analysis loop such that if an experiment is added to lyse while a multi-shot analysis routine is running, lyse will not automatically start the single-shot and subsequent multi-shot analysis routines until either another shot is added, or the \"Run multi-shot analysis\" button is pressed.", "markup": "markdown", "html": "<p>There is a flaw in the analysis loop such that if an experiment is added to lyse while a multi-shot analysis routine is running, lyse will not automatically start the single-shot and subsequent multi-shot analysis routines until either another shot is added, or the \"Run multi-shot analysis\" button is pressed.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2014-07-07T07:12:35.141359+00:00", "milestone": null, "updated_on": "2014-07-10T01:24:59.061183+00:00", "type": "issue", "id": 2}, {"priority": "minor", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/3/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/3.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/3/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/3/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/3/multi-shot-routines-should-be-able-to-ask"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/3/vote"}}, "reporter": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "title": "Multi-shot routines should be able to ask for a sub-set of the dataframe", "component": null, "votes": 0, "watches": 3, "content": {"raw": "If lyse is left running for weeks at a time, and shots are not manually removed from it, the dataframe that is passed to multi-shot analysis scripts can become quite large, and take 10's of seconds to transfer.\r\nMost multi-shot routines in our lab will immediately throw out the majority of that dataframe, taking either the last *n* sequences, all the shots from the current day, or some other subset.\r\nIt would make sense for multi-shot scripts to be able to ask for this subset of the dataframe in the first place, e.g. by asking for df=data(sequences=number_of_sequences_to_analyse) or df=data(date=today)\r\n\r\nThis should prevent multi-shot analysis from slowing down when lyse is not restarted often.", "markup": "markdown", "html": "<p>If lyse is left running for weeks at a time, and shots are not manually removed from it, the dataframe that is passed to multi-shot analysis scripts can become quite large, and take 10's of seconds to transfer.\nMost multi-shot routines in our lab will immediately throw out the majority of that dataframe, taking either the last <em>n</em> sequences, all the shots from the current day, or some other subset.\nIt would make sense for multi-shot scripts to be able to ask for this subset of the dataframe in the first place, e.g. by asking for df=data(sequences=number_of_sequences_to_analyse) or df=data(date=today)</p>\n<p>This should prevent multi-shot analysis from slowing down when lyse is not restarted often.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2014-07-07T07:29:34.738393+00:00", "milestone": null, "updated_on": "2014-07-10T01:12:21.078483+00:00", "type": "issue", "id": 3}, {"priority": "minor", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/4/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/4.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/4/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/4/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/4/add-ability-to-run-multi-shot-analysis"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/4/vote"}}, "reporter": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "title": "Add ability to run multi-shot analysis before all single-shot routines are complete", "component": null, "votes": 0, "watches": 2, "content": {"raw": "Sometimes, when running very short experiments (e.g. optimising pre-evaporation stages of the experiment), the time taken to run single-shot analysis routines is comparable to the experiment duration. This, combined with the bug issue #2, means that often the multi-shot analysis won't ever run, unless you pause the experiment to let the analysis catch up.\r\n\r\nThere should be an option to allow multi-shot analysis run after each file's single shot analysis is finished, running in parallel to the single-shot routines for any subsequent experiments that are in the queue or arrive during the multi-shot. The multi-shot routine simply needs to be given a copy of the relevant shots in the dataframe, not giving it the ones which haven't had their single-shot analysis run yet.\r\nThe implementation of enhancement #3 would aid this, as the groundwork to pass only subsets of the dataframe to multi-shot would be in place.", "markup": "markdown", "html": "<p>Sometimes, when running very short experiments (e.g. optimising pre-evaporation stages of the experiment), the time taken to run single-shot analysis routines is comparable to the experiment duration. This, combined with the bug issue <a href=\"#!/labscript_suite/lyse/issues/2/shots-arriving-during-multi-shot-analysis\" rel=\"nofollow\" title=\"Shots arriving during multi-shot analysis are not analysed\" class=\"ap-connect-link\">#2</a>, means that often the multi-shot analysis won't ever run, unless you pause the experiment to let the analysis catch up.</p>\n<p>There should be an option to allow multi-shot analysis run after each file's single shot analysis is finished, running in parallel to the single-shot routines for any subsequent experiments that are in the queue or arrive during the multi-shot. The multi-shot routine simply needs to be given a copy of the relevant shots in the dataframe, not giving it the ones which haven't had their single-shot analysis run yet.\nThe implementation of enhancement <a href=\"#!/labscript_suite/lyse/issues/3/multi-shot-routines-should-be-able-to-ask\" rel=\"nofollow\" title=\"Multi-shot routines should be able to ask for a sub-set of the dataframe\" class=\"ap-connect-link\">#3</a> would aid this, as the groundwork to pass only subsets of the dataframe to multi-shot would be in place.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2014-07-07T07:32:11.575240+00:00", "milestone": null, "updated_on": "2014-07-10T00:57:34.210659+00:00", "type": "issue", "id": 4}, {"priority": "minor", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/5/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/5.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/5/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/5/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/5/plot-windows-should-remember-their"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/5/vote"}}, "reporter": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "title": "Plot windows should remember their position/size/autoscale", "component": null, "votes": 0, "watches": 2, "content": {"raw": "Plot windows should remember where they were last placed, the state of the autoscale button and their last size. Obviously they currently do this when new data comes in and the plot is updated, but they do not do it if lyse restarts, or the analysis script is removed and re-added. \r\n\r\nThis is useful if lyse crashes, or the analysis process crashes, as much of the restart time is spent setting up the plot windows, etc again.", "markup": "markdown", "html": "<p>Plot windows should remember where they were last placed, the state of the autoscale button and their last size. Obviously they currently do this when new data comes in and the plot is updated, but they do not do it if lyse restarts, or the analysis script is removed and re-added. </p>\n<p>This is useful if lyse crashes, or the analysis process crashes, as much of the restart time is spent setting up the plot windows, etc again.</p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "new", "version": null, "edited_on": null, "created_on": "2014-07-10T00:23:00.704627+00:00", "milestone": null, "updated_on": "2014-07-10T00:23:00.704627+00:00", "type": "issue", "id": 5}, {"priority": "minor", "kind": "proposal", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/6/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/6.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/6/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/6/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/6/analysis-globals"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/6/vote"}}, "reporter": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "title": "Analysis Globals", "component": null, "votes": 1, "watches": 3, "content": {"raw": "Currently in the dual-species lab at Monash, we have some analysis globals. These globals are stored, and edited in runmanager because we have no other option. These globals however, are completely decoupled from the experiment, and really shouldn't be there.\r\n\r\nI propose that we provide a new pane in lyse to edit analysis globals; that is, parameters which are frequently edited and used by analysis scripts. These globals would be stored in a separate h5 file.\r\n\r\nThis then makes lyse follow the same architecture as runmanager/labscript, and allows for asynchronous (or post-hoc) modification of the analysis globals. Of course, these globals should be saved along with the script, in the h5 file, when the anlaysis is run.", "markup": "markdown", "html": "<p>Currently in the dual-species lab at Monash, we have some analysis globals. These globals are stored, and edited in runmanager because we have no other option. These globals however, are completely decoupled from the experiment, and really shouldn't be there.</p>\n<p>I propose that we provide a new pane in lyse to edit analysis globals; that is, parameters which are frequently edited and used by analysis scripts. These globals would be stored in a separate h5 file.</p>\n<p>This then makes lyse follow the same architecture as runmanager/labscript, and allows for asynchronous (or post-hoc) modification of the analysis globals. Of course, these globals should be saved along with the script, in the h5 file, when the anlaysis is run.</p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "new", "version": null, "edited_on": null, "created_on": "2014-07-10T00:29:41.538913+00:00", "milestone": null, "updated_on": "2018-11-13T21:15:30.516129+00:00", "type": "issue", "id": 6}, {"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/7/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/7.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/7/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/7/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/7/analysis-scripts-should-be-saved-in-the-h5"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/7/vote"}}, "reporter": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "title": "Analysis scripts should be saved in the h5 file", "component": null, "votes": 0, "watches": 2, "content": {"raw": "A copy of the analysis script should be saved in the h5 file, just like the labscript file is saved in the hdf5 file.", "markup": "markdown", "html": "<p>A copy of the analysis script should be saved in the h5 file, just like the labscript file is saved in the hdf5 file.</p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "new", "version": null, "edited_on": null, "created_on": "2014-07-10T00:31:34.274982+00:00", "milestone": null, "updated_on": "2014-07-10T00:50:26.180149+00:00", "type": "issue", "id": 7}, {"priority": "minor", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/8/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/8.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/8/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/8/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/8/analysis-windows-should-be-grouped-by"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/8/vote"}}, "reporter": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "title": "Analysis windows should be grouped by script on the task bar", "component": null, "votes": 0, "watches": 2, "content": {"raw": "Currently, all analysis windows are grouped together under one entry on the task bar. When you have lots of windows, it gets difficult to find the right window!\r\n\r\nIf there was a new entry on the task bar for each analysis script, this would make it easier to find the right window.", "markup": "markdown", "html": "<p>Currently, all analysis windows are grouped together under one entry on the task bar. When you have lots of windows, it gets difficult to find the right window!</p>\n<p>If there was a new entry on the task bar for each analysis script, this would make it easier to find the right window.</p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "new", "version": null, "edited_on": null, "created_on": "2014-07-10T00:35:19.690823+00:00", "milestone": null, "updated_on": "2014-07-10T00:50:07.355695+00:00", "type": "issue", "id": 8}, {"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/9/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/9.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/9/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/9/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/9/single-shot-routines-run-automatically"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/9/vote"}}, "reporter": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "title": "Single shot routines run automatically upon all manually loaded shots", "component": null, "votes": 0, "watches": 2, "content": {"raw": "Active single-shot routines run upon manually loading shots into the GUI. Formerly, single-shot routines would only run on new shots sent from BLACS, or those which were \"Mark[ed] as not done\". This is a problem when loading a lot of shots in, and/or when those shots have already been analysed by the single-shot routine. In the latter case, the routine may have changed (e.g. use different analysis parameters), and the routine will undesirably override previous analysis results. ", "markup": "markdown", "html": "<p>Active single-shot routines run upon manually loading shots into the GUI. Formerly, single-shot routines would only run on new shots sent from BLACS, or those which were \"Mark[ed] as not done\". This is a problem when loading a lot of shots in, and/or when those shots have already been analysed by the single-shot routine. In the latter case, the routine may have changed (e.g. use different analysis parameters), and the routine will undesirably override previous analysis results. </p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2015-02-04T03:56:47.861606+00:00", "milestone": null, "updated_on": "2015-02-04T04:45:45.996368+00:00", "type": "issue", "id": 9}, {"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/10/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/10.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/10/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/10/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/10/exception-when-deleting-shot-from-qt-lyse"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/10/vote"}}, "reporter": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "title": "Exception when deleting shot from qt lyse", "component": null, "votes": 0, "watches": 2, "content": {"raw": "I get a popup with the following exception when deleting a shot from lyse (fresh install on 64 bit Windows)\r\n```\r\n#!python\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\labscript_suite\\lyse\\__main__.py\", line 1154, in on_remove_selection\r\n    self.update_select_all_checkstate()\r\nAttributeError: 'DataFrameModel' object has no attribute 'update_select_all_checkstate'\r\n```", "markup": "markdown", "html": "<p>I get a popup with the following exception when deleting a shot from lyse (fresh install on 64 bit Windows)</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"p\">):</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\labscript_suite\\lyse\\__main__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">1154</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">on_remove_selection</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">update_select_all_checkstate</span><span class=\"p\">()</span>\n<span class=\"ne\">AttributeError</span><span class=\"p\">:</span> <span class=\"s1\">&#39;DataFrameModel&#39;</span> <span class=\"nb\">object</span> <span class=\"n\">has</span> <span class=\"n\">no</span> <span class=\"n\">attribute</span> <span class=\"s1\">&#39;update_select_all_checkstate&#39;</span>\n</pre></div>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2015-03-17T00:27:27.545054+00:00", "milestone": null, "updated_on": "2015-04-01T06:47:29.531364+00:00", "type": "issue", "id": 10}, {"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/11/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/11.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/11/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/11/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/11/cannot-select-shot-in-list-by-clicking-on"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/11/vote"}}, "reporter": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "title": "Cannot select shot in list by clicking on its name", "component": null, "votes": 0, "watches": 2, "content": {"raw": "The new feature in qt lyse where the filename of a shot is always displayed in the left column is nice, except for the fact that I instinctively click here to select a shot (e.g. for deleting from lyse or marking as not done to re-analyse). This column is not clickable, so you can't select the shot from here and instead have to click on one of its globals or the progress column.", "markup": "markdown", "html": "<p>The new feature in qt lyse where the filename of a shot is always displayed in the left column is nice, except for the fact that I instinctively click here to select a shot (e.g. for deleting from lyse or marking as not done to re-analyse). This column is not clickable, so you can't select the shot from here and instead have to click on one of its globals or the progress column.</p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2015-03-20T00:36:12.155772+00:00", "milestone": null, "updated_on": "2015-04-01T06:47:29.579930+00:00", "type": "issue", "id": 11}, {"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/12/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/12.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/12/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/12/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/12/cant-minimise-maximise-plot-windows-qt"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/12/vote"}}, "reporter": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "title": "Can't minimise/maximise plot windows (qt, Win7 64bit)", "component": null, "votes": 0, "watches": 2, "content": {"raw": "The plot windows created by qt lyse only have an [x] for closing the window, and when you right click their title bar the options to minimise and maximise are greyed out.", "markup": "markdown", "html": "<p>The plot windows created by qt lyse only have an [x] for closing the window, and when you right click their title bar the options to minimise and maximise are greyed out.</p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2015-03-20T00:38:22.800778+00:00", "milestone": null, "updated_on": "2015-04-01T06:47:29.555725+00:00", "type": "issue", "id": 12}, {"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/13/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/13.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/13/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/13/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/13/empty-rows-added-to-lyse-dataframe-causing"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/13/vote"}}, "reporter": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "title": "Empty rows added to lyse dataframe, causing \"Multiple items found\" lookup error", "component": null, "votes": 0, "watches": 3, "content": {"raw": "Not 100% sure about the actions that lead to this, but I enabled a new multishot analysis routine and hit \"run multishot analysis\" at about the same time as a new shot came in.\r\n\r\nThere are 2 new rows at the bottom of the list of shots, each with the row number instead of the file path in the left column.\r\n\r\nHere's the traceback:\r\n\r\n\r\n```\r\n#!python\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Anaconda\\lib\\threading.py\", line 763, in run\r\n    self.__target(*self.__args, **self.__kwargs)\r\n  File \"C:\\labscript_suite\\lyse\\__main__.py\", line 1503, in incoming_buffer_loop\r\n    self.shots_model.add_files(filepaths, new_row_data)\r\n  File \"C:\\Anaconda\\lib\\site-packages\\qtutils\\invoke_in_main.py\", line 105, in f\r\n    return inmain(fn, *args, **kwargs)\r\n  File \"C:\\Anaconda\\lib\\site-packages\\qtutils\\invoke_in_main.py\", line 68, in inmain\r\n    return get_inmain_result(in_main_later(fn,False,*args,**kwargs))\r\n  File \"C:\\Anaconda\\lib\\site-packages\\qtutils\\invoke_in_main.py\", line 47, in event\r\n    result = event.fn(*event.args, **event.kwargs)\r\n  File \"C:\\labscript_suite\\lyse\\__main__.py\", line 1323, in add_files\r\n    self.update_row(filepath, dataframe_already_updated=True)\r\n  File \"C:\\Anaconda\\lib\\site-packages\\qtutils\\invoke_in_main.py\", line 105, in f\r\n    return inmain(fn, *args, **kwargs)\r\n  File \"C:\\Anaconda\\lib\\site-packages\\qtutils\\invoke_in_main.py\", line 67, in inmain\r\n    return fn(*args, **kwargs)\r\n  File \"C:\\labscript_suite\\lyse\\__main__.py\", line 1249, in update_row\r\n    model_row_number = self.get_model_row_by_filepath(filepath)\r\n  File \"C:\\labscript_suite\\lyse\\__main__.py\", line 1131, in get_model_row_by_filepath\r\n    raise LookupError('Multiple items found')\r\nLookupError: Multiple items found\r\n\r\n```\r\n", "markup": "markdown", "html": "<p>Not 100% sure about the actions that lead to this, but I enabled a new multishot analysis routine and hit \"run multishot analysis\" at about the same time as a new shot came in.</p>\n<p>There are 2 new rows at the bottom of the list of shots, each with the row number instead of the file path in the left column.</p>\n<p>Here's the traceback:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"p\">):</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Anaconda\\lib</span><span class=\"se\">\\t</span><span class=\"s2\">hreading.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">763</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">run</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">__target</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">__args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">__kwargs</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\labscript_suite\\lyse\\__main__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">1503</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">incoming_buffer_loop</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">shots_model</span><span class=\"o\">.</span><span class=\"n\">add_files</span><span class=\"p\">(</span><span class=\"n\">filepaths</span><span class=\"p\">,</span> <span class=\"n\">new_row_data</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Anaconda\\lib\\site-packages\\qtutils\\invoke_in_main.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">105</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">f</span>\n    <span class=\"k\">return</span> <span class=\"n\">inmain</span><span class=\"p\">(</span><span class=\"n\">fn</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Anaconda\\lib\\site-packages\\qtutils\\invoke_in_main.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">68</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">inmain</span>\n    <span class=\"k\">return</span> <span class=\"n\">get_inmain_result</span><span class=\"p\">(</span><span class=\"n\">in_main_later</span><span class=\"p\">(</span><span class=\"n\">fn</span><span class=\"p\">,</span><span class=\"bp\">False</span><span class=\"p\">,</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span><span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">))</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Anaconda\\lib\\site-packages\\qtutils\\invoke_in_main.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">47</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">event</span>\n    <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">event</span><span class=\"o\">.</span><span class=\"n\">fn</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">event</span><span class=\"o\">.</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">event</span><span class=\"o\">.</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\labscript_suite\\lyse\\__main__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">1323</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">add_files</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">update_row</span><span class=\"p\">(</span><span class=\"n\">filepath</span><span class=\"p\">,</span> <span class=\"n\">dataframe_already_updated</span><span class=\"o\">=</span><span class=\"bp\">True</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Anaconda\\lib\\site-packages\\qtutils\\invoke_in_main.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">105</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">f</span>\n    <span class=\"k\">return</span> <span class=\"n\">inmain</span><span class=\"p\">(</span><span class=\"n\">fn</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Anaconda\\lib\\site-packages\\qtutils\\invoke_in_main.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">67</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">inmain</span>\n    <span class=\"k\">return</span> <span class=\"n\">fn</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\labscript_suite\\lyse\\__main__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">1249</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">update_row</span>\n    <span class=\"n\">model_row_number</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">get_model_row_by_filepath</span><span class=\"p\">(</span><span class=\"n\">filepath</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\labscript_suite\\lyse\\__main__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">1131</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">get_model_row_by_filepath</span>\n    <span class=\"k\">raise</span> <span class=\"ne\">LookupError</span><span class=\"p\">(</span><span class=\"s1\">&#39;Multiple items found&#39;</span><span class=\"p\">)</span>\n<span class=\"ne\">LookupError</span><span class=\"p\">:</span> <span class=\"n\">Multiple</span> <span class=\"n\">items</span> <span class=\"n\">found</span>\n</pre></div>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2015-04-13T01:57:55.371684+00:00", "milestone": null, "updated_on": "2015-05-25T07:17:28.463072+00:00", "type": "issue", "id": 13}, {"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/14/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/14.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/14/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/14/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/14/multi-shot-analysis-routines-still-run"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/14/vote"}}, "reporter": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "title": "Multi-shot analysis routines still run when analysis is paused", "component": null, "votes": 0, "watches": 2, "content": {"raw": "If a multishot analysis routine returns an error (e.g. due to a failed fit) it pauses the analysis queue. However, as new shots come in, the single shot routines do not run, as expected, but multishot routines continue. In the case where the mutishot requires results from the single shot the error is unlikely to go away. In the case where the multishot does not rely on results from a single shot routine, the error may go away (e.g. once enough shots are in to allow it to fit) meaning that there are now no scripts in an error state, but analysis is paused.\r\n\r\nTo be consistent, multishot should pause when single shot is paused.", "markup": "markdown", "html": "<p>If a multishot analysis routine returns an error (e.g. due to a failed fit) it pauses the analysis queue. However, as new shots come in, the single shot routines do not run, as expected, but multishot routines continue. In the case where the mutishot requires results from the single shot the error is unlikely to go away. In the case where the multishot does not rely on results from a single shot routine, the error may go away (e.g. once enough shots are in to allow it to fit) meaning that there are now no scripts in an error state, but analysis is paused.</p>\n<p>To be consistent, multishot should pause when single shot is paused.</p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "new", "version": null, "edited_on": null, "created_on": "2015-06-09T05:25:22.336266+00:00", "milestone": null, "updated_on": "2017-06-29T20:38:41.966158+00:00", "type": "issue", "id": 14}, {"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/15/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/15.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/15/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/15/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/15/exceptions-in-scientific-notation-package"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/15/vote"}}, "reporter": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "title": "Exceptions in scientific notation package should be caught", "component": null, "votes": 0, "watches": 2, "content": {"raw": "I experienced a traceback which required a restart of lyse to recover from:\r\n\r\n\r\n```\r\n#!python\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Anaconda\\lib\\threading.py\", line 763, in run\r\n    self.__target(*self.__args, **self.__kwargs)\r\n  File \"C:\\labscript_suite\\lyse\\__main__.py\", line 1535, in analysis_loop\r\n    self.do_singleshot_analysis(filepath)\r\n  File \"C:\\labscript_suite\\lyse\\__main__.py\", line 1564, in do_singleshot_analysis\r\n    self.shots_model.update_row(filepath, status_percent=status_percent, new_row_data=new_row_data)\r\n  File \"C:\\Anaconda\\lib\\site-packages\\qtutils\\invoke_in_main.py\", line 105, in f\r\n    return inmain(fn, *args, **kwargs)\r\n  File \"C:\\Anaconda\\lib\\site-packages\\qtutils\\invoke_in_main.py\", line 68, in inmain\r\n    return get_inmain_result(in_main_later(fn,False,*args,**kwargs))\r\n  File \"C:\\Anaconda\\lib\\site-packages\\qtutils\\invoke_in_main.py\", line 47, in event\r\n    result = event.fn(*event.args, **event.kwargs)\r\n  File \"C:\\labscript_suite\\lyse\\__main__.py\", line 1264, in update_row\r\n    value_str = scientific_notation(value)\r\n  File \"C:\\labscript_suite\\lyse\\__main__.py\", line 154, in scientific_notation\r\n    prefix = prefixes[exponent]\r\nKeyError: 84\r\n```\r\n\r\nYes, it was trying to update a value which was something by 10^84 - the culprit was the width in a failed fit. While the crazy number really should be caught in the analysis script, it still isn't nice to have the whole program taken down by the scientific notation function not knowing what to do with a septemvigintillion!", "markup": "markdown", "html": "<p>I experienced a traceback which required a restart of lyse to recover from:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"p\">):</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Anaconda\\lib</span><span class=\"se\">\\t</span><span class=\"s2\">hreading.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">763</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">run</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">__target</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">__args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">__kwargs</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\labscript_suite\\lyse\\__main__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">1535</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">analysis_loop</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">do_singleshot_analysis</span><span class=\"p\">(</span><span class=\"n\">filepath</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\labscript_suite\\lyse\\__main__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">1564</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">do_singleshot_analysis</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">shots_model</span><span class=\"o\">.</span><span class=\"n\">update_row</span><span class=\"p\">(</span><span class=\"n\">filepath</span><span class=\"p\">,</span> <span class=\"n\">status_percent</span><span class=\"o\">=</span><span class=\"n\">status_percent</span><span class=\"p\">,</span> <span class=\"n\">new_row_data</span><span class=\"o\">=</span><span class=\"n\">new_row_data</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Anaconda\\lib\\site-packages\\qtutils\\invoke_in_main.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">105</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">f</span>\n    <span class=\"k\">return</span> <span class=\"n\">inmain</span><span class=\"p\">(</span><span class=\"n\">fn</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Anaconda\\lib\\site-packages\\qtutils\\invoke_in_main.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">68</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">inmain</span>\n    <span class=\"k\">return</span> <span class=\"n\">get_inmain_result</span><span class=\"p\">(</span><span class=\"n\">in_main_later</span><span class=\"p\">(</span><span class=\"n\">fn</span><span class=\"p\">,</span><span class=\"bp\">False</span><span class=\"p\">,</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span><span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">))</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Anaconda\\lib\\site-packages\\qtutils\\invoke_in_main.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">47</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">event</span>\n    <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">event</span><span class=\"o\">.</span><span class=\"n\">fn</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">event</span><span class=\"o\">.</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">event</span><span class=\"o\">.</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\labscript_suite\\lyse\\__main__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">1264</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">update_row</span>\n    <span class=\"n\">value_str</span> <span class=\"o\">=</span> <span class=\"n\">scientific_notation</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\labscript_suite\\lyse\\__main__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">154</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">scientific_notation</span>\n    <span class=\"n\">prefix</span> <span class=\"o\">=</span> <span class=\"n\">prefixes</span><span class=\"p\">[</span><span class=\"n\">exponent</span><span class=\"p\">]</span>\n<span class=\"ne\">KeyError</span><span class=\"p\">:</span> <span class=\"mi\">84</span>\n</pre></div>\n\n\n<p>Yes, it was trying to update a value which was something by 10^84 - the culprit was the width in a failed fit. While the crazy number really should be caught in the analysis script, it still isn't nice to have the whole program taken down by the scientific notation function not knowing what to do with a septemvigintillion!</p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2015-06-18T06:31:30.827833+00:00", "milestone": null, "updated_on": "2015-07-16T04:21:31.910062+00:00", "type": "issue", "id": 15}, {"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/16/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/16.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/16/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/16/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/16/multi-shot-routines-run-out-of-order"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/16/vote"}}, "reporter": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "title": "Multi-shot routines run out of order", "component": null, "votes": 0, "watches": 2, "content": {"raw": "I have noticed that sometimes the multishot scripts will be run in a different order, rather than based on their position in the GUI.\r\n\r\nAt the moment I have 5 scripts in the multi-shot box, the first and last are turned off. Currently lyse is running the 3rd, then the 4th, then the 2nd. I recently made changes to the 4th, but I don't see why this would change the order they run in.", "markup": "markdown", "html": "<p>I have noticed that sometimes the multishot scripts will be run in a different order, rather than based on their position in the GUI.</p>\n<p>At the moment I have 5 scripts in the multi-shot box, the first and last are turned off. Currently lyse is running the 3rd, then the 4th, then the 2nd. I recently made changes to the 4th, but I don't see why this would change the order they run in.</p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2015-07-28T05:37:00.490509+00:00", "milestone": null, "updated_on": "2016-02-08T01:33:27.678465+00:00", "type": "issue", "id": 16}, {"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/17/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/17.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/17/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/17/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/17/main-interface-is-slow-unresponsive-when"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/17/vote"}}, "reporter": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "title": "Main interface is slow/unresponsive when multi-shot routines are running", "component": null, "votes": 0, "watches": 2, "content": {"raw": "The main lyse window can  be very slow and hard to use while multi-shot analysis scripts are running. I'm not sure if this gets worse when there are more shots in the dataframe.\r\n\r\nThis is especially bad due to issue #14, where the multi-shot scripts still run when the queue is paused if there is a problem. Sometimes it is easiest to pause the BLACS queue to stop new shots from being sent to lyse, as it is impossible to resolve whatever issue has paused the queue in lyse while the multi-shot scripts are running as each new shot comes in.", "markup": "markdown", "html": "<p>The main lyse window can  be very slow and hard to use while multi-shot analysis scripts are running. I'm not sure if this gets worse when there are more shots in the dataframe.</p>\n<p>This is especially bad due to issue <a href=\"#!/labscript_suite/lyse/issues/14/multi-shot-analysis-routines-still-run\" rel=\"nofollow\" title=\"Multi-shot analysis routines still run when analysis is paused\" class=\"ap-connect-link\">#14</a>, where the multi-shot scripts still run when the queue is paused if there is a problem. Sometimes it is easiest to pause the BLACS queue to stop new shots from being sent to lyse, as it is impossible to resolve whatever issue has paused the queue in lyse while the multi-shot scripts are running as each new shot comes in.</p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2015-07-28T06:56:09.262728+00:00", "milestone": null, "updated_on": "2016-02-08T01:33:27.703079+00:00", "type": "issue", "id": 17}, {"priority": "major", "kind": "task", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/18/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/18.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/18/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/18/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/18/compatibility-with-pandas-018"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/18/vote"}}, "reporter": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "title": "Compatibility with pandas 0.18", "component": null, "votes": 0, "watches": 1, "content": {"raw": "Since pandas 0.18, adding shots to the lyse GUI fails with:\r\n\r\n```\r\n#!python\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Anaconda\\lib\\threading.py\", line 754, in run\r\n    self.__target(*self.__args, **self.__kwargs)\r\n  File \"C:\\labscript_suite\\lyse\\__main__.py\", line 1523, in incoming_buffer_loop\r\n    self.shots_model.add_files(filepaths, new_row_data)\r\n  File \"C:\\Anaconda\\lib\\site-packages\\qtutils\\invoke_in_main.py\", line 114, in f\r\n    return inmain(fn, *args, **kwargs)\r\n  File \"C:\\Anaconda\\lib\\site-packages\\qtutils\\invoke_in_main.py\", line 74, in inmain\r\n    return get_inmain_result(in_main_later(fn,False,*args,**kwargs))\r\n  File \"C:\\Anaconda\\lib\\site-packages\\qtutils\\invoke_in_main.py\", line 94, in get_inmain_result\r\n    exec('raise type, value, traceback')\r\n  File \"C:\\Anaconda\\lib\\site-packages\\qtutils\\invoke_in_main.py\", line 53, in event\r\n    result = event.fn(*event.args, **event.kwargs)\r\n  File \"C:\\labscript_suite\\lyse\\__main__.py\", line 1335, in add_files\r\n    self.dataframe = concat_with_padding(self.dataframe, new_row_data)\r\n  File \"C:\\labscript_suite\\lyse\\dataframe_utilities.py\", line 144, in concat_with_padding\r\n    return pandas.concat(dataframes, ignore_index=True)\r\n  File \"C:\\Anaconda\\lib\\site-packages\\pandas\\tools\\merge.py\", line 846, in concat\r\n    return op.get_result()\r\n  File \"C:\\Anaconda\\lib\\site-packages\\pandas\\tools\\merge.py\", line 1038, in get_result\r\n    copy=self.copy)\r\n  File \"C:\\Anaconda\\lib\\site-packages\\pandas\\core\\internals.py\", line 4545, in concatenate_block_managers\r\n    for placement, join_units in concat_plan]\r\n  File \"C:\\Anaconda\\lib\\site-packages\\pandas\\core\\internals.py\", line 4642, in concatenate_join_units\r\n    for ju in join_units]\r\n  File \"C:\\Anaconda\\lib\\site-packages\\pandas\\core\\internals.py\", line 4915, in get_reindexed_values\r\n    missing_arr = np.empty(self.shape, dtype=empty_dtype)\r\nTypeError: data type not understood\r\n```", "markup": "markdown", "html": "<p>Since pandas 0.18, adding shots to the lyse GUI fails with:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"p\">):</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Anaconda\\lib</span><span class=\"se\">\\t</span><span class=\"s2\">hreading.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">754</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">run</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">__target</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">__args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">__kwargs</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\labscript_suite\\lyse\\__main__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">1523</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">incoming_buffer_loop</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">shots_model</span><span class=\"o\">.</span><span class=\"n\">add_files</span><span class=\"p\">(</span><span class=\"n\">filepaths</span><span class=\"p\">,</span> <span class=\"n\">new_row_data</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Anaconda\\lib\\site-packages\\qtutils\\invoke_in_main.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">114</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">f</span>\n    <span class=\"k\">return</span> <span class=\"n\">inmain</span><span class=\"p\">(</span><span class=\"n\">fn</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Anaconda\\lib\\site-packages\\qtutils\\invoke_in_main.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">74</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">inmain</span>\n    <span class=\"k\">return</span> <span class=\"n\">get_inmain_result</span><span class=\"p\">(</span><span class=\"n\">in_main_later</span><span class=\"p\">(</span><span class=\"n\">fn</span><span class=\"p\">,</span><span class=\"bp\">False</span><span class=\"p\">,</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span><span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">))</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Anaconda\\lib\\site-packages\\qtutils\\invoke_in_main.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">94</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">get_inmain_result</span>\n    <span class=\"k\">exec</span><span class=\"p\">(</span><span class=\"s1\">&#39;raise type, value, traceback&#39;</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Anaconda\\lib\\site-packages\\qtutils\\invoke_in_main.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">53</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">event</span>\n    <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">event</span><span class=\"o\">.</span><span class=\"n\">fn</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">event</span><span class=\"o\">.</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">event</span><span class=\"o\">.</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\labscript_suite\\lyse\\__main__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">1335</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">add_files</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">dataframe</span> <span class=\"o\">=</span> <span class=\"n\">concat_with_padding</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">dataframe</span><span class=\"p\">,</span> <span class=\"n\">new_row_data</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\labscript_suite\\lyse\\dataframe_utilities.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">144</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">concat_with_padding</span>\n    <span class=\"k\">return</span> <span class=\"n\">pandas</span><span class=\"o\">.</span><span class=\"n\">concat</span><span class=\"p\">(</span><span class=\"n\">dataframes</span><span class=\"p\">,</span> <span class=\"n\">ignore_index</span><span class=\"o\">=</span><span class=\"bp\">True</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Anaconda\\lib\\site-packages\\pandas</span><span class=\"se\">\\t</span><span class=\"s2\">ools\\merge.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">846</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">concat</span>\n    <span class=\"k\">return</span> <span class=\"n\">op</span><span class=\"o\">.</span><span class=\"n\">get_result</span><span class=\"p\">()</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Anaconda\\lib\\site-packages\\pandas</span><span class=\"se\">\\t</span><span class=\"s2\">ools\\merge.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">1038</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">get_result</span>\n    <span class=\"n\">copy</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">copy</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Anaconda\\lib\\site-packages\\pandas\\core\\internals.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">4545</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">concatenate_block_managers</span>\n    <span class=\"k\">for</span> <span class=\"n\">placement</span><span class=\"p\">,</span> <span class=\"n\">join_units</span> <span class=\"ow\">in</span> <span class=\"n\">concat_plan</span><span class=\"p\">]</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Anaconda\\lib\\site-packages\\pandas\\core\\internals.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">4642</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">concatenate_join_units</span>\n    <span class=\"k\">for</span> <span class=\"n\">ju</span> <span class=\"ow\">in</span> <span class=\"n\">join_units</span><span class=\"p\">]</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Anaconda\\lib\\site-packages\\pandas\\core\\internals.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">4915</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">get_reindexed_values</span>\n    <span class=\"n\">missing_arr</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">empty</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">shape</span><span class=\"p\">,</span> <span class=\"n\">dtype</span><span class=\"o\">=</span><span class=\"n\">empty_dtype</span><span class=\"p\">)</span>\n<span class=\"ne\">TypeError</span><span class=\"p\">:</span> <span class=\"n\">data</span> <span class=\"nb\">type</span> <span class=\"ow\">not</span> <span class=\"n\">understood</span>\n</pre></div>", "type": "rendered"}, "assignee": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2016-08-22T01:19:10.919183+00:00", "milestone": null, "updated_on": "2016-08-22T05:30:51.624825+00:00", "type": "issue", "id": 18}, {"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/19/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/19.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/19/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/19/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/19/need-to-check-behaviour-when-dataframe"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/19/vote"}}, "reporter": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "title": "Need to check behaviour when dataframe number of levels decreases", "component": null, "votes": 0, "watches": 1, "content": {"raw": "It currently looks like lyse will crash if shots resulting in a dataframe with N > 2 levels (as in multiindex levels) are added, deleted, and then shots with fewer than N levels are added. This should be tested. If it needs to be fixed it will affect `DataFrameModel.update_row()` and `EditColumns.update_columns()`", "markup": "markdown", "html": "<p>It currently looks like lyse will crash if shots resulting in a dataframe with N &gt; 2 levels (as in multiindex levels) are added, deleted, and then shots with fewer than N levels are added. This should be tested. If it needs to be fixed it will affect <code>DataFrameModel.update_row()</code> and <code>EditColumns.update_columns()</code></p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "new", "version": null, "edited_on": null, "created_on": "2017-02-23T18:52:32.083817+00:00", "milestone": null, "updated_on": "2017-02-23T18:52:32.083817+00:00", "type": "issue", "id": 19}, {"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/20/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/20.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/20/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/20/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/20/incompatibilities-with-pandas-0201"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/20/vote"}}, "reporter": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "title": "Incompatibilities with pandas 0.20.1", "component": null, "votes": 0, "watches": 1, "content": {"raw": "lyse is not currently compatible with pandas 0.20.1\r\n\r\nThe second shot to have a singleshot analysis routine run on it is replaced with nan's after the first singleshot analysis routine runs on it.", "markup": "markdown", "html": "<p>lyse is not currently compatible with pandas 0.20.1</p>\n<p>The second shot to have a singleshot analysis routine run on it is replaced with nan's after the first singleshot analysis routine runs on it.</p>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2017-05-19T00:36:44.080220+00:00", "milestone": null, "updated_on": "2017-06-06T18:11:04.115614+00:00", "type": "issue", "id": 20}, {"priority": "minor", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/21/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/21.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/21/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/21/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/21/add-units-to-globals"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/21/vote"}}, "reporter": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "title": "Add units to globals", "component": null, "votes": 0, "watches": 2, "content": {"raw": "It would be quite useful to add the units to the global variables, that are displayed in lyse.", "markup": "markdown", "html": "<p>It would be quite useful to add the units to the global variables, that are displayed in lyse.</p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "closed", "version": null, "edited_on": null, "created_on": "2017-06-07T13:34:52.216026+00:00", "milestone": null, "updated_on": "2017-07-05T19:40:31.994477+00:00", "type": "issue", "id": 21}, {"priority": "minor", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/22/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/22.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/22/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/22/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/22/allow-multishot-routines-to-add-to"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/22/vote"}}, "reporter": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "title": "Allow Multishot Routines to add to dataframe", "component": null, "votes": 0, "watches": 2, "content": {"raw": "In our lab we use a mean Image, generated out of all Images taken in a sequence, to determine the position of single atom traps. This data is then used to determine (for each trap) if there was a atom or not. We modified our Sequene.runs to allow for save_result to save this information. But since the dataframe only updates after singleshot routines these results are not available to other routines.\r\n\r\nIt would be nice if there were a function to allow adding a list to the dataframe as a column from a multishot routine.\r\nAlternatively one could introduce a flag that can be set in a multishot routine, so that the dataframe gets updated", "markup": "markdown", "html": "<p>In our lab we use a mean Image, generated out of all Images taken in a sequence, to determine the position of single atom traps. This data is then used to determine (for each trap) if there was a atom or not. We modified our Sequene.runs to allow for save_result to save this information. But since the dataframe only updates after singleshot routines these results are not available to other routines.</p>\n<p>It would be nice if there were a function to allow adding a list to the dataframe as a column from a multishot routine.\nAlternatively one could introduce a flag that can be set in a multishot routine, so that the dataframe gets updated</p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2017-06-13T21:27:57.651675+00:00", "milestone": null, "updated_on": "2017-09-09T19:24:40.559087+00:00", "type": "issue", "id": 22}, {"priority": "minor", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/23/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/23.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/23/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/23/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/23/better-loading-of-root-attributes-of-the"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/23/vote"}}, "reporter": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "title": "Better loading of root attributes of the HDF5 file into lyse", "component": null, "votes": 0, "watches": 1, "content": {"raw": "As per the discussion in pull request #11, we should look at a more generalised way of loading the attributes stored in the root of the HDF5 file (like `sequenced` and `sequence_index`).\r\n\r\nThis issue is logged now so we can 'kick the can down the road' and merge in pull request #11 without forgetting we want to do it better at some point.", "markup": "markdown", "html": "<p>As per the discussion in <a href=\"#!/labscript_suite/lyse/pull-requests/11/read-sequence_index-attribute-from-shots\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #11</a>, we should look at a more generalised way of loading the attributes stored in the root of the HDF5 file (like <code>sequenced</code> and <code>sequence_index</code>).</p>\n<p>This issue is logged now so we can 'kick the can down the road' and merge in <a href=\"#!/labscript_suite/lyse/pull-requests/11/read-sequence_index-attribute-from-shots\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #11</a> without forgetting we want to do it better at some point.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2017-06-19T00:43:01.731027+00:00", "milestone": null, "updated_on": "2017-06-19T00:43:01.731027+00:00", "type": "issue", "id": 23}, {"priority": "minor", "kind": "proposal", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/24/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/24.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/24/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/24/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/24/use-configuration-file-to-load-default"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/24/vote"}}, "reporter": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "title": "Use configuration file to load default analysis scripts", "component": null, "votes": 1, "watches": 2, "content": {"raw": "It would make sense for lyse to have a configuration file similar to runmanager's, where you can set default analysis scripts to load when you start the program. As with runmanager, there should then be options to load/revert/save the configuration.", "markup": "markdown", "html": "<p>It would make sense for lyse to have a configuration file similar to runmanager's, where you can set default analysis scripts to load when you start the program. As with runmanager, there should then be options to load/revert/save the configuration.</p>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2017-06-19T01:09:02.501201+00:00", "milestone": null, "updated_on": "2017-08-17T20:21:43.172699+00:00", "type": "issue", "id": 24}, {"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/25/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/25.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/25/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/25/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/25/plots-dont-update-after-error"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/25/vote"}}, "reporter": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "title": "Plots don't update after error", "component": null, "votes": 0, "watches": 1, "content": {"raw": "When there was a error in a script the plots belonging to the script won't update on subsequent runs of the script (where there is no error). To get them to update again one needs to remove the script and add it again.", "markup": "markdown", "html": "<p>When there was a error in a script the plots belonging to the script won't update on subsequent runs of the script (where there is no error). To get them to update again one needs to remove the script and add it again.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2017-06-20T17:20:50.896018+00:00", "milestone": null, "updated_on": "2017-07-04T13:39:04.809883+00:00", "type": "issue", "id": 25}, {"priority": "minor", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/26/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/26.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/26/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/26/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/26/loading-images-takes-too-long"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/26/vote"}}, "reporter": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "title": "Loading images takes too long", "component": null, "votes": 0, "watches": 1, "content": {"raw": "When loading a lot of images (about 4000 or more is quite uncommon in our lab) in multishot routines this takes a great amount of time.\r\nIt would be nice if there was a second dataframe-like variable that stored the images so that loading them becomes quick.", "markup": "markdown", "html": "<p>When loading a lot of images (about 4000 or more is quite uncommon in our lab) in multishot routines this takes a great amount of time.\nIt would be nice if there was a second dataframe-like variable that stored the images so that loading them becomes quick.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2017-06-21T18:05:29.916530+00:00", "milestone": null, "updated_on": "2017-08-10T14:04:00.938799+00:00", "type": "issue", "id": 26}, {"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/27/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/27.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/27/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/27/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/27/no-way-to-restart-analysis-if-process"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/27/vote"}}, "reporter": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "title": "No way to restart analysis if process crashes", "component": null, "votes": 0, "watches": 2, "content": {"raw": "If the main analysis queue crashes, there's no way to restart it, other than restarting lyse. It would be nice if it could automatically re-spawn if it dies.\r\n\r\nAt the very least, fixing issue #24 would help to make the restarting of lyse less painful, however you would still lose your dataframe.", "markup": "markdown", "html": "<p>If the main analysis queue crashes, there's no way to restart it, other than restarting lyse. It would be nice if it could automatically re-spawn if it dies.</p>\n<p>At the very least, fixing issue <a href=\"#!/labscript_suite/lyse/issues/24/use-configuration-file-to-load-default\" rel=\"nofollow\" title=\"Use configuration file to load default analysis scripts\" class=\"ap-connect-link\"><s>#24</s></a> would help to make the restarting of lyse less painful, however you would still lose your dataframe.</p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2017-06-29T00:16:17.473839+00:00", "milestone": null, "updated_on": "2017-10-04T16:23:51.916419+00:00", "type": "issue", "id": 27}, {"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/28/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/28.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/28/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/28/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/28/lyse-doesnt-handle-unicode-well"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/28/vote"}}, "reporter": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "title": "Lyse doesn't handle unicode well", "component": null, "votes": 0, "watches": 2, "content": {"raw": "If you import scripts into lyse that include non ascii characters in their name (such as german Umlauts) the script will not run.\r\n\r\nIf you modify analysis_subprocess.py in line 288 in the following way scripts will run:\r\n\r\n```\r\n#!python\r\n\r\nexecfile(self.filepath.encode('utf-8'), sandbox, sandbox)\r\n```\r\n\r\nHowever if that script then crashed lyse will crash along with it and give you this traceback:\r\n\r\n\r\n```\r\n#!\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/janwerkmann/anaconda/lib/python2.7/threading.py\", line 754, in run\r\n    self.__target(*self.__args, **self.__kwargs)\r\n  File \"analysis_subprocess.py\", line 257, in mainloop\r\n    success = self.do_analysis(path)\r\n  File \"/Users/janwerkmann/anaconda/lib/python2.7/site-packages/qtutils/invoke_in_main.py\", line 114, in f\r\n    return inmain(fn, *args, **kwargs)\r\n  File \"/Users/janwerkmann/anaconda/lib/python2.7/site-packages/qtutils/invoke_in_main.py\", line 74, in inmain\r\n    return get_inmain_result(in_main_later(fn,False,*args,**kwargs))\r\n  File \"/Users/janwerkmann/anaconda/lib/python2.7/site-packages/qtutils/invoke_in_main.py\", line 94, in get_inmain_result\r\n    exec('raise type, value, traceback')\r\n  File \"/Users/janwerkmann/anaconda/lib/python2.7/site-packages/qtutils/invoke_in_main.py\", line 53, in event\r\n    result = event.fn(*event.args, **event.kwargs)\r\n  File \"analysis_subprocess.py\", line 297, in do_analysis\r\n    print('%s' % message)\r\n  File \"/Users/janwerkmann/anaconda/lib/python2.7/site-packages/zprocess/__init__.py\", line 455, in write\r\n    self.local.sock.send_multipart([self.streamname.encode('utf8'), s.encode('utf8')])\r\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xcc in position 91: ordinal not in range(128)\r\n```", "markup": "markdown", "html": "<p>If you import scripts into lyse that include non ascii characters in their name (such as german Umlauts) the script will not run.</p>\n<p>If you modify analysis_subprocess.py in line 288 in the following way scripts will run:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"nb\">execfile</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">filepath</span><span class=\"o\">.</span><span class=\"n\">encode</span><span class=\"p\">(</span><span class=\"s1\">&#39;utf-8&#39;</span><span class=\"p\">),</span> <span class=\"n\">sandbox</span><span class=\"p\">,</span> <span class=\"n\">sandbox</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>However if that script then crashed lyse will crash along with it and give you this traceback:</p>\n<div class=\"codehilite\"><pre><span></span>Traceback (most recent call last):\n  File &quot;/Users/janwerkmann/anaconda/lib/python2.7/threading.py&quot;, line 754, in run\n    self.__target(*self.__args, **self.__kwargs)\n  File &quot;analysis_subprocess.py&quot;, line 257, in mainloop\n    success = self.do_analysis(path)\n  File &quot;/Users/janwerkmann/anaconda/lib/python2.7/site-packages/qtutils/invoke_in_main.py&quot;, line 114, in f\n    return inmain(fn, *args, **kwargs)\n  File &quot;/Users/janwerkmann/anaconda/lib/python2.7/site-packages/qtutils/invoke_in_main.py&quot;, line 74, in inmain\n    return get_inmain_result(in_main_later(fn,False,*args,**kwargs))\n  File &quot;/Users/janwerkmann/anaconda/lib/python2.7/site-packages/qtutils/invoke_in_main.py&quot;, line 94, in get_inmain_result\n    exec(&#39;raise type, value, traceback&#39;)\n  File &quot;/Users/janwerkmann/anaconda/lib/python2.7/site-packages/qtutils/invoke_in_main.py&quot;, line 53, in event\n    result = event.fn(*event.args, **event.kwargs)\n  File &quot;analysis_subprocess.py&quot;, line 297, in do_analysis\n    print(&#39;%s&#39; % message)\n  File &quot;/Users/janwerkmann/anaconda/lib/python2.7/site-packages/zprocess/__init__.py&quot;, line 455, in write\n    self.local.sock.send_multipart([self.streamname.encode(&#39;utf8&#39;), s.encode(&#39;utf8&#39;)])\nUnicodeDecodeError: &#39;ascii&#39; codec can&#39;t decode byte 0xcc in position 91: ordinal not in range(128)\n</pre></div>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2017-07-07T10:11:51.855512+00:00", "milestone": null, "updated_on": "2018-02-26T00:20:21.997827+00:00", "type": "issue", "id": 28}, {"priority": "major", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/29/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/29.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/29/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/29/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/29/speed-up-shot-loading"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/29/vote"}}, "reporter": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "title": "speed up shot loading", "component": null, "votes": 0, "watches": 1, "content": {"raw": "When we want to look at data acquired in the past it takes really long to load the shots into lyse. (commonly this can be 2000-10000 shots and take up to half an hour)\r\nI looked at the code and this seems to all be done in one thread. I think the file reading process can be parallelized with a pool of worker threads. This should bring a speed improvement.", "markup": "markdown", "html": "<p>When we want to look at data acquired in the past it takes really long to load the shots into lyse. (commonly this can be 2000-10000 shots and take up to half an hour)\nI looked at the code and this seems to all be done in one thread. I think the file reading process can be parallelized with a pool of worker threads. This should bring a speed improvement.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2017-07-12T14:40:23.988071+00:00", "milestone": null, "updated_on": "2017-07-18T19:09:43.007643+00:00", "type": "issue", "id": 29}, {"priority": "minor", "kind": "task", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/30/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/30.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/30/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/30/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/30/python-3"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/30/vote"}}, "reporter": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "title": "Python 3", "component": null, "votes": 0, "watches": 1, "content": {"raw": "As Python 3 porting is not that far away I would like to collect python 3 incompatibilities here.\r\nAnd also collect fixes so they can be discussed and I don't lose them somewhere in my repos.\r\nSo far besides the obvious lack of PyQt5 and unicode I found the following problems:\r\n\r\n* the module Queue is names queue in python 3 so in \\_\\_main\\_\\_.py we should to this:\r\n```\r\n#!python\r\nif six.PY2:\r\n    import Queue\r\nelse:\r\n    import queue as Queue\r\n```\r\n* in \\_\\_main\\_\\_.py  there exists a line:\r\n\r\n```\r\n#!python\r\n\r\nfor column_index, name in sorted(column_names.items(), key=lambda s: s[1]):\r\n```\r\nwhich throws the exception:\r\n\r\n```\r\n#!python\r\n\r\n  File \"lyse/__main__.py\", line 844, in populate_model\r\n    for column_index, name in sorted(column_names.items(), key=lambda s: s[1]):\r\nTypeError: '<' not supported between instances of 'tuple' and 'str'\r\n```\r\nA fix for this is:\r\n\r\n```\r\n#!python\r\n\r\n        def get_key(s):\r\n            while isinstance(s, tuple):\r\n                s = s[1]\r\n            return s\r\n\r\n        for column_index, name in sorted(column_names.items(), key=get_key):\r\n```\r\n* in  \\_\\_init\\_\\_.py there are 2 unused includes one for urllib and one for urllib2 both are unused and urlliib2 doesn't exist under python 3\r\n*in dataframe\\_utilities.py the function\r\n```\r\n#!python\r\n\r\ndef asdatetime(timestr):\r\n    tz = tzlocal.get_localzone().zone\r\n    return pandas.Timestamp(timestr, tz=tz)\r\n```\r\ndoesn't work and throws the Exeption:\r\n\r\n```\r\n#!python\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/janwerkmann/labscript_suite/labscript_utils/excepthook/__init__.py\", line 43, in run\r\n    run_old(*args, **kwargs)\r\n  File \"/Users/janwerkmann/anaconda/envs/snowflakes/lib/python3.6/threading.py\", line 864, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/Users/janwerkmann/anaconda/envs/snowflakes/lib/python3.6/site-packages/zprocess/__init__.py\", line 67, in f\r\n    six.reraise(type, value, traceback)\r\n  File \"/Users/janwerkmann/anaconda/envs/snowflakes/lib/python3.6/site-packages/six.py\", line 686, in reraise\r\n    raise value\r\n  File \"lyse/__main__.py\", line 1627, in incoming_buffer_loop\r\n    dataframe = get_dataframe_from_shot(filepath)\r\n  File \"/Users/janwerkmann/labscript_suite/lyse/dataframe_utilities.py\", line 116, in get_dataframe_from_shot\r\n    nested_dict = get_nested_dict_from_shot(filepath)\r\n  File \"/Users/janwerkmann/labscript_suite/lyse/dataframe_utilities.py\", line 60, in get_nested_dict_from_shot\r\n    row['run time'] = asdatetime(h5_file.attrs['run time'])\r\n  File \"/Users/janwerkmann/labscript_suite/lyse/dataframe_utilities.py\", line 29, in asdatetime\r\n    return pandas.Timestamp(timestr, tz=tz)\r\n  File \"pandas/_libs/tslib.pyx\", line 402, in pandas._libs.tslib.Timestamp.__new__ (pandas/_libs/tslib.c:10051)\r\n  File \"pandas/_libs/tslib.pyx\", line 1528, in pandas._libs.tslib.convert_to_tsobject (pandas/_libs/tslib.c:28851)\r\nTypeError: Cannot convert input [b'20170612T123722'] of type <class 'bytes'> to Timestamp\r\n```\r\na fix for this is\r\n\r\n```\r\n#!python\r\n\r\ndef asdatetime(timestr):\r\n    tz = tzlocal.get_localzone().zone\r\n    if isinstance(timestr, bytes):\r\n        timestr = timestr.decode('utf-8')\r\n    return pandas.Timestamp(timestr, tz=tz)\r\n```", "markup": "markdown", "html": "<p>As Python 3 porting is not that far away I would like to collect python 3 incompatibilities here.\nAnd also collect fixes so they can be discussed and I don't lose them somewhere in my repos.\nSo far besides the obvious lack of PyQt5 and unicode I found the following problems:</p>\n<ul>\n<li>the module Queue is names queue in python 3 so in __main__.py we should to this:</li>\n</ul>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"k\">if</span> <span class=\"n\">six</span><span class=\"o\">.</span><span class=\"n\">PY2</span><span class=\"p\">:</span>\n    <span class=\"kn\">import</span> <span class=\"nn\">Queue</span>\n<span class=\"k\">else</span><span class=\"p\">:</span>\n    <span class=\"kn\">import</span> <span class=\"nn\">queue</span> <span class=\"kn\">as</span> <span class=\"nn\">Queue</span>\n</pre></div>\n\n\n<ul>\n<li>in __main__.py  there exists a line:</li>\n</ul>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"k\">for</span> <span class=\"n\">column_index</span><span class=\"p\">,</span> <span class=\"n\">name</span> <span class=\"ow\">in</span> <span class=\"nb\">sorted</span><span class=\"p\">(</span><span class=\"n\">column_names</span><span class=\"o\">.</span><span class=\"n\">items</span><span class=\"p\">(),</span> <span class=\"n\">key</span><span class=\"o\">=</span><span class=\"k\">lambda</span> <span class=\"n\">s</span><span class=\"p\">:</span> <span class=\"n\">s</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]):</span>\n</pre></div>\n\n\n<p>which throws the exception:</p>\n<div class=\"codehilite language-python\"><pre><span></span>  <span class=\"n\">File</span> <span class=\"s2\">&quot;lyse/__main__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">844</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">populate_model</span>\n    <span class=\"k\">for</span> <span class=\"n\">column_index</span><span class=\"p\">,</span> <span class=\"n\">name</span> <span class=\"ow\">in</span> <span class=\"nb\">sorted</span><span class=\"p\">(</span><span class=\"n\">column_names</span><span class=\"o\">.</span><span class=\"n\">items</span><span class=\"p\">(),</span> <span class=\"n\">key</span><span class=\"o\">=</span><span class=\"k\">lambda</span> <span class=\"n\">s</span><span class=\"p\">:</span> <span class=\"n\">s</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]):</span>\n<span class=\"ne\">TypeError</span><span class=\"p\">:</span> <span class=\"s1\">&#39;&lt;&#39;</span> <span class=\"ow\">not</span> <span class=\"n\">supported</span> <span class=\"n\">between</span> <span class=\"n\">instances</span> <span class=\"n\">of</span> <span class=\"s1\">&#39;tuple&#39;</span> <span class=\"ow\">and</span> <span class=\"s1\">&#39;str&#39;</span>\n</pre></div>\n\n\n<p>A fix for this is:</p>\n<div class=\"codehilite language-python\"><pre><span></span>        <span class=\"k\">def</span> <span class=\"nf\">get_key</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">):</span>\n            <span class=\"k\">while</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"nb\">tuple</span><span class=\"p\">):</span>\n                <span class=\"n\">s</span> <span class=\"o\">=</span> <span class=\"n\">s</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span>\n            <span class=\"k\">return</span> <span class=\"n\">s</span>\n\n        <span class=\"k\">for</span> <span class=\"n\">column_index</span><span class=\"p\">,</span> <span class=\"n\">name</span> <span class=\"ow\">in</span> <span class=\"nb\">sorted</span><span class=\"p\">(</span><span class=\"n\">column_names</span><span class=\"o\">.</span><span class=\"n\">items</span><span class=\"p\">(),</span> <span class=\"n\">key</span><span class=\"o\">=</span><span class=\"n\">get_key</span><span class=\"p\">):</span>\n</pre></div>\n\n\n<ul>\n<li>in  __init__.py there are 2 unused includes one for urllib and one for urllib2 both are unused and urlliib2 doesn't exist under python 3\n*in dataframe_utilities.py the function</li>\n</ul>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"k\">def</span> <span class=\"nf\">asdatetime</span><span class=\"p\">(</span><span class=\"n\">timestr</span><span class=\"p\">):</span>\n    <span class=\"n\">tz</span> <span class=\"o\">=</span> <span class=\"n\">tzlocal</span><span class=\"o\">.</span><span class=\"n\">get_localzone</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">zone</span>\n    <span class=\"k\">return</span> <span class=\"n\">pandas</span><span class=\"o\">.</span><span class=\"n\">Timestamp</span><span class=\"p\">(</span><span class=\"n\">timestr</span><span class=\"p\">,</span> <span class=\"n\">tz</span><span class=\"o\">=</span><span class=\"n\">tz</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>doesn't work and throws the Exeption:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"p\">):</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/Users/janwerkmann/labscript_suite/labscript_utils/excepthook/__init__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">43</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">run</span>\n    <span class=\"n\">run_old</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/Users/janwerkmann/anaconda/envs/snowflakes/lib/python3.6/threading.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">864</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">run</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_target</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_kwargs</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/Users/janwerkmann/anaconda/envs/snowflakes/lib/python3.6/site-packages/zprocess/__init__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">67</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">f</span>\n    <span class=\"n\">six</span><span class=\"o\">.</span><span class=\"n\">reraise</span><span class=\"p\">(</span><span class=\"nb\">type</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"n\">traceback</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/Users/janwerkmann/anaconda/envs/snowflakes/lib/python3.6/site-packages/six.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">686</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">reraise</span>\n    <span class=\"k\">raise</span> <span class=\"n\">value</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;lyse/__main__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">1627</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">incoming_buffer_loop</span>\n    <span class=\"n\">dataframe</span> <span class=\"o\">=</span> <span class=\"n\">get_dataframe_from_shot</span><span class=\"p\">(</span><span class=\"n\">filepath</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/Users/janwerkmann/labscript_suite/lyse/dataframe_utilities.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">116</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">get_dataframe_from_shot</span>\n    <span class=\"n\">nested_dict</span> <span class=\"o\">=</span> <span class=\"n\">get_nested_dict_from_shot</span><span class=\"p\">(</span><span class=\"n\">filepath</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/Users/janwerkmann/labscript_suite/lyse/dataframe_utilities.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">60</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">get_nested_dict_from_shot</span>\n    <span class=\"n\">row</span><span class=\"p\">[</span><span class=\"s1\">&#39;run time&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">asdatetime</span><span class=\"p\">(</span><span class=\"n\">h5_file</span><span class=\"o\">.</span><span class=\"n\">attrs</span><span class=\"p\">[</span><span class=\"s1\">&#39;run time&#39;</span><span class=\"p\">])</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/Users/janwerkmann/labscript_suite/lyse/dataframe_utilities.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">29</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">asdatetime</span>\n    <span class=\"k\">return</span> <span class=\"n\">pandas</span><span class=\"o\">.</span><span class=\"n\">Timestamp</span><span class=\"p\">(</span><span class=\"n\">timestr</span><span class=\"p\">,</span> <span class=\"n\">tz</span><span class=\"o\">=</span><span class=\"n\">tz</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;pandas/_libs/tslib.pyx&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">402</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">pandas</span><span class=\"o\">.</span><span class=\"n\">_libs</span><span class=\"o\">.</span><span class=\"n\">tslib</span><span class=\"o\">.</span><span class=\"n\">Timestamp</span><span class=\"o\">.</span><span class=\"fm\">__new__</span> <span class=\"p\">(</span><span class=\"n\">pandas</span><span class=\"o\">/</span><span class=\"n\">_libs</span><span class=\"o\">/</span><span class=\"n\">tslib</span><span class=\"o\">.</span><span class=\"n\">c</span><span class=\"p\">:</span><span class=\"mi\">10051</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;pandas/_libs/tslib.pyx&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">1528</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">pandas</span><span class=\"o\">.</span><span class=\"n\">_libs</span><span class=\"o\">.</span><span class=\"n\">tslib</span><span class=\"o\">.</span><span class=\"n\">convert_to_tsobject</span> <span class=\"p\">(</span><span class=\"n\">pandas</span><span class=\"o\">/</span><span class=\"n\">_libs</span><span class=\"o\">/</span><span class=\"n\">tslib</span><span class=\"o\">.</span><span class=\"n\">c</span><span class=\"p\">:</span><span class=\"mi\">28851</span><span class=\"p\">)</span>\n<span class=\"ne\">TypeError</span><span class=\"p\">:</span> <span class=\"n\">Cannot</span> <span class=\"n\">convert</span> <span class=\"nb\">input</span> <span class=\"p\">[</span><span class=\"sa\">b</span><span class=\"s1\">&#39;20170612T123722&#39;</span><span class=\"p\">]</span> <span class=\"n\">of</span> <span class=\"nb\">type</span> <span class=\"o\">&lt;</span><span class=\"k\">class</span> <span class=\"err\">&#39;</span><span class=\"nc\">bytes</span><span class=\"s1\">&#39;&gt; to Timestamp</span>\n</pre></div>\n\n\n<p>a fix for this is</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"k\">def</span> <span class=\"nf\">asdatetime</span><span class=\"p\">(</span><span class=\"n\">timestr</span><span class=\"p\">):</span>\n    <span class=\"n\">tz</span> <span class=\"o\">=</span> <span class=\"n\">tzlocal</span><span class=\"o\">.</span><span class=\"n\">get_localzone</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">zone</span>\n    <span class=\"k\">if</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">timestr</span><span class=\"p\">,</span> <span class=\"nb\">bytes</span><span class=\"p\">):</span>\n        <span class=\"n\">timestr</span> <span class=\"o\">=</span> <span class=\"n\">timestr</span><span class=\"o\">.</span><span class=\"n\">decode</span><span class=\"p\">(</span><span class=\"s1\">&#39;utf-8&#39;</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">pandas</span><span class=\"o\">.</span><span class=\"n\">Timestamp</span><span class=\"p\">(</span><span class=\"n\">timestr</span><span class=\"p\">,</span> <span class=\"n\">tz</span><span class=\"o\">=</span><span class=\"n\">tz</span><span class=\"p\">)</span>\n</pre></div>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2017-07-27T19:43:09.138282+00:00", "milestone": null, "updated_on": "2018-03-23T19:26:15.907661+00:00", "type": "issue", "id": 30}, {"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/31/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/31.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/31/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/31/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/31/analysis-status-does-not-update-if-routine"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/31/vote"}}, "reporter": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "title": "Analysis status does not update if routine does not call save_results", "component": null, "votes": 0, "watches": 2, "content": {"raw": "I've just noticed that some single shot analysis routines seem to get \"skipped\" by the status bar,  e.g. if you have 4 running, in some cases the bar will go 0% > 25% > 75% >100%.\r\n\r\nIt appears as though the routines which are skipped do not call run.save_results(), for example, if using the following test script, the status bar will not update after the routine has finished, unless the last line is commented out.\r\n\r\n```\r\n#!python\r\n\r\nfrom lyse import *\r\nimport time\r\nrun = Run(path)\r\ntime.sleep(3)\r\n#run.save_results(\"key\",\"value\")\r\n```\r\n\r\nI suspect that this bug was introduced in pull request #17. It's only a minor cosmetic thing, but worth fixing at some point! This was first noticed on an OD calculating routine, run.save_result_array() is used, but not run.save_results().", "markup": "markdown", "html": "<p>I've just noticed that some single shot analysis routines seem to get \"skipped\" by the status bar,  e.g. if you have 4 running, in some cases the bar will go 0% &gt; 25% &gt; 75% &gt;100%.</p>\n<p>It appears as though the routines which are skipped do not call run.save_results(), for example, if using the following test script, the status bar will not update after the routine has finished, unless the last line is commented out.</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">lyse</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>\n<span class=\"kn\">import</span> <span class=\"nn\">time</span>\n<span class=\"n\">run</span> <span class=\"o\">=</span> <span class=\"n\">Run</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"p\">)</span>\n<span class=\"n\">time</span><span class=\"o\">.</span><span class=\"n\">sleep</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">)</span>\n<span class=\"c1\">#run.save_results(&quot;key&quot;,&quot;value&quot;)</span>\n</pre></div>\n\n\n<p>I suspect that this bug was introduced in <a href=\"#!/labscript_suite/lyse/pull-requests/17/update-dataframe-without-readoperations\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #17</a>. It's only a minor cosmetic thing, but worth fixing at some point! This was first noticed on an OD calculating routine, run.save_result_array() is used, but not run.save_results().</p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2017-08-11T06:56:21.311942+00:00", "milestone": null, "updated_on": "2017-08-15T04:19:19.201024+00:00", "type": "issue", "id": 31}, {"priority": "major", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/32/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/32.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/32/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/32/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/32/second-lyse-instance"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/32/vote"}}, "reporter": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "title": "Second lyse instance", "component": null, "votes": 0, "watches": 1, "content": {"raw": "It would be nice to have to option to open more then one instance of lyse. That way one can do some analysis in one instance with old data while new data is processed in in the other.\r\n\r\nIt's not hard to deactivate the server on a second instance of lyse with a simple try except and lyse will as often as one wants. However this causes problems since the dataframe is being transmitted with that server. So the second instance of lyse would still need a server. \r\n\r\nWe could add a way to communicate a new port to the analysis processes so that they to the second server.", "markup": "markdown", "html": "<p>It would be nice to have to option to open more then one instance of lyse. That way one can do some analysis in one instance with old data while new data is processed in in the other.</p>\n<p>It's not hard to deactivate the server on a second instance of lyse with a simple try except and lyse will as often as one wants. However this causes problems since the dataframe is being transmitted with that server. So the second instance of lyse would still need a server. </p>\n<p>We could add a way to communicate a new port to the analysis processes so that they to the second server.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2017-09-04T14:18:30.082486+00:00", "milestone": null, "updated_on": "2017-09-05T07:08:53.426352+00:00", "type": "issue", "id": 32}, {"priority": "critical", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/33/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/33.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/33/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/33/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/33/lyse-freezes-on-selection"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/33/vote"}}, "reporter": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "title": "Lyse freezes on selection", "component": null, "votes": 0, "watches": 1, "content": {"raw": "If there are more than a few hundred (200 should be enough) shots loaded in lyse and one selects them all lyse will freeze or dramatically slow down when new shots come in during this time. This very commonly happens to us as we commonly forget to clear shots out of lyse inbetween sequences and when we want to delete the old ones lyse becomes unusable.", "markup": "markdown", "html": "<p>If there are more than a few hundred (200 should be enough) shots loaded in lyse and one selects them all lyse will freeze or dramatically slow down when new shots come in during this time. This very commonly happens to us as we commonly forget to clear shots out of lyse inbetween sequences and when we want to delete the old ones lyse becomes unusable.</p>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2017-09-28T15:25:48.931046+00:00", "milestone": null, "updated_on": "2018-02-26T06:54:56.840964+00:00", "type": "issue", "id": 33}, {"priority": "minor", "kind": "task", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/34/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/34.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/34/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/34/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/34/replace-convert_objects"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/34/vote"}}, "reporter": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "title": "Replace convert_objects", "component": null, "votes": 0, "watches": 1, "content": {"raw": "There is a deprecation warning that lyse currently throws the first time the dataframe is requested by a analysis routine.\r\n\r\n```\r\n#!python\r\n\r\nWARNING lyse: /Users/janwerkmann/labscript_suite/lyse/__main__.py:174: FutureWarning: convert_objects is deprecated.  Use the data-type specific converters pd.to_datetime, pd.to_timedelta and pd.to_numeric.\r\n  convert_dates=False, convert_numeric=False, convert_timedeltas=False)\r\n```\r\n\r\nWe should maybe replace it?", "markup": "markdown", "html": "<p>There is a deprecation warning that lyse currently throws the first time the dataframe is requested by a analysis routine.</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">WARNING</span> <span class=\"n\">lyse</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">janwerkmann</span><span class=\"o\">/</span><span class=\"n\">labscript_suite</span><span class=\"o\">/</span><span class=\"n\">lyse</span><span class=\"o\">/</span><span class=\"n\">__main__</span><span class=\"o\">.</span><span class=\"n\">py</span><span class=\"p\">:</span><span class=\"mi\">174</span><span class=\"p\">:</span> <span class=\"ne\">FutureWarning</span><span class=\"p\">:</span> <span class=\"n\">convert_objects</span> <span class=\"ow\">is</span> <span class=\"n\">deprecated</span><span class=\"o\">.</span>  <span class=\"n\">Use</span> <span class=\"n\">the</span> <span class=\"n\">data</span><span class=\"o\">-</span><span class=\"nb\">type</span> <span class=\"n\">specific</span> <span class=\"n\">converters</span> <span class=\"n\">pd</span><span class=\"o\">.</span><span class=\"n\">to_datetime</span><span class=\"p\">,</span> <span class=\"n\">pd</span><span class=\"o\">.</span><span class=\"n\">to_timedelta</span> <span class=\"ow\">and</span> <span class=\"n\">pd</span><span class=\"o\">.</span><span class=\"n\">to_numeric</span><span class=\"o\">.</span>\n  <span class=\"n\">convert_dates</span><span class=\"o\">=</span><span class=\"bp\">False</span><span class=\"p\">,</span> <span class=\"n\">convert_numeric</span><span class=\"o\">=</span><span class=\"bp\">False</span><span class=\"p\">,</span> <span class=\"n\">convert_timedeltas</span><span class=\"o\">=</span><span class=\"bp\">False</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>We should maybe replace it?</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2017-09-29T09:48:06.197364+00:00", "milestone": null, "updated_on": "2017-10-01T23:05:17.951220+00:00", "type": "issue", "id": 34}, {"priority": "minor", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/35/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/35.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/35/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/35/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/35/save-visible-columns-in-configuration"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/35/vote"}}, "reporter": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "title": "Save visible columns in configuration", "component": null, "votes": 0, "watches": 1, "content": {"raw": "When starting up, this would require the GUI to display columns even though the lyse DataFrame is empty.", "markup": "markdown", "html": "<p>When starting up, this would require the GUI to display columns even though the lyse DataFrame is empty.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2017-12-15T17:27:59.307823+00:00", "milestone": null, "updated_on": "2017-12-15T17:27:59.307823+00:00", "type": "issue", "id": 35}, {"priority": "major", "kind": "proposal", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/36/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/36.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/36/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/36/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/36/replace-deprecated-pandas"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/36/vote"}}, "reporter": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "title": "Replace deprecated Pandas Dataframe.set_value", "component": null, "votes": 0, "watches": 1, "content": {"raw": "There is a FuturWarning for Dataframe.set_value() so we might want to replace it with Dataframe.at[] (as suggested by the warning) in the near future.\r\n\r\n```\r\n#!python\r\n\r\n/Users/janwerkmann/labscript_suite/lyse/__main__.py:1354: FutureWarning: set_value is deprecated and will be removed in a future release. Please use .at[] or .iat[] accessors instead\r\n  self.dataframe.set_value(df_row_index, column_name, value)\r\n```", "markup": "markdown", "html": "<p>There is a FuturWarning for Dataframe.set_value() so we might want to replace it with Dataframe.at[] (as suggested by the warning) in the near future.</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"o\">/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">janwerkmann</span><span class=\"o\">/</span><span class=\"n\">labscript_suite</span><span class=\"o\">/</span><span class=\"n\">lyse</span><span class=\"o\">/</span><span class=\"n\">__main__</span><span class=\"o\">.</span><span class=\"n\">py</span><span class=\"p\">:</span><span class=\"mi\">1354</span><span class=\"p\">:</span> <span class=\"ne\">FutureWarning</span><span class=\"p\">:</span> <span class=\"n\">set_value</span> <span class=\"ow\">is</span> <span class=\"n\">deprecated</span> <span class=\"ow\">and</span> <span class=\"n\">will</span> <span class=\"n\">be</span> <span class=\"n\">removed</span> <span class=\"ow\">in</span> <span class=\"n\">a</span> <span class=\"n\">future</span> <span class=\"n\">release</span><span class=\"o\">.</span> <span class=\"n\">Please</span> <span class=\"n\">use</span> <span class=\"o\">.</span><span class=\"n\">at</span><span class=\"p\">[]</span> <span class=\"ow\">or</span> <span class=\"o\">.</span><span class=\"n\">iat</span><span class=\"p\">[]</span> <span class=\"n\">accessors</span> <span class=\"n\">instead</span>\n  <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">dataframe</span><span class=\"o\">.</span><span class=\"n\">set_value</span><span class=\"p\">(</span><span class=\"n\">df_row_index</span><span class=\"p\">,</span> <span class=\"n\">column_name</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">)</span>\n</pre></div>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2018-02-13T20:18:59.997291+00:00", "milestone": null, "updated_on": "2019-02-11T16:21:35.728793+00:00", "type": "issue", "id": 36}, {"priority": "trivial", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/37/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/37.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/37/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/37/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/37/specify-formatting-existence-of-print"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/37/vote"}}, "reporter": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "title": "Specify formatting/existence of print statement in save_results", "component": null, "votes": 0, "watches": 1, "content": {"raw": "When saving analysis results to the shot file, [`save_results`](#!/labscript_suite/lyse/src/9246f0e206951b50ed16c5515c1536a115ed845a/__init__.py?at=default&fileviewer=file-view-default#__init__.py-233) prints the name and value without formatting, e.g.\r\n~~~~\r\nsaving MOT_load_rate = 509343215.257\r\nsaving MOT_number = 2574843222.31\r\nsaving MOT_beam_power = 118.185460376\r\nsaving u_MOT_beam_power = 0.799789946506\r\n~~~~\r\nThis enhancement would permit the value to be formatted using a format-string (perhaps honouring uncertainties), or permit the print statement to be omitted altogether. For example:\r\n~~~~\r\nsaving MOT_load_rate = 5.09e8\r\nsaving MOT_number = 2.575e9\r\nsaving MOT_beam_power = 118.2(8)\r\n~~~~", "markup": "markdown", "html": "<p>When saving analysis results to the shot file, <a data-is-external-link=\"true\" href=\"#!/labscript_suite/lyse/src/9246f0e206951b50ed16c5515c1536a115ed845a/__init__.py?at=default&amp;fileviewer=file-view-default#__init__.py-233\" rel=\"nofollow\"><code>save_results</code></a> prints the name and value without formatting, e.g.</p>\n<div class=\"codehilite\"><pre><span></span>saving MOT_load_rate = 509343215.257\nsaving MOT_number = 2574843222.31\nsaving MOT_beam_power = 118.185460376\nsaving u_MOT_beam_power = 0.799789946506\n</pre></div>\n\n\n<p>This enhancement would permit the value to be formatted using a format-string (perhaps honouring uncertainties), or permit the print statement to be omitted altogether. For example:</p>\n<div class=\"codehilite\"><pre><span></span>saving MOT_load_rate = 5.09e8\nsaving MOT_number = 2.575e9\nsaving MOT_beam_power = 118.2(8)\n</pre></div>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2018-03-01T01:44:18.820564+00:00", "milestone": null, "updated_on": "2018-03-01T01:44:18.820564+00:00", "type": "issue", "id": 37}, {"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/38/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/38.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/38/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/38/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/38/hdf5-library-version-mismatched-error"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/38/vote"}}, "reporter": {"display_name": "Lars Kohfahl", "uuid": "{14b59397-cbc0-4d8c-8a4a-fe99fb4d2d4a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B14b59397-cbc0-4d8c-8a4a-fe99fb4d2d4a%7D"}, "html": {"href": "https://bitbucket.org/%7B14b59397-cbc0-4d8c-8a4a-fe99fb4d2d4a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/630642264cd55e22515678a3a0489ac7d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsLK-2.png"}}, "nickname": "lkohfahl", "type": "user", "account_id": "5aafc5d11396802a57aa7f3b"}, "title": "HDF5 library version mismatched error", "component": null, "votes": 0, "watches": 1, "content": {"raw": "Hey,\r\nmy name is Lars Kohfahl and I am currently keeping labscript in Darmstadt, Germany up to date after Jan Werkmann finished his masters thesis.\r\nI now came across a problem where I do not know if it is an error from my side or some bug:\r\nWhen updating hdf5 (to 1.10.2) or h5py (to 2.8.0) with conda and starting lyse afterwards, a window pops up saying \"python does not work anymore\" and an error message is displayed saying that there is a \"HDF5 library version mismatched error\" saying that the versions of the headers and the library do not match.\r\nI can reproduce this error in Python 2 and Python 3.\r\nI have attached the error messages for Py2 and Py3. Note that in Py2 I first updated HDF5 and then h5py, in Py3 I did it the other way around.\r\nCan anyone help my how to solve it?", "markup": "markdown", "html": "<p>Hey,\nmy name is Lars Kohfahl and I am currently keeping labscript in Darmstadt, Germany up to date after Jan Werkmann finished his masters thesis.\nI now came across a problem where I do not know if it is an error from my side or some bug:\nWhen updating hdf5 (to 1.10.2) or h5py (to 2.8.0) with conda and starting lyse afterwards, a window pops up saying \"python does not work anymore\" and an error message is displayed saying that there is a \"HDF5 library version mismatched error\" saying that the versions of the headers and the library do not match.\nI can reproduce this error in Python 2 and Python 3.\nI have attached the error messages for Py2 and Py3. Note that in Py2 I first updated HDF5 and then h5py, in Py3 I did it the other way around.\nCan anyone help my how to solve it?</p>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2018-09-12T09:19:46.874923+00:00", "milestone": null, "updated_on": "2018-09-12T15:04:09.128688+00:00", "type": "issue", "id": 38}, {"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/39/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/39.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/39/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/39/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/39/bug-with-module-watcher-reloading-when"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/39/vote"}}, "reporter": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "title": "Bug with module watcher reloading when mpl_toolkit used", "component": null, "votes": 0, "watches": 2, "content": {"raw": "I get a weird exception that implies that `sys` is `None` when using the following import in a lyse script (and then modifying the contents of another imported script, triggering modulewatcher to reload)\r\n\r\nThe module to import is: `from mpl_toolkits.axes_grid.inset_locator import (inset_axes, InsetPosition, mark_inset)`.\r\n\r\nOnce you trigger module watcher to reload anything else used by the script, and re-run the analysis, you get the following traceback:\r\n\r\n\r\n```\r\n#!python\r\n\r\nTraceback (most recent call last):\r\n  File \"y_vs_auto.py\", line 24, in <module>\r\n    from mpl_toolkits.axes_grid.inset_locator import (inset_axes, InsetPosition,\r\n  File \"C:\\labscript_suite\\labscript_py27\\labscript_utils\\double_import_denier.py\", line 38, in load_module\r\n    return imp.load_module(name, self.fp, self.pathname, self.description)\r\n  File \"C:\\Anaconda3\\envs\\labscript_py27\\lib\\site-packages\\mpl_toolkits\\__init__.py\", line 2, in <module>\r\n    __import__('pkg_resources').declare_namespace(__name__)\r\n  File \"C:\\labscript_suite\\labscript_py27\\labscript_utils\\double_import_denier.py\", line 38, in load_module\r\n    return imp.load_module(name, self.fp, self.pathname, self.description)\r\n  File \"C:\\Anaconda3\\envs\\labscript_py27\\lib\\site-packages\\pkg_resources\\__init__.py\", line 50, in <module>\r\n    from pkg_resources.extern import six\r\n  File \"C:\\Anaconda3\\envs\\labscript_py27\\lib\\site-packages\\pkg_resources\\extern\\__init__.py\", line 44, in load_module\r\n    mod = sys.modules[extant]\r\nAttributeError: 'NoneType' object has no attribute 'modules'\r\n```\r\n\r\nIt would be nice to get this fixed soon so that the fix can be in the version of lyse we specify to use with the data collection for @shjohnst vortex paper.", "markup": "markdown", "html": "<p>I get a weird exception that implies that <code>sys</code> is <code>None</code> when using the following import in a lyse script (and then modifying the contents of another imported script, triggering modulewatcher to reload)</p>\n<p>The module to import is: <code>from mpl_toolkits.axes_grid.inset_locator import (inset_axes, InsetPosition, mark_inset)</code>.</p>\n<p>Once you trigger module watcher to reload anything else used by the script, and re-run the analysis, you get the following traceback:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"p\">):</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;y_vs_auto.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">24</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span>\n    <span class=\"kn\">from</span> <span class=\"nn\">mpl_toolkits.axes_grid.inset_locator</span> <span class=\"kn\">import</span> <span class=\"p\">(</span><span class=\"n\">inset_axes</span><span class=\"p\">,</span> <span class=\"n\">InsetPosition</span><span class=\"p\">,</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\labscript_suite\\labscript_py27\\labscript_utils\\double_import_denier.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">38</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">load_module</span>\n    <span class=\"k\">return</span> <span class=\"n\">imp</span><span class=\"o\">.</span><span class=\"n\">load_module</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">fp</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">pathname</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">description</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Anaconda3\\envs\\labscript_py27\\lib\\site-packages\\mpl_toolkits\\__init__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span>\n    <span class=\"nb\">__import__</span><span class=\"p\">(</span><span class=\"s1\">&#39;pkg_resources&#39;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">declare_namespace</span><span class=\"p\">(</span><span class=\"vm\">__name__</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\labscript_suite\\labscript_py27\\labscript_utils\\double_import_denier.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">38</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">load_module</span>\n    <span class=\"k\">return</span> <span class=\"n\">imp</span><span class=\"o\">.</span><span class=\"n\">load_module</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">fp</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">pathname</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">description</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Anaconda3\\envs\\labscript_py27\\lib\\site-packages\\pkg_resources\\__init__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">50</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span>\n    <span class=\"kn\">from</span> <span class=\"nn\">pkg_resources.extern</span> <span class=\"kn\">import</span> <span class=\"n\">six</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\Anaconda3\\envs\\labscript_py27\\lib\\site-packages\\pkg_resources\\extern\\__init__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">44</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">load_module</span>\n    <span class=\"n\">mod</span> <span class=\"o\">=</span> <span class=\"n\">sys</span><span class=\"o\">.</span><span class=\"n\">modules</span><span class=\"p\">[</span><span class=\"n\">extant</span><span class=\"p\">]</span>\n<span class=\"ne\">AttributeError</span><span class=\"p\">:</span> <span class=\"s1\">&#39;NoneType&#39;</span> <span class=\"nb\">object</span> <span class=\"n\">has</span> <span class=\"n\">no</span> <span class=\"n\">attribute</span> <span class=\"s1\">&#39;modules&#39;</span>\n</pre></div>\n\n\n<p>It would be nice to get this fixed soon so that the fix can be in the version of lyse we specify to use with the data collection for @shjohnst vortex paper.</p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2018-10-24T07:22:31.970420+00:00", "milestone": null, "updated_on": "2019-06-03T13:42:51.896044+00:00", "type": "issue", "id": 39}, {"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/40/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/40.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/40/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/40/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/40/another-pandas-deprecation"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/40/vote"}}, "reporter": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "title": "Another pandas deprecation", "component": null, "votes": 0, "watches": 1, "content": {"raw": "Our use of pandas continues to have a short shelf life:\r\n\r\n```\r\n2018-10-25 16:53:48,021 WARNING lyse: /home/cjb7/labscript_suite/lyse/__main__.py:1346: FutureWarning: get_value is deprecated and will be removed in a future release. Please use .at[] or .iat[] accessors instead\r\n  assert filepath == self.dataframe.get_value(row_number, filepath_colname)\r\n```\r\n\r\nWill need to fix this.", "markup": "markdown", "html": "<p>Our use of pandas continues to have a short shelf life:</p>\n<div class=\"codehilite\"><pre><span></span>2018-10-25 16:53:48,021 WARNING lyse: /home/cjb7/labscript_suite/lyse/__main__.py:1346: FutureWarning: get_value is deprecated and will be removed in a future release. Please use .at[] or .iat[] accessors instead\n  assert filepath == self.dataframe.get_value(row_number, filepath_colname)\n</pre></div>\n\n\n<p>Will need to fix this.</p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2018-10-25T20:56:13.000975+00:00", "milestone": null, "updated_on": "2019-02-11T16:21:47.769299+00:00", "type": "issue", "id": 40}, {"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/41/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/41.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/41/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/41/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/41/improve-plot-window-size-behaviour"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/41/vote"}}, "reporter": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "title": "Improve plot window size behaviour", "component": null, "votes": 0, "watches": 1, "content": {"raw": "There are a couple of issues with Plot window sizes:\r\n\r\n* Plot window sizes don't seem to agree with the parameters specified in a call to `figure()`. I'm not sure if this happens all the time, or just on small figures, or just randomly. Sometimes it's close, and other times it's completely wrong (even the wrong aspect ratio). I tried to track it down but it wasn't immediately obvious (I think it is to do with the call to `Plot.ui.adjustSize()` though in analysis_subprocess.py) \r\n\r\n* The first run of a script sets the plot window size. I think we should have the ability to unlock the window size to match the specifications of the last run of the script. This should be trivial to do once the above issue is resolved (as I think we just need to call `Plot.update_window_size()` after the script runs when we want the plot window to resize itself)\r\n\r\nImplementing the above would greatly aid the aim of producing publication quality plots (that need no further editing) from within the lyse GUI. Currently we have resorted to running the scripts from a terminal which works fine (so it is not a matplotlib issue, it's a lyse plot window issue).", "markup": "markdown", "html": "<p>There are a couple of issues with Plot window sizes:</p>\n<ul>\n<li>\n<p>Plot window sizes don't seem to agree with the parameters specified in a call to <code>figure()</code>. I'm not sure if this happens all the time, or just on small figures, or just randomly. Sometimes it's close, and other times it's completely wrong (even the wrong aspect ratio). I tried to track it down but it wasn't immediately obvious (I think it is to do with the call to <code>Plot.ui.adjustSize()</code> though in analysis_subprocess.py) </p>\n</li>\n<li>\n<p>The first run of a script sets the plot window size. I think we should have the ability to unlock the window size to match the specifications of the last run of the script. This should be trivial to do once the above issue is resolved (as I think we just need to call <code>Plot.update_window_size()</code> after the script runs when we want the plot window to resize itself)</p>\n</li>\n</ul>\n<p>Implementing the above would greatly aid the aim of producing publication quality plots (that need no further editing) from within the lyse GUI. Currently we have resorted to running the scripts from a terminal which works fine (so it is not a matplotlib issue, it's a lyse plot window issue).</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2018-10-30T04:53:10.190814+00:00", "milestone": null, "updated_on": "2018-10-30T04:53:10.190814+00:00", "type": "issue", "id": 41}, {"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/42/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/42.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/42/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/42/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/42/runget_-methods-should-open-the-hdf5-file"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/42/vote"}}, "reporter": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "title": "Run.get_* methods should open the HDF5 file in read-only mode", "component": null, "votes": 0, "watches": 1, "content": {"raw": "All of the `Run.get_*` methods don't have a file mode specified, and this results in the file modified time changing whenever you access a shot file with them (even if you aren't doing any writing).\r\n\r\nSo we should add `'r'` as the file mode to every `h5py.File` call within the `Run.get_*` methods", "markup": "markdown", "html": "<p>All of the <code>Run.get_*</code> methods don't have a file mode specified, and this results in the file modified time changing whenever you access a shot file with them (even if you aren't doing any writing).</p>\n<p>So we should add <code>'r'</code> as the file mode to every <code>h5py.File</code> call within the <code>Run.get_*</code> methods</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2018-11-05T01:06:13.793830+00:00", "milestone": null, "updated_on": "2018-11-05T01:06:13.793830+00:00", "type": "issue", "id": 42}, {"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/43/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/43.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/43/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/43/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/43/configuration-file-not-created-if-it-does"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/43/vote"}}, "reporter": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "title": "Configuration file not created if it does not exist", "component": null, "votes": 0, "watches": 2, "content": {"raw": "On a fresh install of the labscript suite on Windows, lyse thinks that its configuration file should be at `C:\\labscript_suite\\userlib\\app_saved_configs\\example_experiment\\lyse` however this lyse folder does not exist (i.e. is not created by the installer). This results in the following message being printed to the lyse output on startup:\r\n\r\n```\r\n#!python\r\n\r\nLoading default config file C:\\labscript_suite\\userlib\\app_saved_configs\\example_experiment\\lyse\\lyse.ini...\r\nCould not load config file: WindowsError: [Error 3] The system cannot find the path specified: 'C:\\\\labscript_suite\\\\userlib\\\\app_saved_configs\\\\example_experiment\\\\lyse'\r\n\r\n```\r\n\r\nIf you then click the \"Save configuration\" button in the File menu, the following traceback occurs:\r\n\r\n```\r\n#!python\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\labscript_suite\\lyse\\__main__.py\", line 1969, in on_save_configuration_triggered\r\n    self.save_configuration(self.last_save_config_file)\r\n  File \"C:\\labscript_suite\\lyse\\__main__.py\", line 2047, in save_configuration\r\n    lyse_config = LabConfig(save_file)\r\n  File \"C:\\labscript_suite\\labscript_utils\\labconfig.py\", line 72, in __init__\r\n    os.mkdir(os.path.dirname(self.config_path))\r\nWindowsError: [Error 3] The system cannot find the path specified: 'C:\\\\labscript_suite\\\\userlib\\\\app_saved_configs\\\\example_experiment\\\\lyse'\r\n\r\n```\r\n\r\nPerhaps we should have lyse check if the file listed in the labconfig file exists, and if not, create it on startup? We probably should also have default app configurations created by the installer.", "markup": "markdown", "html": "<p>On a fresh install of the labscript suite on Windows, lyse thinks that its configuration file should be at <code>C:\\labscript_suite\\userlib\\app_saved_configs\\example_experiment\\lyse</code> however this lyse folder does not exist (i.e. is not created by the installer). This results in the following message being printed to the lyse output on startup:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">Loading</span> <span class=\"n\">default</span> <span class=\"n\">config</span> <span class=\"nb\">file</span> <span class=\"n\">C</span><span class=\"p\">:</span>\\<span class=\"n\">labscript_suite</span>\\<span class=\"n\">userlib</span>\\<span class=\"n\">app_saved_configs</span>\\<span class=\"n\">example_experiment</span>\\<span class=\"n\">lyse</span>\\<span class=\"n\">lyse</span><span class=\"o\">.</span><span class=\"n\">ini</span><span class=\"o\">...</span>\n<span class=\"n\">Could</span> <span class=\"ow\">not</span> <span class=\"n\">load</span> <span class=\"n\">config</span> <span class=\"nb\">file</span><span class=\"p\">:</span> <span class=\"ne\">WindowsError</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"n\">Error</span> <span class=\"mi\">3</span><span class=\"p\">]</span> <span class=\"n\">The</span> <span class=\"n\">system</span> <span class=\"n\">cannot</span> <span class=\"n\">find</span> <span class=\"n\">the</span> <span class=\"n\">path</span> <span class=\"n\">specified</span><span class=\"p\">:</span> <span class=\"s1\">&#39;C:</span><span class=\"se\">\\\\</span><span class=\"s1\">labscript_suite</span><span class=\"se\">\\\\</span><span class=\"s1\">userlib</span><span class=\"se\">\\\\</span><span class=\"s1\">app_saved_configs</span><span class=\"se\">\\\\</span><span class=\"s1\">example_experiment</span><span class=\"se\">\\\\</span><span class=\"s1\">lyse&#39;</span>\n</pre></div>\n\n\n<p>If you then click the \"Save configuration\" button in the File menu, the following traceback occurs:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"p\">):</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\labscript_suite\\lyse\\__main__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">1969</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">on_save_configuration_triggered</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">save_configuration</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">last_save_config_file</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\labscript_suite\\lyse\\__main__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">2047</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">save_configuration</span>\n    <span class=\"n\">lyse_config</span> <span class=\"o\">=</span> <span class=\"n\">LabConfig</span><span class=\"p\">(</span><span class=\"n\">save_file</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\labscript_suite\\labscript_utils\\labconfig.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">72</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"fm\">__init__</span>\n    <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">mkdir</span><span class=\"p\">(</span><span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">dirname</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">config_path</span><span class=\"p\">))</span>\n<span class=\"ne\">WindowsError</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"n\">Error</span> <span class=\"mi\">3</span><span class=\"p\">]</span> <span class=\"n\">The</span> <span class=\"n\">system</span> <span class=\"n\">cannot</span> <span class=\"n\">find</span> <span class=\"n\">the</span> <span class=\"n\">path</span> <span class=\"n\">specified</span><span class=\"p\">:</span> <span class=\"s1\">&#39;C:</span><span class=\"se\">\\\\</span><span class=\"s1\">labscript_suite</span><span class=\"se\">\\\\</span><span class=\"s1\">userlib</span><span class=\"se\">\\\\</span><span class=\"s1\">app_saved_configs</span><span class=\"se\">\\\\</span><span class=\"s1\">example_experiment</span><span class=\"se\">\\\\</span><span class=\"s1\">lyse&#39;</span>\n</pre></div>\n\n\n<p>Perhaps we should have lyse check if the file listed in the labconfig file exists, and if not, create it on startup? We probably should also have default app configurations created by the installer.</p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2018-11-06T03:43:50.568106+00:00", "milestone": null, "updated_on": "2018-11-26T16:15:15.170326+00:00", "type": "issue", "id": 43}, {"priority": "minor", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/44/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/44.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/44/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/44/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/44/allow-save_result_array-s-methods-to-use"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/44/vote"}}, "reporter": {"display_name": "David Meyer", "uuid": "{8df655d6-8661-4957-b4ba-669cef19bf2d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D"}, "html": {"href": "https://bitbucket.org/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2a4efe81a17e5aeccdbc4ef2ca2cc463d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDM-0.png"}}, "nickname": "dihm", "type": "user", "account_id": "557058:411f7712-e1fa-438c-b578-0359da2d9f06"}, "title": "Allow save_result_array(s) methods to use h5 dataset compression filters", "component": null, "votes": 0, "watches": 1, "content": {"raw": "We've recently had an experiment get up to speed and start producing a prodigious amount of data. In researching how to deal with it, I stumbled on to hdf5 dataset compression. It gives a performance hit to read/writes for moderate size reductions while being essentially transparent in use, so long as the compression is specified when the dataset is first created. \r\n\r\nIt would be nice if large, summary datasets produced in lyse could be stored compressed from the outset. Because of performance considerations, we don't want it to be default, so it should be configurable on individual data saves as well.\r\n\r\n My initial thought was to simply pass through kwargs to the create_dataset function in both save_result_arrays and save_result_array. Thoughts?\r\n\r\n```\r\n#!diff\r\n\r\n@@ -209,7 +209,8 @@\r\n                 _updated_data[self.h5_path] = {}\r\n             _updated_data[self.h5_path][str(self.group), name] = value\r\n \r\n-    def save_result_array(self, name, data, group=None, overwrite=True, keep_attrs=False):\r\n+    def save_result_array(self, name, data, group=None, \r\n+                          overwrite=True, keep_attrs=False, **compress_args):\r\n         if self.no_write:\r\n             raise Exception('This run is read-only. '\r\n                             'You can\\'t save results to runs through a '\r\n@@ -233,7 +234,7 @@\r\n                 else:\r\n                     raise Exception('Dataset %s exists. Use overwrite=True to overwrite.' % \r\n                                      group + '/' + name)\r\n-            h5_file[group].create_dataset(name, data=data)\r\n+            h5_file[group].create_dataset(name, data=data, **compress_args)\r\n             for key, val in attrs.items():\r\n                 h5_file[group][name].attrs[key] = val\r\n \r\n@@ -264,7 +265,7 @@\r\n                 self.save_result(name, value[0], **kwargs)\r\n                 self.save_result('u_' + name, value[1], **kwargs)\r\n \r\n-    def save_result_arrays(self, *args):\r\n+    def save_result_arrays(self, *args, **compress_args):\r\n         names = args[::2]\r\n         values = args[1::2]\r\n         for name, value in zip(names, values):\r\n@@ -268,7 +269,7 @@\r\n         names = args[::2]\r\n         values = args[1::2]\r\n         for name, value in zip(names, values):\r\n-            self.save_result_array(name, value)\r\n+            self.save_result_array(name, value, **compress_args)\r\n     \r\n     def get_image(self,orientation,label,image):\r\n         with h5py.File(self.h5_path) as h5_file:\r\n\r\n```", "markup": "markdown", "html": "<p>We've recently had an experiment get up to speed and start producing a prodigious amount of data. In researching how to deal with it, I stumbled on to hdf5 dataset compression. It gives a performance hit to read/writes for moderate size reductions while being essentially transparent in use, so long as the compression is specified when the dataset is first created. </p>\n<p>It would be nice if large, summary datasets produced in lyse could be stored compressed from the outset. Because of performance considerations, we don't want it to be default, so it should be configurable on individual data saves as well.</p>\n<p>My initial thought was to simply pass through kwargs to the create_dataset function in both save_result_arrays and save_result_array. Thoughts?</p>\n<div class=\"codehilite language-diff\"><pre><span></span><span class=\"gu\">@@ -209,7 +209,8 @@</span>\n                 _updated_data[self.h5_path] = {}\n             _updated_data[self.h5_path][str(self.group), name] = value\n\n<span class=\"gd\">-    def save_result_array(self, name, data, group=None, overwrite=True, keep_attrs=False):</span>\n<span class=\"gi\">+    def save_result_array(self, name, data, group=None, </span>\n<span class=\"gi\">+                          overwrite=True, keep_attrs=False, **compress_args):</span>\n         if self.no_write:\n             raise Exception(&#39;This run is read-only. &#39;\n                             &#39;You can\\&#39;t save results to runs through a &#39;\n<span class=\"gu\">@@ -233,7 +234,7 @@</span>\n                 else:\n                     raise Exception(&#39;Dataset %s exists. Use overwrite=True to overwrite.&#39; % \n                                      group + &#39;/&#39; + name)\n<span class=\"gd\">-            h5_file[group].create_dataset(name, data=data)</span>\n<span class=\"gi\">+            h5_file[group].create_dataset(name, data=data, **compress_args)</span>\n             for key, val in attrs.items():\n                 h5_file[group][name].attrs[key] = val\n\n<span class=\"gu\">@@ -264,7 +265,7 @@</span>\n                 self.save_result(name, value[0], **kwargs)\n                 self.save_result(&#39;u_&#39; + name, value[1], **kwargs)\n\n<span class=\"gd\">-    def save_result_arrays(self, *args):</span>\n<span class=\"gi\">+    def save_result_arrays(self, *args, **compress_args):</span>\n         names = args[::2]\n         values = args[1::2]\n         for name, value in zip(names, values):\n<span class=\"gu\">@@ -268,7 +269,7 @@</span>\n         names = args[::2]\n         values = args[1::2]\n         for name, value in zip(names, values):\n<span class=\"gd\">-            self.save_result_array(name, value)</span>\n<span class=\"gi\">+            self.save_result_array(name, value, **compress_args)</span>\n\n     def get_image(self,orientation,label,image):\n         with h5py.File(self.h5_path) as h5_file:\n</pre></div>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2018-11-13T20:42:58.483369+00:00", "milestone": null, "updated_on": "2018-11-13T20:42:58.483369+00:00", "type": "issue", "id": 44}, {"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/45/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/45.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/45/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/45/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/45/dataframe-stopped-updating-after-multishot"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/45/vote"}}, "reporter": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "title": "Dataframe stopped updating after multishot routine error", "component": null, "votes": 0, "watches": 2, "content": {"raw": "I'm not sure how to reproduce this, however I just encountered a situation where single shot routines were saving new results to the HDF5 files, but the dataframe in lyse was not updating.\r\n\r\nAfter a multishot routine had encountered an error, the analysis queue was paused, and the remaining experiments in my sequence came through and were waiting to be analysed. When I unpaused the queue, they were analysed, however the values in the main lyse table did not update, and multishot routines could not access them.\r\n\r\nTo resolve the issue, I deleted one of the files, and re-added it to lyse (at which point it had the values displayed correctly without having to run the analysis again). After this, running the analysis routines on the remaining shots that had not updated seemed to work.", "markup": "markdown", "html": "<p>I'm not sure how to reproduce this, however I just encountered a situation where single shot routines were saving new results to the HDF5 files, but the dataframe in lyse was not updating.</p>\n<p>After a multishot routine had encountered an error, the analysis queue was paused, and the remaining experiments in my sequence came through and were waiting to be analysed. When I unpaused the queue, they were analysed, however the values in the main lyse table did not update, and multishot routines could not access them.</p>\n<p>To resolve the issue, I deleted one of the files, and re-added it to lyse (at which point it had the values displayed correctly without having to run the analysis again). After this, running the analysis routines on the remaining shots that had not updated seemed to work.</p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2018-11-26T06:06:52.048645+00:00", "milestone": null, "updated_on": "2019-12-10T18:27:27.047644+00:00", "type": "issue", "id": 45}, {"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/46/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/46.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/46/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/46/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/46/text-of-row-header-is-truncated"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/46/vote"}}, "reporter": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "title": "Text of row header is truncated", "component": null, "votes": 0, "watches": 1, "content": {"raw": "The vertical (row) header values are truncated, with either `integer_indexing = False` (default) or `True` in labconfig (see attachments). In the latter, only the last digit of the zero-padded run repeat integer is missing. I think the relevant setting for this element sizing is [here](#!/labscript_suite/lyse/src/11054910f9b22649d6a6ef28b964a40c5c9e7d88/__main__.py?at=default&fileviewer=file-view-default#__main__.py-1171), i.e.\r\n```setSectionResizeMode(QtWidgets.QHeaderView.Fixed)```. I've tried changing `Fixed` to `ResizeToContents` and `Interactive`, but these appear to not be honoured. For example, when using `Interactive`, adjustment of the vertical header width is possible _before_ adding any shots to lyse, but disappears once shots are added. Maybe use `setMinimumWidth` for the vertical header?", "markup": "markdown", "html": "<p>The vertical (row) header values are truncated, with either <code>integer_indexing = False</code> (default) or <code>True</code> in labconfig (see attachments). In the latter, only the last digit of the zero-padded run repeat integer is missing. I think the relevant setting for this element sizing is <a data-is-external-link=\"true\" href=\"#!/labscript_suite/lyse/src/11054910f9b22649d6a6ef28b964a40c5c9e7d88/__main__.py?at=default&amp;fileviewer=file-view-default#__main__.py-1171\" rel=\"nofollow\">here</a>, i.e.\n<code>setSectionResizeMode(QtWidgets.QHeaderView.Fixed)</code>. I've tried changing <code>Fixed</code> to <code>ResizeToContents</code> and <code>Interactive</code>, but these appear to not be honoured. For example, when using <code>Interactive</code>, adjustment of the vertical header width is possible <em>before</em> adding any shots to lyse, but disappears once shots are added. Maybe use <code>setMinimumWidth</code> for the vertical header?</p>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2019-04-23T06:47:02.454156+00:00", "milestone": null, "updated_on": "2019-04-23T22:50:21.560585+00:00", "type": "issue", "id": 46}, {"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/47/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/47.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/47/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/47/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/47/unhandled-exception-when-adding-shots"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/47/vote"}}, "reporter": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "title": "Unhandled exception when adding shots without a sequence_index", "component": null, "votes": 0, "watches": 1, "content": {"raw": "When using `integer_indexing = True` in labconfig, we try to catch a missing `sequence_index` with `KeyError` or `ValueError`, but these do not apply, since the value is already set to `None` in [dataframe_utilities.py](#!/labscript_suite/lyse/src/96b98428ad8942296005ea52abf58a201a6e3b2d/dataframe_utilities.py?at=default&fileviewer=file-view-default#dataframe_utilities.py-62). The attempt to format the [`header_strings`](#!/labscript_suite/lyse/src/96b98428ad8942296005ea52abf58a201a6e3b2d/__main__.py?at=default&fileviewer=file-view-default#__main__.py-1514) fails with `TypeError`.", "markup": "markdown", "html": "<p>When using <code>integer_indexing = True</code> in labconfig, we try to catch a missing <code>sequence_index</code> with <code>KeyError</code> or <code>ValueError</code>, but these do not apply, since the value is already set to <code>None</code> in <a data-is-external-link=\"true\" href=\"#!/labscript_suite/lyse/src/96b98428ad8942296005ea52abf58a201a6e3b2d/dataframe_utilities.py?at=default&amp;fileviewer=file-view-default#dataframe_utilities.py-62\" rel=\"nofollow\">dataframe_utilities.py</a>. The attempt to format the <a data-is-external-link=\"true\" href=\"#!/labscript_suite/lyse/src/96b98428ad8942296005ea52abf58a201a6e3b2d/__main__.py?at=default&amp;fileviewer=file-view-default#__main__.py-1514\" rel=\"nofollow\"><code>header_strings</code></a> fails with <code>TypeError</code>.</p>", "type": "rendered"}, "assignee": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2019-04-24T00:42:22.429690+00:00", "milestone": null, "updated_on": "2019-04-24T15:26:21.470738+00:00", "type": "issue", "id": 47}, {"priority": "critical", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/48/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/48.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/48/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/48/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/48/unable-to-fork-a-process-from-a-lyse"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/48/vote"}}, "reporter": {"display_name": "Lincoln Turner", "uuid": "{dc6eefbb-6560-488e-bd24-b7cabe6e3fb2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bdc6eefbb-6560-488e-bd24-b7cabe6e3fb2%7D"}, "html": {"href": "https://bitbucket.org/%7Bdc6eefbb-6560-488e-bd24-b7cabe6e3fb2%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/26c040adc170a4ec90cd9bc4f7ab0479d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsLT-2.png"}}, "nickname": "lincolnturner_monash", "type": "user", "account_id": "5ba47327653ec8726d2a0087"}, "title": "Unable to fork a process from a lyse script with multiprocessing", "component": null, "votes": 1, "watches": 4, "content": {"raw": "I am unable to fork a a process from a lyse script with the multiprocessing module and encounter a PicklingError. The same script runs without error in a console outside of lyse.\r\n\r\nThe following code in script.py:\r\n\r\n`import multiprocessing`  \r\n`import lyse`\r\n\r\n`def farm():`  \r\n`    print('Print something')`  \r\n`if __name__ == __'main'__:`  \r\n`    sml= multiprocessing.Process(target=farm)`  \r\n`    sml.start()`\r\n\r\n\u200c\r\n\r\nReturns the following error:\r\n\r\n`Traceback (most recent call last):`\r\n\r\n`File \"script.py\", line 8, in <module>`\r\n\r\n`sml.start()`\r\n\r\n`File \"C:\\Program Files\\Anaconda3\\envs\\python37\\lib\\multiprocessing\\process.py\", line 112, in start`\r\n\r\n`self._popen = self._Popen(self)`\r\n\r\n`File \"C:\\Program Files\\Anaconda3\\envs\\python37\\lib\\multiprocessing\\context.py\", line 223, in _Popen`\r\n\r\n`return _default_context.get_context().Process._Popen(process_obj)`\r\n\r\n`File \"C:\\Program Files\\Anaconda3\\envs\\python37\\lib\\multiprocessing\\context.py\", line 322, in _Popen`\r\n\r\n`return Popen(process_obj)`\r\n\r\n`File \"C:\\Program Files\\Anaconda3\\envs\\python37\\lib\\multiprocessing\\popen_spawn_win32.py\", line 65, in __init__`\r\n\r\n`reduction.dump(process_obj, to_child)`\r\n\r\n`File \"C:\\Program Files\\Anaconda3\\envs\\python37\\lib\\multiprocessing\\reduction.py\", line 60, in dump`\r\n\r\n`ForkingPickler(file, protocol).dump(obj)`\r\n\r\n`_pickle.PicklingError: Can't pickle <function farm at 0x0000000009C989D8>: attribute lookup farm on __main__ failed`\r\n\r\n  \r\n\r\n`Traceback (most recent call last):`\r\n\r\n`File \"<string>\", line 1, in <module>`\r\n\r\n`File \"C:\\Program Files\\Anaconda3\\envs\\python37\\lib\\multiprocessing\\spawn.py\", line 105, in spawn_main`\r\n\r\n`exitcode = _main(fd)`\r\n\r\n`File \"C:\\Program Files\\Anaconda3\\envs\\python37\\lib\\multiprocessing\\spawn.py\", line 115, in _main`\r\n\r\n`self = reduction.pickle.load(from_parent)`\r\n\r\n`EOFError: Ran out of input`", "markup": "markdown", "html": "<p>I am unable to fork a a process from a lyse script with the multiprocessing module and encounter a PicklingError. The same script runs without error in a console outside of lyse.</p>\n<p>The following code in script.py:</p>\n<p><code>import multiprocessing</code><br />\n<code>import lyse</code></p>\n<p><code>def farm():</code><br />\n<code>print('Print something')</code><br />\n<code>if __name__ == __'main'__:</code><br />\n<code>sml= multiprocessing.Process(target=farm)</code><br />\n<code>sml.start()</code></p>\n<p>\u200c</p>\n<p>Returns the following error:</p>\n<p><code>Traceback (most recent call last):</code></p>\n<p><code>File \"script.py\", line 8, in &lt;module&gt;</code></p>\n<p><code>sml.start()</code></p>\n<p><code>File \"C:\\Program Files\\Anaconda3\\envs\\python37\\lib\\multiprocessing\\process.py\", line 112, in start</code></p>\n<p><code>self._popen = self._Popen(self)</code></p>\n<p><code>File \"C:\\Program Files\\Anaconda3\\envs\\python37\\lib\\multiprocessing\\context.py\", line 223, in _Popen</code></p>\n<p><code>return _default_context.get_context().Process._Popen(process_obj)</code></p>\n<p><code>File \"C:\\Program Files\\Anaconda3\\envs\\python37\\lib\\multiprocessing\\context.py\", line 322, in _Popen</code></p>\n<p><code>return Popen(process_obj)</code></p>\n<p><code>File \"C:\\Program Files\\Anaconda3\\envs\\python37\\lib\\multiprocessing\\popen_spawn_win32.py\", line 65, in __init__</code></p>\n<p><code>reduction.dump(process_obj, to_child)</code></p>\n<p><code>File \"C:\\Program Files\\Anaconda3\\envs\\python37\\lib\\multiprocessing\\reduction.py\", line 60, in dump</code></p>\n<p><code>ForkingPickler(file, protocol).dump(obj)</code></p>\n<p><code>_pickle.PicklingError: Can't pickle &lt;function farm at 0x0000000009C989D8&gt;: attribute lookup farm on __main__ failed</code></p>\n<p><code>Traceback (most recent call last):</code></p>\n<p><code>File \"&lt;string&gt;\", line 1, in &lt;module&gt;</code></p>\n<p><code>File \"C:\\Program Files\\Anaconda3\\envs\\python37\\lib\\multiprocessing\\spawn.py\", line 105, in spawn_main</code></p>\n<p><code>exitcode = _main(fd)</code></p>\n<p><code>File \"C:\\Program Files\\Anaconda3\\envs\\python37\\lib\\multiprocessing\\spawn.py\", line 115, in _main</code></p>\n<p><code>self = reduction.pickle.load(from_parent)</code></p>\n<p><code>EOFError: Ran out of input</code></p>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2019-05-01T00:54:41.897141+00:00", "milestone": null, "updated_on": "2019-05-06T17:58:32.000497+00:00", "type": "issue", "id": 48}, {"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/49/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/49.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/49/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/49/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/49/subprocess-deadlock-with-multiple-threads"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/49/vote"}}, "reporter": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "title": "Subprocess deadlock with multiple threads", "component": null, "votes": 0, "watches": 1, "content": {"raw": "I'm ocassionally seeing the [analysislib-mloop](https://bitbucket.org/rpanderson/analysislib-mloop/) analysis subprocess hanging when communicating with runmanager. It's not spinning the CPU, it doesn't raise an exception, it's just hanging, so it looks like a deadlock. If I add printlines around the zeromq calls to communicate with runmanager, it's clear that the code is either hanging in the zmq poll call to hear back from runmanager, or it's hanging in the subsequent print statement. I suspect the print statement, because if I disable output redirection for lyse routines (and look at my printlines in the terminal instead), then I don't see the hang.\r\n\r\nIt doesn't have anything to do with the deadlock in [labscript_utils PR 84](#!/labscript_suite/labscript_utils/pull-requests/84/), because I observe it without that PR merged in.\r\n\r\nI have only observed it when using the Gaussian process MLOOP controller. Since I doubt it has to do with the actual optimisation algorithm, this is probably because the Gaussian process is more computationally intensive, so this affects timing.\r\n\r\nI am guessing the output redirection isn't as threadsafe as I thought it was. Threads are sharing a zeromq socket, though they serialise access to it with a lock. Nonetheless perhaps this is not enough.\r\n\r\nWill pull out a debugger to inspect the Python process whilst hanging to see where it's at.", "markup": "markdown", "html": "<p>I'm ocassionally seeing the <a data-is-external-link=\"true\" href=\"https://bitbucket.org/rpanderson/analysislib-mloop/\" rel=\"nofollow\">analysislib-mloop</a> analysis subprocess hanging when communicating with runmanager. It's not spinning the CPU, it doesn't raise an exception, it's just hanging, so it looks like a deadlock. If I add printlines around the zeromq calls to communicate with runmanager, it's clear that the code is either hanging in the zmq poll call to hear back from runmanager, or it's hanging in the subsequent print statement. I suspect the print statement, because if I disable output redirection for lyse routines (and look at my printlines in the terminal instead), then I don't see the hang.</p>\n<p>It doesn't have anything to do with the deadlock in <a data-is-external-link=\"true\" href=\"#!/labscript_suite/labscript_utils/pull-requests/84/\" rel=\"nofollow\">labscript_utils PR 84</a>, because I observe it without that PR merged in.</p>\n<p>I have only observed it when using the Gaussian process MLOOP controller. Since I doubt it has to do with the actual optimisation algorithm, this is probably because the Gaussian process is more computationally intensive, so this affects timing.</p>\n<p>I am guessing the output redirection isn't as threadsafe as I thought it was. Threads are sharing a zeromq socket, though they serialise access to it with a lock. Nonetheless perhaps this is not enough.</p>\n<p>Will pull out a debugger to inspect the Python process whilst hanging to see where it's at.</p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2019-06-05T22:51:39.707854+00:00", "milestone": null, "updated_on": "2019-06-09T16:37:11.926023+00:00", "type": "issue", "id": 49}, {"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/50/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/50.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/50/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/50/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/50/close-button-ignored-if-only-clicked-once"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/50/vote"}}, "reporter": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "title": "Close button ignored if only clicked once", "component": null, "votes": 0, "watches": 1, "content": {"raw": "I'm seeing that if lyse is started fresh with no analysis routines loaded, and one clicks close, lyse does not close until the close button is clicked a second time.\r\n\r\nThis is almost certainly a bug with the change made not long ago that attempts to wait until subprocesses have cleanly exited before closing lyse. Obviously if there are no subprocesses to exit it should close right away but it is not for some reason.", "markup": "markdown", "html": "<p>I'm seeing that if lyse is started fresh with no analysis routines loaded, and one clicks close, lyse does not close until the close button is clicked a second time.</p>\n<p>This is almost certainly a bug with the change made not long ago that attempts to wait until subprocesses have cleanly exited before closing lyse. Obviously if there are no subprocesses to exit it should close right away but it is not for some reason.</p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2019-08-06T15:05:12.474854+00:00", "milestone": null, "updated_on": "2019-08-12T16:09:18.913679+00:00", "type": "issue", "id": 50}, {"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/51/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/51.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/51/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/51/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/51/get_image_attributes-not-working"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/51/vote"}}, "reporter": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "title": "get_image_attributes not working", "component": null, "votes": 0, "watches": 1, "content": {"raw": "Bug with `get_image_attributes` following `serialised_attributes` PR. Call to `get_attributes` should be passed h5 group, but instead uses h5 group attributes.", "markup": "markdown", "html": "<p>Bug with <code>get_image_attributes</code> following <code>serialised_attributes</code> PR. Call to <code>get_attributes</code> should be passed h5 group, but instead uses h5 group attributes.</p>", "type": "rendered"}, "assignee": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2019-08-13T14:35:45.651614+00:00", "milestone": null, "updated_on": "2019-08-13T14:39:38.978870+00:00", "type": "issue", "id": 51}, {"priority": "critical", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/52/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/52.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/52/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/52/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/52/dfconvert_objects-removed-from-pandas"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/52/vote"}}, "reporter": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "title": "df.convert_objects removed from pandas", "component": null, "votes": 0, "watches": 1, "content": {"raw": "pandas 0.25 has dropped `DataFrame.convert_obects()`, resulting in an exception from the server when getting the dataframe using `lyse.data()`.\r\n\r\n```python\r\nAttributeError: 'DataFrame' object has no attribute 'convert objects'\r\n```\r\n\r\nDiscussion about the deprecation and removal here:\r\n\r\nhttps://github.com/pandas-dev/pandas/issues/11221\r\n\r\nAs a reminder, we're using this function to convert columns of the dataframe from Python objects into numpy/pandas dtypes where possible, which makes the dataframe faster to pickle and send over the wire.\r\n\r\nWe'll need to decide on what to do. It is possible that the performance reason for doing `convert_objects()` may no longer be as important as performance in other relevant components may have improved, though it is still a semantic change to be returning dataframes where the numpy arrays pulled out of them are of dtype `object` containing Python floats instead of being dtype `float` as expected.\r\n\r\nIt seems like the alternatives to `convert_objects` may require explicitly saying the type of each column, which would be super annoying. But I'll look into it and see if we can replicate the current behaviour using the alternatives.", "markup": "markdown", "html": "<p>pandas 0.25 has dropped <code>DataFrame.convert_obects()</code>, resulting in an exception from the server when getting the dataframe using <code>lyse.data()</code>.</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"ne\">AttributeError</span><span class=\"p\">:</span> <span class=\"s1\">&#39;DataFrame&#39;</span> <span class=\"nb\">object</span> <span class=\"n\">has</span> <span class=\"n\">no</span> <span class=\"n\">attribute</span> <span class=\"s1\">&#39;convert objects&#39;</span>\n</pre></div>\n\n\n<p>Discussion about the deprecation and removal here:</p>\n<p><a href=\"https://github.com/pandas-dev/pandas/issues/11221\" rel=\"nofollow\" class=\"ap-connect-link\">https://github.com/pandas-dev/pandas/issues/11221</a></p>\n<p>As a reminder, we're using this function to convert columns of the dataframe from Python objects into numpy/pandas dtypes where possible, which makes the dataframe faster to pickle and send over the wire.</p>\n<p>We'll need to decide on what to do. It is possible that the performance reason for doing <code>convert_objects()</code> may no longer be as important as performance in other relevant components may have improved, though it is still a semantic change to be returning dataframes where the numpy arrays pulled out of them are of dtype <code>object</code> containing Python floats instead of being dtype <code>float</code> as expected.</p>\n<p>It seems like the alternatives to <code>convert_objects</code> may require explicitly saying the type of each column, which would be super annoying. But I'll look into it and see if we can replicate the current behaviour using the alternatives.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2019-08-14T13:17:41.565906+00:00", "milestone": null, "updated_on": "2019-08-14T14:24:20.597385+00:00", "type": "issue", "id": 52}, {"priority": "trivial", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/53/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/53.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/53/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/53/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/53/runget_image-has-arguments-with-names-that"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/53/vote"}}, "reporter": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "title": "Run.get_image has arguments with names that differ from labscript args", "component": null, "votes": 0, "watches": 1, "content": {"raw": "Lyse's Run.get_image accepts 'label' and 'image' kwargs to specify the two possible levels of the hierarchy we use to store images. However, Camera.expose, IMAXdxCamera.expose etc call these 'name' and 'frametype'.\r\n\r\nThe lyse args should be changed to match the labscript ones with backward compatibility, something like:\r\n\r\n```python\r\ndef get_image(self, orientation, name=None, frametype=None, **kwargs):\r\n    name = kwargs.pop('image', name)\r\n    frametype = kwargs.pop('label', frametype)\r\n    if kwargs:\r\n        # raise an error saying remaining kwargs not allowed\r\n    if name is None or frametype is None:\r\n        # raise an error about this too, they are non-optional.\r\n        # Better yet, make 'frametype' optional with the default value\r\n        # matching that of the expose() method: frametype='frame'.\r\n        # name can't be optional though.\r\n    # rest of function here with renamed variables\r\n```", "markup": "markdown", "html": "<p>Lyse's Run.get_image accepts 'label' and 'image' kwargs to specify the two possible levels of the hierarchy we use to store images. However, Camera.expose, IMAXdxCamera.expose etc call these 'name' and 'frametype'.</p>\n<p>The lyse args should be changed to match the labscript ones with backward compatibility, something like:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"k\">def</span> <span class=\"nf\">get_image</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">orientation</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">,</span> <span class=\"n\">frametype</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n    <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"n\">kwargs</span><span class=\"o\">.</span><span class=\"n\">pop</span><span class=\"p\">(</span><span class=\"s1\">&#39;image&#39;</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"p\">)</span>\n    <span class=\"n\">frametype</span> <span class=\"o\">=</span> <span class=\"n\">kwargs</span><span class=\"o\">.</span><span class=\"n\">pop</span><span class=\"p\">(</span><span class=\"s1\">&#39;label&#39;</span><span class=\"p\">,</span> <span class=\"n\">frametype</span><span class=\"p\">)</span>\n    <span class=\"k\">if</span> <span class=\"n\">kwargs</span><span class=\"p\">:</span>\n        <span class=\"c1\"># raise an error saying remaining kwargs not allowed</span>\n    <span class=\"k\">if</span> <span class=\"n\">name</span> <span class=\"ow\">is</span> <span class=\"bp\">None</span> <span class=\"ow\">or</span> <span class=\"n\">frametype</span> <span class=\"ow\">is</span> <span class=\"bp\">None</span><span class=\"p\">:</span>\n        <span class=\"c1\"># raise an error about this too, they are non-optional.</span>\n        <span class=\"c1\"># Better yet, make &#39;frametype&#39; optional with the default value</span>\n        <span class=\"c1\"># matching that of the expose() method: frametype=&#39;frame&#39;.</span>\n        <span class=\"c1\"># name can&#39;t be optional though.</span>\n    <span class=\"c1\"># rest of function here with renamed variables</span>\n</pre></div>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "new", "version": null, "edited_on": null, "created_on": "2019-08-17T17:27:08.307680+00:00", "milestone": null, "updated_on": "2019-08-17T17:28:07.978822+00:00", "type": "issue", "id": 53}, {"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/lyse/issues/54/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/issues/54.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/54/watch"}, "comments": {"href": "data/repositories/labscript_suite/lyse/issues/54/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/lyse/issues/54/error-on-repaint-when-singleshot-analysis"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/issues/54/vote"}}, "reporter": {"display_name": "Philip Starkey", "uuid": "{0147401a-13ed-4e39-a0d0-63108c18738b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D"}, "html": {"href": "https://bitbucket.org/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/fa0698c306b3470c00717c146b5296e9d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "philipstarkey", "type": "user", "account_id": "557058:2f99420c-1dbd-4837-952c-82c421b8fbdd"}, "title": "Error on repaint when singleshot analysis script crashed", "component": null, "votes": 0, "watches": 2, "content": {"raw": "I had a single shot analysis script crash today \\(it was the first one in the list to run on a shot\\) and the following traceback popped up repeatedly until I closed lyse:\r\n\r\n> lyse/\\_\\_main\\_\\_.y line 1091 in paint\r\n>\r\n>  progress\\_bar\\_option.progress=status\\_percent\r\n>\r\n> TypeError: an integer is required \\(got type NoneType\\)\r\n\r\n\\(approximate text only, I was connected over VNC and couldn\u2019t copy/paste the error\\)\r\n\r\nRunning the latest \\(tip\\) version of lyse.\r\n\r\n\u200c", "markup": "markdown", "html": "<p>I had a single shot analysis script crash today (it was the first one in the list to run on a shot) and the following traceback popped up repeatedly until I closed lyse:</p>\n<blockquote>\n<p>lyse/__main__.y line 1091 in paint</p>\n<p>progress_bar_option.progress=status_percent</p>\n<p>TypeError: an integer is required (got type NoneType)</p>\n</blockquote>\n<p>(approximate text only, I was connected over VNC and couldn\u2019t copy/paste the error)</p>\n<p>Running the latest (tip) version of lyse.</p>\n<p>\u200c</p>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2019-12-16T07:45:28.558263+00:00", "milestone": null, "updated_on": "2019-12-16T09:24:25.045364+00:00", "type": "issue", "id": 54}], "page": 1, "size": 54}