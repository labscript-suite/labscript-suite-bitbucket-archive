{"rendered": {"description": {"raw": "Whenever lyse tries to read a HDF5 file that has been deleted, it\r\npreviously would crash. Now, the shot's row\r\nin the filebox is marked with an icon showing it as deleted off disk\r\nand a warning is printed. No more singleshot analysis will be run on that shot\r\nfile, but its data will be kept in the dataframe until the user removes it\r\nfrom the filebox, and thus still be available for multishot analysis.\r\n\r\nThe use case for this is when an experiment is cycling just to 'keep warm' or\r\nwhatever, and shots are being deleted so as not to consume hard drive space.\r\n\r\nI removed some of the unused optional ways of calling some of lyse's\r\ninternal methods so as to decrease the number of places where\r\nlyse reads a HDF5 file. Previously multiple code paths were allowed - one\r\nwhich was a bit cleaner (reading HDF5 files at the last minute)\r\n and one which was a performance optimisation (read them in advance, outside the\r\n GUI thread, and pass the results to the GUI-related methods). Now only\r\nthe performant way of calling these methods is allowed - which is what all\r\nthe calling code was using anyway.\r\n\r\n![lyse_screenshot.png](data/bitbucket.org/repo/oEX56b/images/107755377-lyse_screenshot.png)", "markup": "markdown", "html": "<p>Whenever lyse tries to read a HDF5 file that has been deleted, it\npreviously would crash. Now, the shot's row\nin the filebox is marked with an icon showing it as deleted off disk\nand a warning is printed. No more singleshot analysis will be run on that shot\nfile, but its data will be kept in the dataframe until the user removes it\nfrom the filebox, and thus still be available for multishot analysis.</p>\n<p>The use case for this is when an experiment is cycling just to 'keep warm' or\nwhatever, and shots are being deleted so as not to consume hard drive space.</p>\n<p>I removed some of the unused optional ways of calling some of lyse's\ninternal methods so as to decrease the number of places where\nlyse reads a HDF5 file. Previously multiple code paths were allowed - one\nwhich was a bit cleaner (reading HDF5 files at the last minute)\n and one which was a performance optimisation (read them in advance, outside the\n GUI thread, and pass the results to the GUI-related methods). Now only\nthe performant way of calling these methods is allowed - which is what all\nthe calling code was using anyway.</p>\n<p><img alt=\"lyse_screenshot.png\" src=\"data/bitbucket.org/repo/oEX56b/images/107755377-lyse_screenshot.png\" /></p>", "type": "rendered"}, "title": {"raw": "Make lyse handle gracefully shot files that have been deleted off disk.", "markup": "markdown", "html": "<p>Make lyse handle gracefully shot files that have been deleted off disk.</p>", "type": "rendered"}}, "type": "pullrequest", "description": "Whenever lyse tries to read a HDF5 file that has been deleted, it\r\npreviously would crash. Now, the shot's row\r\nin the filebox is marked with an icon showing it as deleted off disk\r\nand a warning is printed. No more singleshot analysis will be run on that shot\r\nfile, but its data will be kept in the dataframe until the user removes it\r\nfrom the filebox, and thus still be available for multishot analysis.\r\n\r\nThe use case for this is when an experiment is cycling just to 'keep warm' or\r\nwhatever, and shots are being deleted so as not to consume hard drive space.\r\n\r\nI removed some of the unused optional ways of calling some of lyse's\r\ninternal methods so as to decrease the number of places where\r\nlyse reads a HDF5 file. Previously multiple code paths were allowed - one\r\nwhich was a bit cleaner (reading HDF5 files at the last minute)\r\n and one which was a performance optimisation (read them in advance, outside the\r\n GUI thread, and pass the results to the GUI-related methods). Now only\r\nthe performant way of calling these methods is allowed - which is what all\r\nthe calling code was using anyway.\r\n\r\n![lyse_screenshot.png](data/bitbucket.org/repo/oEX56b/images/107755377-lyse_screenshot.png)", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/pullrequests/10/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/diffstat/labscript_suite/lyse:9181f4c7d97e%0Df6184e67ecfb?from_pullrequest_id=10"}, "commits": {"href": "data/repositories/labscript_suite/lyse/pullrequests/10/commits.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/10.json"}, "comments": {"href": "data/repositories/labscript_suite/lyse/pullrequests/10/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/pullrequests/10/merge"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/10"}, "activity": {"href": "data/repositories/labscript_suite/lyse/pullrequests/10/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/diff/labscript_suite/lyse:9181f4c7d97e%0Df6184e67ecfb?from_pullrequest_id=10"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/pullrequests/10/approve"}, "statuses": {"href": "data/repositories/labscript_suite/lyse/pullrequests/10/statuses_page=1.json"}}, "title": "Make lyse handle gracefully shot files that have been deleted off disk.", "close_source_branch": true, "reviewers": [{"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}], "id": 10, "destination": {"commit": {"hash": "f6184e67ecfb", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/lyse/commit/f6184e67ecfb.json"}, "html": {"href": "#!/labscript_suite/lyse/commits/f6184e67ecfb"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "branch": {"name": "default"}}, "created_on": "2017-04-11T21:46:33.992301+00:00", "summary": {"raw": "Whenever lyse tries to read a HDF5 file that has been deleted, it\r\npreviously would crash. Now, the shot's row\r\nin the filebox is marked with an icon showing it as deleted off disk\r\nand a warning is printed. No more singleshot analysis will be run on that shot\r\nfile, but its data will be kept in the dataframe until the user removes it\r\nfrom the filebox, and thus still be available for multishot analysis.\r\n\r\nThe use case for this is when an experiment is cycling just to 'keep warm' or\r\nwhatever, and shots are being deleted so as not to consume hard drive space.\r\n\r\nI removed some of the unused optional ways of calling some of lyse's\r\ninternal methods so as to decrease the number of places where\r\nlyse reads a HDF5 file. Previously multiple code paths were allowed - one\r\nwhich was a bit cleaner (reading HDF5 files at the last minute)\r\n and one which was a performance optimisation (read them in advance, outside the\r\n GUI thread, and pass the results to the GUI-related methods). Now only\r\nthe performant way of calling these methods is allowed - which is what all\r\nthe calling code was using anyway.\r\n\r\n![lyse_screenshot.png](data/bitbucket.org/repo/oEX56b/images/107755377-lyse_screenshot.png)", "markup": "markdown", "html": "<p>Whenever lyse tries to read a HDF5 file that has been deleted, it\npreviously would crash. Now, the shot's row\nin the filebox is marked with an icon showing it as deleted off disk\nand a warning is printed. No more singleshot analysis will be run on that shot\nfile, but its data will be kept in the dataframe until the user removes it\nfrom the filebox, and thus still be available for multishot analysis.</p>\n<p>The use case for this is when an experiment is cycling just to 'keep warm' or\nwhatever, and shots are being deleted so as not to consume hard drive space.</p>\n<p>I removed some of the unused optional ways of calling some of lyse's\ninternal methods so as to decrease the number of places where\nlyse reads a HDF5 file. Previously multiple code paths were allowed - one\nwhich was a bit cleaner (reading HDF5 files at the last minute)\n and one which was a performance optimisation (read them in advance, outside the\n GUI thread, and pass the results to the GUI-related methods). Now only\nthe performant way of calling these methods is allowed - which is what all\nthe calling code was using anyway.</p>\n<p><img alt=\"lyse_screenshot.png\" src=\"data/bitbucket.org/repo/oEX56b/images/107755377-lyse_screenshot.png\" /></p>", "type": "rendered"}, "source": {"commit": {"hash": "0b35e6e97062", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/lyse/commit/0b35e6e97062"}, "html": {"href": "#!/cbillington/lyse/commits/0b35e6e97062"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/lyse"}, "html": {"href": "#!/cbillington/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{47c91022-279d-4058-88a8-959fe9ffb409}ts=python"}}, "type": "repository", "name": "lyse", "full_name": "cbillington/lyse", "uuid": "{47c91022-279d-4058-88a8-959fe9ffb409}"}, "branch": {"name": "feature"}}, "comment_count": 10, "state": "MERGED", "task_count": 0, "participants": [{"role": "REVIEWER", "participated_on": "2017-05-23T04:25:20.950554+00:00", "type": "participant", "approved": true, "user": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}}, {"role": "PARTICIPANT", "participated_on": "2017-05-23T00:50:55.310908+00:00", "type": "participant", "approved": false, "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}}, {"role": "REVIEWER", "participated_on": "2017-05-23T00:42:44.765873+00:00", "type": "participant", "approved": true, "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}}], "reason": "", "updated_on": "2017-05-26T17:28:53.699155+00:00", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "merge_commit": {"hash": "9181f4c7d97e", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/lyse/commit/9181f4c7d97e.json"}, "html": {"href": "#!/labscript_suite/lyse/commits/9181f4c7d97e"}}}, "closed_by": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}}