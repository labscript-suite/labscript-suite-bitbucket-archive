{"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/10/comments/37348855.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/10/_/diff#comment-37348855"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 10, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/10.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/10"}}, "title": "Make lyse handle gracefully shot files that have been deleted off disk."}, "content": {"raw": "No, there is no reason for that - that line was copied from elsewhere and you're right that it is not needed here - we don't need the row index. I've changed it to the more readable check.\n\nI've verified that deleted shots in the middle of the Dataframe are correctly detected as such.\n\nThere's nothing to check about what dataframe analysis scripts receive though, as detecting a shot as deleted does not modify the dataframe, it just marks those rows as not to be subject to singleshot analysis any more. One can still do multishot analysis including the data from deleted shots, and the rows in the dataframe won't be removed until you delete the FileBox entries for the shots as normal. This seems like good behaviour since you can run a shot on repeat all day, delete old shots and still get plots for how things varied over the day (here at NIST we have a feature in BLACS (which I'll be modifying a bit before making a pull request about) that will delete shots not immediately after they run, but some settable number of shots later. So we run in repeat mode with \"number of shots to keep on disk\" equal to 10 or something, meaning there's still time for single shot analysis to run on these shots before they are deleted). ", "markup": "markdown", "html": "<p>No, there is no reason for that - that line was copied from elsewhere and you're right that it is not needed here - we don't need the row index. I've changed it to the more readable check.</p>\n<p>I've verified that deleted shots in the middle of the Dataframe are correctly detected as such.</p>\n<p>There's nothing to check about what dataframe analysis scripts receive though, as detecting a shot as deleted does not modify the dataframe, it just marks those rows as not to be subject to singleshot analysis any more. One can still do multishot analysis including the data from deleted shots, and the rows in the dataframe won't be removed until you delete the FileBox entries for the shots as normal. This seems like good behaviour since you can run a shot on repeat all day, delete old shots and still get plots for how things varied over the day (here at NIST we have a feature in BLACS (which I'll be modifying a bit before making a pull request about) that will delete shots not immediately after they run, but some settable number of shots later. So we run in repeat mode with \"number of shots to keep on disk\" equal to 10 or something, meaning there's still time for single shot analysis to run on these shots before they are deleted). </p>", "type": "rendered"}, "created_on": "2017-05-22T15:16:05.819699+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-05-22T15:26:17.277002+00:00", "type": "pullrequest_comment", "id": 37348855}