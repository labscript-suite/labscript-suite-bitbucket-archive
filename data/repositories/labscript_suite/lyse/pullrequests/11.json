{"rendered": {"description": {"raw": "Presently the labscript suite uses a timestamp to identify sequences. The Spielman labs have introduced in addition to this a simple incrementing integer that counts from zero each day.\r\n\r\nThis pull request adds backward-compatible code to read in this `sequence_index` and put it in the dataframe in lyse, for those shots that have a `sequence_index`. `None` will be used for shots that do not have a `sequence_index` attribute.\r\n\r\nThis pull request as well as the pending \"lyse can deal with deleted shots better\" one represent convergence between the Spielman and main forks for lyse.\r\n\r\nMy plan at the moment is to modify runmanager to implement the `sequence_index` in a backward compatible way (which may already be the case for how it is implemented in the Spielman fork), so that both can coexist, and that the actual folder hierarchy that shot files get put in, and their filenames can be user configurable using something like a format string in the labconfig file - or just a setting to choose between two schemes. I think it is worth still demanding that the filenames uniquely identify the sequence and shot, which Spielman-fork-labscript doesn't currently enforce, so perhaps rather than an arbitrary format we can choose between:\r\n\r\n20170412T130554_test_0.h5\r\n\r\nand:\r\n\r\n2017-04-12_002_test_0.h5\r\n\r\n(where 002 is an example `sequence index`) so that filenames are still unique. In practice for me it's been quite nice having a single folder per sequence rather than dumping them all together, whether the filenames are unique or not. Anyway, as I said this should all be done in a backward compatible and configurable way that makes everybody happy, and can be debated in future pull requests for runmanager changes.\r\n\r\nIf these changes sound concerning, I think they shouldn't be - after giving it some thought I suspect I will be able to make everyone happy. At the very least things will be backward compatible and considered a bug if they're not.\r\n\r\nI've added everyone as reviewers not because I want them all to approve this (relatively tiny) change, but just so you get a notification and opportunity to chime in, because we don't really have a \"labscriptsuite-dev\" mailing list. I am considering either making one, or perhaps just starting to use the existing mailing list for development discussions. Let me know what you'd rather.", "markup": "markdown", "html": "<p>Presently the labscript suite uses a timestamp to identify sequences. The Spielman labs have introduced in addition to this a simple incrementing integer that counts from zero each day.</p>\n<p>This pull request adds backward-compatible code to read in this <code>sequence_index</code> and put it in the dataframe in lyse, for those shots that have a <code>sequence_index</code>. <code>None</code> will be used for shots that do not have a <code>sequence_index</code> attribute.</p>\n<p>This pull request as well as the pending \"lyse can deal with deleted shots better\" one represent convergence between the Spielman and main forks for lyse.</p>\n<p>My plan at the moment is to modify runmanager to implement the <code>sequence_index</code> in a backward compatible way (which may already be the case for how it is implemented in the Spielman fork), so that both can coexist, and that the actual folder hierarchy that shot files get put in, and their filenames can be user configurable using something like a format string in the labconfig file - or just a setting to choose between two schemes. I think it is worth still demanding that the filenames uniquely identify the sequence and shot, which Spielman-fork-labscript doesn't currently enforce, so perhaps rather than an arbitrary format we can choose between:</p>\n<p>20170412T130554_test_0.h5</p>\n<p>and:</p>\n<p>2017-04-12_002_test_0.h5</p>\n<p>(where 002 is an example <code>sequence index</code>) so that filenames are still unique. In practice for me it's been quite nice having a single folder per sequence rather than dumping them all together, whether the filenames are unique or not. Anyway, as I said this should all be done in a backward compatible and configurable way that makes everybody happy, and can be debated in future pull requests for runmanager changes.</p>\n<p>If these changes sound concerning, I think they shouldn't be - after giving it some thought I suspect I will be able to make everyone happy. At the very least things will be backward compatible and considered a bug if they're not.</p>\n<p>I've added everyone as reviewers not because I want them all to approve this (relatively tiny) change, but just so you get a notification and opportunity to chime in, because we don't really have a \"labscriptsuite-dev\" mailing list. I am considering either making one, or perhaps just starting to use the existing mailing list for development discussions. Let me know what you'd rather.</p>", "type": "rendered"}, "title": {"raw": "Read \"sequence_index\" attribute from shots that have it", "markup": "markdown", "html": "<p>Read \"sequence_index\" attribute from shots that have it</p>", "type": "rendered"}}, "type": "pullrequest", "description": "Presently the labscript suite uses a timestamp to identify sequences. The Spielman labs have introduced in addition to this a simple incrementing integer that counts from zero each day.\r\n\r\nThis pull request adds backward-compatible code to read in this `sequence_index` and put it in the dataframe in lyse, for those shots that have a `sequence_index`. `None` will be used for shots that do not have a `sequence_index` attribute.\r\n\r\nThis pull request as well as the pending \"lyse can deal with deleted shots better\" one represent convergence between the Spielman and main forks for lyse.\r\n\r\nMy plan at the moment is to modify runmanager to implement the `sequence_index` in a backward compatible way (which may already be the case for how it is implemented in the Spielman fork), so that both can coexist, and that the actual folder hierarchy that shot files get put in, and their filenames can be user configurable using something like a format string in the labconfig file - or just a setting to choose between two schemes. I think it is worth still demanding that the filenames uniquely identify the sequence and shot, which Spielman-fork-labscript doesn't currently enforce, so perhaps rather than an arbitrary format we can choose between:\r\n\r\n20170412T130554_test_0.h5\r\n\r\nand:\r\n\r\n2017-04-12_002_test_0.h5\r\n\r\n(where 002 is an example `sequence index`) so that filenames are still unique. In practice for me it's been quite nice having a single folder per sequence rather than dumping them all together, whether the filenames are unique or not. Anyway, as I said this should all be done in a backward compatible and configurable way that makes everybody happy, and can be debated in future pull requests for runmanager changes.\r\n\r\nIf these changes sound concerning, I think they shouldn't be - after giving it some thought I suspect I will be able to make everyone happy. At the very least things will be backward compatible and considered a bug if they're not.\r\n\r\nI've added everyone as reviewers not because I want them all to approve this (relatively tiny) change, but just so you get a notification and opportunity to chime in, because we don't really have a \"labscriptsuite-dev\" mailing list. I am considering either making one, or perhaps just starting to use the existing mailing list for development discussions. Let me know what you'd rather.", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/pullrequests/11/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/diffstat/labscript_suite/lyse:4f78edf03091%0D5399a71f9447?from_pullrequest_id=11"}, "commits": {"href": "data/repositories/labscript_suite/lyse/pullrequests/11/commits.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/11.json"}, "comments": {"href": "data/repositories/labscript_suite/lyse/pullrequests/11/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/pullrequests/11/merge"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/11"}, "activity": {"href": "data/repositories/labscript_suite/lyse/pullrequests/11/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/diff/labscript_suite/lyse:4f78edf03091%0D5399a71f9447?from_pullrequest_id=11"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/pullrequests/11/approve"}, "statuses": {"href": "data/repositories/labscript_suite/lyse/pullrequests/11/statuses_page=1.json"}}, "title": "Read \"sequence_index\" attribute from shots that have it", "close_source_branch": false, "reviewers": [{"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, {"display_name": "lincolnturner", "uuid": "{17b734ab-7ff3-441a-ae63-aafc4d9573fb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17b734ab-7ff3-441a-ae63-aafc4d9573fb%7D"}, "html": {"href": "https://bitbucket.org/%7B17b734ab-7ff3-441a-ae63-aafc4d9573fb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/ca7afdcd9ce2bb740c2c7217eb5d8cd1d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsL-2.png"}}, "nickname": "lincolnturner", "type": "user", "account_id": "557058:a6ab6195-bbc9-4661-8a18-d8033f67e903"}], "id": 11, "destination": {"commit": {"hash": "5399a71f9447", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/lyse/commit/5399a71f9447.json"}, "html": {"href": "#!/labscript_suite/lyse/commits/5399a71f9447"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "branch": {"name": "default"}}, "created_on": "2017-04-12T19:19:27.862796+00:00", "summary": {"raw": "Presently the labscript suite uses a timestamp to identify sequences. The Spielman labs have introduced in addition to this a simple incrementing integer that counts from zero each day.\r\n\r\nThis pull request adds backward-compatible code to read in this `sequence_index` and put it in the dataframe in lyse, for those shots that have a `sequence_index`. `None` will be used for shots that do not have a `sequence_index` attribute.\r\n\r\nThis pull request as well as the pending \"lyse can deal with deleted shots better\" one represent convergence between the Spielman and main forks for lyse.\r\n\r\nMy plan at the moment is to modify runmanager to implement the `sequence_index` in a backward compatible way (which may already be the case for how it is implemented in the Spielman fork), so that both can coexist, and that the actual folder hierarchy that shot files get put in, and their filenames can be user configurable using something like a format string in the labconfig file - or just a setting to choose between two schemes. I think it is worth still demanding that the filenames uniquely identify the sequence and shot, which Spielman-fork-labscript doesn't currently enforce, so perhaps rather than an arbitrary format we can choose between:\r\n\r\n20170412T130554_test_0.h5\r\n\r\nand:\r\n\r\n2017-04-12_002_test_0.h5\r\n\r\n(where 002 is an example `sequence index`) so that filenames are still unique. In practice for me it's been quite nice having a single folder per sequence rather than dumping them all together, whether the filenames are unique or not. Anyway, as I said this should all be done in a backward compatible and configurable way that makes everybody happy, and can be debated in future pull requests for runmanager changes.\r\n\r\nIf these changes sound concerning, I think they shouldn't be - after giving it some thought I suspect I will be able to make everyone happy. At the very least things will be backward compatible and considered a bug if they're not.\r\n\r\nI've added everyone as reviewers not because I want them all to approve this (relatively tiny) change, but just so you get a notification and opportunity to chime in, because we don't really have a \"labscriptsuite-dev\" mailing list. I am considering either making one, or perhaps just starting to use the existing mailing list for development discussions. Let me know what you'd rather.", "markup": "markdown", "html": "<p>Presently the labscript suite uses a timestamp to identify sequences. The Spielman labs have introduced in addition to this a simple incrementing integer that counts from zero each day.</p>\n<p>This pull request adds backward-compatible code to read in this <code>sequence_index</code> and put it in the dataframe in lyse, for those shots that have a <code>sequence_index</code>. <code>None</code> will be used for shots that do not have a <code>sequence_index</code> attribute.</p>\n<p>This pull request as well as the pending \"lyse can deal with deleted shots better\" one represent convergence between the Spielman and main forks for lyse.</p>\n<p>My plan at the moment is to modify runmanager to implement the <code>sequence_index</code> in a backward compatible way (which may already be the case for how it is implemented in the Spielman fork), so that both can coexist, and that the actual folder hierarchy that shot files get put in, and their filenames can be user configurable using something like a format string in the labconfig file - or just a setting to choose between two schemes. I think it is worth still demanding that the filenames uniquely identify the sequence and shot, which Spielman-fork-labscript doesn't currently enforce, so perhaps rather than an arbitrary format we can choose between:</p>\n<p>20170412T130554_test_0.h5</p>\n<p>and:</p>\n<p>2017-04-12_002_test_0.h5</p>\n<p>(where 002 is an example <code>sequence index</code>) so that filenames are still unique. In practice for me it's been quite nice having a single folder per sequence rather than dumping them all together, whether the filenames are unique or not. Anyway, as I said this should all be done in a backward compatible and configurable way that makes everybody happy, and can be debated in future pull requests for runmanager changes.</p>\n<p>If these changes sound concerning, I think they shouldn't be - after giving it some thought I suspect I will be able to make everyone happy. At the very least things will be backward compatible and considered a bug if they're not.</p>\n<p>I've added everyone as reviewers not because I want them all to approve this (relatively tiny) change, but just so you get a notification and opportunity to chime in, because we don't really have a \"labscriptsuite-dev\" mailing list. I am considering either making one, or perhaps just starting to use the existing mailing list for development discussions. Let me know what you'd rather.</p>", "type": "rendered"}, "source": {"commit": {"hash": "1cd498affc6e", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/lyse/commit/1cd498affc6e"}, "html": {"href": "#!/cbillington/lyse/commits/1cd498affc6e"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/lyse"}, "html": {"href": "#!/cbillington/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{47c91022-279d-4058-88a8-959fe9ffb409}ts=python"}}, "type": "repository", "name": "lyse", "full_name": "cbillington/lyse", "uuid": "{47c91022-279d-4058-88a8-959fe9ffb409}"}, "branch": {"name": "feature2"}}, "comment_count": 4, "state": "MERGED", "task_count": 0, "participants": [{"role": "PARTICIPANT", "participated_on": "2017-06-06T18:27:18.954573+00:00", "type": "participant", "approved": false, "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}}, {"role": "REVIEWER", "participated_on": null, "type": "participant", "approved": false, "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}}, {"role": "REVIEWER", "participated_on": null, "type": "participant", "approved": false, "user": {"display_name": "lincolnturner", "uuid": "{17b734ab-7ff3-441a-ae63-aafc4d9573fb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17b734ab-7ff3-441a-ae63-aafc4d9573fb%7D"}, "html": {"href": "https://bitbucket.org/%7B17b734ab-7ff3-441a-ae63-aafc4d9573fb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/ca7afdcd9ce2bb740c2c7217eb5d8cd1d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsL-2.png"}}, "nickname": "lincolnturner", "type": "user", "account_id": "557058:a6ab6195-bbc9-4661-8a18-d8033f67e903"}}, {"role": "REVIEWER", "participated_on": null, "type": "participant", "approved": false, "user": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}}, {"role": "REVIEWER", "participated_on": "2017-06-19T00:44:11.149690+00:00", "type": "participant", "approved": true, "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}}], "reason": "", "updated_on": "2017-06-19T00:44:22.178998+00:00", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "merge_commit": {"hash": "4f78edf03091", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/lyse/commit/4f78edf03091.json"}, "html": {"href": "#!/labscript_suite/lyse/commits/4f78edf03091"}}}, "closed_by": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}}