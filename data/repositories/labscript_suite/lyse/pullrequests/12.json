{"rendered": {"description": {"raw": "Added \"copy to clipboard\" functionality for plots. An image can be copied to\r\nthe clipboard by clicking a button in the plot window's toolbar, or by ctrl-c/cmd-c when\r\nthe plot window has focus.\r\n\r\nCopying can also be done programatically like:\r\n\r\n        lyse.figure_to_clipboard(fig)\r\n\r\nThe copying is implemented by calling `savefig()` on the matplotlib figure object, then launching a subprocess that reads the resulting image file, puts it on the clipboard and then remains running until the clipboard is overwritten. This is necessary on some systems - most linux systems don't actually store copied data that is over a certain size, they wait until it is pasted before getting it from the memory of the source, so that program has to still be running or you lose your copied data. I've read this may or may not be the case sometimes on Windows or osx. Anyway the subprocess keeps the use of Qt separate from that of the main program, when not keeping it separate I also had strange behaviour like a 10 second hang at program shutdown (possibly Qt asking the window manager \"pretty please store my copy buffer, I'm about to close\" and the window manager just ignoring it until timeout).\r\n\r\nI originally envisioned having a way to programatically add text to the copy buffer so that the text and plot image would be copied together for pasting into a lab logbook, but this has turned out to be much more complex. I tested a few programs that allow you to copy text and images, and while they always work with themselves, interoperability is patchy.\r\n\r\nSince I'm using Qt to interact with the clipboard, and Qt does support putting arbitrary mime types on the clipboard, if we can figure out which mime type has the best interoperability for programs people are likely to be pasting into, then I can add this functionality later.", "markup": "markdown", "html": "<p>Added \"copy to clipboard\" functionality for plots. An image can be copied to\nthe clipboard by clicking a button in the plot window's toolbar, or by ctrl-c/cmd-c when\nthe plot window has focus.</p>\n<p>Copying can also be done programatically like:</p>\n<div class=\"codehilite\"><pre><span></span>    lyse.figure_to_clipboard(fig)\n</pre></div>\n\n\n<p>The copying is implemented by calling <code>savefig()</code> on the matplotlib figure object, then launching a subprocess that reads the resulting image file, puts it on the clipboard and then remains running until the clipboard is overwritten. This is necessary on some systems - most linux systems don't actually store copied data that is over a certain size, they wait until it is pasted before getting it from the memory of the source, so that program has to still be running or you lose your copied data. I've read this may or may not be the case sometimes on Windows or osx. Anyway the subprocess keeps the use of Qt separate from that of the main program, when not keeping it separate I also had strange behaviour like a 10 second hang at program shutdown (possibly Qt asking the window manager \"pretty please store my copy buffer, I'm about to close\" and the window manager just ignoring it until timeout).</p>\n<p>I originally envisioned having a way to programatically add text to the copy buffer so that the text and plot image would be copied together for pasting into a lab logbook, but this has turned out to be much more complex. I tested a few programs that allow you to copy text and images, and while they always work with themselves, interoperability is patchy.</p>\n<p>Since I'm using Qt to interact with the clipboard, and Qt does support putting arbitrary mime types on the clipboard, if we can figure out which mime type has the best interoperability for programs people are likely to be pasting into, then I can add this functionality later.</p>", "type": "rendered"}, "title": {"raw": "Copy plot to clipboard", "markup": "markdown", "html": "<p>Copy plot to clipboard</p>", "type": "rendered"}}, "type": "pullrequest", "description": "Added \"copy to clipboard\" functionality for plots. An image can be copied to\r\nthe clipboard by clicking a button in the plot window's toolbar, or by ctrl-c/cmd-c when\r\nthe plot window has focus.\r\n\r\nCopying can also be done programatically like:\r\n\r\n        lyse.figure_to_clipboard(fig)\r\n\r\nThe copying is implemented by calling `savefig()` on the matplotlib figure object, then launching a subprocess that reads the resulting image file, puts it on the clipboard and then remains running until the clipboard is overwritten. This is necessary on some systems - most linux systems don't actually store copied data that is over a certain size, they wait until it is pasted before getting it from the memory of the source, so that program has to still be running or you lose your copied data. I've read this may or may not be the case sometimes on Windows or osx. Anyway the subprocess keeps the use of Qt separate from that of the main program, when not keeping it separate I also had strange behaviour like a 10 second hang at program shutdown (possibly Qt asking the window manager \"pretty please store my copy buffer, I'm about to close\" and the window manager just ignoring it until timeout).\r\n\r\nI originally envisioned having a way to programatically add text to the copy buffer so that the text and plot image would be copied together for pasting into a lab logbook, but this has turned out to be much more complex. I tested a few programs that allow you to copy text and images, and while they always work with themselves, interoperability is patchy.\r\n\r\nSince I'm using Qt to interact with the clipboard, and Qt does support putting arbitrary mime types on the clipboard, if we can figure out which mime type has the best interoperability for programs people are likely to be pasting into, then I can add this functionality later.", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/pullrequests/12/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/diffstat/labscript_suite/lyse:8b07419dca65%0Dc4908e5d0a94?from_pullrequest_id=12"}, "commits": {"href": "data/repositories/labscript_suite/lyse/pullrequests/12/commits.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/12.json"}, "comments": {"href": "data/repositories/labscript_suite/lyse/pullrequests/12/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/pullrequests/12/merge"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/12"}, "activity": {"href": "data/repositories/labscript_suite/lyse/pullrequests/12/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/diff/labscript_suite/lyse:8b07419dca65%0Dc4908e5d0a94?from_pullrequest_id=12"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/pullrequests/12/approve"}, "statuses": {"href": "data/repositories/labscript_suite/lyse/pullrequests/12/statuses_page=1.json"}}, "title": "Copy plot to clipboard", "close_source_branch": false, "reviewers": [{"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}], "id": 12, "destination": {"commit": {"hash": "c4908e5d0a94", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/lyse/commit/c4908e5d0a94.json"}, "html": {"href": "#!/labscript_suite/lyse/commits/c4908e5d0a94"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "branch": {"name": "default"}}, "created_on": "2017-04-26T04:57:05.769255+00:00", "summary": {"raw": "Added \"copy to clipboard\" functionality for plots. An image can be copied to\r\nthe clipboard by clicking a button in the plot window's toolbar, or by ctrl-c/cmd-c when\r\nthe plot window has focus.\r\n\r\nCopying can also be done programatically like:\r\n\r\n        lyse.figure_to_clipboard(fig)\r\n\r\nThe copying is implemented by calling `savefig()` on the matplotlib figure object, then launching a subprocess that reads the resulting image file, puts it on the clipboard and then remains running until the clipboard is overwritten. This is necessary on some systems - most linux systems don't actually store copied data that is over a certain size, they wait until it is pasted before getting it from the memory of the source, so that program has to still be running or you lose your copied data. I've read this may or may not be the case sometimes on Windows or osx. Anyway the subprocess keeps the use of Qt separate from that of the main program, when not keeping it separate I also had strange behaviour like a 10 second hang at program shutdown (possibly Qt asking the window manager \"pretty please store my copy buffer, I'm about to close\" and the window manager just ignoring it until timeout).\r\n\r\nI originally envisioned having a way to programatically add text to the copy buffer so that the text and plot image would be copied together for pasting into a lab logbook, but this has turned out to be much more complex. I tested a few programs that allow you to copy text and images, and while they always work with themselves, interoperability is patchy.\r\n\r\nSince I'm using Qt to interact with the clipboard, and Qt does support putting arbitrary mime types on the clipboard, if we can figure out which mime type has the best interoperability for programs people are likely to be pasting into, then I can add this functionality later.", "markup": "markdown", "html": "<p>Added \"copy to clipboard\" functionality for plots. An image can be copied to\nthe clipboard by clicking a button in the plot window's toolbar, or by ctrl-c/cmd-c when\nthe plot window has focus.</p>\n<p>Copying can also be done programatically like:</p>\n<div class=\"codehilite\"><pre><span></span>    lyse.figure_to_clipboard(fig)\n</pre></div>\n\n\n<p>The copying is implemented by calling <code>savefig()</code> on the matplotlib figure object, then launching a subprocess that reads the resulting image file, puts it on the clipboard and then remains running until the clipboard is overwritten. This is necessary on some systems - most linux systems don't actually store copied data that is over a certain size, they wait until it is pasted before getting it from the memory of the source, so that program has to still be running or you lose your copied data. I've read this may or may not be the case sometimes on Windows or osx. Anyway the subprocess keeps the use of Qt separate from that of the main program, when not keeping it separate I also had strange behaviour like a 10 second hang at program shutdown (possibly Qt asking the window manager \"pretty please store my copy buffer, I'm about to close\" and the window manager just ignoring it until timeout).</p>\n<p>I originally envisioned having a way to programatically add text to the copy buffer so that the text and plot image would be copied together for pasting into a lab logbook, but this has turned out to be much more complex. I tested a few programs that allow you to copy text and images, and while they always work with themselves, interoperability is patchy.</p>\n<p>Since I'm using Qt to interact with the clipboard, and Qt does support putting arbitrary mime types on the clipboard, if we can figure out which mime type has the best interoperability for programs people are likely to be pasting into, then I can add this functionality later.</p>", "type": "rendered"}, "source": {"commit": {"hash": "0bb629e431be", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/lyse/commit/0bb629e431be"}, "html": {"href": "#!/cbillington/lyse/commits/0bb629e431be"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/lyse"}, "html": {"href": "#!/cbillington/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{47c91022-279d-4058-88a8-959fe9ffb409}ts=python"}}, "type": "repository", "name": "lyse", "full_name": "cbillington/lyse", "uuid": "{47c91022-279d-4058-88a8-959fe9ffb409}"}, "branch": {"name": "feature3"}}, "comment_count": 2, "state": "MERGED", "task_count": 0, "participants": [{"role": "PARTICIPANT", "participated_on": "2017-04-26T05:10:07.581913+00:00", "type": "participant", "approved": false, "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}}, {"role": "REVIEWER", "participated_on": "2017-04-26T05:14:59.712905+00:00", "type": "participant", "approved": true, "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}}], "reason": "", "updated_on": "2017-04-26T05:15:14.661428+00:00", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "merge_commit": {"hash": "8b07419dca65", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/lyse/commit/8b07419dca65.json"}, "html": {"href": "#!/labscript_suite/lyse/commits/8b07419dca65"}}}, "closed_by": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}}