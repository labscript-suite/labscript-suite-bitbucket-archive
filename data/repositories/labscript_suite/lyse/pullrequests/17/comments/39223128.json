{"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/17/comments/39223128.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/17/_/diff#comment-39223128"}}, "parent": {"id": 39221337, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/17/comments/39221337.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/17/_/diff#comment-39221337"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 17, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/17.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/17"}}, "title": "Update Dataframe without Readoperations"}, "content": {"raw": "Yes, so whilst below I say that you should move this into `DataFrameModel.update_row()`, in fact what you might want to do is move it into `lyse.dataframe_utilities` and *call* it from `DataFrameModel.update_row()`.\n\nIt looks like there is a bug though: `new_row_data` is expected to be a full row, whereas your code looks like it will have empty values when `updated_data` does not contain as many columns as are in the dataframe already. This I think will replace the dataframe contents with NaNs on the unchanged data, rather than leaving the existing data there. So you should copy the rest of the existing row of the dataframe into `new_row_data` to make a full row with no empty values, if you want to use the existing functions in this way. That might seem inefficient but I think it should not b a concern.", "markup": "markdown", "html": "<p>Yes, so whilst below I say that you should move this into <code>DataFrameModel.update_row()</code>, in fact what you might want to do is move it into <code>lyse.dataframe_utilities</code> and <em>call</em> it from <code>DataFrameModel.update_row()</code>.</p>\n<p>It looks like there is a bug though: <code>new_row_data</code> is expected to be a full row, whereas your code looks like it will have empty values when <code>updated_data</code> does not contain as many columns as are in the dataframe already. This I think will replace the dataframe contents with NaNs on the unchanged data, rather than leaving the existing data there. So you should copy the rest of the existing row of the dataframe into <code>new_row_data</code> to make a full row with no empty values, if you want to use the existing functions in this way. That might seem inefficient but I think it should not b a concern.</p>", "type": "rendered"}, "created_on": "2017-06-20T21:38:10.778128+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-06-20T21:39:18.002986+00:00", "type": "pullrequest_comment", "id": 39223128}