{"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/17/comments/41375980.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/17/_/diff#comment-41375980"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 17, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/17.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/17"}}, "title": "Update Dataframe without Readoperations"}, "content": {"raw": "I get an exception at startup with the more recent changes. Look like the change in [this commit](#!/PhyNerd/lyse/commits/9e8a8200f7fe8588f6e44e882c245cd51fc466d4) was applied to the wrong method, perhaps? This method is in the \"edit columns\" dialog box, not the dataframe model, so is unrelated I think. \n\n\n```\n#!python\n\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/runpy.py\", line 162, in _run_module_as_main\n    \"__main__\", fname, loader, pkg_name)\n  File \"/usr/lib/python2.7/runpy.py\", line 72, in _run_code\n    exec code in run_globals\n  File \"/home/cjb7/labscript_suite/lyse/__main__.py\", line 1837, in <module>\n    app = Lyse()\n  File \"/home/cjb7/labscript_suite/lyse/__main__.py\", line 1776, in __init__\n    to_singleshot, from_singleshot, to_multishot, from_multishot)\n  File \"/home/cjb7/labscript_suite/lyse/__main__.py\", line 1489, in __init__\n    self.edit_columns_dialog = EditColumns(self, self.shots_model.column_names, self.shots_model.columns_visible)\n  File \"/home/cjb7/labscript_suite/lyse/__main__.py\", line 812, in __init__\n    self.populate_model(column_names, self.columns_visible)\n  File \"/home/cjb7/labscript_suite/lyse/__main__.py\", line 845, in populate_model\n    if updated_row_data is not None and column_name not in updated_row_data:\nNameError: global name 'updated_row_data' is not defined\n```\n", "markup": "markdown", "html": "<p>I get an exception at startup with the more recent changes. Look like the change in <a data-is-external-link=\"true\" href=\"#!/PhyNerd/lyse/commits/9e8a8200f7fe8588f6e44e882c245cd51fc466d4\" rel=\"nofollow\">this commit</a> was applied to the wrong method, perhaps? This method is in the \"edit columns\" dialog box, not the dataframe model, so is unrelated I think. </p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"p\">):</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/usr/lib/python2.7/runpy.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">162</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">_run_module_as_main</span>\n    <span class=\"s2\">&quot;__main__&quot;</span><span class=\"p\">,</span> <span class=\"n\">fname</span><span class=\"p\">,</span> <span class=\"n\">loader</span><span class=\"p\">,</span> <span class=\"n\">pkg_name</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/usr/lib/python2.7/runpy.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">72</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">_run_code</span>\n    <span class=\"k\">exec</span> <span class=\"n\">code</span> <span class=\"ow\">in</span> <span class=\"n\">run_globals</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/home/cjb7/labscript_suite/lyse/__main__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">1837</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span>\n    <span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Lyse</span><span class=\"p\">()</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/home/cjb7/labscript_suite/lyse/__main__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">1776</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"fm\">__init__</span>\n    <span class=\"n\">to_singleshot</span><span class=\"p\">,</span> <span class=\"n\">from_singleshot</span><span class=\"p\">,</span> <span class=\"n\">to_multishot</span><span class=\"p\">,</span> <span class=\"n\">from_multishot</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/home/cjb7/labscript_suite/lyse/__main__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">1489</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"fm\">__init__</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">edit_columns_dialog</span> <span class=\"o\">=</span> <span class=\"n\">EditColumns</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">shots_model</span><span class=\"o\">.</span><span class=\"n\">column_names</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">shots_model</span><span class=\"o\">.</span><span class=\"n\">columns_visible</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/home/cjb7/labscript_suite/lyse/__main__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">812</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"fm\">__init__</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">populate_model</span><span class=\"p\">(</span><span class=\"n\">column_names</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">columns_visible</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/home/cjb7/labscript_suite/lyse/__main__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">845</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">populate_model</span>\n    <span class=\"k\">if</span> <span class=\"n\">updated_row_data</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"bp\">None</span> <span class=\"ow\">and</span> <span class=\"n\">column_name</span> <span class=\"ow\">not</span> <span class=\"ow\">in</span> <span class=\"n\">updated_row_data</span><span class=\"p\">:</span>\n<span class=\"ne\">NameError</span><span class=\"p\">:</span> <span class=\"k\">global</span> <span class=\"n\">name</span> <span class=\"s1\">&#39;updated_row_data&#39;</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"n\">defined</span>\n</pre></div>", "type": "rendered"}, "created_on": "2017-07-24T18:13:07.367572+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-07-24T18:13:07.373606+00:00", "type": "pullrequest_comment", "id": 41375980}