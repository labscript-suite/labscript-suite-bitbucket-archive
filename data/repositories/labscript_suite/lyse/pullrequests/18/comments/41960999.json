{"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/18/comments/41960999.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/18/_/diff#comment-41960999"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 18, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/18.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/18"}}, "title": "Added ability to restore UI state"}, "content": {"raw": "So I'm not  fan of saving the main window position. This means you get a popup saying \"configuration has changed\" if all  you did was move the window, which is jarring, making people think \"what did I change?\" and worrying they have changed something they didn't mean to.\n\nI also think the pause button state shouldn't be loaded - if you load in a configuration you don't necessarily want it to run straight away until you've looked at it.\n\nI would prefer if the window geometry stuff (including plot window positions) were just automatically saved and loaded without prompting, and without the option for multiple configurations. People don't usually think of those sorts of things as saveable and loadable configuration (hence a \"do you want to save\" popup being confusing), but they do expect them to be preserved across a restart.\n\nOne solution is to keep using the code as in this pull request (and add to it in the future to get the plot window positions etc), but to make it save window geometry without prompting if window geometry was the only thing to change. Something like:\n\n\n```\n#!python\n\nif current_data != saved_data:\n    if only_window_geometry_is_different(current_data, saved_data):\n        save() # save without prompting\n    elif prompt(\"save config?\"):\n        save()\n    else:\n        pass # don't save anything\n        \n```\n", "markup": "markdown", "html": "<p>So I'm not  fan of saving the main window position. This means you get a popup saying \"configuration has changed\" if all  you did was move the window, which is jarring, making people think \"what did I change?\" and worrying they have changed something they didn't mean to.</p>\n<p>I also think the pause button state shouldn't be loaded - if you load in a configuration you don't necessarily want it to run straight away until you've looked at it.</p>\n<p>I would prefer if the window geometry stuff (including plot window positions) were just automatically saved and loaded without prompting, and without the option for multiple configurations. People don't usually think of those sorts of things as saveable and loadable configuration (hence a \"do you want to save\" popup being confusing), but they do expect them to be preserved across a restart.</p>\n<p>One solution is to keep using the code as in this pull request (and add to it in the future to get the plot window positions etc), but to make it save window geometry without prompting if window geometry was the only thing to change. Something like:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"k\">if</span> <span class=\"n\">current_data</span> <span class=\"o\">!=</span> <span class=\"n\">saved_data</span><span class=\"p\">:</span>\n    <span class=\"k\">if</span> <span class=\"n\">only_window_geometry_is_different</span><span class=\"p\">(</span><span class=\"n\">current_data</span><span class=\"p\">,</span> <span class=\"n\">saved_data</span><span class=\"p\">):</span>\n        <span class=\"n\">save</span><span class=\"p\">()</span> <span class=\"c1\"># save without prompting</span>\n    <span class=\"k\">elif</span> <span class=\"n\">prompt</span><span class=\"p\">(</span><span class=\"s2\">&quot;save config?&quot;</span><span class=\"p\">):</span>\n        <span class=\"n\">save</span><span class=\"p\">()</span>\n    <span class=\"k\">else</span><span class=\"p\">:</span>\n        <span class=\"k\">pass</span> <span class=\"c1\"># don&#39;t save anything</span>\n</pre></div>", "type": "rendered"}, "created_on": "2017-08-02T00:51:36.242937+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-02T00:51:36.245294+00:00", "type": "pullrequest_comment", "id": 41960999}