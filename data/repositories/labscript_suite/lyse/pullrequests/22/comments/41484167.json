{"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/22/comments/41484167.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/22/_/diff#comment-41484167"}}, "parent": {"id": 41483776, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/22/comments/41483776.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/22/_/diff#comment-41483776"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 22, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/22.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/22"}}, "title": "Unicode strings and other Python 3 forward-compatible changes."}, "content": {"raw": "Yes, I get that too, once I tested what happens when you raise an exception.\n\nThis is very frustrating. The purpose of the second argument to `compile()` is solely to associate the code with a filename so that if an exception is raised (or code otherwise inspected), the actual lines of code can be extracted, and the name of the file used in tracebacks.\n\nSo the first error we got was saying \"hey, that filename you got me, I can't encode that as ascii in order to actually read the file!\" and the second one is saying \"hey, I can read the file, but now I can't decode that as ascii in order to produce a unicode traceback!\"\n\n\nCould you tell me the values of `sys.getdefaultencoding()` and `sys.getfilesystemencoding()` on your system? For me (on my home computer where I get the same error as you) they are 'ascii' and 'utf8'.\n\nWhich is stupid, because it's a filepath that Python is supposed to be decoding in its traceback-making, so it should be decoding it with `sys.getfilesystemencoding()` (utf8), not  `sys.getdefaultencoding()` (ascii).", "markup": "markdown", "html": "<p>Yes, I get that too, once I tested what happens when you raise an exception.</p>\n<p>This is very frustrating. The purpose of the second argument to <code>compile()</code> is solely to associate the code with a filename so that if an exception is raised (or code otherwise inspected), the actual lines of code can be extracted, and the name of the file used in tracebacks.</p>\n<p>So the first error we got was saying \"hey, that filename you got me, I can't encode that as ascii in order to actually read the file!\" and the second one is saying \"hey, I can read the file, but now I can't decode that as ascii in order to produce a unicode traceback!\"</p>\n<p>Could you tell me the values of <code>sys.getdefaultencoding()</code> and <code>sys.getfilesystemencoding()</code> on your system? For me (on my home computer where I get the same error as you) they are 'ascii' and 'utf8'.</p>\n<p>Which is stupid, because it's a filepath that Python is supposed to be decoding in its traceback-making, so it should be decoding it with <code>sys.getfilesystemencoding()</code> (utf8), not  <code>sys.getdefaultencoding()</code> (ascii).</p>", "type": "rendered"}, "created_on": "2017-07-25T21:16:46.779240+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-07-25T21:16:52.712623+00:00", "type": "pullrequest_comment", "id": 41484167}