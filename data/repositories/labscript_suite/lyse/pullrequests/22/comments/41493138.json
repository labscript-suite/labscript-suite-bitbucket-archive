{"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/22/comments/41493138.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/22/_/diff#comment-41493138"}}, "parent": {"id": 41488600, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/22/comments/41488600.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/22/_/diff#comment-41488600"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 22, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/22.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/22"}}, "title": "Unicode strings and other Python 3 forward-compatible changes."}, "content": {"raw": "No rush!\n\nI'm not sure what things are going to be like on Windows, but based on what I've read, I think that the handling of non-ascii filenames on Windows is likely to be a problem.\n\nThe problem is that the tracebacks are going to contain both text from your source files, and the filenames. These can be in totally different encodings (on linux and macos too), so the only way to make sense of it would be to re-implement a function or two from the `traceback` module to put all the strings into the same encoding before concatenating them into a full textual traceback. This wouldn't be so hard, but we repeat this pattern all throughout the labscript suite, so it would not just be here that it needs fixing.\n\nAnd the python devs have fixed this and the fix is called Python 3 :p. So I think since Python 3 support is coming soon we just say no to fixing this in Python 2.\n\nI've pushed a commit that will just print possibly garbled filenames in tracebacks for non ascii filepaths on Windows but should otherwise work.\n\n", "markup": "markdown", "html": "<p>No rush!</p>\n<p>I'm not sure what things are going to be like on Windows, but based on what I've read, I think that the handling of non-ascii filenames on Windows is likely to be a problem.</p>\n<p>The problem is that the tracebacks are going to contain both text from your source files, and the filenames. These can be in totally different encodings (on linux and macos too), so the only way to make sense of it would be to re-implement a function or two from the <code>traceback</code> module to put all the strings into the same encoding before concatenating them into a full textual traceback. This wouldn't be so hard, but we repeat this pattern all throughout the labscript suite, so it would not just be here that it needs fixing.</p>\n<p>And the python devs have fixed this and the fix is called Python 3 :p. So I think since Python 3 support is coming soon we just say no to fixing this in Python 2.</p>\n<p>I've pushed a commit that will just print possibly garbled filenames in tracebacks for non ascii filepaths on Windows but should otherwise work.</p>", "type": "rendered"}, "created_on": "2017-07-26T01:15:32.932862+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-07-26T01:15:32.935377+00:00", "type": "pullrequest_comment", "id": 41493138}