{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/28/comments/42689620.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/28/_/diff#comment-42689620"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 28, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/28.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/28"}}, "title": "Fixed issue #31: analysis status not updating if no saved results"}, "content": {"raw": "Also it closes some merged branches from two recent pull requests. I'm not sure if this is my fault or not - I did the merges. I'll try to make sure I'm not doing merges that leave open branches, regardless of whether that requires action by me or by the pull request author, because it confuses mercurial majorly to have these merged but open branches around.", "markup": "markdown", "html": "<p>Also it closes some merged branches from two recent pull requests. I'm not sure if this is my fault or not - I did the merges. I'll try to make sure I'm not doing merges that leave open branches, regardless of whether that requires action by me or by the pull request author, because it confuses mercurial majorly to have these merged but open branches around.</p>", "type": "rendered"}, "created_on": "2017-08-11T19:23:14.326481+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-11T19:23:14.334369+00:00", "type": "pullrequest_comment", "id": 42689620}, {"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/28/comments/42706037.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/28/_/diff#comment-42706037"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 28, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/28.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/28"}}, "title": "Fixed issue #31: analysis status not updating if no saved results"}, "content": {"raw": "Those seem to by my branches that you are closing. I always enable close branch in the pull requests. Is there something else I need to do to close them on merge?", "markup": "markdown", "html": "<p>Those seem to by my branches that you are closing. I always enable close branch in the pull requests. Is there something else I need to do to close them on merge?</p>", "type": "rendered"}, "created_on": "2017-08-12T21:44:45.738715+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-12T21:44:45.799030+00:00", "type": "pullrequest_comment", "id": 42706037}, {"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/28/comments/42706043.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/28/_/diff#comment-42706043"}}, "parent": {"id": 42706037, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/28/comments/42706037.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/28/_/diff#comment-42706037"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 28, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/28.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/28"}}, "title": "Fixed issue #31: analysis status not updating if no saved results"}, "content": {"raw": "I'm not sure. I know the mergers have the option to uncheck that box, but I have not been explicitly unchecking it. I'll pay attention to see if it's there and checked in future merges.", "markup": "markdown", "html": "<p>I'm not sure. I know the mergers have the option to uncheck that box, but I have not been explicitly unchecking it. I'll pay attention to see if it's there and checked in future merges.</p>", "type": "rendered"}, "created_on": "2017-08-12T21:46:08.076647+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-12T21:46:08.078869+00:00", "type": "pullrequest_comment", "id": 42706043}, {"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/28/comments/42711666.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/diff/cbillington/lyse:83a52943ce02..ace3427c5f6a?path=__main__.py"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/28/_/diff#comment-42711666"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 28, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/28.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/28"}}, "title": "Fixed issue #31: analysis status not updating if no saved results"}, "content": {"raw": "Can't we just remove this line and instead replace the next one with\n\n```\n#!python\n\nif signal != 'error':\n```\n\nand the next if with a else? (to reduce code clutter)", "markup": "markdown", "html": "<p>Can't we just remove this line and instead replace the next one with</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"k\">if</span> <span class=\"n\">signal</span> <span class=\"o\">!=</span> <span class=\"s1\">&#39;error&#39;</span><span class=\"p\">:</span>\n</pre></div>\n\n\n<p>and the next if with a else? (to reduce code clutter)</p>", "type": "rendered"}, "created_on": "2017-08-13T18:50:32.506752+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "inline": {"to": 1725, "from": null, "path": "__main__.py"}, "updated_on": "2017-08-13T18:51:02.888855+00:00", "type": "pullrequest_comment", "id": 42711666}, {"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/28/comments/42711781.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/diff/cbillington/lyse:83a52943ce02..ace3427c5f6a?path=__main__.py"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/28/_/diff#comment-42711781"}}, "parent": {"id": 42711666, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/28/comments/42711666.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/28/_/diff#comment-42711666"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 28, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/28.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/28"}}, "title": "Fixed issue #31: analysis status not updating if no saved results"}, "content": {"raw": "No - then the loop would return if the signal was 'progress', because it's an if, not an elif.\n\nYou could actually replace `if signal == 'done':` with simply `else:` - but I prefer to explicitly name the signals so that the code is not assuming that if it's not the first two signals it must be the third one - that will break subtly if a new signal is introduced in the future.\n\nIn fact what this loop is missing is that if it hasn't returned by the end of the loop, it should say `if signal == progress: continue` and then after that raise ValueError telling the programmer \"hey you introduced a new signal and didn't tell this loop what to do with it\". At the moment if you introduced a new signal the loop would just continue and then get stuck waiting for the next signal that would never come. Still a better way to break than treating it like a 'done' signal though!", "markup": "markdown", "html": "<p>No - then the loop would return if the signal was 'progress', because it's an if, not an elif.</p>\n<p>You could actually replace <code>if signal == 'done':</code> with simply <code>else:</code> - but I prefer to explicitly name the signals so that the code is not assuming that if it's not the first two signals it must be the third one - that will break subtly if a new signal is introduced in the future.</p>\n<p>In fact what this loop is missing is that if it hasn't returned by the end of the loop, it should say <code>if signal == progress: continue</code> and then after that raise ValueError telling the programmer \"hey you introduced a new signal and didn't tell this loop what to do with it\". At the moment if you introduced a new signal the loop would just continue and then get stuck waiting for the next signal that would never come. Still a better way to break than treating it like a 'done' signal though!</p>", "type": "rendered"}, "created_on": "2017-08-13T19:05:34.108556+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "inline": {"to": null, "from": null, "path": "__main__.py"}, "updated_on": "2017-08-13T19:05:34.110799+00:00", "type": "pullrequest_comment", "id": 42711781}, {"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/28/comments/42711815.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/diff/cbillington/lyse:83a52943ce02..ace3427c5f6a?path=__main__.py"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/28/_/diff#comment-42711815"}}, "parent": {"id": 42711781, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/28/comments/42711781.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/28/_/diff#comment-42711781"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 28, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/28.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/28"}}, "title": "Fixed issue #31: analysis status not updating if no saved results"}, "content": {"raw": "Yeah you're right didn't look at the lines above and thus didn't see the loop. Just saw two equal lines and wanted to optimize.\n\nA error would probably be a good addition.\n\nUpdate: We could do this\n\n```\n#!python\n             #  Update the status percent for the the row on which analysis is running\n             self.shots_model.update_row(filepath, status_percent=status_percent, dataframe_already_updated=True)\n             if signal == 'done':\n                 return\n```\nthen we would have the line just once", "markup": "markdown", "html": "<p>Yeah you're right didn't look at the lines above and thus didn't see the loop. Just saw two equal lines and wanted to optimize.</p>\n<p>A error would probably be a good addition.</p>\n<p>Update: We could do this</p>\n<div class=\"codehilite language-python\"><pre><span></span>             <span class=\"c1\">#  Update the status percent for the the row on which analysis is running</span>\n             <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">shots_model</span><span class=\"o\">.</span><span class=\"n\">update_row</span><span class=\"p\">(</span><span class=\"n\">filepath</span><span class=\"p\">,</span> <span class=\"n\">status_percent</span><span class=\"o\">=</span><span class=\"n\">status_percent</span><span class=\"p\">,</span> <span class=\"n\">dataframe_already_updated</span><span class=\"o\">=</span><span class=\"bp\">True</span><span class=\"p\">)</span>\n             <span class=\"k\">if</span> <span class=\"n\">signal</span> <span class=\"o\">==</span> <span class=\"s1\">&#39;done&#39;</span><span class=\"p\">:</span>\n                 <span class=\"k\">return</span>\n</pre></div>\n\n\n<p>then we would have the line just once</p>", "type": "rendered"}, "created_on": "2017-08-13T19:10:28.331789+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "inline": {"to": null, "from": null, "path": "__main__.py"}, "updated_on": "2017-08-13T19:34:14.597257+00:00", "type": "pullrequest_comment", "id": 42711815}, {"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/28/comments/42712003.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/diff/cbillington/lyse:83a52943ce02..ace3427c5f6a?path=__main__.py"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/28/_/diff#comment-42712003"}}, "parent": {"id": 42711815, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/28/comments/42711815.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/28/_/diff#comment-42711815"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 28, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/28.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/28"}}, "title": "Fixed issue #31: analysis status not updating if no saved results"}, "content": {"raw": "Right, that's fair enough. Process the updated data and status percent regardless of the signal, return if the signal is done, error stuff if the signal is error, continue if the signal is progress, else ValueError.\n\nI'll make this change - I think \"cleaning up\" working code is to be resisted in general but since we are changing these lines anyway there is not much risk of breakage on top of what is caused by the change already.", "markup": "markdown", "html": "<p>Right, that's fair enough. Process the updated data and status percent regardless of the signal, return if the signal is done, error stuff if the signal is error, continue if the signal is progress, else ValueError.</p>\n<p>I'll make this change - I think \"cleaning up\" working code is to be resisted in general but since we are changing these lines anyway there is not much risk of breakage on top of what is caused by the change already.</p>", "type": "rendered"}, "created_on": "2017-08-13T19:47:31.237598+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "inline": {"to": null, "from": null, "path": "__main__.py"}, "updated_on": "2017-08-13T19:47:31.239967+00:00", "type": "pullrequest_comment", "id": 42712003}, {"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/28/comments/42776970.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/28/_/diff#comment-42776970"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 28, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/28.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/28"}}, "title": "Fixed issue #31: analysis status not updating if no saved results"}, "content": {"raw": "I tested this and everything seems to work as expected.", "markup": "markdown", "html": "<p>I tested this and everything seems to work as expected.</p>", "type": "rendered"}, "created_on": "2017-08-14T17:48:19.137072+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-14T17:48:19.194711+00:00", "type": "pullrequest_comment", "id": 42776970}, {"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/28/comments/42777243.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/28/_/diff#comment-42777243"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 28, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/28.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/28"}}, "title": "Fixed issue #31: analysis status not updating if no saved results"}, "content": {"raw": "Happy to merge @shjohnst?\n\nIf you're happy, let me click the merge button rather than you so that it doesn't leave the source branch open (because apparantly the branches only get closed if the merger has commit access to the source repository, which is really stupid).", "markup": "markdown", "html": "<p>Happy to merge @shjohnst?</p>\n<p>If you're happy, let me click the merge button rather than you so that it doesn't leave the source branch open (because apparantly the branches only get closed if the merger has commit access to the source repository, which is really stupid).</p>", "type": "rendered"}, "created_on": "2017-08-14T17:53:03.246303+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-14T17:53:03.257677+00:00", "type": "pullrequest_comment", "id": 42777243}, {"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/28/comments/42804012.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/28/_/diff#comment-42804012"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 28, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/28.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/28"}}, "title": "Fixed issue #31: analysis status not updating if no saved results"}, "content": {"raw": "Yeah, looks like it's working", "markup": "markdown", "html": "<p>Yeah, looks like it's working</p>", "type": "rendered"}, "created_on": "2017-08-15T04:18:32.503483+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": "2017-08-15T04:18:32.505747+00:00", "type": "pullrequest_comment", "id": 42804012}], "page": 1, "size": 10}