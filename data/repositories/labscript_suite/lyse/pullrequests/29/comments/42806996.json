{"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/29/comments/42806996.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/29/_/diff#comment-42806996"}}, "parent": {"id": 42797097, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/29/comments/42797097.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/29/_/diff#comment-42797097"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 29, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/29.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/29"}}, "title": "Cross routine caching"}, "content": {"raw": "Even if we cache hdf5 files they'd have the problem of having to be accessed in a loop. And the access function probably being more complex than the storage. The storage the way I implemented it allows things to happen in one request. As it just goes up one step in the hierarchy and returns the dict of all images. \n\nThe 'each shot gets it's own file' model is whats biting us here I think.\n\nIn our group there is a ongoing discussion to replace the hdf5 files with some sort of database for better search ability, faster access to data and less file clutter. But that seems really hard to do right and might raise other problems. I'm not in favor of this kind of change and the performance pull requests are my way of getting out of these discussions by at least making things fast enough.", "markup": "markdown", "html": "<p>Even if we cache hdf5 files they'd have the problem of having to be accessed in a loop. And the access function probably being more complex than the storage. The storage the way I implemented it allows things to happen in one request. As it just goes up one step in the hierarchy and returns the dict of all images. </p>\n<p>The 'each shot gets it's own file' model is whats biting us here I think.</p>\n<p>In our group there is a ongoing discussion to replace the hdf5 files with some sort of database for better search ability, faster access to data and less file clutter. But that seems really hard to do right and might raise other problems. I'm not in favor of this kind of change and the performance pull requests are my way of getting out of these discussions by at least making things fast enough.</p>", "type": "rendered"}, "created_on": "2017-08-15T06:16:59.351467+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-15T16:52:07.481682+00:00", "type": "pullrequest_comment", "id": 42806996}