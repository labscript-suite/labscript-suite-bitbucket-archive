{"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/29/comments/42963939.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/29/_/diff#comment-42963939"}}, "parent": {"id": 42963644, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/29/comments/42963644.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/29/_/diff#comment-42963644"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 29, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/29.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/29"}}, "title": "Cross routine caching"}, "content": {"raw": "Well if i load 2000 images with storage it's one message, the pickling of 1(!) dict of 2000 dicts containing the arrays, unpickeling at the other end thats it.\n\nWith caching of hdf5 files its iterating over those 2000 files, finding the images in those files and then returning them. Thats loads more operations. Also hdf5 holds the GIL as you pointed out somewhere so things might be slowed by that as well.\n\nUpdate: Free memory is also a non issue at the moment we just upgraded the analysis machine to 20GB that should be more than enough to handle our analysis and lyse", "markup": "markdown", "html": "<p>Well if i load 2000 images with storage it's one message, the pickling of 1(!) dict of 2000 dicts containing the arrays, unpickeling at the other end thats it.</p>\n<p>With caching of hdf5 files its iterating over those 2000 files, finding the images in those files and then returning them. Thats loads more operations. Also hdf5 holds the GIL as you pointed out somewhere so things might be slowed by that as well.</p>\n<p>Update: Free memory is also a non issue at the moment we just upgraded the analysis machine to 20GB that should be more than enough to handle our analysis and lyse</p>", "type": "rendered"}, "created_on": "2017-08-16T21:57:48.202421+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2017-08-16T21:59:49.921069+00:00", "type": "pullrequest_comment", "id": 42963939}