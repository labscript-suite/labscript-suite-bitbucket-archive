{"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/31/comments/43054023.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/31/_/diff#comment-43054023"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 31, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/31.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/31"}}, "title": "Fix a bug in updating the dataframe"}, "content": {"raw": "Ok so I've fixed the issue with not being able to overwrite the type or shape of an attribute that was previously saved. Digging in the history, the code was changed at some point to *enforce* that overwriting a saved result\nwould not be allowed if it modified the type or shape, by using the line:\n\n`h5_file[group].attrs.modify(name, value)`\n\ninstead of the more obvious\n\n`h5_file[group].attrs[name] = value `\n\n@rpanderson looks like you made this change (or someone logged in as you) in revision 239d63d2. Was there any reasoning for this do you remember? The commit message says it fixes issue #760 which would have been from redmine days which I am not able to access (not sure if it's because it's broken or if it's my Monash credentials being expired, which they are). Perhaps it was just because the rest of the code was so shaky at the time that changing the datatype would have crashed lyse maybe?", "markup": "markdown", "html": "<p>Ok so I've fixed the issue with not being able to overwrite the type or shape of an attribute that was previously saved. Digging in the history, the code was changed at some point to <em>enforce</em> that overwriting a saved result\nwould not be allowed if it modified the type or shape, by using the line:</p>\n<p><code>h5_file[group].attrs.modify(name, value)</code></p>\n<p>instead of the more obvious</p>\n<p><code>h5_file[group].attrs[name] = value</code></p>\n<p>@rpanderson looks like you made this change (or someone logged in as you) in revision <a href=\"#!/labscript_suite/lyse/commits/239d63d2\" rel=\"nofollow\" class=\"ap-connect-link\">239d63d2</a>. Was there any reasoning for this do you remember? The commit message says it fixes issue #760 which would have been from redmine days which I am not able to access (not sure if it's because it's broken or if it's my Monash credentials being expired, which they are). Perhaps it was just because the rest of the code was so shaky at the time that changing the datatype would have crashed lyse maybe?</p>", "type": "rendered"}, "created_on": "2017-08-17T20:51:34.840946+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2017-08-17T20:51:34.875339+00:00", "type": "pullrequest_comment", "id": 43054023}