{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/4/comments/13514123.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/4/_/diff#comment-13514123"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 4, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/4.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/4"}}, "title": "Added version compatibility check for pandas due to changes to DataFrame.concat"}, "content": {"raw": "Hey Russ,\n\nI noticed you imported `VersionException` from `labscript_utils` but didn't use `check_version()`. Does your change do something different from the following?\n\n```\n#!python\n\ntry:\n    from labscript_utils import check_version\nexcept ImportError:\n    raise ImportError('Require labscript_utils > 2.1.0')\n\n# allow pandas v0.15.0 to v0.16.x\ncheck_version('pandas', '0.15.0', '0.17.0')\n```", "markup": "markdown", "html": "<p>Hey Russ,</p>\n<p>I noticed you imported <code>VersionException</code> from <code>labscript_utils</code> but didn't use <code>check_version()</code>. Does your change do something different from the following?</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"k\">try</span><span class=\"p\">:</span>\n    <span class=\"kn\">from</span> <span class=\"nn\">labscript_utils</span> <span class=\"kn\">import</span> <span class=\"n\">check_version</span>\n<span class=\"k\">except</span> <span class=\"ne\">ImportError</span><span class=\"p\">:</span>\n    <span class=\"k\">raise</span> <span class=\"ne\">ImportError</span><span class=\"p\">(</span><span class=\"s1\">&#39;Require labscript_utils &gt; 2.1.0&#39;</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># allow pandas v0.15.0 to v0.16.x</span>\n<span class=\"n\">check_version</span><span class=\"p\">(</span><span class=\"s1\">&#39;pandas&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;0.15.0&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;0.17.0&#39;</span><span class=\"p\">)</span>\n</pre></div>", "type": "rendered"}, "created_on": "2016-01-15T02:24:45.784968+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2016-01-15T02:24:45.787247+00:00", "type": "pullrequest_comment", "id": 13514123}, {"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/4/comments/13566345.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/4/_/diff#comment-13566345"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 4, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/4.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/4"}}, "title": "Added version compatibility check for pandas due to changes to DataFrame.concat"}, "content": {"raw": "Not really. But is there any reason for not using the version class(es) and comparison of the Standard Library in ``check_version``? The ``StrictVersion`` class of [``distutils.version``](https://docs.python.org/2/distutils/apiref.html#module-distutils.version) permits comparison using binary operators, and is a commonplace way of doing version comparison. Incidentally, it is also slated for being replaced with ``NormalizedVersion`` ([PEP 0386](https://www.python.org/dev/peps/pep-0386/)).", "markup": "markdown", "html": "<p>Not really. But is there any reason for not using the version class(es) and comparison of the Standard Library in <code>check_version</code>? The <code>StrictVersion</code> class of <a data-is-external-link=\"true\" href=\"https://docs.python.org/2/distutils/apiref.html#module-distutils.version\" rel=\"nofollow\"><code>distutils.version</code></a> permits comparison using binary operators, and is a commonplace way of doing version comparison. Incidentally, it is also slated for being replaced with <code>NormalizedVersion</code> (<a data-is-external-link=\"true\" href=\"https://www.python.org/dev/peps/pep-0386/\" rel=\"nofollow\">PEP 0386</a>).</p>", "type": "rendered"}, "created_on": "2016-01-18T04:46:25.194433+00:00", "user": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "updated_on": "2016-01-18T04:47:24.118172+00:00", "type": "pullrequest_comment", "id": 13566345}, {"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/4/comments/13566493.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/4/_/diff#comment-13566493"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 4, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/4.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/4"}}, "title": "Added version compatibility check for pandas due to changes to DataFrame.concat"}, "content": {"raw": "Try changing check_version() to use distutils and see how much stuff breaks :p\n\nNot all libraries are installed via pip or similar (ours are hg cloned!), so distutils might not know about them. I've also been in plenty of situations where the version distutils reports is different to the one you actually get when you import, because multiple versions are installed  and I guess the import search order must be different to the order distutils searches (or an old version was not properly removed, and left some old version file lying around). Of course you shouldn't have multiple copies installed, but this nonetheless comes up pretty frequently, and we'd like be doing checks on the runtime environment itself, it's what will actually determine whether the packages satisfy the version requirements for the currently running program or not. \n\nSo actually importing `__version__` from the package (which `check_version()` does) is the lowest common denominator.\n\nActually that's not quite true, not all packages have their version string stored under `package.__version__`. The lowest common denominator is obtaining the version string yourself by importing it and passing it to `check_version()`, which it also supports.\n\nAnyway I consider `check_version()` to be more reliable.\n\n\n\nOh, hang on a second. I've misunderstood, haven't I? You're importing the version literally too. Hm.", "markup": "markdown", "html": "<p>Try changing check_version() to use distutils and see how much stuff breaks :p</p>\n<p>Not all libraries are installed via pip or similar (ours are hg cloned!), so distutils might not know about them. I've also been in plenty of situations where the version distutils reports is different to the one you actually get when you import, because multiple versions are installed  and I guess the import search order must be different to the order distutils searches (or an old version was not properly removed, and left some old version file lying around). Of course you shouldn't have multiple copies installed, but this nonetheless comes up pretty frequently, and we'd like be doing checks on the runtime environment itself, it's what will actually determine whether the packages satisfy the version requirements for the currently running program or not. </p>\n<p>So actually importing <code>__version__</code> from the package (which <code>check_version()</code> does) is the lowest common denominator.</p>\n<p>Actually that's not quite true, not all packages have their version string stored under <code>package.__version__</code>. The lowest common denominator is obtaining the version string yourself by importing it and passing it to <code>check_version()</code>, which it also supports.</p>\n<p>Anyway I consider <code>check_version()</code> to be more reliable.</p>\n<p>Oh, hang on a second. I've misunderstood, haven't I? You're importing the version literally too. Hm.</p>", "type": "rendered"}, "created_on": "2016-01-18T04:57:43.327452+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2016-01-18T05:03:12.663382+00:00", "type": "pullrequest_comment", "id": 13566493}, {"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/4/comments/13566648.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/4/_/diff#comment-13566648"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 4, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/4.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/4"}}, "title": "Added version compatibility check for pandas due to changes to DataFrame.concat"}, "content": {"raw": "I'm not proposing that check_version() stops using ``package.__version__``, rather that the *comparison* of version numbers be done using the ``StrictVersion`` class of ``distutils`` (until PEP 0386 is implemented).", "markup": "markdown", "html": "<p>I'm not proposing that check_version() stops using <code>package.__version__</code>, rather that the <em>comparison</em> of version numbers be done using the <code>StrictVersion</code> class of <code>distutils</code> (until PEP 0386 is implemented).</p>", "type": "rendered"}, "created_on": "2016-01-18T05:08:01.821451+00:00", "user": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "updated_on": "2016-01-18T05:08:01.823518+00:00", "type": "pullrequest_comment", "id": 13566648}, {"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/4/comments/13566652.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/4/_/diff#comment-13566652"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 4, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/4.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/4"}}, "title": "Added version compatibility check for pandas due to changes to DataFrame.concat"}, "content": {"raw": "Chris, I think Russ is saying that `distutils.version.StrictVersion` is part of the standard library (although it doesn't seem to be documented...??). It also seems to take the version as an argument (see the change in this pull request below) so it doesn't rely on the version string being stored in `module.__version__`. Perhaps the only issue would be with version numbers that have strings like 'alpha', or '+' (which we use to denote the current development version) etc in them (it's unclear to me whether `StrictVersion` can handle that or not)\n\nI know our reasoning for creating our own method was to deal with versions not stored in `__version__` but that doesn't seem to be an issue here, and I'm not sure there was any further reasoning behind the original decision.", "markup": "markdown", "html": "<p>Chris, I think Russ is saying that <code>distutils.version.StrictVersion</code> is part of the standard library (although it doesn't seem to be documented...??). It also seems to take the version as an argument (see the change in this pull request below) so it doesn't rely on the version string being stored in <code>module.__version__</code>. Perhaps the only issue would be with version numbers that have strings like 'alpha', or '+' (which we use to denote the current development version) etc in them (it's unclear to me whether <code>StrictVersion</code> can handle that or not)</p>\n<p>I know our reasoning for creating our own method was to deal with versions not stored in <code>__version__</code> but that doesn't seem to be an issue here, and I'm not sure there was any further reasoning behind the original decision.</p>", "type": "rendered"}, "created_on": "2016-01-18T05:08:12.186030+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2016-01-18T05:08:12.190994+00:00", "type": "pullrequest_comment", "id": 13566652}, {"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/4/comments/13566731.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/4/_/diff#comment-13566731"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 4, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/4.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/4"}}, "title": "Added version compatibility check for pandas due to changes to DataFrame.concat"}, "content": {"raw": "See ``labscript_utils`` [pull request #1](#!/labscript_suite/labscript_utils/pull-requests/1/modified-check_version-to-use/diff).", "markup": "markdown", "html": "<p>See <code>labscript_utils</code> <a data-is-external-link=\"true\" href=\"#!/labscript_suite/labscript_utils/pull-requests/1/modified-check_version-to-use/diff\" rel=\"nofollow\">pull request #1</a>.</p>", "type": "rendered"}, "created_on": "2016-01-18T05:14:32.250368+00:00", "user": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "updated_on": "2016-01-18T05:14:32.252387+00:00", "type": "pullrequest_comment", "id": 13566731}, {"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/4/comments/13566860.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/4/_/diff#comment-13566860"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 4, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/4.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/4"}}, "title": "Added version compatibility check for pandas due to changes to DataFrame.concat"}, "content": {"raw": "Yep, I misunderstood (edited my reply a moment after making it)!\n\nI never knew about distutils.version.StrictVersion previously, as phil mentioned its documentation is pretty absent. It is just a tiny class splitting strings with a regex, similarly like us splitting them on dots, but it looks like it probably supports a wider range of version strings than we do. So I'm happy to use it.", "markup": "markdown", "html": "<p>Yep, I misunderstood (edited my reply a moment after making it)!</p>\n<p>I never knew about distutils.version.StrictVersion previously, as phil mentioned its documentation is pretty absent. It is just a tiny class splitting strings with a regex, similarly like us splitting them on dots, but it looks like it probably supports a wider range of version strings than we do. So I'm happy to use it.</p>", "type": "rendered"}, "created_on": "2016-01-18T05:25:31.807803+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2016-01-18T05:25:31.810478+00:00", "type": "pullrequest_comment", "id": 13566860}, {"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/4/comments/13567021.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/4/_/diff#comment-13567021"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 4, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/4.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/4"}}, "title": "Added version compatibility check for pandas due to changes to DataFrame.concat"}, "content": {"raw": "I've updated the version comparison to use ``check_version()``.", "markup": "markdown", "html": "<p>I've updated the version comparison to use <code>check_version()</code>.</p>", "type": "rendered"}, "created_on": "2016-01-18T05:36:35.025876+00:00", "user": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "updated_on": "2016-01-18T05:36:35.028057+00:00", "type": "pullrequest_comment", "id": 13567021}], "page": 1, "size": 8}