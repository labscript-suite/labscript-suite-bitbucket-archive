{"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/40/comments/57276947.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/40/_/diff#comment-57276947"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 40, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/40.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/40"}}, "title": "Performance optimisation."}, "content": {"raw": "Thanks for testing!\n\nThe bug with integer indexing was because I didn't update the dataframe before calling `renumber_rows()` when adding shots, which violated the assumptions of the `renumber_rows()` function (I was updating the dataframe after calling it). That should be fixed now.\n\nI can't reproduce shots not being removed from the cache - but, since that occurs in `renumber_rows()`, it's possible that if you were catching errors there and telling it to return or something like that, that the renumbering would have not been done correctly on account of that.\n\nCould you let me know if the commit I pushed fixes both the issues for you?", "markup": "markdown", "html": "<p>Thanks for testing!</p>\n<p>The bug with integer indexing was because I didn't update the dataframe before calling <code>renumber_rows()</code> when adding shots, which violated the assumptions of the <code>renumber_rows()</code> function (I was updating the dataframe after calling it). That should be fixed now.</p>\n<p>I can't reproduce shots not being removed from the cache - but, since that occurs in <code>renumber_rows()</code>, it's possible that if you were catching errors there and telling it to return or something like that, that the renumbering would have not been done correctly on account of that.</p>\n<p>Could you let me know if the commit I pushed fixes both the issues for you?</p>", "type": "rendered"}, "created_on": "2018-02-26T11:43:51.918153+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2018-02-26T11:43:51.923597+00:00", "type": "pullrequest_comment", "id": 57276947}