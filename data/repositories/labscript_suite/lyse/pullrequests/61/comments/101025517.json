{"links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/61/comments/101025517.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/61/_/diff#comment-101025517"}}, "parent": {"id": 100920048, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/61/comments/100920048.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/61/_/diff#comment-100920048"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 61, "links": {"self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/61.json"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/61"}}, "title": "Fix for #48: Make analysis_subprocess.py multiprocessing-friendly"}, "content": {"raw": "I was able to reproduce (perhaps the other Windows host was using an older zprocess? I only switched it from command line argument to environment variable a few commits ago), and have updated zprocess to not leak the environment variable to child processes, and verified it works. It also deletes it from the current environment, so it shouldn't show up in process explorer for any processes.\n\nFrom what I can gather reading online, one needs to have permission to read a process's memory in order to get its environment variables, so that seems pretty secure to me - it's limited to users that can interact with each other's processes, and the administrator. So whilst there is only now a brief time at startup where process explorer will show ZPROCESS_PARENTINFO for a zprocess subprocess, it will only show you it if you own the process or are the admin.  I can see that if I run process explorer as a normal user, and try to view environment variables of system processes, they are blank, but if I run process explorer as admin, I can see those process's environment variables.", "markup": "markdown", "html": "<p>I was able to reproduce (perhaps the other Windows host was using an older zprocess? I only switched it from command line argument to environment variable a few commits ago), and have updated zprocess to not leak the environment variable to child processes, and verified it works. It also deletes it from the current environment, so it shouldn't show up in process explorer for any processes.</p>\n<p>From what I can gather reading online, one needs to have permission to read a process's memory in order to get its environment variables, so that seems pretty secure to me - it's limited to users that can interact with each other's processes, and the administrator. So whilst there is only now a brief time at startup where process explorer will show ZPROCESS_PARENTINFO for a zprocess subprocess, it will only show you it if you own the process or are the admin.  I can see that if I run process explorer as a normal user, and try to view environment variables of system processes, they are blank, but if I run process explorer as admin, I can see those process's environment variables.</p>", "type": "rendered"}, "created_on": "2019-05-06T16:36:37.605389+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-05-06T16:36:37.620155+00:00", "type": "pullrequest_comment", "id": 101025517}