{"rendered": {"description": {"raw": "Fix two issues with delayed closing of lyse\r\n\r\n* There was a bug where if no configuration changed, Lyse.on_close_event\r\n  would not terminate the subprocesses, and then it would wait the full\r\n  two seconds before quitting (and potentially leave any non-zprocess subprocesses\r\n  running). Refactored on_close_event(), factoring out the 'are you sure' dialog\r\n  and the termination of all subprocesses into separate functions while fixing\r\n  the logic here.\r\n* When lyse was to actually quit, it called qapplication.quit() instead of .close()\r\n  on the main window. This means if running with `python -i`, lyse doesn't actually\r\n  close, as the event loop just fires back up again. Now it actally calls close(),\r\n  and this triggers the same method that caught the first close event, which knows\r\n  it's the second time it's been called because a flag has been set so actually closes.\r\n  This also has the side effect that the user clicking close twice will close\r\n  lyse regardless of the timeout (which seems fine).", "markup": "markdown", "html": "<p>Fix two issues with delayed closing of lyse</p>\n<ul>\n<li>There was a bug where if no configuration changed, Lyse.on_close_event\n  would not terminate the subprocesses, and then it would wait the full\n  two seconds before quitting (and potentially leave any non-zprocess subprocesses\n  running). Refactored on_close_event(), factoring out the 'are you sure' dialog\n  and the termination of all subprocesses into separate functions while fixing\n  the logic here.</li>\n<li>When lyse was to actually quit, it called qapplication.quit() instead of .close()\n  on the main window. This means if running with <code>python -i</code>, lyse doesn't actually\n  close, as the event loop just fires back up again. Now it actally calls close(),\n  and this triggers the same method that caught the first close event, which knows\n  it's the second time it's been called because a flag has been set so actually closes.\n  This also has the side effect that the user clicking close twice will close\n  lyse regardless of the timeout (which seems fine).</li>\n</ul>", "type": "rendered"}, "title": {"raw": "Fix two issues with delayed closing of lyse", "markup": "markdown", "html": "<p>Fix two issues with delayed closing of lyse</p>", "type": "rendered"}}, "type": "pullrequest", "description": "Fix two issues with delayed closing of lyse\r\n\r\n* There was a bug where if no configuration changed, Lyse.on_close_event\r\n  would not terminate the subprocesses, and then it would wait the full\r\n  two seconds before quitting (and potentially leave any non-zprocess subprocesses\r\n  running). Refactored on_close_event(), factoring out the 'are you sure' dialog\r\n  and the termination of all subprocesses into separate functions while fixing\r\n  the logic here.\r\n* When lyse was to actually quit, it called qapplication.quit() instead of .close()\r\n  on the main window. This means if running with `python -i`, lyse doesn't actually\r\n  close, as the event loop just fires back up again. Now it actally calls close(),\r\n  and this triggers the same method that caught the first close event, which knows\r\n  it's the second time it's been called because a flag has been set so actually closes.\r\n  This also has the side effect that the user clicking close twice will close\r\n  lyse regardless of the timeout (which seems fine).", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/pullrequests/63/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/diffstat/labscript_suite/lyse:fedfacf40eb7%0De8dda2f57f68?from_pullrequest_id=63"}, "commits": {"href": "data/repositories/labscript_suite/lyse/pullrequests/63/commits.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/63.json"}, "comments": {"href": "data/repositories/labscript_suite/lyse/pullrequests/63/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/pullrequests/63/merge"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/63"}, "activity": {"href": "data/repositories/labscript_suite/lyse/pullrequests/63/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/diff/labscript_suite/lyse:fedfacf40eb7%0De8dda2f57f68?from_pullrequest_id=63"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/pullrequests/63/approve"}, "statuses": {"href": "data/repositories/labscript_suite/lyse/pullrequests/63/statuses_page=1.json"}}, "title": "Fix two issues with delayed closing of lyse", "close_source_branch": true, "reviewers": [{"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, {"display_name": "Philip Starkey", "uuid": "{0147401a-13ed-4e39-a0d0-63108c18738b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D"}, "html": {"href": "https://bitbucket.org/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/fa0698c306b3470c00717c146b5296e9d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "philipstarkey", "type": "user", "account_id": "557058:2f99420c-1dbd-4837-952c-82c421b8fbdd"}], "id": 63, "destination": {"commit": {"hash": "e8dda2f57f68", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/lyse/commit/e8dda2f57f68.json"}, "html": {"href": "#!/labscript_suite/lyse/commits/e8dda2f57f68"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "branch": {"name": "default"}}, "created_on": "2019-05-10T01:13:26.968729+00:00", "summary": {"raw": "Fix two issues with delayed closing of lyse\r\n\r\n* There was a bug where if no configuration changed, Lyse.on_close_event\r\n  would not terminate the subprocesses, and then it would wait the full\r\n  two seconds before quitting (and potentially leave any non-zprocess subprocesses\r\n  running). Refactored on_close_event(), factoring out the 'are you sure' dialog\r\n  and the termination of all subprocesses into separate functions while fixing\r\n  the logic here.\r\n* When lyse was to actually quit, it called qapplication.quit() instead of .close()\r\n  on the main window. This means if running with `python -i`, lyse doesn't actually\r\n  close, as the event loop just fires back up again. Now it actally calls close(),\r\n  and this triggers the same method that caught the first close event, which knows\r\n  it's the second time it's been called because a flag has been set so actually closes.\r\n  This also has the side effect that the user clicking close twice will close\r\n  lyse regardless of the timeout (which seems fine).", "markup": "markdown", "html": "<p>Fix two issues with delayed closing of lyse</p>\n<ul>\n<li>There was a bug where if no configuration changed, Lyse.on_close_event\n  would not terminate the subprocesses, and then it would wait the full\n  two seconds before quitting (and potentially leave any non-zprocess subprocesses\n  running). Refactored on_close_event(), factoring out the 'are you sure' dialog\n  and the termination of all subprocesses into separate functions while fixing\n  the logic here.</li>\n<li>When lyse was to actually quit, it called qapplication.quit() instead of .close()\n  on the main window. This means if running with <code>python -i</code>, lyse doesn't actually\n  close, as the event loop just fires back up again. Now it actally calls close(),\n  and this triggers the same method that caught the first close event, which knows\n  it's the second time it's been called because a flag has been set so actually closes.\n  This also has the side effect that the user clicking close twice will close\n  lyse regardless of the timeout (which seems fine).</li>\n</ul>", "type": "rendered"}, "source": {"commit": {"hash": "efe00aa15132", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/lyse/commit/efe00aa15132"}, "html": {"href": "#!/cbillington/lyse/commits/efe00aa15132"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/lyse"}, "html": {"href": "#!/cbillington/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{47c91022-279d-4058-88a8-959fe9ffb409}ts=python"}}, "type": "repository", "name": "lyse", "full_name": "cbillington/lyse", "uuid": "{47c91022-279d-4058-88a8-959fe9ffb409}"}, "branch": {"name": "bugfix"}}, "comment_count": 0, "state": "MERGED", "task_count": 0, "participants": [{"role": "REVIEWER", "participated_on": "2019-05-10T02:05:15.982413+00:00", "type": "participant", "approved": true, "user": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}}, {"role": "REVIEWER", "participated_on": null, "type": "participant", "approved": false, "user": {"display_name": "Philip Starkey", "uuid": "{0147401a-13ed-4e39-a0d0-63108c18738b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D"}, "html": {"href": "https://bitbucket.org/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/fa0698c306b3470c00717c146b5296e9d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "philipstarkey", "type": "user", "account_id": "557058:2f99420c-1dbd-4837-952c-82c421b8fbdd"}}], "reason": "", "updated_on": "2019-05-10T02:14:04.400421+00:00", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "merge_commit": {"hash": "fedfacf40eb7", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/lyse/commit/fedfacf40eb7.json"}, "html": {"href": "#!/labscript_suite/lyse/commits/fedfacf40eb7"}}}, "closed_by": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}}