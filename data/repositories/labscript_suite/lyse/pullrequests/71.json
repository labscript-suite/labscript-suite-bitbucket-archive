{"rendered": {"description": {"raw": "This fixes a bug where the number of levels is incorrect after all shots are\r\ndeleted and shots with fewer levels are loaded. We could allow the number of\r\nlevels to decrease, but this is more trouble than it is worth since we store\r\npreviously-seen columns so that their visibility can be restored if they are\r\nseen again. Since their levels cannot be reduced, comparing them with other\r\ncolumns is difficult. There is surely a cleaner way to deal with all this,\r\nbut it will require more work, whereas the bug is fixed by simply ensuring that\r\nthe number of column levels never shrinks (which was an assumption since lyse's\r\ninception, only violated as a side effect of an unrelated change to `concat_with_padding`).", "markup": "markdown", "html": "<p>This fixes a bug where the number of levels is incorrect after all shots are\ndeleted and shots with fewer levels are loaded. We could allow the number of\nlevels to decrease, but this is more trouble than it is worth since we store\npreviously-seen columns so that their visibility can be restored if they are\nseen again. Since their levels cannot be reduced, comparing them with other\ncolumns is difficult. There is surely a cleaner way to deal with all this,\nbut it will require more work, whereas the bug is fixed by simply ensuring that\nthe number of column levels never shrinks (which was an assumption since lyse's\ninception, only violated as a side effect of an unrelated change to <code>concat_with_padding</code>).</p>", "type": "rendered"}, "title": {"raw": "Ensure number of levels in the dataframe does not decrease.", "markup": "markdown", "html": "<p>Ensure number of levels in the dataframe does not decrease.</p>", "type": "rendered"}}, "type": "pullrequest", "description": "This fixes a bug where the number of levels is incorrect after all shots are\r\ndeleted and shots with fewer levels are loaded. We could allow the number of\r\nlevels to decrease, but this is more trouble than it is worth since we store\r\npreviously-seen columns so that their visibility can be restored if they are\r\nseen again. Since their levels cannot be reduced, comparing them with other\r\ncolumns is difficult. There is surely a cleaner way to deal with all this,\r\nbut it will require more work, whereas the bug is fixed by simply ensuring that\r\nthe number of column levels never shrinks (which was an assumption since lyse's\r\ninception, only violated as a side effect of an unrelated change to `concat_with_padding`).", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/pullrequests/71/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/diffstat/labscript_suite/lyse:447b70949c45%0D0640ec756845?from_pullrequest_id=71"}, "commits": {"href": "data/repositories/labscript_suite/lyse/pullrequests/71/commits.json"}, "self": {"href": "data/repositories/labscript_suite/lyse/pullrequests/71.json"}, "comments": {"href": "data/repositories/labscript_suite/lyse/pullrequests/71/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/pullrequests/71/merge"}, "html": {"href": "#!/labscript_suite/lyse/pull-requests/71"}, "activity": {"href": "data/repositories/labscript_suite/lyse/pullrequests/71/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/diff/labscript_suite/lyse:447b70949c45%0D0640ec756845?from_pullrequest_id=71"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/lyse/pullrequests/71/approve"}, "statuses": {"href": "data/repositories/labscript_suite/lyse/pullrequests/71/statuses_page=1.json"}}, "title": "Ensure number of levels in the dataframe does not decrease.", "close_source_branch": true, "reviewers": [{"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, {"display_name": "Francisco Salces Carcoba", "uuid": "{4933026d-06f9-4900-a8a7-66123538ded0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4933026d-06f9-4900-a8a7-66123538ded0%7D"}, "html": {"href": "https://bitbucket.org/%7B4933026d-06f9-4900-a8a7-66123538ded0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:253ddc41-0f46-4ffa-af0e-c7cb537b7c5b/d0041185-c8e4-42fd-bd0e-af74bfef28a6/128"}}, "nickname": "pacosalces", "type": "user", "account_id": "557058:253ddc41-0f46-4ffa-af0e-c7cb537b7c5b"}, {"display_name": "Philip Starkey", "uuid": "{0147401a-13ed-4e39-a0d0-63108c18738b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D"}, "html": {"href": "https://bitbucket.org/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/fa0698c306b3470c00717c146b5296e9d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "philipstarkey", "type": "user", "account_id": "557058:2f99420c-1dbd-4837-952c-82c421b8fbdd"}], "id": 71, "destination": {"commit": {"hash": "0640ec756845", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/lyse/commit/0640ec756845.json"}, "html": {"href": "#!/labscript_suite/lyse/commits/0640ec756845"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/lyse.json"}, "html": {"href": "#!/labscript_suite/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{55eebdfe-43d1-4ae8-9049-50c55b295397}ts=249921"}}, "type": "repository", "name": "lyse", "full_name": "labscript_suite/lyse", "uuid": "{55eebdfe-43d1-4ae8-9049-50c55b295397}"}, "branch": {"name": "default"}}, "created_on": "2019-10-23T19:50:25.376144+00:00", "summary": {"raw": "This fixes a bug where the number of levels is incorrect after all shots are\r\ndeleted and shots with fewer levels are loaded. We could allow the number of\r\nlevels to decrease, but this is more trouble than it is worth since we store\r\npreviously-seen columns so that their visibility can be restored if they are\r\nseen again. Since their levels cannot be reduced, comparing them with other\r\ncolumns is difficult. There is surely a cleaner way to deal with all this,\r\nbut it will require more work, whereas the bug is fixed by simply ensuring that\r\nthe number of column levels never shrinks (which was an assumption since lyse's\r\ninception, only violated as a side effect of an unrelated change to `concat_with_padding`).", "markup": "markdown", "html": "<p>This fixes a bug where the number of levels is incorrect after all shots are\ndeleted and shots with fewer levels are loaded. We could allow the number of\nlevels to decrease, but this is more trouble than it is worth since we store\npreviously-seen columns so that their visibility can be restored if they are\nseen again. Since their levels cannot be reduced, comparing them with other\ncolumns is difficult. There is surely a cleaner way to deal with all this,\nbut it will require more work, whereas the bug is fixed by simply ensuring that\nthe number of column levels never shrinks (which was an assumption since lyse's\ninception, only violated as a side effect of an unrelated change to <code>concat_with_padding</code>).</p>", "type": "rendered"}, "source": {"commit": {"hash": "12165647daaf", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/lyse/commit/12165647daaf"}, "html": {"href": "#!/cbillington/lyse/commits/12165647daaf"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/lyse"}, "html": {"href": "#!/cbillington/lyse"}, "avatar": {"href": "data/bytebucket.org/ravatar/{47c91022-279d-4058-88a8-959fe9ffb409}ts=python"}}, "type": "repository", "name": "lyse", "full_name": "cbillington/lyse", "uuid": "{47c91022-279d-4058-88a8-959fe9ffb409}"}, "branch": {"name": "bugfix"}}, "comment_count": 1, "state": "MERGED", "task_count": 0, "participants": [{"role": "REVIEWER", "participated_on": null, "type": "participant", "approved": false, "user": {"display_name": "Francisco Salces Carcoba", "uuid": "{4933026d-06f9-4900-a8a7-66123538ded0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4933026d-06f9-4900-a8a7-66123538ded0%7D"}, "html": {"href": "https://bitbucket.org/%7B4933026d-06f9-4900-a8a7-66123538ded0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:253ddc41-0f46-4ffa-af0e-c7cb537b7c5b/d0041185-c8e4-42fd-bd0e-af74bfef28a6/128"}}, "nickname": "pacosalces", "type": "user", "account_id": "557058:253ddc41-0f46-4ffa-af0e-c7cb537b7c5b"}}, {"role": "REVIEWER", "participated_on": null, "type": "participant", "approved": false, "user": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}}, {"role": "PARTICIPANT", "participated_on": "2019-10-31T16:33:34.085406+00:00", "type": "participant", "approved": false, "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}}, {"role": "REVIEWER", "participated_on": null, "type": "participant", "approved": false, "user": {"display_name": "Philip Starkey", "uuid": "{0147401a-13ed-4e39-a0d0-63108c18738b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D"}, "html": {"href": "https://bitbucket.org/%7B0147401a-13ed-4e39-a0d0-63108c18738b%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/fa0698c306b3470c00717c146b5296e9d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "philipstarkey", "type": "user", "account_id": "557058:2f99420c-1dbd-4837-952c-82c421b8fbdd"}}], "reason": "", "updated_on": "2019-10-31T16:33:39.113291+00:00", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "merge_commit": {"hash": "447b70949c45", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/lyse/commit/447b70949c45.json"}, "html": {"href": "#!/labscript_suite/lyse/commits/447b70949c45"}}}, "closed_by": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}}