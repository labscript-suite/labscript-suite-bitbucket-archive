{"priority": "minor", "kind": "proposal", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/runmanager/issues/39/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/runmanager/issues/39.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/runmanager/issues/39/watch"}, "comments": {"href": "data/repositories/labscript_suite/runmanager/issues/39/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/runmanager/issues/39/new-folder-for-each-engage"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/runmanager/issues/39/vote"}}, "reporter": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "title": "New Folder for each engage", "component": null, "votes": 0, "watches": 2, "content": {"raw": "In our lab we commonly run a series of a few hundred shots, then tweak a few globals and run that series again.\r\nThis generates a lot of h5 Files and since not all series workout, we sometimes want to delete a whole series in bundle. \r\nCurrently this is quite cumbersome since we need to finde the files, that belong to one shot in the many hundreds of files generated that day.\r\n\r\nI propose creating a new Folder each time engage is clicked by changing the make_h5_files function in the following way:\r\n\r\n```\r\n#!python\r\n    def make_h5_files(self, labscript_file, output_folder, sequence_globals, shots, shuffle):\r\n        sequence_id = runmanager.generate_sequence_id(labscript_file)\r\n        output_folder = os.path.join(output_folder, sequence_id.split('T')[1].split('_')[0])\r\n        mkdir_p(output_folder)  # ensure it exists\r\n        run_files = runmanager.make_run_files(output_folder, sequence_globals, shots, sequence_id, shuffle)\r\n        logger.debug(run_files)\r\n        return labscript_file, run_files\r\n\r\n```", "markup": "markdown", "html": "<p>In our lab we commonly run a series of a few hundred shots, then tweak a few globals and run that series again.\nThis generates a lot of h5 Files and since not all series workout, we sometimes want to delete a whole series in bundle. \nCurrently this is quite cumbersome since we need to finde the files, that belong to one shot in the many hundreds of files generated that day.</p>\n<p>I propose creating a new Folder each time engage is clicked by changing the make_h5_files function in the following way:</p>\n<div class=\"codehilite language-python\"><pre><span></span>    <span class=\"k\">def</span> <span class=\"nf\">make_h5_files</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">labscript_file</span><span class=\"p\">,</span> <span class=\"n\">output_folder</span><span class=\"p\">,</span> <span class=\"n\">sequence_globals</span><span class=\"p\">,</span> <span class=\"n\">shots</span><span class=\"p\">,</span> <span class=\"n\">shuffle</span><span class=\"p\">):</span>\n        <span class=\"n\">sequence_id</span> <span class=\"o\">=</span> <span class=\"n\">runmanager</span><span class=\"o\">.</span><span class=\"n\">generate_sequence_id</span><span class=\"p\">(</span><span class=\"n\">labscript_file</span><span class=\"p\">)</span>\n        <span class=\"n\">output_folder</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"n\">output_folder</span><span class=\"p\">,</span> <span class=\"n\">sequence_id</span><span class=\"o\">.</span><span class=\"n\">split</span><span class=\"p\">(</span><span class=\"s1\">&#39;T&#39;</span><span class=\"p\">)[</span><span class=\"mi\">1</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">split</span><span class=\"p\">(</span><span class=\"s1\">&#39;_&#39;</span><span class=\"p\">)[</span><span class=\"mi\">0</span><span class=\"p\">])</span>\n        <span class=\"n\">mkdir_p</span><span class=\"p\">(</span><span class=\"n\">output_folder</span><span class=\"p\">)</span>  <span class=\"c1\"># ensure it exists</span>\n        <span class=\"n\">run_files</span> <span class=\"o\">=</span> <span class=\"n\">runmanager</span><span class=\"o\">.</span><span class=\"n\">make_run_files</span><span class=\"p\">(</span><span class=\"n\">output_folder</span><span class=\"p\">,</span> <span class=\"n\">sequence_globals</span><span class=\"p\">,</span> <span class=\"n\">shots</span><span class=\"p\">,</span> <span class=\"n\">sequence_id</span><span class=\"p\">,</span> <span class=\"n\">shuffle</span><span class=\"p\">)</span>\n        <span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">debug</span><span class=\"p\">(</span><span class=\"n\">run_files</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">labscript_file</span><span class=\"p\">,</span> <span class=\"n\">run_files</span>\n</pre></div>", "type": "rendered"}, "assignee": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2017-06-13T19:20:12.862422+00:00", "milestone": null, "updated_on": "2019-04-21T08:53:49.991613+00:00", "type": "issue", "id": 39}