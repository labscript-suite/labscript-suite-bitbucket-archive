{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "links": {"attachments": {"href": "data/repositories/labscript_suite/runmanager/issues/50/attachments_page=1.json"}, "self": {"href": "data/repositories/labscript_suite/runmanager/issues/50.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/runmanager/issues/50/watch"}, "comments": {"href": "data/repositories/labscript_suite/runmanager/issues/50/comments_page=1.json"}, "html": {"href": "#!/labscript_suite/runmanager/issues/50/bugs-with-restoring-expansion-type-when"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/runmanager/issues/50/vote"}}, "reporter": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "title": "Bugs with restoring expansion type when runmanager is reopened", "component": null, "votes": 0, "watches": 1, "content": {"raw": "Following on from issue #49, there are two outstanding bugs I have found that I could not fix. These are:\r\n\r\n* Manually changing an \"outer\" expansion type to nothing (it will revert to \"outer\" when you reopen runmanager)\r\n* Manually changing a zip group to \"outer\" (it will revert to the zip group when you re-open)\r\n\r\nI think that to fix these we will need to save some data as to whether the expansion type was set manually by the user or automatically by runmanager (and that this needs to be stored in the HDF5 file along side the expansion type). My reasoning for this is that we currently guess the expansion type which is either none or expansion, and then decide if it is a zip group. Because we transition from outer -> zip, we thus can't distinguish zip -> outer as it will appear like it's at the start of the transition from outer -> zip. Similarly, arrays that have had their expansion type removed, will have the expansion type guessed as \"outer\", since the expansion is determined from the type and so you can't tell the difference.\r\n\r\nThere may be a way to solve this (without storing extra data in the HDF5 file) by rebuilding the metadata used in the calculation of the expansion type, when runmanager restores open groups. However, I'm not 100% certain this  is possible...", "markup": "markdown", "html": "<p>Following on from issue <a href=\"#!/labscript_suite/runmanager/issues/49/zip-groups-are-overridden-when-reopening\" rel=\"nofollow\" title=\"Zip groups are overridden when reopening runmanager\" class=\"ap-connect-link\"><s>#49</s></a>, there are two outstanding bugs I have found that I could not fix. These are:</p>\n<ul>\n<li>Manually changing an \"outer\" expansion type to nothing (it will revert to \"outer\" when you reopen runmanager)</li>\n<li>Manually changing a zip group to \"outer\" (it will revert to the zip group when you re-open)</li>\n</ul>\n<p>I think that to fix these we will need to save some data as to whether the expansion type was set manually by the user or automatically by runmanager (and that this needs to be stored in the HDF5 file along side the expansion type). My reasoning for this is that we currently guess the expansion type which is either none or expansion, and then decide if it is a zip group. Because we transition from outer -&gt; zip, we thus can't distinguish zip -&gt; outer as it will appear like it's at the start of the transition from outer -&gt; zip. Similarly, arrays that have had their expansion type removed, will have the expansion type guessed as \"outer\", since the expansion is determined from the type and so you can't tell the difference.</p>\n<p>There may be a way to solve this (without storing extra data in the HDF5 file) by rebuilding the metadata used in the calculation of the expansion type, when runmanager restores open groups. However, I'm not 100% certain this  is possible...</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2017-09-11T04:35:47.882764+00:00", "milestone": null, "updated_on": "2018-03-13T17:03:34.244769+00:00", "type": "issue", "id": 50}