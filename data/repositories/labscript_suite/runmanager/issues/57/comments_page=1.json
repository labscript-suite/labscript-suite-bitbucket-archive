{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/issues/57/comments/45347412.json"}, "html": {"href": "#!/labscript_suite/runmanager/issues/57#comment-45347412"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/issues/57.json"}}, "type": "issue", "id": 57, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "title": "runmanager under Python 2.7 cannot handle globals that contain unicode characters set under Python 3"}, "content": {"raw": "`str(value)` -> `value.decode('utf8')` in `__main__.py\", line 719` should fix that", "markup": "markdown", "html": "<p><code>str(value)</code> -&gt; <code>value.decode('utf8')</code> in <code>__main__.py\", line 719</code> should fix that</p>", "type": "rendered"}, "created_on": "2018-05-10T06:22:01.385066+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": null, "type": "issue_comment", "id": 45347412}, {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/issues/57/comments/45347461.json"}, "html": {"href": "#!/labscript_suite/runmanager/issues/57#comment-45347461"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/issues/57.json"}}, "type": "issue", "id": 57, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "title": "runmanager under Python 2.7 cannot handle globals that contain unicode characters set under Python 3"}, "content": {"raw": "Oh actually that will break on Python 3. We probably want to convert with `runmanager._ensure_str()` to decode the string conditional on whether it's already a unicode string or not.", "markup": "markdown", "html": "<p>Oh actually that will break on Python 3. We probably want to convert with <code>runmanager._ensure_str()</code> to decode the string conditional on whether it's already a unicode string or not.</p>", "type": "rendered"}, "created_on": "2018-05-10T06:26:17.809161+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": null, "type": "issue_comment", "id": 45347461}, {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/issues/57/comments/45348528.json"}, "html": {"href": "#!/labscript_suite/runmanager/issues/57#comment-45348528"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/issues/57.json"}}, "type": "issue", "id": 57, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "title": "runmanager under Python 2.7 cannot handle globals that contain unicode characters set under Python 3"}, "content": {"raw": "I'm wondering if we just need `if PY2: str=unicode` and the top of `__main__.py`. PyQt should be able to handle unicode strings I think (probably should check carefully with PyQt4 and PyQt5)", "markup": "markdown", "html": "<p>I'm wondering if we just need <code>if PY2: str=unicode</code> and the top of <code>__main__.py</code>. PyQt should be able to handle unicode strings I think (probably should check carefully with PyQt4 and PyQt5)</p>", "type": "rendered"}, "created_on": "2018-05-10T07:21:20.155174+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": null, "type": "issue_comment", "id": 45348528}, {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/issues/57/comments/45348916.json"}, "html": {"href": "#!/labscript_suite/runmanager/issues/57#comment-45348916"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/issues/57.json"}}, "type": "issue", "id": 57, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "title": "runmanager under Python 2.7 cannot handle globals that contain unicode characters set under Python 3"}, "content": {"raw": "They can definitely handle unicode strings, but we want `.decode('utf8')`, not `unicode()`,  as 'unicode' still assumes ascii codex for converting bytes:\n```python\n>>> unicode('\u00fc'.encode('utf8'))\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 0: ordinal not in range(128)\n```\n\n`if PY2: str=unicode` is a good idea as well though to ensure both Python versions are using the same datatypes when `str()` is called in other contexts", "markup": "markdown", "html": "<p>They can definitely handle unicode strings, but we want <code>.decode('utf8')</code>, not <code>unicode()</code>,  as 'unicode' still assumes ascii codex for converting bytes:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"nb\">unicode</span><span class=\"p\">(</span><span class=\"s1\">&#39;\u00fc&#39;</span><span class=\"o\">.</span><span class=\"n\">encode</span><span class=\"p\">(</span><span class=\"s1\">&#39;utf8&#39;</span><span class=\"p\">))</span>\n<span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"p\">):</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;&lt;stdin&gt;&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span>\n<span class=\"ne\">UnicodeDecodeError</span><span class=\"p\">:</span> <span class=\"s1\">&#39;ascii&#39;</span> <span class=\"n\">codec</span> <span class=\"n\">can</span><span class=\"s1\">&#39;t decode byte 0xc3 in position 0: ordinal not in range(128)</span>\n</pre></div>\n\n\n<p><code>if PY2: str=unicode</code> is a good idea as well though to ensure both Python versions are using the same datatypes when <code>str()</code> is called in other contexts</p>", "type": "rendered"}, "created_on": "2018-05-10T07:42:33.067424+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2018-05-10T07:43:25.411753+00:00", "type": "issue_comment", "id": 45348916}, {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/issues/57/comments/45370448.json"}, "html": {"href": "#!/labscript_suite/runmanager/issues/57#comment-45370448"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/issues/57.json"}}, "type": "issue", "id": 57, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "title": "runmanager under Python 2.7 cannot handle globals that contain unicode characters set under Python 3"}, "content": {"raw": "I am unable to reproduce this.\n\nThe strings are already unicode strings, as `runmanager.get_globals()` is already sufficiently full of calls to `_ensure_str()` on every string it reads from the globals file. so `str()` on  them is a no-op. `if PY2: str = unicode` is already present at the top of `__main__.py`, but if i weren't `str()` would be equivalent to `.encode('ascii')`, causing the error you're seeing. I see the line numbers in your traceback don't match mine. That makes me think you're on a different version of the codebase that lacks the `if PY2: str = unicode` line and would explain why I can't reproduce.", "markup": "markdown", "html": "<p>I am unable to reproduce this.</p>\n<p>The strings are already unicode strings, as <code>runmanager.get_globals()</code> is already sufficiently full of calls to <code>_ensure_str()</code> on every string it reads from the globals file. so <code>str()</code> on  them is a no-op. <code>if PY2: str = unicode</code> is already present at the top of <code>__main__.py</code>, but if i weren't <code>str()</code> would be equivalent to <code>.encode('ascii')</code>, causing the error you're seeing. I see the line numbers in your traceback don't match mine. That makes me think you're on a different version of the codebase that lacks the <code>if PY2: str = unicode</code> line and would explain why I can't reproduce.</p>", "type": "rendered"}, "created_on": "2018-05-11T06:53:26.834768+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": null, "type": "issue_comment", "id": 45370448}, {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/issues/57/comments/45370588.json"}, "html": {"href": "#!/labscript_suite/runmanager/issues/57#comment-45370588"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/issues/57.json"}}, "type": "issue", "id": 57, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "title": "runmanager under Python 2.7 cannot handle globals that contain unicode characters set under Python 3"}, "content": {"raw": "Can't reproduce with latest version", "markup": "markdown", "html": "<p>Can't reproduce with latest version</p>", "type": "rendered"}, "created_on": "2018-05-11T07:02:31.555502+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": null, "type": "issue_comment", "id": 45370588}], "page": 1, "size": 6}