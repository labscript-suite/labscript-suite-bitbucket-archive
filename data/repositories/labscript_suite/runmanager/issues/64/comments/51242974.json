{"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/issues/64/comments/51242974.json"}, "html": {"href": "#!/labscript_suite/runmanager/issues/64#comment-51242974"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/issues/64.json"}}, "type": "issue", "id": 64, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "title": "zip argument error in expand_globals"}, "content": {"raw": "I see - it sounds like what's going on might be something like the following. There are two globals with the same name. Runmanager sees that one of them is iterable, but when it gets the actual value, it obtains the value associated with the other one, which is not iterable. There are probably order-dependent effects since runmanager stores the globals and their details in dictionaries.\n\nThe solution would be for runmanager to check for duplicate names before evaluating anything. It shouldn't proceed if there are duplicate names. It does this check at some point but evidently not early enough. I'll investigate.", "markup": "markdown", "html": "<p>I see - it sounds like what's going on might be something like the following. There are two globals with the same name. Runmanager sees that one of them is iterable, but when it gets the actual value, it obtains the value associated with the other one, which is not iterable. There are probably order-dependent effects since runmanager stores the globals and their details in dictionaries.</p>\n<p>The solution would be for runmanager to check for duplicate names before evaluating anything. It shouldn't proceed if there are duplicate names. It does this check at some point but evidently not early enough. I'll investigate.</p>", "type": "rendered"}, "created_on": "2019-03-20T19:30:49.072654+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": null, "type": "issue_comment", "id": 51242974}