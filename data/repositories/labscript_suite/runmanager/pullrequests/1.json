{"rendered": {"description": {"raw": "Revision 579ccd8e1fb3 introduced a regression as a result of a misguided attempt for forward compatibility with Python 3. This caused `runmanager.get_all_groups()` to misidentify what type of argument it was being passed, and to think it had a list of filepaths when it had actually been passed a single filepath. It then iterated over the characters of the filepath, and obviously failed to open the hdf5 file.\r\n\r\nThis was discovered because it prevented the globals diff functionality in runmanager from working.\r\n\r\nAfter fixing this, it was discovered that the way we are calling DataFrame.to_string() uses a keyword argument that is only valid in pandas > 0.13. So I added a version check for pandas > 0.13.\r\n\r\nI bumped the version string from '2.0.3' to '2.0.4-dev', to be released as 2.0.4 if the only additional changes before then are bugfixes.\r\n\r\nThis fix has been deployed to the spinor lab, I propose a few days' use to confirm everything is ok before this pull request is accepted.\r\n\r\nIt's not as trivial a fix as it looks, because the regression had aliased the name 'unicode' to point to 'str'. That meant that some functions that previously returned bytestrings now return unicode strings. This was intended behaviour all along, but is a big enough change that a bit of testing to ensure it doesn't cause any other regressions is worthwhile.\r\n\r\nSpinor people added as reviewers because they're the ones running it in the lab", "markup": "markdown", "html": "<p>Revision <a href=\"#!/labscript_suite/runmanager/commits/579ccd8e1fb3\" rel=\"nofollow\" class=\"ap-connect-link\">579ccd8e1fb3</a> introduced a regression as a result of a misguided attempt for forward compatibility with Python 3. This caused <code>runmanager.get_all_groups()</code> to misidentify what type of argument it was being passed, and to think it had a list of filepaths when it had actually been passed a single filepath. It then iterated over the characters of the filepath, and obviously failed to open the hdf5 file.</p>\n<p>This was discovered because it prevented the globals diff functionality in runmanager from working.</p>\n<p>After fixing this, it was discovered that the way we are calling DataFrame.to_string() uses a keyword argument that is only valid in pandas &gt; 0.13. So I added a version check for pandas &gt; 0.13.</p>\n<p>I bumped the version string from '2.0.3' to '2.0.4-dev', to be released as 2.0.4 if the only additional changes before then are bugfixes.</p>\n<p>This fix has been deployed to the spinor lab, I propose a few days' use to confirm everything is ok before this pull request is accepted.</p>\n<p>It's not as trivial a fix as it looks, because the regression had aliased the name 'unicode' to point to 'str'. That meant that some functions that previously returned bytestrings now return unicode strings. This was intended behaviour all along, but is a big enough change that a bit of testing to ensure it doesn't cause any other regressions is worthwhile.</p>\n<p>Spinor people added as reviewers because they're the ones running it in the lab</p>", "type": "rendered"}, "title": {"raw": "Regression fix for globals diff functionality", "markup": "markdown", "html": "<p>Regression fix for globals diff functionality</p>", "type": "rendered"}}, "type": "pullrequest", "description": "Revision 579ccd8e1fb3 introduced a regression as a result of a misguided attempt for forward compatibility with Python 3. This caused `runmanager.get_all_groups()` to misidentify what type of argument it was being passed, and to think it had a list of filepaths when it had actually been passed a single filepath. It then iterated over the characters of the filepath, and obviously failed to open the hdf5 file.\r\n\r\nThis was discovered because it prevented the globals diff functionality in runmanager from working.\r\n\r\nAfter fixing this, it was discovered that the way we are calling DataFrame.to_string() uses a keyword argument that is only valid in pandas > 0.13. So I added a version check for pandas > 0.13.\r\n\r\nI bumped the version string from '2.0.3' to '2.0.4-dev', to be released as 2.0.4 if the only additional changes before then are bugfixes.\r\n\r\nThis fix has been deployed to the spinor lab, I propose a few days' use to confirm everything is ok before this pull request is accepted.\r\n\r\nIt's not as trivial a fix as it looks, because the regression had aliased the name 'unicode' to point to 'str'. That meant that some functions that previously returned bytestrings now return unicode strings. This was intended behaviour all along, but is a big enough change that a bit of testing to ensure it doesn't cause any other regressions is worthwhile.\r\n\r\nSpinor people added as reviewers because they're the ones running it in the lab", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/runmanager/pullrequests/1/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/runmanager/diffstat/labscript_suite/runmanager:000000000000%0D46d311b5446b?from_pullrequest_id=1"}, "commits": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/1/commits.json"}, "self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/1.json"}, "comments": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/1/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/runmanager/pullrequests/1/merge"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/1"}, "activity": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/1/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/runmanager/diff/labscript_suite/runmanager:000000000000%0D46d311b5446b?from_pullrequest_id=1"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/labscript_suite/runmanager/pullrequests/1/approve"}, "statuses": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/1/statuses_page=1.json"}}, "title": "Regression fix for globals diff functionality", "close_source_branch": false, "reviewers": [{"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, {"display_name": "Martijn Jasperse", "uuid": "{d9095b37-b2ca-492e-a6fb-1fa87879a9ce}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd9095b37-b2ca-492e-a6fb-1fa87879a9ce%7D"}, "html": {"href": "https://bitbucket.org/%7Bd9095b37-b2ca-492e-a6fb-1fa87879a9ce%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/ec763c33972c862b3900c8952dd11101d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMJ-3.png"}}, "nickname": "Martijn Jasperse", "type": "user", "account_id": "557058:940c20da-c736-4e3a-a30f-58224616fb0a"}], "id": 1, "destination": {"commit": {"hash": "46d311b5446b", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/46d311b5446b.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/46d311b5446b"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "created_on": "2015-02-16T05:36:42.531575+00:00", "summary": {"raw": "Revision 579ccd8e1fb3 introduced a regression as a result of a misguided attempt for forward compatibility with Python 3. This caused `runmanager.get_all_groups()` to misidentify what type of argument it was being passed, and to think it had a list of filepaths when it had actually been passed a single filepath. It then iterated over the characters of the filepath, and obviously failed to open the hdf5 file.\r\n\r\nThis was discovered because it prevented the globals diff functionality in runmanager from working.\r\n\r\nAfter fixing this, it was discovered that the way we are calling DataFrame.to_string() uses a keyword argument that is only valid in pandas > 0.13. So I added a version check for pandas > 0.13.\r\n\r\nI bumped the version string from '2.0.3' to '2.0.4-dev', to be released as 2.0.4 if the only additional changes before then are bugfixes.\r\n\r\nThis fix has been deployed to the spinor lab, I propose a few days' use to confirm everything is ok before this pull request is accepted.\r\n\r\nIt's not as trivial a fix as it looks, because the regression had aliased the name 'unicode' to point to 'str'. That meant that some functions that previously returned bytestrings now return unicode strings. This was intended behaviour all along, but is a big enough change that a bit of testing to ensure it doesn't cause any other regressions is worthwhile.\r\n\r\nSpinor people added as reviewers because they're the ones running it in the lab", "markup": "markdown", "html": "<p>Revision <a href=\"#!/labscript_suite/runmanager/commits/579ccd8e1fb3\" rel=\"nofollow\" class=\"ap-connect-link\">579ccd8e1fb3</a> introduced a regression as a result of a misguided attempt for forward compatibility with Python 3. This caused <code>runmanager.get_all_groups()</code> to misidentify what type of argument it was being passed, and to think it had a list of filepaths when it had actually been passed a single filepath. It then iterated over the characters of the filepath, and obviously failed to open the hdf5 file.</p>\n<p>This was discovered because it prevented the globals diff functionality in runmanager from working.</p>\n<p>After fixing this, it was discovered that the way we are calling DataFrame.to_string() uses a keyword argument that is only valid in pandas &gt; 0.13. So I added a version check for pandas &gt; 0.13.</p>\n<p>I bumped the version string from '2.0.3' to '2.0.4-dev', to be released as 2.0.4 if the only additional changes before then are bugfixes.</p>\n<p>This fix has been deployed to the spinor lab, I propose a few days' use to confirm everything is ok before this pull request is accepted.</p>\n<p>It's not as trivial a fix as it looks, because the regression had aliased the name 'unicode' to point to 'str'. That meant that some functions that previously returned bytestrings now return unicode strings. This was intended behaviour all along, but is a big enough change that a bit of testing to ensure it doesn't cause any other regressions is worthwhile.</p>\n<p>Spinor people added as reviewers because they're the ones running it in the lab</p>", "type": "rendered"}, "source": {"commit": {"hash": "d95a6dfdb737", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/monashspinor/runmanager/commit/d95a6dfdb737"}, "html": {"href": "#!/monashspinor/runmanager/commits/d95a6dfdb737"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/monashspinor/runmanager"}, "html": {"href": "#!/monashspinor/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4daf97df-bd70-4449-afe3-3eaa8f7b4f88}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "monashspinor/runmanager", "uuid": "{4daf97df-bd70-4449-afe3-3eaa8f7b4f88}"}, "branch": {"name": "default"}}, "comment_count": 1, "state": "MERGED", "task_count": 0, "participants": [{"role": "REVIEWER", "participated_on": null, "type": "participant", "approved": false, "user": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}}, {"role": "REVIEWER", "participated_on": null, "type": "participant", "approved": false, "user": {"display_name": "Martijn Jasperse", "uuid": "{d9095b37-b2ca-492e-a6fb-1fa87879a9ce}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd9095b37-b2ca-492e-a6fb-1fa87879a9ce%7D"}, "html": {"href": "https://bitbucket.org/%7Bd9095b37-b2ca-492e-a6fb-1fa87879a9ce%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/ec763c33972c862b3900c8952dd11101d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMJ-3.png"}}, "nickname": "Martijn Jasperse", "type": "user", "account_id": "557058:940c20da-c736-4e3a-a30f-58224616fb0a"}}, {"role": "PARTICIPANT", "participated_on": "2015-03-05T23:56:23.244308+00:00", "type": "participant", "approved": false, "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}}], "reason": "", "updated_on": "2015-03-05T23:56:23.265622+00:00", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "merge_commit": null, "closed_by": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}}