{"pagelen": 50, "values": [{"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/103862550.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-103862550"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "Merging! Thanks to everyone who tested and provided feedback, and to David for the original implementation. Don't hesitate to raise further issues as bugs.", "markup": "markdown", "html": "<p>Merging! Thanks to everyone who tested and provided feedback, and to David for the original implementation. Don't hesitate to raise further issues as bugs.</p>", "type": "rendered"}, "created_on": "2019-05-29T18:51:31.775969+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-05-29T18:51:31.787229+00:00", "type": "pullrequest_comment", "id": 103862550}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "1188efa40ea4", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/1188efa40ea4.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/1188efa40ea4"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "51e205a94429", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/51e205a94429"}, "html": {"href": "#!/cbillington/runmanager/commits/51e205a94429"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "MERGED", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-05-29T18:50:44.834823+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "1188efa40ea4", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/1188efa40ea4.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/1188efa40ea4"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "51e205a94429", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/51e205a94429"}, "html": {"href": "#!/cbillington/runmanager/commits/51e205a94429"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-05-29T18:50:43.062018+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/102659276.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-102659276"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "If there are no more comments, I'll merge on Monday May 27th.", "markup": "markdown", "html": "<p>If there are no more comments, I'll merge on Monday May 27th.</p>", "type": "rendered"}, "created_on": "2019-05-20T14:55:40.137188+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-05-20T14:55:40.145900+00:00", "type": "pullrequest_comment", "id": 102659276}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/102222855.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-102222855"}}, "parent": {"id": 101653744, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/101653744.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-101653744"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "Yikes, thanks for testing despite being in the stone age!\n\nyeah, I don't think it's worth fixing the highlighting. I did push the text around a few pixels to stop it jumping around between editing and viewing, so I imagine the highlighting is getting confused about that. But I suspect it's a Qt bug and probably not particularly worth working around.\n\nAny more thoughts @philipstarkey, or can we move toward merging this?", "markup": "markdown", "html": "<p>Yikes, thanks for testing despite being in the stone age!</p>\n<p>yeah, I don't think it's worth fixing the highlighting. I did push the text around a few pixels to stop it jumping around between editing and viewing, so I imagine the highlighting is getting confused about that. But I suspect it's a Qt bug and probably not particularly worth working around.</p>\n<p>Any more thoughts @philipstarkey, or can we move toward merging this?</p>", "type": "rendered"}, "created_on": "2019-05-16T03:22:53.649569+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-05-16T03:22:53.666986+00:00", "type": "pullrequest_comment", "id": 102222855}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"approval": {"date": "2019-05-10T17:47:07.209450+00:00", "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "user": {"display_name": "David Meyer", "uuid": "{8df655d6-8661-4957-b4ba-669cef19bf2d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D"}, "html": {"href": "https://bitbucket.org/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2a4efe81a17e5aeccdbc4ef2ca2cc463d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDM-0.png"}}, "nickname": "dihm", "type": "user", "account_id": "557058:411f7712-e1fa-438c-b578-0359da2d9f06"}}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/101653744.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-101653744"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "Sorry for a delayed response. The powers that be where I work have decided that Bitbucket has/had a piece of malware on it and blocked our access to the entire site. I\u2019m having to use a jump stick to get changes for the time being.\n\nAnyway, everything looks good enough to me. For the sake of completeness I have noticed that multi-line editing highlights have two highlight boxes overlapping each other \\(the smaller box always corresponds to the first line\\). Unless it is obvious what\u2019s causing it, I doubt it is worth fixing.\n\n![](data/bitbucket.org/repo/6g5bg5/images/715969769-test.png)\n", "markup": "markdown", "html": "<p>Sorry for a delayed response. The powers that be where I work have decided that Bitbucket has/had a piece of malware on it and blocked our access to the entire site. I\u2019m having to use a jump stick to get changes for the time being.</p>\n<p>Anyway, everything looks good enough to me. For the sake of completeness I have noticed that multi-line editing highlights have two highlight boxes overlapping each other (the smaller box always corresponds to the first line). Unless it is obvious what\u2019s causing it, I doubt it is worth fixing.</p>\n<p><img alt=\"\" src=\"data/bitbucket.org/repo/6g5bg5/images/715969769-test.png\" /></p>", "type": "rendered"}, "created_on": "2019-05-10T17:47:03.138720+00:00", "user": {"display_name": "David Meyer", "uuid": "{8df655d6-8661-4957-b4ba-669cef19bf2d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D"}, "html": {"href": "https://bitbucket.org/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2a4efe81a17e5aeccdbc4ef2ca2cc463d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDM-0.png"}}, "nickname": "dihm", "type": "user", "account_id": "557058:411f7712-e1fa-438c-b578-0359da2d9f06"}, "updated_on": "2019-05-10T17:47:03.233381+00:00", "type": "pullrequest_comment", "id": 101653744}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/100527074.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-100527074"}}, "parent": {"id": 100395195, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/100395195.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-100395195"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "Ah, I see. I\u2019ve now changed it to use the default font size, so it is now just not specifying the font size. This means it\u2019s bigger on Linux and smaller on Windows and should fit in with the surrounding fonts.\n\nI also changed the semantics of how the cell sizes are calculated again, this should improve the padding situation a bit more. Now it\u2019s simply a 22px minimum row size, but if the cell\u2019s contents are already larger than that, then it\u2019s whatever its contents' size is plus 6px padding.\n\nHappy to bundle a different mono font if you have a preference - though I\u2019d rather bundle something so it\u2019s the same everywhere rather than use system fonts, and if we bundle one then it has to have a license compatible with that, and ideally be a font with good unicode coverage since we\u2019ll use it in the OutputBox too. The Ubuntu font is pretty comprehensive when it comes to unicode. Inconsolata is pretty popular but has poor unicode coverage, and BitStream Vera Sans Mono, which is my goto when Ubuntu isn\u2019t around has good unicode support but the same dotted zero you\u2019re not a fan of. Source Code Pro is pretty popular and comprehensive, but again with the dotted zero.\n\nRoboto Mono Regular checks all the boxes though. But testing it it appears a bit larger at the default size so we\u2019d have to tweak it.\n\nBut I\u2019d prefer not to change the font or make it cusomisable since it would be some work bundling it and tweaking font sizes for not much gain.\n\nLet me know if you\u2019re happy with everything other than personal preferences about fonts! \\(I mean, we can keep talking about that as well, but let me know if there are other remaining issues\\)\n\n\u200c", "markup": "markdown", "html": "<p>Ah, I see. I\u2019ve now changed it to use the default font size, so it is now just not specifying the font size. This means it\u2019s bigger on Linux and smaller on Windows and should fit in with the surrounding fonts.</p>\n<p>I also changed the semantics of how the cell sizes are calculated again, this should improve the padding situation a bit more. Now it\u2019s simply a 22px minimum row size, but if the cell\u2019s contents are already larger than that, then it\u2019s whatever its contents' size is plus 6px padding.</p>\n<p>Happy to bundle a different mono font if you have a preference - though I\u2019d rather bundle something so it\u2019s the same everywhere rather than use system fonts, and if we bundle one then it has to have a license compatible with that, and ideally be a font with good unicode coverage since we\u2019ll use it in the OutputBox too. The Ubuntu font is pretty comprehensive when it comes to unicode. Inconsolata is pretty popular but has poor unicode coverage, and BitStream Vera Sans Mono, which is my goto when Ubuntu isn\u2019t around has good unicode support but the same dotted zero you\u2019re not a fan of. Source Code Pro is pretty popular and comprehensive, but again with the dotted zero.</p>\n<p>Roboto Mono Regular checks all the boxes though. But testing it it appears a bit larger at the default size so we\u2019d have to tweak it.</p>\n<p>But I\u2019d prefer not to change the font or make it cusomisable since it would be some work bundling it and tweaking font sizes for not much gain.</p>\n<p>Let me know if you\u2019re happy with everything other than personal preferences about fonts! (I mean, we can keep talking about that as well, but let me know if there are other remaining issues)</p>\n<p>\u200c</p>", "type": "rendered"}, "created_on": "2019-04-30T20:53:32.575551+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-04-30T21:52:43.183355+00:00", "type": "pullrequest_comment", "id": 100527074}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "8d32f49f391c", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/8d32f49f391c.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/8d32f49f391c"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "51e205a94429", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/51e205a94429"}, "html": {"href": "#!/cbillington/runmanager/commits/51e205a94429"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-04-30T20:55:37.353200+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "8d32f49f391c", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/8d32f49f391c.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/8d32f49f391c"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "16db2550c5a1", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/16db2550c5a1"}, "html": {"href": "#!/cbillington/runmanager/commits/16db2550c5a1"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-04-30T19:53:59.378243+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "8d32f49f391c", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/8d32f49f391c.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/8d32f49f391c"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "10ebbce713b0", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/10ebbce713b0"}, "html": {"href": "#!/cbillington/runmanager/commits/10ebbce713b0"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-04-30T19:32:42.463809+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "8d32f49f391c", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/8d32f49f391c.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/8d32f49f391c"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "b009d4453562", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/b009d4453562"}, "html": {"href": "#!/cbillington/runmanager/commits/b009d4453562"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-04-30T19:03:26.033862+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "8d32f49f391c", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/8d32f49f391c.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/8d32f49f391c"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "00caa07e241a", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/00caa07e241a"}, "html": {"href": "#!/cbillington/runmanager/commits/00caa07e241a"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-04-30T18:06:20.819753+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/100395195.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-100395195"}}, "parent": {"id": 100390334, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/100390334.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-100390334"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "So the font size could go **down** by 1 or 2 \\(at least on our windows control PC\\) to make it more similar to how it was before. There is still more padding than previously, but it\u2019s better.\n\nI also ran the windows cleartype calibration on these monitors which helped a bit. The only thing that I find jarring is how the number zero \\(0\\) looks in the Ubuntu font. I really don\u2019t like the dot in the middle \\(would prefer either nothing or a diagonal line\\). Probably not much we can do about that beyond changing the font or allowing custom fonts to be chosen in a \\(currently non-existent\\) preferences window.", "markup": "markdown", "html": "<p>So the font size could go <strong>down</strong> by 1 or 2 (at least on our windows control PC) to make it more similar to how it was before. There is still more padding than previously, but it\u2019s better.</p>\n<p>I also ran the windows cleartype calibration on these monitors which helped a bit. The only thing that I find jarring is how the number zero (0) looks in the Ubuntu font. I really don\u2019t like the dot in the middle (would prefer either nothing or a diagonal line). Probably not much we can do about that beyond changing the font or allowing custom fonts to be chosen in a (currently non-existent) preferences window.</p>", "type": "rendered"}, "created_on": "2019-04-30T04:03:44.736313+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2019-04-30T04:03:44.750335+00:00", "type": "pullrequest_comment", "id": 100395195}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/100390334.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-100390334"}}, "parent": {"id": 100389066, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/100389066.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-100389066"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "Yes, I switched it to the monospace font for the name and value, since they are both code - well one is a variable name and the other is code, at least. This helps with indentation for a multi-line value, though that\u2019s not as relevant for the name. I think it makes a lot of sense for the value to be monospace, and I\u2019m less adamant about the name. I guess I wish the mono font was _slightly_ bolder, that annoys me. But making it actually bold looks way too bold. Does it look any better to you if the font size is bumped up by one \\(add UBUNTU\\_FONT\\_SIZE \\+= 1 at the top of `__main__.py`\\)?\n\nIt looks like I erroneously added a bit of extra vertical padding compared to what I intended. I\u2019ve now changed it to have the same row width as before. It\u2019s tricky because before it was just a fixed width and now it\u2019s the item\u2019s width plus some padding, and the item\u2019s width even when it\u2019s one line of text only depends on whether it has an icon. So it ended up with a few extra pixels but they\u2019re gone now!\n\nI could probably make the <add new global> item selectable via keyboard without much effort - we\u2019re already hooking into the arrow keys in a place in the code where this would make sense to handle.\n\nI could change <click to add global> to the same monospace font so it is more obviously part of the column, excluding it was intentional but I don\u2019t mind either way.\n\nIncreasing the size of the expansion column to the size of \u2018outer\u2019 sounds good, I\u2019ll give it a shot.", "markup": "markdown", "html": "<p>Yes, I switched it to the monospace font for the name and value, since they are both code - well one is a variable name and the other is code, at least. This helps with indentation for a multi-line value, though that\u2019s not as relevant for the name. I think it makes a lot of sense for the value to be monospace, and I\u2019m less adamant about the name. I guess I wish the mono font was <em>slightly</em> bolder, that annoys me. But making it actually bold looks way too bold. Does it look any better to you if the font size is bumped up by one (add UBUNTU_FONT_SIZE += 1 at the top of <code>__main__.py</code>)?</p>\n<p>It looks like I erroneously added a bit of extra vertical padding compared to what I intended. I\u2019ve now changed it to have the same row width as before. It\u2019s tricky because before it was just a fixed width and now it\u2019s the item\u2019s width plus some padding, and the item\u2019s width even when it\u2019s one line of text only depends on whether it has an icon. So it ended up with a few extra pixels but they\u2019re gone now!</p>\n<p>I could probably make the &lt;add new global&gt; item selectable via keyboard without much effort - we\u2019re already hooking into the arrow keys in a place in the code where this would make sense to handle.</p>\n<p>I could change &lt;click to add global&gt; to the same monospace font so it is more obviously part of the column, excluding it was intentional but I don\u2019t mind either way.</p>\n<p>Increasing the size of the expansion column to the size of \u2018outer\u2019 sounds good, I\u2019ll give it a shot.</p>", "type": "rendered"}, "created_on": "2019-04-30T02:11:28.609018+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-04-30T02:11:28.618813+00:00", "type": "pullrequest_comment", "id": 100390334}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "8d32f49f391c", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/8d32f49f391c.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/8d32f49f391c"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "47b69426c279", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/47b69426c279"}, "html": {"href": "#!/cbillington/runmanager/commits/47b69426c279"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-04-30T02:04:56.181519+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/100389066.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-100389066"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "So I did some testing and functionally I think it is OK.\n\nFor some reason I seem to have a different \\(monospaced?\\) font now for the first two columns, and a lot of extra padding, which I\u2019m not a big fan of. The last two columns remain with the traditional font though. Not sure if this is something odd with our control PC though as none of the screenshots above have this change visible\u2026\n\nThe extra padding has also affected the \u201cGroups\u201d tab, which now makes our list of groups not fit on one 1080p screen.\n\nOther odd things:\n\n* You can\u2019t use the arrow keys to reach the \u201c<Click to add global>\u201d entry \\(actually this was a bug previously\u2026you can only reach it if focus is in the name column\u2026maybe this is not fixable\\)\n* The \u201c<Click to add global>\u201d entry is the original font\n* I think it would be good if the \u201cExpansion\u201d column at least had a minimum size of the \u201cOuter\u201d text \\+ icon so that it didn\u2019t jump around when you scan parameter space \\(obviously will still jump around for zip groups\\)\n\n", "markup": "markdown", "html": "<p>So I did some testing and functionally I think it is OK.</p>\n<p>For some reason I seem to have a different (monospaced?) font now for the first two columns, and a lot of extra padding, which I\u2019m not a big fan of. The last two columns remain with the traditional font though. Not sure if this is something odd with our control PC though as none of the screenshots above have this change visible\u2026</p>\n<p>The extra padding has also affected the \u201cGroups\u201d tab, which now makes our list of groups not fit on one 1080p screen.</p>\n<p>Other odd things:</p>\n<ul>\n<li>You can\u2019t use the arrow keys to reach the \u201c&lt;Click to add global&gt;\u201d entry (actually this was a bug previously\u2026you can only reach it if focus is in the name column\u2026maybe this is not fixable)</li>\n<li>The \u201c&lt;Click to add global&gt;\u201d entry is the original font</li>\n<li>I think it would be good if the \u201cExpansion\u201d column at least had a minimum size of the \u201cOuter\u201d text + icon so that it didn\u2019t jump around when you scan parameter space (obviously will still jump around for zip groups)</li>\n</ul>", "type": "rendered"}, "created_on": "2019-04-30T01:36:04.548606+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2019-04-30T01:36:04.559120+00:00", "type": "pullrequest_comment", "id": 100389066}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/100389028.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-100389028"}}, "parent": {"id": 100388804, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/100388804.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-100388804"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "Alright, let\u2019s just leave it then! I\u2019ll probably get used to it.", "markup": "markdown", "html": "<p>Alright, let\u2019s just leave it then! I\u2019ll probably get used to it.</p>", "type": "rendered"}, "created_on": "2019-04-30T01:34:54.609471+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-04-30T01:34:54.619527+00:00", "type": "pullrequest_comment", "id": 100389028}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/100388804.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-100388804"}}, "parent": {"id": 99469832, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99469832.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99469832"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "Personally I like the automatic sorting", "markup": "markdown", "html": "<p>Personally I like the automatic sorting</p>", "type": "rendered"}, "created_on": "2019-04-30T01:27:58.779002+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2019-04-30T01:27:58.790120+00:00", "type": "pullrequest_comment", "id": 100388804}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/100381683.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-100381683"}}, "parent": {"id": 100275785, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/100275785.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-100275785"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "Thanks for testing!\n\nFor other testers, merge conflict \\(which was just about qtutils import lines\\) is resolved.", "markup": "markdown", "html": "<p>Thanks for testing!</p>\n<p>For other testers, merge conflict (which was just about qtutils import lines) is resolved.</p>", "type": "rendered"}, "created_on": "2019-04-29T23:04:31.839964+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-04-29T23:04:31.850175+00:00", "type": "pullrequest_comment", "id": 100381683}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "8d32f49f391c", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/8d32f49f391c.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/8d32f49f391c"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "a92daf7bb5e1", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/a92daf7bb5e1"}, "html": {"href": "#!/cbillington/runmanager/commits/a92daf7bb5e1"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-04-29T23:02:08.822170+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/100275785.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-100275785"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "Tested in one of our labs with runmanager not having the latest bugfix \\(so no merge conflict!\\). I can confirm that it works with QT5.9.7. I have not tested it with QT5.12.1", "markup": "markdown", "html": "<p>Tested in one of our labs with runmanager not having the latest bugfix (so no merge conflict!). I can confirm that it works with QT5.9.7. I have not tested it with QT5.12.1</p>", "type": "rendered"}, "created_on": "2019-04-29T09:31:24.932632+00:00", "user": {"display_name": "Lars Kohfahl", "uuid": "{14b59397-cbc0-4d8c-8a4a-fe99fb4d2d4a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B14b59397-cbc0-4d8c-8a4a-fe99fb4d2d4a%7D"}, "html": {"href": "https://bitbucket.org/%7B14b59397-cbc0-4d8c-8a4a-fe99fb4d2d4a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/630642264cd55e22515678a3a0489ac7d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsLK-2.png"}}, "nickname": "lkohfahl", "type": "user", "account_id": "5aafc5d11396802a57aa7f3b"}, "updated_on": "2019-04-29T09:31:25.003615+00:00", "type": "pullrequest_comment", "id": 100275785}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"approval": {"date": "2019-04-29T09:29:34.660030+00:00", "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "user": {"display_name": "Lars Kohfahl", "uuid": "{14b59397-cbc0-4d8c-8a4a-fe99fb4d2d4a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B14b59397-cbc0-4d8c-8a4a-fe99fb4d2d4a%7D"}, "html": {"href": "https://bitbucket.org/%7B14b59397-cbc0-4d8c-8a4a-fe99fb4d2d4a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/630642264cd55e22515678a3a0489ac7d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsLK-2.png"}}, "nickname": "lkohfahl", "type": "user", "account_id": "5aafc5d11396802a57aa7f3b"}}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "d02a1b0a8ac8", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/d02a1b0a8ac8.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/d02a1b0a8ac8"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "e56b3901468c", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/e56b3901468c"}, "html": {"href": "#!/cbillington/runmanager/commits/e56b3901468c"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-04-21T17:10:54.889731+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99469832.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99469832"}}, "parent": {"id": 99464853, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99464853.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99464853"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "I\u2019ll wait, there\u2019s no rush. The changes were pretty invasive, so more testing is a good idea.\n\nOne thing I\u2019ve noticed is that automatic sorting of rows every time something changes is actually working after the change to a QTableView for the globals. I hadn\u2019t noticed it, but sorting was _not_ working when it was a TreeView. There is a lot of code for managing sorting in runmanager, and I can\u2019t imagine having written all that in the initial Qt port if it didn\u2019t ever work, so I\u2019m guessing this stopped working at some point - perhaps with Qt5.\n\nBut it turns out that automatic sorting is super annoying! Things jump around randomly and you end up selecting cells you didn\u2019t intend to when clicking on cells after editing other cells.\n\nSo maybe I\u2019ll do it in a separate PR, but I\u2019m wondering if we should just remove most of the sorting code. The user can still cause a sort to happen by clicking on the headers, but I would want to change it so that no automatic sorting would be done when cell contents change. Globals will be loaded from disk ordered by name, so there\u2019ll be that initial sorting but that\u2019s it. There will still need to be a bit of code to make sure \u201cadd new global\u201d sorts to the end of the list regardless of sort order \\(I thought this used to be the case, but apparently not anymore\\), but otherwise this would be removing pretty much all of the sorting code. ", "markup": "markdown", "html": "<p>I\u2019ll wait, there\u2019s no rush. The changes were pretty invasive, so more testing is a good idea.</p>\n<p>One thing I\u2019ve noticed is that automatic sorting of rows every time something changes is actually working after the change to a QTableView for the globals. I hadn\u2019t noticed it, but sorting was <em>not</em> working when it was a TreeView. There is a lot of code for managing sorting in runmanager, and I can\u2019t imagine having written all that in the initial Qt port if it didn\u2019t ever work, so I\u2019m guessing this stopped working at some point - perhaps with Qt5.</p>\n<p>But it turns out that automatic sorting is super annoying! Things jump around randomly and you end up selecting cells you didn\u2019t intend to when clicking on cells after editing other cells.</p>\n<p>So maybe I\u2019ll do it in a separate PR, but I\u2019m wondering if we should just remove most of the sorting code. The user can still cause a sort to happen by clicking on the headers, but I would want to change it so that no automatic sorting would be done when cell contents change. Globals will be loaded from disk ordered by name, so there\u2019ll be that initial sorting but that\u2019s it. There will still need to be a bit of code to make sure \u201cadd new global\u201d sorts to the end of the list regardless of sort order (I thought this used to be the case, but apparently not anymore), but otherwise this would be removing pretty much all of the sorting code. </p>", "type": "rendered"}, "created_on": "2019-04-21T16:42:28.982291+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-04-21T16:42:28.993911+00:00", "type": "pullrequest_comment", "id": 99469832}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99469737.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99469737"}}, "parent": {"id": 99457083, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99457083.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99457083"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "Thanks for testing! Will hold off merging 'til Phil has done some testing too.", "markup": "markdown", "html": "<p>Thanks for testing! Will hold off merging 'til Phil has done some testing too.</p>", "type": "rendered"}, "created_on": "2019-04-21T16:26:48.194219+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-04-21T16:26:48.202582+00:00", "type": "pullrequest_comment", "id": 99469737}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99464853.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99464853"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "I\u2019d like to test this before merging but might not get to it for a few days.", "markup": "markdown", "html": "<p>I\u2019d like to test this before merging but might not get to it for a few days.</p>", "type": "rendered"}, "created_on": "2019-04-21T07:24:48.216207+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2019-04-21T07:24:48.223052+00:00", "type": "pullrequest_comment", "id": 99464853}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99457083.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99457083"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "Tested with Qt 5.9.7 and 5.12.1. Very nice!", "markup": "markdown", "html": "<p>Tested with Qt 5.9.7 and 5.12.1. Very nice!</p>", "type": "rendered"}, "created_on": "2019-04-20T06:46:51.318523+00:00", "user": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}, "updated_on": "2019-04-20T06:46:51.324845+00:00", "type": "pullrequest_comment", "id": 99457083}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"approval": {"date": "2019-04-20T06:46:16.811955+00:00", "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "user": {"display_name": "Russell Anderson", "uuid": "{6c12ac6e-1980-466d-86fe-6c163bd116c2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D"}, "html": {"href": "https://bitbucket.org/%7B6c12ac6e-1980-466d-86fe-6c163bd116c2%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e/e307ce36-5fb6-4418-8090-b9e533eab225/128"}}, "nickname": "rpanderson", "type": "user", "account_id": "557058:443e4cd1-86c9-4cd5-8034-22bab14d9d1e"}}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99455689.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99455689"}}, "parent": {"id": 99455258, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99455258.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99455258"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "I was able to reproduce something similar but not quite identical. Hitting enter or tab alone did not do anything, I needed to hit tab again. Navigation would normally move to the expansion column, but runmanager had special-cased that column not to be tabbed to, since you\u2019re unlikely to need to edit it often and probably don\u2019t want to mess with it. So tab would skip that column and the next thing to be focused would be \u2026 the close button. So it would interpret tapping space as hitting the close button.\n\nI\u2019ve removed the special-casing, because I think it is causing more confusion than it is worth. And with increased visibility of what cell is selected , hopefully it will be obvious that you\u2019re no longer in the tableview. I\u2019ve also made the close button not hold focus, so that you can\u2019t tab to focus it in any case.\n\n\u200c", "markup": "markdown", "html": "<p>I was able to reproduce something similar but not quite identical. Hitting enter or tab alone did not do anything, I needed to hit tab again. Navigation would normally move to the expansion column, but runmanager had special-cased that column not to be tabbed to, since you\u2019re unlikely to need to edit it often and probably don\u2019t want to mess with it. So tab would skip that column and the next thing to be focused would be \u2026 the close button. So it would interpret tapping space as hitting the close button.</p>\n<p>I\u2019ve removed the special-casing, because I think it is causing more confusion than it is worth. And with increased visibility of what cell is selected , hopefully it will be obvious that you\u2019re no longer in the tableview. I\u2019ve also made the close button not hold focus, so that you can\u2019t tab to focus it in any case.</p>\n<p>\u200c</p>", "type": "rendered"}, "created_on": "2019-04-20T02:03:17.316208+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-04-20T02:03:17.323922+00:00", "type": "pullrequest_comment", "id": 99455689}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "d02a1b0a8ac8", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/d02a1b0a8ac8.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/d02a1b0a8ac8"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "4bb25b1824b3", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/4bb25b1824b3"}, "html": {"href": "#!/cbillington/runmanager/commits/4bb25b1824b3"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-04-20T02:01:29.852860+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "d02a1b0a8ac8", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/d02a1b0a8ac8.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/d02a1b0a8ac8"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "15fc82126eee", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/15fc82126eee"}, "html": {"href": "#!/cbillington/runmanager/commits/15fc82126eee"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-04-20T01:55:48.505306+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "d02a1b0a8ac8", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/d02a1b0a8ac8.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/d02a1b0a8ac8"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "02bdfd0834fd", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/02bdfd0834fd"}, "html": {"href": "#!/cbillington/runmanager/commits/02bdfd0834fd"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-04-20T00:59:27.127830+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99455258.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99455258"}}, "parent": {"id": 99454691, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99454691.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99454691"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "I figured most of it was behavior I hadn\u2019t really noticed before. The subtler highlight should bring things back to what I\u2019m subconsciously used to.\n\nAs for the closing tab thing, I can confirm tomorrow but my recollection is that you edit a unit value, hit enter, then the space bar. By the looks of things, it was triggering a press of the \u2018X\u2019 button on the group tab.", "markup": "markdown", "html": "<p>I figured most of it was behavior I hadn\u2019t really noticed before. The subtler highlight should bring things back to what I\u2019m subconsciously used to.</p>\n<p>As for the closing tab thing, I can confirm tomorrow but my recollection is that you edit a unit value, hit enter, then the space bar. By the looks of things, it was triggering a press of the \u2018X\u2019 button on the group tab.</p>", "type": "rendered"}, "created_on": "2019-04-20T00:57:35.913866+00:00", "user": {"display_name": "David Meyer", "uuid": "{8df655d6-8661-4957-b4ba-669cef19bf2d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D"}, "html": {"href": "https://bitbucket.org/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2a4efe81a17e5aeccdbc4ef2ca2cc463d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDM-0.png"}}, "nickname": "dihm", "type": "user", "account_id": "557058:411f7712-e1fa-438c-b578-0359da2d9f06"}, "updated_on": "2019-04-20T00:57:36.060594+00:00", "type": "pullrequest_comment", "id": 99455258}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "d02a1b0a8ac8", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/d02a1b0a8ac8.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/d02a1b0a8ac8"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "b1ce33eddbcb", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/b1ce33eddbcb"}, "html": {"href": "#!/cbillington/runmanager/commits/b1ce33eddbcb"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-04-20T00:49:30.550946+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "d02a1b0a8ac8", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/d02a1b0a8ac8.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/d02a1b0a8ac8"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "7ce085ef4309", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/7ce085ef4309"}, "html": {"href": "#!/cbillington/runmanager/commits/7ce085ef4309"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-04-20T00:28:41.181261+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99454691.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99454691"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "No objections to shift\\+enter: done.\n\nI don\u2019t think the navigation is different to before - the highlight moved previously as well, and as far as I can tell all the . Though is more obvious now, being a strong contrasting colour instead of just a mild semitransparent shading as before.\n\nI found the extreme highlight pretty garish, especially since it obscures the colour coding that tells you whether there are errors or not and that sort of thing. So I\u2019ve made more subtle - similar to how it looked in Windows before \\(except now because this is custom it looks the same on all platforms - on linux it was garish before as well\\).\n\nI\u2019m also not able to reproduce the \u201ctyping with the expansion column selected closes the tab\u201d bug, so if you could confirm that is actually an issue still and maybe more precise steps for reproducing it if it doesn\u2019t happen every time, then I\u2019ll look into it more.\n\n\u200c", "markup": "markdown", "html": "<p>No objections to shift+enter: done.</p>\n<p>I don\u2019t think the navigation is different to before - the highlight moved previously as well, and as far as I can tell all the . Though is more obvious now, being a strong contrasting colour instead of just a mild semitransparent shading as before.</p>\n<p>I found the extreme highlight pretty garish, especially since it obscures the colour coding that tells you whether there are errors or not and that sort of thing. So I\u2019ve made more subtle - similar to how it looked in Windows before (except now because this is custom it looks the same on all platforms - on linux it was garish before as well).</p>\n<p>I\u2019m also not able to reproduce the \u201ctyping with the expansion column selected closes the tab\u201d bug, so if you could confirm that is actually an issue still and maybe more precise steps for reproducing it if it doesn\u2019t happen every time, then I\u2019ll look into it more.</p>\n<p>\u200c</p>", "type": "rendered"}, "created_on": "2019-04-20T00:03:06.803195+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-04-20T00:03:06.810972+00:00", "type": "pullrequest_comment", "id": 99454691}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "d02a1b0a8ac8", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/d02a1b0a8ac8.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/d02a1b0a8ac8"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "4761e0429723", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/4761e0429723"}, "html": {"href": "#!/cbillington/runmanager/commits/4761e0429723"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-04-19T23:37:27.702383+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "d02a1b0a8ac8", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/d02a1b0a8ac8.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/d02a1b0a8ac8"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "ec9fcce12433", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/ec9fcce12433"}, "html": {"href": "#!/cbillington/runmanager/commits/ec9fcce12433"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-04-19T23:30:00.414169+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99414999.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99414999"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "What do you think about allowing Shift\\+Return to add newlines? I kind-of like it so I can add whitespace to large variable definitions so they are easier to read.\n\n![](data/bitbucket.org/repo/6g5bg5/images/4088474748-image.png)\nIt appears to be as easy as modifying the keyPressEvent of the Editor.\n\n```python\ndef keyPressEvent(self, event):\r\n    if event.key() == QtCore.Qt.Key_Return and event.modifiers() == QtCore.Qt.ShiftModifier:\r\n        return QtWidgets.QTextEdit.keyPressEvent(self, event)\r\n    elif event.key() in [QtCore.Qt.Key_Enter, QtCore.Qt.Key_Return]:\r\n        event.accept()\r\n        self.close()\r\n        return\r\n    return QtWidgets.QTextEdit.keyPressEvent(self, event)\n```", "markup": "markdown", "html": "<p>What do you think about allowing Shift+Return to add newlines? I kind-of like it so I can add whitespace to large variable definitions so they are easier to read.</p>\n<p><img alt=\"\" src=\"data/bitbucket.org/repo/6g5bg5/images/4088474748-image.png\" />\nIt appears to be as easy as modifying the keyPressEvent of the Editor.</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"k\">def</span> <span class=\"nf\">keyPressEvent</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">event</span><span class=\"p\">):</span>\n    <span class=\"k\">if</span> <span class=\"n\">event</span><span class=\"o\">.</span><span class=\"n\">key</span><span class=\"p\">()</span> <span class=\"o\">==</span> <span class=\"n\">QtCore</span><span class=\"o\">.</span><span class=\"n\">Qt</span><span class=\"o\">.</span><span class=\"n\">Key_Return</span> <span class=\"ow\">and</span> <span class=\"n\">event</span><span class=\"o\">.</span><span class=\"n\">modifiers</span><span class=\"p\">()</span> <span class=\"o\">==</span> <span class=\"n\">QtCore</span><span class=\"o\">.</span><span class=\"n\">Qt</span><span class=\"o\">.</span><span class=\"n\">ShiftModifier</span><span class=\"p\">:</span>\n        <span class=\"k\">return</span> <span class=\"n\">QtWidgets</span><span class=\"o\">.</span><span class=\"n\">QTextEdit</span><span class=\"o\">.</span><span class=\"n\">keyPressEvent</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">event</span><span class=\"p\">)</span>\n    <span class=\"k\">elif</span> <span class=\"n\">event</span><span class=\"o\">.</span><span class=\"n\">key</span><span class=\"p\">()</span> <span class=\"ow\">in</span> <span class=\"p\">[</span><span class=\"n\">QtCore</span><span class=\"o\">.</span><span class=\"n\">Qt</span><span class=\"o\">.</span><span class=\"n\">Key_Enter</span><span class=\"p\">,</span> <span class=\"n\">QtCore</span><span class=\"o\">.</span><span class=\"n\">Qt</span><span class=\"o\">.</span><span class=\"n\">Key_Return</span><span class=\"p\">]:</span>\n        <span class=\"n\">event</span><span class=\"o\">.</span><span class=\"n\">accept</span><span class=\"p\">()</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">close</span><span class=\"p\">()</span>\n        <span class=\"k\">return</span>\n    <span class=\"k\">return</span> <span class=\"n\">QtWidgets</span><span class=\"o\">.</span><span class=\"n\">QTextEdit</span><span class=\"o\">.</span><span class=\"n\">keyPressEvent</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">event</span><span class=\"p\">)</span>\n</pre></div>", "type": "rendered"}, "created_on": "2019-04-19T12:55:03.961122+00:00", "user": {"display_name": "David Meyer", "uuid": "{8df655d6-8661-4957-b4ba-669cef19bf2d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D"}, "html": {"href": "https://bitbucket.org/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2a4efe81a17e5aeccdbc4ef2ca2cc463d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDM-0.png"}}, "nickname": "dihm", "type": "user", "account_id": "557058:411f7712-e1fa-438c-b578-0359da2d9f06"}, "updated_on": "2019-04-19T12:55:04.048712+00:00", "type": "pullrequest_comment", "id": 99414999}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99414438.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99414438"}}, "parent": {"id": 99361188, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99361188.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99361188"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "I definitely support letting go of not worth it issues. The centering one in particular seems very annoying. I\u2019m glad to see changing the inactive highlights fixes the flashing.\n\nTesting that out, I\u2019ve come across some other things that may be new issues. With this change, exiting editing with enter or tab leaves the row highlighted. Do we need to be concerned about un-intuitive behavior with that row highlighted? By that I mean, with a row highlighted, Up/Down arrows moves the highlight; tab moves focus around the GUI at large; enter does nothing; and typing enters editing of the next element in the row \\(except for the expansion column where nothing happens except for space which closes the group but keeps it active \\[I suspect that is a bug\\]\\). I\u2019m not sure any of those things would be expected if you just saw a highlighted row.", "markup": "markdown", "html": "<p>I definitely support letting go of not worth it issues. The centering one in particular seems very annoying. I\u2019m glad to see changing the inactive highlights fixes the flashing.</p>\n<p>Testing that out, I\u2019ve come across some other things that may be new issues. With this change, exiting editing with enter or tab leaves the row highlighted. Do we need to be concerned about un-intuitive behavior with that row highlighted? By that I mean, with a row highlighted, Up/Down arrows moves the highlight; tab moves focus around the GUI at large; enter does nothing; and typing enters editing of the next element in the row (except for the expansion column where nothing happens except for space which closes the group but keeps it active [I suspect that is a bug]). I\u2019m not sure any of those things would be expected if you just saw a highlighted row.</p>", "type": "rendered"}, "created_on": "2019-04-19T12:49:29.400337+00:00", "user": {"display_name": "David Meyer", "uuid": "{8df655d6-8661-4957-b4ba-669cef19bf2d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D"}, "html": {"href": "https://bitbucket.org/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2a4efe81a17e5aeccdbc4ef2ca2cc463d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDM-0.png"}}, "nickname": "dihm", "type": "user", "account_id": "557058:411f7712-e1fa-438c-b578-0359da2d9f06"}, "updated_on": "2019-04-19T12:49:29.494763+00:00", "type": "pullrequest_comment", "id": 99414438}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "d02a1b0a8ac8", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/d02a1b0a8ac8.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/d02a1b0a8ac8"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "c900e7c2d87b", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/c900e7c2d87b"}, "html": {"href": "#!/cbillington/runmanager/commits/c900e7c2d87b"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-04-18T22:18:22.245307+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "d02a1b0a8ac8", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/d02a1b0a8ac8.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/d02a1b0a8ac8"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "e1c713a823d0", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/e1c713a823d0"}, "html": {"href": "#!/cbillington/runmanager/commits/e1c713a823d0"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-04-18T21:47:30.013044+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99361188.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99361188"}}, "parent": {"id": 99352630, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99352630.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99352630"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "I can\u2019t make much headway into these two issues, and I think I\u2019m ready to declare them officially not worth it.", "markup": "markdown", "html": "<p>I can\u2019t make much headway into these two issues, and I think I\u2019m ready to declare them officially not worth it.</p>", "type": "rendered"}, "created_on": "2019-04-18T20:31:40.840858+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-04-18T20:31:40.852476+00:00", "type": "pullrequest_comment", "id": 99361188}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "d02a1b0a8ac8", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/d02a1b0a8ac8.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/d02a1b0a8ac8"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "a1a6b29833ec", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/a1a6b29833ec"}, "html": {"href": "#!/cbillington/runmanager/commits/a1a6b29833ec"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-04-18T20:28:42.725880+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99352630.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99352630"}}, "parent": {"id": 99351538, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99351538.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99351538"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "Might have a quick think about the centering, but might be not worth it if a simple solution doesn\u2019t present itself.\n\nThe flickering I think is style-dependent. The whole row remains highlighted blue for me, whereas for you there is a grey highlight for other cells during editing. Basically the colour of the highlight is focus-dependent for you and not for me. I could probably make it the same across platforms just by setting the style of the widget to whatever it is for me.\n\nI\u2019ve tried setting the style to \u2018Fusion\u2019. For me this is no change, so I\u2019ll check how it looks in Windows to confirm it isn\u2019t grossly at odds with the rest of the GUI and if it fixes the flickering.", "markup": "markdown", "html": "<p>Might have a quick think about the centering, but might be not worth it if a simple solution doesn\u2019t present itself.</p>\n<p>The flickering I think is style-dependent. The whole row remains highlighted blue for me, whereas for you there is a grey highlight for other cells during editing. Basically the colour of the highlight is focus-dependent for you and not for me. I could probably make it the same across platforms just by setting the style of the widget to whatever it is for me.</p>\n<p>I\u2019ve tried setting the style to \u2018Fusion\u2019. For me this is no change, so I\u2019ll check how it looks in Windows to confirm it isn\u2019t grossly at odds with the rest of the GUI and if it fixes the flickering.</p>", "type": "rendered"}, "created_on": "2019-04-18T18:55:50.598068+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-04-18T18:55:50.611125+00:00", "type": "pullrequest_comment", "id": 99352630}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "d02a1b0a8ac8", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/d02a1b0a8ac8.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/d02a1b0a8ac8"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "55f5f96927e1", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/55f5f96927e1"}, "html": {"href": "#!/cbillington/runmanager/commits/55f5f96927e1"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-04-18T18:54:33.028994+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99351538.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99351538"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "A couple more stylistic things as I keep testing.\n\nWhen going to edit a small element of an expanded row, the vertical centering changes between display and editing. Also, editing any element of a row causes the entire row to highlight and flash for a brief moment when entering and exiting the editor. \n\n![](data/bitbucket.org/repo/6g5bg5/images/357392430-selection.gif)\nBoth are mildly disorienting and likely hard to \u201cfix.\u201d Just enabling vertical centering in the editor isn\u2019t enough apparently.\n\n![](data/bitbucket.org/repo/6g5bg5/images/3775501494-centering.png)\nI\u2019m not quite sure where to start on the flashing. You don\u2019t seem to have that issue so maybe it is just older Qt?", "markup": "markdown", "html": "<p>A couple more stylistic things as I keep testing.</p>\n<p>When going to edit a small element of an expanded row, the vertical centering changes between display and editing. Also, editing any element of a row causes the entire row to highlight and flash for a brief moment when entering and exiting the editor. </p>\n<p><img alt=\"\" src=\"data/bitbucket.org/repo/6g5bg5/images/357392430-selection.gif\" />\nBoth are mildly disorienting and likely hard to \u201cfix.\u201d Just enabling vertical centering in the editor isn\u2019t enough apparently.</p>\n<p><img alt=\"\" src=\"data/bitbucket.org/repo/6g5bg5/images/3775501494-centering.png\" />\nI\u2019m not quite sure where to start on the flashing. You don\u2019t seem to have that issue so maybe it is just older Qt?</p>", "type": "rendered"}, "created_on": "2019-04-18T18:44:17.953718+00:00", "user": {"display_name": "David Meyer", "uuid": "{8df655d6-8661-4957-b4ba-669cef19bf2d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D"}, "html": {"href": "https://bitbucket.org/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2a4efe81a17e5aeccdbc4ef2ca2cc463d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDM-0.png"}}, "nickname": "dihm", "type": "user", "account_id": "557058:411f7712-e1fa-438c-b578-0359da2d9f06"}, "updated_on": "2019-04-18T18:44:18.037142+00:00", "type": "pullrequest_comment", "id": 99351538}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99349249.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99349249"}}, "parent": {"id": 99343409, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99343409.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99343409"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "Ah great. I\u2019ll bet it was because the default data setting assumed rich text, so at some point <Click to add global> was being removed because it looks like a HTML tag.", "markup": "markdown", "html": "<p>Ah great. I\u2019ll bet it was because the default data setting assumed rich text, so at some point &lt;Click to add global&gt; was being removed because it looks like a HTML tag.</p>", "type": "rendered"}, "created_on": "2019-04-18T18:20:42.418789+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-04-18T18:20:51.703719+00:00", "type": "pullrequest_comment", "id": 99349249}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99343409.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99343409"}}, "parent": {"id": 99335513, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99335513.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99335513"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "Ok, so the not valid Python variable name pop-up is \u2018fixed\u2019 for me with the \u201cHighlight text when editing global values\u201d commit. It looks like in the initial pass the \u2018<Click to add global>\u2019 string was automatically being deleted whenever editing was engaged. Explicitly setting the editor data seems to has returned things to their usual behavior.", "markup": "markdown", "html": "<p>Ok, so the not valid Python variable name pop-up is \u2018fixed\u2019 for me with the \u201cHighlight text when editing global values\u201d commit. It looks like in the initial pass the \u2018&lt;Click to add global&gt;\u2019 string was automatically being deleted whenever editing was engaged. Explicitly setting the editor data seems to has returned things to their usual behavior.</p>", "type": "rendered"}, "created_on": "2019-04-18T17:23:54.998335+00:00", "user": {"display_name": "David Meyer", "uuid": "{8df655d6-8661-4957-b4ba-669cef19bf2d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D"}, "html": {"href": "https://bitbucket.org/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2a4efe81a17e5aeccdbc4ef2ca2cc463d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDM-0.png"}}, "nickname": "dihm", "type": "user", "account_id": "557058:411f7712-e1fa-438c-b578-0359da2d9f06"}, "updated_on": "2019-04-18T17:23:55.073130+00:00", "type": "pullrequest_comment", "id": 99343409}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}], "next": "data/repositories/labscript_suite/runmanager/pullrequests/35/activity_ctx=nBUeCB.json"}