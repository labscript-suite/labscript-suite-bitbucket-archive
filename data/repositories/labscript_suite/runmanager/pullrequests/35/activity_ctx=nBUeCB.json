{"pagelen": 50, "values": [{"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99335513.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99335513"}}, "parent": {"id": 99334084, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99334084.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99334084"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "Thanks for the testing!\n\nI\u2019m seeing a \u201c is not a valid Python variable name\u201d if I click <click to add new global>, and then erase the contents and press enter, but I see this in earlier versions \\(~~I assume you mean tag 2.3.0~~ Edit: sorry, I hadn\u2019t pulled 2.4, I see it now\\) too so it doesn\u2019t look like a change in behaviour to me. Could you confirm exactly what steps trigger the spurious popup \\(after you\u2019ve sorted out your other issues\\)? If I click to add a new global and then tap escape or enter or tab, or click away, I don\u2019t get the popup.\n\nAgreed about padding a few pixels, I\u2019dd add it.\n\nAlso if the sequence\\_index changes broke something for you, feel free to report a bug - I wasn\u2019t expecting this to be a breaking change for anyone.", "markup": "markdown", "html": "<p>Thanks for the testing!</p>\n<p>I\u2019m seeing a \u201c is not a valid Python variable name\u201d if I click &lt;click to add new global&gt;, and then erase the contents and press enter, but I see this in earlier versions (<del>I assume you mean tag 2.3.0</del> Edit: sorry, I hadn\u2019t pulled 2.4, I see it now) too so it doesn\u2019t look like a change in behaviour to me. Could you confirm exactly what steps trigger the spurious popup (after you\u2019ve sorted out your other issues)? If I click to add a new global and then tap escape or enter or tab, or click away, I don\u2019t get the popup.</p>\n<p>Agreed about padding a few pixels, I\u2019dd add it.</p>\n<p>Also if the sequence_index changes broke something for you, feel free to report a bug - I wasn\u2019t expecting this to be a breaking change for anyone.</p>", "type": "rendered"}, "created_on": "2019-04-18T16:11:49.293249+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-04-18T16:39:21.881320+00:00", "type": "pullrequest_comment", "id": 99335513}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "3e0aa6e83524", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/3e0aa6e83524.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/3e0aa6e83524"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "9e7dd817f40f", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/9e7dd817f40f"}, "html": {"href": "#!/cbillington/runmanager/commits/9e7dd817f40f"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-04-18T16:35:39.912966+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "f598b77f5b16", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/f598b77f5b16.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/f598b77f5b16"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "8f1e745a731d", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/8f1e745a731d"}, "html": {"href": "#!/cbillington/runmanager/commits/8f1e745a731d"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-04-18T16:25:58.535593+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "f598b77f5b16", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/f598b77f5b16.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/f598b77f5b16"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "d9356716c10b", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/d9356716c10b"}, "html": {"href": "#!/cbillington/runmanager/commits/d9356716c10b"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-04-18T16:14:58.365287+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99334084.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99334084"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "Since I\u2019m the impetus for this particular change I\u2019m happy to do some testing.\n\nFirst up, I can confirm it works with Qt 5.6.2.\n\nSecond, this is interacting strangely with the sequence\\_index changes. If you click to add a global, but change your mind and add nothing you get hit with a \u201c is not a valid Python variable name\u201d pop-up. This does not happen at tag 2.4.0. \n\nThird, if the column widths can\u2019t be resized manually, it would probably be good to add some buffer pixels to the width like we do the height for ascetics.\n\nI can do some more testing but I\u2019m actually having a bunch of trouble with the sequence\\_index changes that I\u2019m having to work around at the moment. I\u2019ll get back to it once that gets figured out.", "markup": "markdown", "html": "<p>Since I\u2019m the impetus for this particular change I\u2019m happy to do some testing.</p>\n<p>First up, I can confirm it works with Qt 5.6.2.</p>\n<p>Second, this is interacting strangely with the sequence_index changes. If you click to add a global, but change your mind and add nothing you get hit with a \u201c is not a valid Python variable name\u201d pop-up. This does not happen at tag 2.4.0. </p>\n<p>Third, if the column widths can\u2019t be resized manually, it would probably be good to add some buffer pixels to the width like we do the height for ascetics.</p>\n<p>I can do some more testing but I\u2019m actually having a bunch of trouble with the sequence_index changes that I\u2019m having to work around at the moment. I\u2019ll get back to it once that gets figured out.</p>", "type": "rendered"}, "created_on": "2019-04-18T16:00:37.887899+00:00", "user": {"display_name": "David Meyer", "uuid": "{8df655d6-8661-4957-b4ba-669cef19bf2d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D"}, "html": {"href": "https://bitbucket.org/%7B8df655d6-8661-4957-b4ba-669cef19bf2d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2a4efe81a17e5aeccdbc4ef2ca2cc463d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDM-0.png"}}, "nickname": "dihm", "type": "user", "account_id": "557058:411f7712-e1fa-438c-b578-0359da2d9f06"}, "updated_on": "2019-04-18T16:00:37.990211+00:00", "type": "pullrequest_comment", "id": 99334084}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35/comments/99329252.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35/_/diff#comment-99329252"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}, "content": {"raw": "So actually I am seeing that this works with Qt 5.6 from conda. I guess the bug I encountered \\(I can\u2019t find seem to find the bug report now\\) was either specific to Qt 5.11, or that the fix has been backported to the 5.6 series and so has been fixed in the conda package.\n\nIn action:\n\n![](data/bitbucket.org/repo/6g5bg5/images/4176340127-runmanager_word_wrap.gif)\nSo anyone who wants to test this, that would be great. Particularly interested if it messes up any keyboard navigation - I made it behave the same for the keys we were customising already, but there may be other keys that changed behaviour that I\u2019m not aware of.", "markup": "markdown", "html": "<p>So actually I am seeing that this works with Qt 5.6 from conda. I guess the bug I encountered (I can\u2019t find seem to find the bug report now) was either specific to Qt 5.11, or that the fix has been backported to the 5.6 series and so has been fixed in the conda package.</p>\n<p>In action:</p>\n<p><img alt=\"\" src=\"data/bitbucket.org/repo/6g5bg5/images/4176340127-runmanager_word_wrap.gif\" />\nSo anyone who wants to test this, that would be great. Particularly interested if it messes up any keyboard navigation - I made it behave the same for the keys we were customising already, but there may be other keys that changed behaviour that I\u2019m not aware of.</p>", "type": "rendered"}, "created_on": "2019-04-18T15:29:20.300905+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": "2019-04-18T15:36:16.480765+00:00", "type": "pullrequest_comment", "id": 99329252}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "f598b77f5b16", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/f598b77f5b16.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/f598b77f5b16"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "3332191376a0", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/3332191376a0"}, "html": {"href": "#!/cbillington/runmanager/commits/3332191376a0"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-04-18T15:27:12.638877+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "f598b77f5b16", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/f598b77f5b16.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/f598b77f5b16"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "e917d1252cfd", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/e917d1252cfd"}, "html": {"href": "#!/cbillington/runmanager/commits/e917d1252cfd"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-04-18T05:09:10.889094+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}, {"update": {"description": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation (pull request #34).\r\n\r\nSwapped the globals treeview for a tableview. This involved replacing the custom\r\ntreeview with a mixin class, so that it could be reused for both the new tableview\r\nand the existing treeviews.\r\n\r\nThis was because TableViews have automatic vertical resizing of rows to contents,\r\nwhereas treeviews do not.\r\n\r\nAdded a custom editor for globals that also has word wrapping and expands\r\nvertically when wrapping occurs. The editor is a QTextEdit instead of a QPlainTextEdit\r\nbecause QPlainTextEdit has worse resizing semantics, preferring to return sizes in\r\nnumber of lines instead of pixels, and always having one additional blank line\r\nof space reported in its size. QTextEdit is simple enough to use instead, we\r\njust have to explicitly say we want to set and get plain text only.\r\n\r\nDisabled resizing of all columns that were still possible to resize. All columns\r\nare not set to their minimum width except for one column in each view that is\r\nset to stretch, which in the case of the globals view is the value column.\r\n\r\nMost of the diff is noise of variable renamings due to changing the treeview\r\nfor a tableview, and boilerplate changes due to using a mixin. The changes of\r\nsubstance are the new TableView class definition, the new Editor class defintion,\r\nand some changes to the ItemDelegate (which I also simplified to not use\r\nfont metrics in its height calculation). The other meaningful changes are setting\r\na stretch section for the views and setting all other sections to minimum column\r\nwidth.\r\n\r\nNote that Qt <= 5.11 had a fairly major bug such that word wrapping in a QTableView had no effect. Therefore this pull request may not do nothing unless it is run with Qt 5.12 or greater. Qt 5.12 is not actually available yet in the conda repositories, though I expect it to be there very soon (it's the next LTS version, and was released in January, so conda will update to it from 5.9 which was the last LTS). \r\n\r\nSo testing this if you don't have Qt 5.12 will be basically just regression testing. Still worth it I suppose. I also suppose that the fix might have been backported to earlier Qt versions, so small chance the change will actually do something on other versions.", "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation.", "destination": {"commit": {"hash": "f598b77f5b16", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/commit/f598b77f5b16.json"}, "html": {"href": "#!/labscript_suite/runmanager/commits/f598b77f5b16"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runmanager.json"}, "html": {"href": "#!/labscript_suite/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b4f21e6-54b0-41ea-8f01-db1919f2f790}ts=249918"}}, "type": "repository", "name": "runmanager", "full_name": "labscript_suite/runmanager", "uuid": "{9b4f21e6-54b0-41ea-8f01-db1919f2f790}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "e917d1252cfd", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager/commit/e917d1252cfd"}, "html": {"href": "#!/cbillington/runmanager/commits/e917d1252cfd"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/cbillington/runmanager"}, "html": {"href": "#!/cbillington/runmanager"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f721817a-d5b9-4d43-8c50-99a9be0a8896}ts=python"}}, "type": "repository", "name": "runmanager", "full_name": "cbillington/runmanager", "uuid": "{f721817a-d5b9-4d43-8c50-99a9be0a8896}"}, "branch": {"name": "word_wrap"}}, "state": "OPEN", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2019-04-18T05:09:10.830840+00:00"}, "pull_request": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/labscript_suite/runmanager/pullrequests/35.json"}, "html": {"href": "#!/labscript_suite/runmanager/pull-requests/35"}}, "title": "Word-wrapping in treeviews and item views, adapted from David Meyer's implementation."}}]}