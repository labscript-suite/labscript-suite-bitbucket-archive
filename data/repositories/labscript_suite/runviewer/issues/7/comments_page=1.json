{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/issues/7/comments/37678567.json"}, "html": {"href": "#!/labscript_suite/runviewer/issues/7#comment-37678567"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/issues/7.json"}}, "type": "issue", "id": 7, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer.json"}, "html": {"href": "#!/labscript_suite/runviewer"}, "avatar": {"href": "data/bytebucket.org/ravatar/{71215673-ad3e-425c-ae04-84cc6c2ca7da}ts=445022"}}, "type": "repository", "name": "runviewer", "full_name": "labscript_suite/runviewer", "uuid": "{71215673-ad3e-425c-ae04-84cc6c2ca7da}"}, "title": "Error when ticking/unticking multiple shots"}, "content": {"raw": "Hmm, I feel like I've seen and fixed this bug before...Yes, it was changed [here](#!/labscript_suite/runviewer/commits/f3d01e02955ecfd70feed1f7a044827da32ece3f) by @rpanderson. I feel like this is something to do with different versions of Qt.\n\nWe might just need to implement a check to see if it is a function or not so we can decide whether to call it or not.\n\nCan you confirm what version of Qt and PyQt you are on?", "markup": "markdown", "html": "<p>Hmm, I feel like I've seen and fixed this bug before...Yes, it was changed <a data-is-external-link=\"true\" href=\"#!/labscript_suite/runviewer/commits/f3d01e02955ecfd70feed1f7a044827da32ece3f\" rel=\"nofollow\">here</a> by @rpanderson. I feel like this is something to do with different versions of Qt.</p>\n<p>We might just need to implement a check to see if it is a function or not so we can decide whether to call it or not.</p>\n<p>Can you confirm what version of Qt and PyQt you are on?</p>", "type": "rendered"}, "created_on": "2017-06-19T07:34:01.008471+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": null, "type": "issue_comment", "id": 37678567}, {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/issues/7/comments/37679213.json"}, "html": {"href": "#!/labscript_suite/runviewer/issues/7#comment-37679213"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/issues/7.json"}}, "type": "issue", "id": 7, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer.json"}, "html": {"href": "#!/labscript_suite/runviewer"}, "avatar": {"href": "data/bytebucket.org/ravatar/{71215673-ad3e-425c-ae04-84cc6c2ca7da}ts=445022"}}, "type": "repository", "name": "runviewer", "full_name": "labscript_suite/runviewer", "uuid": "{71215673-ad3e-425c-ae04-84cc6c2ca7da}"}, "title": "Error when ticking/unticking multiple shots"}, "content": {"raw": "I'm on Qt version 4.8.7, PyQt version 4.11.4", "markup": "markdown", "html": "<p>I'm on Qt version 4.8.7, PyQt version 4.11.4</p>", "type": "rendered"}, "created_on": "2017-06-19T07:59:54.665288+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": null, "type": "issue_comment", "id": 37679213}, {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/issues/7/comments/37700896.json"}, "html": {"href": "#!/labscript_suite/runviewer/issues/7#comment-37700896"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/issues/7.json"}}, "type": "issue", "id": 7, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer.json"}, "html": {"href": "#!/labscript_suite/runviewer"}, "avatar": {"href": "data/bytebucket.org/ravatar/{71215673-ad3e-425c-ae04-84cc6c2ca7da}ts=445022"}}, "type": "repository", "name": "runviewer", "full_name": "labscript_suite/runviewer", "uuid": "{71215673-ad3e-425c-ae04-84cc6c2ca7da}"}, "title": "Error when ticking/unticking multiple shots"}, "content": {"raw": "Ok, I have a feeling that the change by Russ listed in my above comment was just wrong. As far as I can see, `colour` should be a function on that line, and so needs to be called as `QColor(colour())`. The only other place we pull that out of the model is line [359](#!/labscript_suite/runviewer/src/4dcaf88fd97485f559f113c6722345dd84eae2f0/__main__.py?at=default&fileviewer=file-view-default#__main__.py-359), which we then call on line [364](#!/labscript_suite/runviewer/src/4dcaf88fd97485f559f113c6722345dd84eae2f0/__main__.py?at=default&fileviewer=file-view-default#__main__.py-364). The other places we use the `colour` are just pulling it out of a dictionary that is created by the code that needs fixing, and so at that point they won't be functions, and will thus work correctly as is (provided we fix the offending line of code).\n\nFeel free to change it back to the way it was and make a pull request (or include it with the pull request you have open).\n\nIf people raise the opposite problem as an issue, we'll set the minimum pyqt version and ask them to upgrade.", "markup": "markdown", "html": "<p>Ok, I have a feeling that the change by Russ listed in my above comment was just wrong. As far as I can see, <code>colour</code> should be a function on that line, and so needs to be called as <code>QColor(colour())</code>. The only other place we pull that out of the model is line <a data-is-external-link=\"true\" href=\"#!/labscript_suite/runviewer/src/4dcaf88fd97485f559f113c6722345dd84eae2f0/__main__.py?at=default&amp;fileviewer=file-view-default#__main__.py-359\" rel=\"nofollow\">359</a>, which we then call on line <a data-is-external-link=\"true\" href=\"#!/labscript_suite/runviewer/src/4dcaf88fd97485f559f113c6722345dd84eae2f0/__main__.py?at=default&amp;fileviewer=file-view-default#__main__.py-364\" rel=\"nofollow\">364</a>. The other places we use the <code>colour</code> are just pulling it out of a dictionary that is created by the code that needs fixing, and so at that point they won't be functions, and will thus work correctly as is (provided we fix the offending line of code).</p>\n<p>Feel free to change it back to the way it was and make a pull request (or include it with the pull request you have open).</p>\n<p>If people raise the opposite problem as an issue, we'll set the minimum pyqt version and ask them to upgrade.</p>", "type": "rendered"}, "created_on": "2017-06-19T23:34:08.158334+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": "2017-06-19T23:39:02.829349+00:00", "type": "issue_comment", "id": 37700896}, {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/issues/7/comments/37701038.json"}, "html": {"href": "#!/labscript_suite/runviewer/issues/7#comment-37701038"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/issues/7.json"}}, "type": "issue", "id": 7, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer.json"}, "html": {"href": "#!/labscript_suite/runviewer"}, "avatar": {"href": "data/bytebucket.org/ravatar/{71215673-ad3e-425c-ae04-84cc6c2ca7da}ts=445022"}}, "type": "repository", "name": "runviewer", "full_name": "labscript_suite/runviewer", "uuid": "{71215673-ad3e-425c-ae04-84cc6c2ca7da}"}, "title": "Error when ticking/unticking multiple shots"}, "content": {"raw": "Hmm now I *sometimes* get\n\n```\n#!python\n\nTraceback (most recent call last):\n  File \"C:\\labscript_suite\\runviewer\\__main__.py\", line 350, in on_shot_selection_changed\n    self.plot_items[channel][shot].setPen(pg.mkPen(QColor(colour()), width=2))\nTypeError: arguments did not match any overloaded call:\n  QColor(Qt.GlobalColor): argument 1 has unexpected type 'NoneType'\n  QColor(int): too many arguments\n  QColor(QVariant): argument 1 has unexpected type 'NoneType'\n  QColor(): argument 1 has unexpected type 'NoneType'\n  QColor(int, int, int, alpha: int = 255): argument 1 has unexpected type 'NoneType'\n```\n\nIt seems to happen when checking/unchecking multiple shots which have been checked before?", "markup": "markdown", "html": "<p>Hmm now I <em>sometimes</em> get</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"p\">):</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;C:\\labscript_suite</span><span class=\"se\">\\r</span><span class=\"s2\">unviewer\\__main__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">350</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">on_shot_selection_changed</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">plot_items</span><span class=\"p\">[</span><span class=\"n\">channel</span><span class=\"p\">][</span><span class=\"n\">shot</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">setPen</span><span class=\"p\">(</span><span class=\"n\">pg</span><span class=\"o\">.</span><span class=\"n\">mkPen</span><span class=\"p\">(</span><span class=\"n\">QColor</span><span class=\"p\">(</span><span class=\"n\">colour</span><span class=\"p\">()),</span> <span class=\"n\">width</span><span class=\"o\">=</span><span class=\"mi\">2</span><span class=\"p\">))</span>\n<span class=\"ne\">TypeError</span><span class=\"p\">:</span> <span class=\"n\">arguments</span> <span class=\"n\">did</span> <span class=\"ow\">not</span> <span class=\"n\">match</span> <span class=\"nb\">any</span> <span class=\"n\">overloaded</span> <span class=\"n\">call</span><span class=\"p\">:</span>\n  <span class=\"n\">QColor</span><span class=\"p\">(</span><span class=\"n\">Qt</span><span class=\"o\">.</span><span class=\"n\">GlobalColor</span><span class=\"p\">):</span> <span class=\"n\">argument</span> <span class=\"mi\">1</span> <span class=\"n\">has</span> <span class=\"n\">unexpected</span> <span class=\"nb\">type</span> <span class=\"s1\">&#39;NoneType&#39;</span>\n  <span class=\"n\">QColor</span><span class=\"p\">(</span><span class=\"nb\">int</span><span class=\"p\">):</span> <span class=\"n\">too</span> <span class=\"n\">many</span> <span class=\"n\">arguments</span>\n  <span class=\"n\">QColor</span><span class=\"p\">(</span><span class=\"n\">QVariant</span><span class=\"p\">):</span> <span class=\"n\">argument</span> <span class=\"mi\">1</span> <span class=\"n\">has</span> <span class=\"n\">unexpected</span> <span class=\"nb\">type</span> <span class=\"s1\">&#39;NoneType&#39;</span>\n  <span class=\"n\">QColor</span><span class=\"p\">():</span> <span class=\"n\">argument</span> <span class=\"mi\">1</span> <span class=\"n\">has</span> <span class=\"n\">unexpected</span> <span class=\"nb\">type</span> <span class=\"s1\">&#39;NoneType&#39;</span>\n  <span class=\"n\">QColor</span><span class=\"p\">(</span><span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"n\">alpha</span><span class=\"p\">:</span> <span class=\"nb\">int</span> <span class=\"o\">=</span> <span class=\"mi\">255</span><span class=\"p\">):</span> <span class=\"n\">argument</span> <span class=\"mi\">1</span> <span class=\"n\">has</span> <span class=\"n\">unexpected</span> <span class=\"nb\">type</span> <span class=\"s1\">&#39;NoneType&#39;</span>\n</pre></div>\n\n\n<p>It seems to happen when checking/unchecking multiple shots which have been checked before?</p>", "type": "rendered"}, "created_on": "2017-06-19T23:47:50.034229+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": null, "type": "issue_comment", "id": 37701038}, {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/issues/7/comments/37701285.json"}, "html": {"href": "#!/labscript_suite/runviewer/issues/7#comment-37701285"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/issues/7.json"}}, "type": "issue", "id": 7, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer.json"}, "html": {"href": "#!/labscript_suite/runviewer"}, "avatar": {"href": "data/bytebucket.org/ravatar/{71215673-ad3e-425c-ae04-84cc6c2ca7da}ts=445022"}}, "type": "repository", "name": "runviewer", "full_name": "labscript_suite/runviewer", "uuid": "{71215673-ad3e-425c-ae04-84cc6c2ca7da}"}, "title": "Error when ticking/unticking multiple shots"}, "content": {"raw": "Does it only happen if you do it quickly? It might be a race conditions somewhere that I haven't caught properly. Unfortunately I can't reproduce on my own PC. Could you try and come up with some reproducible steps?", "markup": "markdown", "html": "<p>Does it only happen if you do it quickly? It might be a race conditions somewhere that I haven't caught properly. Unfortunately I can't reproduce on my own PC. Could you try and come up with some reproducible steps?</p>", "type": "rendered"}, "created_on": "2017-06-20T00:21:10.796979+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": null, "type": "issue_comment", "id": 37701285}, {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/issues/7/comments/37701313.json"}, "html": {"href": "#!/labscript_suite/runviewer/issues/7#comment-37701313"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/issues/7.json"}}, "type": "issue", "id": 7, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer.json"}, "html": {"href": "#!/labscript_suite/runviewer"}, "avatar": {"href": "data/bytebucket.org/ravatar/{71215673-ad3e-425c-ae04-84cc6c2ca7da}ts=445022"}}, "type": "repository", "name": "runviewer", "full_name": "labscript_suite/runviewer", "uuid": "{71215673-ad3e-425c-ae04-84cc6c2ca7da}"}, "title": "Error when ticking/unticking multiple shots"}, "content": {"raw": "All I have to do is load a single shot in, then tick it. If I then untick it, I get an error pop up, then every subsequent time I tick it I get 2 error popups and one for every untick.\n\nThis is with the above change of colour --> colour() on line 350 of my branch", "markup": "markdown", "html": "<p>All I have to do is load a single shot in, then tick it. If I then untick it, I get an error pop up, then every subsequent time I tick it I get 2 error popups and one for every untick.</p>\n<p>This is with the above change of colour --&gt; colour() on line 350 of my branch</p>", "type": "rendered"}, "created_on": "2017-06-20T00:26:49.904183+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": null, "type": "issue_comment", "id": 37701313}, {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/issues/7/comments/37701546.json"}, "html": {"href": "#!/labscript_suite/runviewer/issues/7#comment-37701546"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/issues/7.json"}}, "type": "issue", "id": 7, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer.json"}, "html": {"href": "#!/labscript_suite/runviewer"}, "avatar": {"href": "data/bytebucket.org/ravatar/{71215673-ad3e-425c-ae04-84cc6c2ca7da}ts=445022"}}, "type": "repository", "name": "runviewer", "full_name": "labscript_suite/runviewer", "uuid": "{71215673-ad3e-425c-ae04-84cc6c2ca7da}"}, "title": "Error when ticking/unticking multiple shots"}, "content": {"raw": "Ok, It must be to do with the slightly different PyQt versions we have. I'm on 4.11.1, which really shouldn't be having so much trouble with doing `QColor(None)`. Apparently that doesn't work anymore!\n\nI'm going to suggest we don't 'uncolour' a shot when we untick it. That way it will keep it's the same colour when you retick it. \n\nProposed patch for the `on_shot_selection_changed` method:\n\n```\n#!python\n\n        if self.shot_model.indexFromItem(item).column() == SHOT_MODEL__CHECKBOX_INDEX:\n\n            # add or remove a colour for this shot\n            checked = item.checkState()\n            row = self.shot_model.indexFromItem(item).row()\n            colour_item = self.shot_model.item(row, SHOT_MODEL__COLOUR_INDEX)\n\n            if checked:            \n                colour = colour_item.data(Qt.UserRole)\n                if qt_type == 'PyQt4':\n                    colour = colour.toPyObject()\n                    \n                if colour is not None:\n                    colour = colour()\n                else:                    \n                    colour = self.shot_colour_delegate.get_next_colour()\n                    \n                colour_item.setEditable(True)\n                pixmap = QPixmap(20, 20)\n                pixmap.fill(colour)\n                icon = QIcon(pixmap)\n                colour_item.setData(lambda clist=self.shot_colour_delegate._colours, colour=colour: int_to_enum(clist, colour), Qt.UserRole)\n                colour_item.setData(icon, Qt.DecorationRole)\n            else:\n                # colour = None\n                # icon = None\n                colour_item.setEditable(False)\n\n            # model.setData(index, editor.itemIcon(editor.currentIndex()),\n            # model.setData(index, editor.itemData(editor.currentIndex()), Qt.UserRole)\n\n            self.update_channels_treeview()\n        elif.....\n```", "markup": "markdown", "html": "<p>Ok, It must be to do with the slightly different PyQt versions we have. I'm on 4.11.1, which really shouldn't be having so much trouble with doing <code>QColor(None)</code>. Apparently that doesn't work anymore!</p>\n<p>I'm going to suggest we don't 'uncolour' a shot when we untick it. That way it will keep it's the same colour when you retick it. </p>\n<p>Proposed patch for the <code>on_shot_selection_changed</code> method:</p>\n<div class=\"codehilite language-python\"><pre><span></span>        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">shot_model</span><span class=\"o\">.</span><span class=\"n\">indexFromItem</span><span class=\"p\">(</span><span class=\"n\">item</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">column</span><span class=\"p\">()</span> <span class=\"o\">==</span> <span class=\"n\">SHOT_MODEL__CHECKBOX_INDEX</span><span class=\"p\">:</span>\n\n            <span class=\"c1\"># add or remove a colour for this shot</span>\n            <span class=\"n\">checked</span> <span class=\"o\">=</span> <span class=\"n\">item</span><span class=\"o\">.</span><span class=\"n\">checkState</span><span class=\"p\">()</span>\n            <span class=\"n\">row</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">shot_model</span><span class=\"o\">.</span><span class=\"n\">indexFromItem</span><span class=\"p\">(</span><span class=\"n\">item</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">row</span><span class=\"p\">()</span>\n            <span class=\"n\">colour_item</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">shot_model</span><span class=\"o\">.</span><span class=\"n\">item</span><span class=\"p\">(</span><span class=\"n\">row</span><span class=\"p\">,</span> <span class=\"n\">SHOT_MODEL__COLOUR_INDEX</span><span class=\"p\">)</span>\n\n            <span class=\"k\">if</span> <span class=\"n\">checked</span><span class=\"p\">:</span>            \n                <span class=\"n\">colour</span> <span class=\"o\">=</span> <span class=\"n\">colour_item</span><span class=\"o\">.</span><span class=\"n\">data</span><span class=\"p\">(</span><span class=\"n\">Qt</span><span class=\"o\">.</span><span class=\"n\">UserRole</span><span class=\"p\">)</span>\n                <span class=\"k\">if</span> <span class=\"n\">qt_type</span> <span class=\"o\">==</span> <span class=\"s1\">&#39;PyQt4&#39;</span><span class=\"p\">:</span>\n                    <span class=\"n\">colour</span> <span class=\"o\">=</span> <span class=\"n\">colour</span><span class=\"o\">.</span><span class=\"n\">toPyObject</span><span class=\"p\">()</span>\n\n                <span class=\"k\">if</span> <span class=\"n\">colour</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"bp\">None</span><span class=\"p\">:</span>\n                    <span class=\"n\">colour</span> <span class=\"o\">=</span> <span class=\"n\">colour</span><span class=\"p\">()</span>\n                <span class=\"k\">else</span><span class=\"p\">:</span>                    \n                    <span class=\"n\">colour</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">shot_colour_delegate</span><span class=\"o\">.</span><span class=\"n\">get_next_colour</span><span class=\"p\">()</span>\n\n                <span class=\"n\">colour_item</span><span class=\"o\">.</span><span class=\"n\">setEditable</span><span class=\"p\">(</span><span class=\"bp\">True</span><span class=\"p\">)</span>\n                <span class=\"n\">pixmap</span> <span class=\"o\">=</span> <span class=\"n\">QPixmap</span><span class=\"p\">(</span><span class=\"mi\">20</span><span class=\"p\">,</span> <span class=\"mi\">20</span><span class=\"p\">)</span>\n                <span class=\"n\">pixmap</span><span class=\"o\">.</span><span class=\"n\">fill</span><span class=\"p\">(</span><span class=\"n\">colour</span><span class=\"p\">)</span>\n                <span class=\"n\">icon</span> <span class=\"o\">=</span> <span class=\"n\">QIcon</span><span class=\"p\">(</span><span class=\"n\">pixmap</span><span class=\"p\">)</span>\n                <span class=\"n\">colour_item</span><span class=\"o\">.</span><span class=\"n\">setData</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"n\">clist</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">shot_colour_delegate</span><span class=\"o\">.</span><span class=\"n\">_colours</span><span class=\"p\">,</span> <span class=\"n\">colour</span><span class=\"o\">=</span><span class=\"n\">colour</span><span class=\"p\">:</span> <span class=\"n\">int_to_enum</span><span class=\"p\">(</span><span class=\"n\">clist</span><span class=\"p\">,</span> <span class=\"n\">colour</span><span class=\"p\">),</span> <span class=\"n\">Qt</span><span class=\"o\">.</span><span class=\"n\">UserRole</span><span class=\"p\">)</span>\n                <span class=\"n\">colour_item</span><span class=\"o\">.</span><span class=\"n\">setData</span><span class=\"p\">(</span><span class=\"n\">icon</span><span class=\"p\">,</span> <span class=\"n\">Qt</span><span class=\"o\">.</span><span class=\"n\">DecorationRole</span><span class=\"p\">)</span>\n            <span class=\"k\">else</span><span class=\"p\">:</span>\n                <span class=\"c1\"># colour = None</span>\n                <span class=\"c1\"># icon = None</span>\n                <span class=\"n\">colour_item</span><span class=\"o\">.</span><span class=\"n\">setEditable</span><span class=\"p\">(</span><span class=\"bp\">False</span><span class=\"p\">)</span>\n\n            <span class=\"c1\"># model.setData(index, editor.itemIcon(editor.currentIndex()),</span>\n            <span class=\"c1\"># model.setData(index, editor.itemData(editor.currentIndex()), Qt.UserRole)</span>\n\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">update_channels_treeview</span><span class=\"p\">()</span>\n        <span class=\"k\">elif</span><span class=\"o\">.....</span>\n</pre></div>", "type": "rendered"}, "created_on": "2017-06-20T00:55:38.529100+00:00", "user": {"display_name": "Philip Starkey", "uuid": "{48af65db-e5fc-459c-a7eb-52eb1f9a5690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D"}, "html": {"href": "https://bitbucket.org/%7B48af65db-e5fc-459c-a7eb-52eb1f9a5690%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecfd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPS-0.png"}}, "nickname": "pstarkey", "type": "user", "account_id": "557058:52a111e4-40da-4441-9143-417f95f2db97"}, "updated_on": null, "type": "issue_comment", "id": 37701546}, {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/issues/7/comments/37701756.json"}, "html": {"href": "#!/labscript_suite/runviewer/issues/7#comment-37701756"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/issues/7.json"}}, "type": "issue", "id": 7, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer.json"}, "html": {"href": "#!/labscript_suite/runviewer"}, "avatar": {"href": "data/bytebucket.org/ravatar/{71215673-ad3e-425c-ae04-84cc6c2ca7da}ts=445022"}}, "type": "repository", "name": "runviewer", "full_name": "labscript_suite/runviewer", "uuid": "{71215673-ad3e-425c-ae04-84cc6c2ca7da}"}, "title": "Error when ticking/unticking multiple shots"}, "content": {"raw": "OK, that sounds good, updated in my pull request", "markup": "markdown", "html": "<p>OK, that sounds good, updated in my pull request</p>", "type": "rendered"}, "created_on": "2017-06-20T01:17:13.589658+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": "2017-06-20T01:17:46.030312+00:00", "type": "issue_comment", "id": 37701756}, {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/issues/7/comments/37702051.json"}, "html": {"href": "#!/labscript_suite/runviewer/issues/7#comment-37702051"}}, "issue": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/issues/7.json"}}, "type": "issue", "id": 7, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer.json"}, "html": {"href": "#!/labscript_suite/runviewer"}, "avatar": {"href": "data/bytebucket.org/ravatar/{71215673-ad3e-425c-ae04-84cc6c2ca7da}ts=445022"}}, "type": "repository", "name": "runviewer", "full_name": "labscript_suite/runviewer", "uuid": "{71215673-ad3e-425c-ae04-84cc6c2ca7da}"}, "title": "Error when ticking/unticking multiple shots"}, "content": {"raw": "Changed colour to colour() to fix issue #7\n\n\u2192 <<cset bc2ea6d7d1d7>>", "markup": "markdown", "html": "<p>Changed colour to colour() to fix issue <a href=\"#!/labscript_suite/runviewer/issues/7/error-when-ticking-unticking-multiple\" rel=\"nofollow\" title=\"Error when ticking/unticking multiple shots\" class=\"ap-connect-link\"><s>#7</s></a></p>\n<p>\u2192 &lt;&lt;cset <a href=\"#!/labscript_suite/runviewer/commits/bc2ea6d7d1d7\" rel=\"nofollow\" class=\"ap-connect-link\">bc2ea6d7d1d7</a>&gt;&gt;</p>", "type": "rendered"}, "created_on": "2017-06-20T01:49:00.883026+00:00", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "updated_on": null, "type": "issue_comment", "id": 37702051}], "page": 1, "size": 9}