{"pagelen": 50, "values": [{"update": {"description": "Resolves issue #24, implementing extended nonlinear time functionality. The user can now click and drag on the top section of markers to move them around. This re-scales time in the region to the left of the moved marker, translating later times. When changing from one set of markers to another, the current scaling is unchanged. When removing markers, time goes back to being linear.\r\nThere were also a few bugs in the current nonlinear time implementation when removing shots, turning off markers, or reverting to linear time, which have now been resolved.\r\n\r\nTo implement this functionality, I have also set runviewer to automatically insert markers at t=0 and at the end time of the currently selected experiment. The time-axis autoscale functionality has also been extended to ensure that it behaves as expected. I've also changed the icons on the buttons used for auto-scaling and changing marker spacing, to try to make them as intuitive as possible with the new set of features.\r\n\r\nKnown issues:\r\n\r\n* Graph drawing can be glitchy when rescaling. Graphs are also redrawn when changing markers, even though they don't need to be.'\r\n\r\n* Sometimes markers begin behaving weirdly, e.g. markers to the right of the one being used moving the wrong way or too quickly, or markers getting out of order. To 'reset' them you can change the markers selection to none, then back again. This seems to happen most when markers are moved by hand quickly.\r\n\r\nI'm not sure if these issues are showstoppers, but if anyone has suggestions to fix them let me know!", "title": "New Nonlinear time", "destination": {"commit": {"hash": "746fdd2ddfd0", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/commit/746fdd2ddfd0.json"}, "html": {"href": "#!/labscript_suite/runviewer/commits/746fdd2ddfd0"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer.json"}, "html": {"href": "#!/labscript_suite/runviewer"}, "avatar": {"href": "data/bytebucket.org/ravatar/{71215673-ad3e-425c-ae04-84cc6c2ca7da}ts=445022"}}, "type": "repository", "name": "runviewer", "full_name": "labscript_suite/runviewer", "uuid": "{71215673-ad3e-425c-ae04-84cc6c2ca7da}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "f11c9991b46f", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/shjohnst/runviewer/commit/f11c9991b46f"}, "html": {"href": "#!/shjohnst/runviewer/commits/f11c9991b46f"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/shjohnst/runviewer"}, "html": {"href": "#!/shjohnst/runviewer"}, "avatar": {"href": "data/bytebucket.org/ravatar/{160215cc-a328-41b1-a978-a672f24a7c5d}ts=python"}}, "type": "repository", "name": "runviewer", "full_name": "shjohnst/runviewer", "uuid": "{160215cc-a328-41b1-a978-a672f24a7c5d}"}, "branch": {"name": "New-Nonlinear-time"}}, "state": "MERGED", "author": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}, "date": "2018-05-23T02:41:57.441229+00:00"}, "pull_request": {"type": "pullrequest", "id": 29, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29"}}, "title": "New Nonlinear time"}}, {"approval": {"date": "2018-05-15T16:25:20.396244+00:00", "pullrequest": {"type": "pullrequest", "id": 29, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29"}}, "title": "New Nonlinear time"}, "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}}, "pull_request": {"type": "pullrequest", "id": 29, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29"}}, "title": "New Nonlinear time"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29/comments/64257638.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29/_/diff#comment-64257638"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 29, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29"}}, "title": "New Nonlinear time"}, "content": {"raw": "I\u2019ll deploy this in the lab for further testing today.", "markup": "markdown", "html": "<p>I\u2019ll deploy this in the lab for further testing today.</p>", "type": "rendered"}, "created_on": "2018-05-15T10:31:04.272096+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2018-05-15T10:31:04.355177+00:00", "type": "pullrequest_comment", "id": 64257638}, "pull_request": {"type": "pullrequest", "id": 29, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29"}}, "title": "New Nonlinear time"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29/comments/64209696.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29/_/diff#comment-64209696"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 29, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29"}}, "title": "New Nonlinear time"}, "content": {"raw": "The only issue I have with this now is that it feels a bit slow when dragging markers around. I suppose that this is better than the glitching it had previously.", "markup": "markdown", "html": "<p>The only issue I have with this now is that it feels a bit slow when dragging markers around. I suppose that this is better than the glitching it had previously.</p>", "type": "rendered"}, "created_on": "2018-05-15T00:24:59.945920+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": "2018-05-15T00:24:59.954188+00:00", "type": "pullrequest_comment", "id": 64209696}, "pull_request": {"type": "pullrequest", "id": 29, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29"}}, "title": "New Nonlinear time"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29/comments/64209313.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29/_/diff#comment-64209313"}}, "parent": {"id": 64207966, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29/comments/64207966.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29/_/diff#comment-64207966"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 29, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29"}}, "title": "New Nonlinear time"}, "content": {"raw": "Actually, I played around with the rescaling on marker change, and I think I prefer it to not rescale (the user can always click the time reset button, but they can't easily get back to their custom marker positions).\nI have, however, also made a fix so that if None is passed in as the scalehandler, the 1:1 handler creation also sets self.scale_time = False, so that the axis labels are shown.\n\nI cannot work out why the marker labels move, though they seem to reset themselves the next time they move. For me, moving my mouse down causes the label to move up, and vice versa.", "markup": "markdown", "html": "<p>Actually, I played around with the rescaling on marker change, and I think I prefer it to not rescale (the user can always click the time reset button, but they can't easily get back to their custom marker positions).\nI have, however, also made a fix so that if None is passed in as the scalehandler, the 1:1 handler creation also sets self.scale_time = False, so that the axis labels are shown.</p>\n<p>I cannot work out why the marker labels move, though they seem to reset themselves the next time they move. For me, moving my mouse down causes the label to move up, and vice versa.</p>", "type": "rendered"}, "created_on": "2018-05-15T00:15:25.189718+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": "2018-05-15T00:15:25.197952+00:00", "type": "pullrequest_comment", "id": 64209313}, "pull_request": {"type": "pullrequest", "id": 29, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29"}}, "title": "New Nonlinear time"}}, {"update": {"description": "Resolves issue #24, implementing extended nonlinear time functionality. The user can now click and drag on the top section of markers to move them around. This re-scales time in the region to the left of the moved marker, translating later times. When changing from one set of markers to another, the current scaling is unchanged. When removing markers, time goes back to being linear.\r\nThere were also a few bugs in the current nonlinear time implementation when removing shots, turning off markers, or reverting to linear time, which have now been resolved.\r\n\r\nTo implement this functionality, I have also set runviewer to automatically insert markers at t=0 and at the end time of the currently selected experiment. The time-axis autoscale functionality has also been extended to ensure that it behaves as expected. I've also changed the icons on the buttons used for auto-scaling and changing marker spacing, to try to make them as intuitive as possible with the new set of features.\r\n\r\nKnown issues:\r\n\r\n* Graph drawing can be glitchy when rescaling. Graphs are also redrawn when changing markers, even though they don't need to be.'\r\n\r\n* Sometimes markers begin behaving weirdly, e.g. markers to the right of the one being used moving the wrong way or too quickly, or markers getting out of order. To 'reset' them you can change the markers selection to none, then back again. This seems to happen most when markers are moved by hand quickly.\r\n\r\nI'm not sure if these issues are showstoppers, but if anyone has suggestions to fix them let me know!", "title": "New Nonlinear time", "destination": {"commit": {"hash": "f2b9d9b54683", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/commit/f2b9d9b54683.json"}, "html": {"href": "#!/labscript_suite/runviewer/commits/f2b9d9b54683"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer.json"}, "html": {"href": "#!/labscript_suite/runviewer"}, "avatar": {"href": "data/bytebucket.org/ravatar/{71215673-ad3e-425c-ae04-84cc6c2ca7da}ts=445022"}}, "type": "repository", "name": "runviewer", "full_name": "labscript_suite/runviewer", "uuid": "{71215673-ad3e-425c-ae04-84cc6c2ca7da}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "f11c9991b46f", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/shjohnst/runviewer/commit/f11c9991b46f"}, "html": {"href": "#!/shjohnst/runviewer/commits/f11c9991b46f"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/shjohnst/runviewer"}, "html": {"href": "#!/shjohnst/runviewer"}, "avatar": {"href": "data/bytebucket.org/ravatar/{160215cc-a328-41b1-a978-a672f24a7c5d}ts=python"}}, "type": "repository", "name": "runviewer", "full_name": "shjohnst/runviewer", "uuid": "{160215cc-a328-41b1-a978-a672f24a7c5d}"}, "branch": {"name": "New-Nonlinear-time"}}, "state": "OPEN", "author": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "date": "2018-05-15T00:15:15.129564+00:00"}, "pull_request": {"type": "pullrequest", "id": 29, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29"}}, "title": "New Nonlinear time"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29/comments/64207966.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29/_/diff#comment-64207966"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 29, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29"}}, "title": "New Nonlinear time"}, "content": {"raw": "Thanks for the help! It seems like now, when changing which markers are displayed, the plots go back to linear time, whereas before (I think) they were remaining nonlinear. I don't know which behaviour is better, it's probably most sensible to just reset to linear time. The x-axis labels weren't being drawn back in in this case, but that should be easy to fix.\n\nOh, I see what you mean about the markers moving up and down, the labels get out of alignment! I'll look into that.", "markup": "markdown", "html": "<p>Thanks for the help! It seems like now, when changing which markers are displayed, the plots go back to linear time, whereas before (I think) they were remaining nonlinear. I don't know which behaviour is better, it's probably most sensible to just reset to linear time. The x-axis labels weren't being drawn back in in this case, but that should be easy to fix.</p>\n<p>Oh, I see what you mean about the markers moving up and down, the labels get out of alignment! I'll look into that.</p>", "type": "rendered"}, "created_on": "2018-05-14T23:44:03.633882+00:00", "user": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "updated_on": "2018-05-14T23:44:03.647007+00:00", "type": "pullrequest_comment", "id": 64207966}, "pull_request": {"type": "pullrequest", "id": 29, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29"}}, "title": "New Nonlinear time"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29/comments/64200586.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29/_/diff#comment-64200586"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 29, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29"}}, "title": "New Nonlinear time"}, "content": {"raw": "The marker labels also seem to be movable by dragging markers vertically. I think it would be best to prevent this behaviour but I don\u2019t know how.", "markup": "markdown", "html": "<p>The marker labels also seem to be movable by dragging markers vertically. I think it would be best to prevent this behaviour but I don\u2019t know how.</p>", "type": "rendered"}, "created_on": "2018-05-14T21:16:30.565334+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2018-05-14T21:16:30.627363+00:00", "type": "pullrequest_comment", "id": 64200586}, "pull_request": {"type": "pullrequest", "id": 29, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29"}}, "title": "New Nonlinear time"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29/comments/64200159.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29/_/diff#comment-64200159"}}, "parent": {"id": 64196696, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29/comments/64196696.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29/_/diff#comment-64196696"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 29, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29"}}, "title": "New Nonlinear time"}, "content": {"raw": "I think I fixed the plot redrawing and I got rid of `self.old_scalehandler`:\n\n[#!/PhyNerd/runviewer/commits/80ca71eed39be16d5f70a1e083df7b9afa9e20b3](#!/PhyNerd/runviewer/commits/80ca71eed39be16d5f70a1e083df7b9afa9e20b3)", "markup": "markdown", "html": "<p>I think I fixed the plot redrawing and I got rid of <code>self.old_scalehandler</code>:</p>\n<p><a data-is-external-link=\"true\" href=\"#!/PhyNerd/runviewer/commits/80ca71eed39be16d5f70a1e083df7b9afa9e20b3\" rel=\"nofollow\">#!/PhyNerd/runviewer/commits/80ca71eed39be16d5f70a1e083df7b9afa9e20b3</a></p>", "type": "rendered"}, "created_on": "2018-05-14T21:11:44.190565+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2018-05-14T21:11:44.245535+00:00", "type": "pullrequest_comment", "id": 64200159}, "pull_request": {"type": "pullrequest", "id": 29, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29"}}, "title": "New Nonlinear time"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29/comments/64196696.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29/_/diff#comment-64196696"}}, "parent": {"id": 64100338, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29/comments/64100338.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29/_/diff#comment-64100338"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 29, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29"}}, "title": "New Nonlinear time"}, "content": {"raw": "Ok so the first comment from this morning was wrong. There was no race condition. It was a issue with the bounds of the markers. I was able to get the bounds working when moving the markers and was able to fix 1. and 2. through this. Markers should now not reorder during movement.\n\nI also fixed the resampling for you.\n\nForget about comment 5. and 6. I figured out why they were there or changed them.\n\nYou can pull the changes from my repo [#!/PhyNerd/runviewer/commits/deacbc34e1c74ef96aeb8da961c7da0ed1de842e](#!/PhyNerd/runviewer/commits/deacbc34e1c74ef96aeb8da961c7da0ed1de842e)\n\nI\u2019ll look into fixing the redrawing next. If I figure that one out I\u2019ll post here again. ", "markup": "markdown", "html": "<p>Ok so the first comment from this morning was wrong. There was no race condition. It was a issue with the bounds of the markers. I was able to get the bounds working when moving the markers and was able to fix 1. and 2. through this. Markers should now not reorder during movement.</p>\n<p>I also fixed the resampling for you.</p>\n<p>Forget about comment 5. and 6. I figured out why they were there or changed them.</p>\n<p>You can pull the changes from my repo <a data-is-external-link=\"true\" href=\"#!/PhyNerd/runviewer/commits/deacbc34e1c74ef96aeb8da961c7da0ed1de842e\" rel=\"nofollow\">#!/PhyNerd/runviewer/commits/deacbc34e1c74ef96aeb8da961c7da0ed1de842e</a></p>\n<p>I\u2019ll look into fixing the redrawing next. If I figure that one out I\u2019ll post here again. </p>", "type": "rendered"}, "created_on": "2018-05-14T20:28:23.073147+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2018-05-14T20:28:23.155759+00:00", "type": "pullrequest_comment", "id": 64196696}, "pull_request": {"type": "pullrequest", "id": 29, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29"}}, "title": "New Nonlinear time"}}, {"comment": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29/comments/64100338.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29/_/diff#comment-64100338"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 29, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29"}}, "title": "New Nonlinear time"}, "content": {"raw": "I looked at this for a few minutes and here are a few thoughts:\n\n1. The markers are glitchy during fast movement because of a race condition. If rescaling happens a second time before all markers were moved to their new position \\(by the last rescaling\\) the markers can be all over the place after movement.\n2. Linear spacing of markers seems to be broken:![bug.png](https://bitbucket.org/repo/AeyynE/images/4182746106-bug.png 'bug.png')  \n  I can provide you with a shot file if you want to reproduce.\n3. Resampling should not happen until the end of marker movement. You might want to move the `self._resample = True` to `_marker_moved` that fixes a lot of glitching for me. This function also does not need to call `_marker_moving` again as that has been triggered before anyway.\n4. I\u2019m no fan of making `self.old_scalehandler` a object variable as it is just a helper variable and does not need to be stored over longer periods of time. It also seems that you are not consistent in updating it each time  `self.scalehandler` changes.\n5. On line 590 you start a new loop and I\u2019m not sure why. I think you can get rid of the variable `new_marker_times` and move the marker movement code to the loop before.\n6. I think you can drop lines 593-594\n\nI might have a few more comments later and maybe a few solutions.", "markup": "markdown", "html": "<p>I looked at this for a few minutes and here are a few thoughts:</p>\n<ol>\n<li>The markers are glitchy during fast movement because of a race condition. If rescaling happens a second time before all markers were moved to their new position (by the last rescaling) the markers can be all over the place after movement.</li>\n<li>Linear spacing of markers seems to be broken:<img alt=\"bug.png\" src=\"data/bitbucket.org/repo/AeyynE/images/4182746106-bug.png\" title=\"bug.png\" /><br />\n  I can provide you with a shot file if you want to reproduce.</li>\n<li>Resampling should not happen until the end of marker movement. You might want to move the <code>self._resample = True</code> to <code>_marker_moved</code> that fixes a lot of glitching for me. This function also does not need to call <code>_marker_moving</code> again as that has been triggered before anyway.</li>\n<li>I\u2019m no fan of making <code>self.old_scalehandler</code> a object variable as it is just a helper variable and does not need to be stored over longer periods of time. It also seems that you are not consistent in updating it each time  <code>self.scalehandler</code> changes.</li>\n<li>On line 590 you start a new loop and I\u2019m not sure why. I think you can get rid of the variable <code>new_marker_times</code> and move the marker movement code to the loop before.</li>\n<li>I think you can drop lines 593-594</li>\n</ol>\n<p>I might have a few more comments later and maybe a few solutions.</p>", "type": "rendered"}, "created_on": "2018-05-14T07:59:05.305463+00:00", "user": {"display_name": "Jan Werkmann", "uuid": "{44c4905c-2b90-4045-a5f1-652b8e228626}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D"}, "html": {"href": "https://bitbucket.org/%7B44c4905c-2b90-4045-a5f1-652b8e228626%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5/07e5095a-4741-4dc0-a462-9c7d455f961d/128"}}, "nickname": "PhyNerd", "type": "user", "account_id": "557058:a70cc9cf-684e-4849-a61a-9ade4d7218b5"}, "updated_on": "2018-05-14T07:59:05.411753+00:00", "type": "pullrequest_comment", "id": 64100338}, "pull_request": {"type": "pullrequest", "id": 29, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29"}}, "title": "New Nonlinear time"}}, {"update": {"description": "Resolves issue #24, implementing extended nonlinear time functionality. The user can now click and drag on the top section of markers to move them around. This re-scales time in the region to the left of the moved marker, translating later times. When changing from one set of markers to another, the current scaling is unchanged. When removing markers, time goes back to being linear.\r\nThere were also a few bugs in the current nonlinear time implementation when removing shots, turning off markers, or reverting to linear time, which have now been resolved.\r\n\r\nTo implement this functionality, I have also set runviewer to automatically insert markers at t=0 and at the end time of the currently selected experiment. The time-axis autoscale functionality has also been extended to ensure that it behaves as expected. I've also changed the icons on the buttons used for auto-scaling and changing marker spacing, to try to make them as intuitive as possible with the new set of features.\r\n\r\nKnown issues:\r\n\r\n* Graph drawing can be glitchy when rescaling. Graphs are also redrawn when changing markers, even though they don't need to be.'\r\n\r\n* Sometimes markers begin behaving weirdly, e.g. markers to the right of the one being used moving the wrong way or too quickly, or markers getting out of order. To 'reset' them you can change the markers selection to none, then back again. This seems to happen most when markers are moved by hand quickly.\r\n\r\nI'm not sure if these issues are showstoppers, but if anyone has suggestions to fix them let me know!", "title": "New Nonlinear time", "destination": {"commit": {"hash": "f2b9d9b54683", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/commit/f2b9d9b54683.json"}, "html": {"href": "#!/labscript_suite/runviewer/commits/f2b9d9b54683"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer.json"}, "html": {"href": "#!/labscript_suite/runviewer"}, "avatar": {"href": "data/bytebucket.org/ravatar/{71215673-ad3e-425c-ae04-84cc6c2ca7da}ts=445022"}}, "type": "repository", "name": "runviewer", "full_name": "labscript_suite/runviewer", "uuid": "{71215673-ad3e-425c-ae04-84cc6c2ca7da}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "c00e04f1b576", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/shjohnst/runviewer/commit/c00e04f1b576"}, "html": {"href": "#!/shjohnst/runviewer/commits/c00e04f1b576"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/shjohnst/runviewer"}, "html": {"href": "#!/shjohnst/runviewer"}, "avatar": {"href": "data/bytebucket.org/ravatar/{160215cc-a328-41b1-a978-a672f24a7c5d}ts=python"}}, "type": "repository", "name": "runviewer", "full_name": "shjohnst/runviewer", "uuid": "{160215cc-a328-41b1-a978-a672f24a7c5d}"}, "branch": {"name": "New-Nonlinear-time"}}, "state": "OPEN", "author": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "date": "2018-05-14T04:24:49.153171+00:00"}, "pull_request": {"type": "pullrequest", "id": 29, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29"}}, "title": "New Nonlinear time"}}, {"update": {"description": "Resolves issue #24, implementing extended nonlinear time functionality. The user can now click and drag on the top section of markers to move them around. This re-scales time in the region to the left of the moved marker, translating later times. When changing from one set of markers to another, the current scaling is unchanged. When removing markers, time goes back to being linear.\r\nThere were also a few bugs in the current nonlinear time implementation when removing shots, turning off markers, or reverting to linear time, which have now been resolved.\r\n\r\nTo implement this functionality, I have also set runviewer to automatically insert markers at t=0 and at the end time of the currently selected experiment. The time-axis autoscale functionality has also been extended to ensure that it behaves as expected. I've also changed the icons on the buttons used for auto-scaling and changing marker spacing, to try to make them as intuitive as possible with the new set of features.\r\n\r\nKnown issues:\r\n\r\n* Graph drawing can be glitchy when rescaling. Graphs are also redrawn when changing markers, even though they don't need to be.'\r\n\r\n* Sometimes markers begin behaving weirdly, e.g. markers to the right of the one being used moving the wrong way or too quickly, or markers getting out of order. To 'reset' them you can change the markers selection to none, then back again. This seems to happen most when markers are moved by hand quickly.\r\n\r\nI'm not sure if these issues are showstoppers, but if anyone has suggestions to fix them let me know!", "title": "New Nonlinear time", "destination": {"commit": {"hash": "f2b9d9b54683", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/commit/f2b9d9b54683.json"}, "html": {"href": "#!/labscript_suite/runviewer/commits/f2b9d9b54683"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer.json"}, "html": {"href": "#!/labscript_suite/runviewer"}, "avatar": {"href": "data/bytebucket.org/ravatar/{71215673-ad3e-425c-ae04-84cc6c2ca7da}ts=445022"}}, "type": "repository", "name": "runviewer", "full_name": "labscript_suite/runviewer", "uuid": "{71215673-ad3e-425c-ae04-84cc6c2ca7da}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "90be84039868", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/shjohnst/runviewer/commit/90be84039868"}, "html": {"href": "#!/shjohnst/runviewer/commits/90be84039868"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/shjohnst/runviewer"}, "html": {"href": "#!/shjohnst/runviewer"}, "avatar": {"href": "data/bytebucket.org/ravatar/{160215cc-a328-41b1-a978-a672f24a7c5d}ts=python"}}, "type": "repository", "name": "runviewer", "full_name": "shjohnst/runviewer", "uuid": "{160215cc-a328-41b1-a978-a672f24a7c5d}"}, "branch": {"name": "New-Nonlinear-time"}}, "state": "OPEN", "author": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "date": "2018-05-14T04:19:26.026091+00:00"}, "pull_request": {"type": "pullrequest", "id": 29, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29"}}, "title": "New Nonlinear time"}}, {"update": {"description": "Resolves issue #24, implementing extended nonlinear time functionality. The user can now click and drag on the top section of markers to move them around. This re-scales time in the region to the left of the moved marker, translating later times. When changing from one set of markers to another, the current scaling is unchanged. When removing markers, time goes back to being linear.\r\nThere were also a few bugs in the current nonlinear time implementation when removing shots, turning off markers, or reverting to linear time, which have now been resolved.\r\n\r\nTo implement this functionality, I have also set runviewer to automatically insert markers at t=0 and at the end time of the currently selected experiment. The time-axis autoscale functionality has also been extended to ensure that it behaves as expected. I've also changed the icons on the buttons used for auto-scaling and changing marker spacing, to try to make them as intuitive as possible with the new set of features.\r\n\r\nKnown issues:\r\n\r\n* Graph drawing can be glitchy when rescaling. Graphs are also redrawn when changing markers, even though they don't need to be.'\r\n\r\n* Sometimes markers begin behaving weirdly, e.g. markers to the right of the one being used moving the wrong way or too quickly, or markers getting out of order. To 'reset' them you can change the markers selection to none, then back again. This seems to happen most when markers are moved by hand quickly.\r\n\r\nI'm not sure if these issues are showstoppers, but if anyone has suggestions to fix them let me know!", "title": "New Nonlinear time", "destination": {"commit": {"hash": "f2b9d9b54683", "type": "commit", "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/commit/f2b9d9b54683.json"}, "html": {"href": "#!/labscript_suite/runviewer/commits/f2b9d9b54683"}}}, "repository": {"links": {"self": {"href": "data/repositories/labscript_suite/runviewer.json"}, "html": {"href": "#!/labscript_suite/runviewer"}, "avatar": {"href": "data/bytebucket.org/ravatar/{71215673-ad3e-425c-ae04-84cc6c2ca7da}ts=445022"}}, "type": "repository", "name": "runviewer", "full_name": "labscript_suite/runviewer", "uuid": "{71215673-ad3e-425c-ae04-84cc6c2ca7da}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "90be84039868", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/shjohnst/runviewer/commit/90be84039868"}, "html": {"href": "#!/shjohnst/runviewer/commits/90be84039868"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/shjohnst/runviewer"}, "html": {"href": "#!/shjohnst/runviewer"}, "avatar": {"href": "data/bytebucket.org/ravatar/{160215cc-a328-41b1-a978-a672f24a7c5d}ts=python"}}, "type": "repository", "name": "runviewer", "full_name": "shjohnst/runviewer", "uuid": "{160215cc-a328-41b1-a978-a672f24a7c5d}"}, "branch": {"name": "New-Nonlinear-time"}}, "state": "OPEN", "author": {"display_name": "Shaun Johnstone", "uuid": "{652df738-313d-472c-b7b5-a3f8f98a3322}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D"}, "html": {"href": "https://bitbucket.org/%7B652df738-313d-472c-b7b5-a3f8f98a3322%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/38984f1761fc67ce892911496abee619d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-3.png"}}, "nickname": "shjohnst", "type": "user", "account_id": "557058:1b9a15fb-8e4f-407e-b7b9-567c5e1fa1b4"}, "date": "2018-05-14T04:19:25.970156+00:00"}, "pull_request": {"type": "pullrequest", "id": 29, "links": {"self": {"href": "data/repositories/labscript_suite/runviewer/pullrequests/29.json"}, "html": {"href": "#!/labscript_suite/runviewer/pull-requests/29"}}, "title": "New Nonlinear time"}}]}