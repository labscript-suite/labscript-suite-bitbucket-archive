{"rendered": {"message": {"raw": "Changes to how labscript handles initialisation and cleanup.\nSince runmanager runs labscripts repeatedly, and labscript does initialisation at import time, we've previously been handling this by reloading labscript every run.\nThis has caused some nasty interaction with ModuleWatcher which I don't quite understand.\nSince this was pretty bad practise anyway, labscript now has explicit init and cleanup functions. Usage is still identical in that initialisation still happens at import time, however there is now the option to supress auto-initialisation by setting labscript_auto_init = False in your __main__ module. runmanager's batch_compiler does this and then calls labscript.labscript_init(h5_file, labscript_file) and labscript.labscript_cleanup() explicitly for every shot it compiles, rather than munging sys.argv and simulating a fresh import.\n\nThis seems like a much cleaner solution. A quick test will reveal if this fixes #600 (The ModuleWatcher crash)", "markup": "markdown", "html": "<p>Changes to how labscript handles initialisation and cleanup.<br />\nSince runmanager runs labscripts repeatedly, and labscript does initialisation at import time, we've previously been handling this by reloading labscript every run.<br />\nThis has caused some nasty interaction with ModuleWatcher which I don't quite understand.<br />\nSince this was pretty bad practise anyway, labscript now has explicit init and cleanup functions. Usage is still identical in that initialisation still happens at import time, however there is now the option to supress auto-initialisation by setting labscript_auto_init = False in your <strong>main</strong> module. runmanager's batch_compiler does this and then calls labscript.labscript_init(h5_file, labscript_file) and labscript.labscript_cleanup() explicitly for every shot it compiles, rather than munging sys.argv and simulating a fresh import.</p>\n<p>This seems like a much cleaner solution. A quick test will reveal if this fixes #600 (The ModuleWatcher crash)</p>", "type": "rendered"}}, "hash": "4eec73b51376adc8043f7f89d6250569b513bf4f", "repository": {"links": {"self": {"href": "data/repositories/monashspinor/labscript.json"}, "html": {"href": "#!/monashspinor/labscript"}, "avatar": {"href": "data/bytebucket.org/ravatar/{73852c03-7486-4603-be8a-3bf277ec77cc}ts=python"}}, "type": "repository", "name": "labscript", "full_name": "monashspinor/labscript", "uuid": "{73852c03-7486-4603-be8a-3bf277ec77cc}"}, "links": {"self": {"href": "data/repositories/monashspinor/labscript/commit/4eec73b51376adc8043f7f89d6250569b513bf4f.json"}, "comments": {"href": "data/repositories/monashspinor/labscript/commit/4eec73b51376adc8043f7f89d6250569b513bf4f/comments_page=1.json"}, "patch": {"href": "https://api.bitbucket.org/2.0/repositories/monashspinor/labscript/patch/4eec73b51376adc8043f7f89d6250569b513bf4f"}, "html": {"href": "#!/monashspinor/labscript/commits/4eec73b51376adc8043f7f89d6250569b513bf4f"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/monashspinor/labscript/diff/4eec73b51376adc8043f7f89d6250569b513bf4f"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/monashspinor/labscript/commit/4eec73b51376adc8043f7f89d6250569b513bf4f/approve"}, "statuses": {"href": "data/repositories/monashspinor/labscript/commit/4eec73b51376adc8043f7f89d6250569b513bf4f/statuses_page=1.json"}}, "author": {"raw": "cbilling", "type": "author", "user": {"display_name": "Chris Billington", "uuid": "{e363c5a9-5075-4656-afb5-88bd6a6dceeb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D"}, "html": {"href": "https://bitbucket.org/%7Be363c5a9-5075-4656-afb5-88bd6a6dceeb%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9238baf7300c41c0e7294db922899e6ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCB-1.png"}}, "nickname": "cbillington", "type": "user", "account_id": "557058:cbf1bc43-1dc2-477b-9e25-1a8f40fd7ee3"}}, "summary": {"raw": "Changes to how labscript handles initialisation and cleanup.\nSince runmanager runs labscripts repeatedly, and labscript does initialisation at import time, we've previously been handling this by reloading labscript every run.\nThis has caused some nasty interaction with ModuleWatcher which I don't quite understand.\nSince this was pretty bad practise anyway, labscript now has explicit init and cleanup functions. Usage is still identical in that initialisation still happens at import time, however there is now the option to supress auto-initialisation by setting labscript_auto_init = False in your __main__ module. runmanager's batch_compiler does this and then calls labscript.labscript_init(h5_file, labscript_file) and labscript.labscript_cleanup() explicitly for every shot it compiles, rather than munging sys.argv and simulating a fresh import.\n\nThis seems like a much cleaner solution. A quick test will reveal if this fixes #600 (The ModuleWatcher crash)", "markup": "markdown", "html": "<p>Changes to how labscript handles initialisation and cleanup.<br />\nSince runmanager runs labscripts repeatedly, and labscript does initialisation at import time, we've previously been handling this by reloading labscript every run.<br />\nThis has caused some nasty interaction with ModuleWatcher which I don't quite understand.<br />\nSince this was pretty bad practise anyway, labscript now has explicit init and cleanup functions. Usage is still identical in that initialisation still happens at import time, however there is now the option to supress auto-initialisation by setting labscript_auto_init = False in your <strong>main</strong> module. runmanager's batch_compiler does this and then calls labscript.labscript_init(h5_file, labscript_file) and labscript.labscript_cleanup() explicitly for every shot it compiles, rather than munging sys.argv and simulating a fresh import.</p>\n<p>This seems like a much cleaner solution. A quick test will reveal if this fixes #600 (The ModuleWatcher crash)</p>", "type": "rendered"}, "participants": [], "parents": [{"hash": "d1819fad90cb1bfa3c9efd3371a0980e1e99771e", "type": "commit", "links": {"self": {"href": "data/repositories/monashspinor/labscript/commit/d1819fad90cb1bfa3c9efd3371a0980e1e99771e.json"}, "html": {"href": "#!/monashspinor/labscript/commits/d1819fad90cb1bfa3c9efd3371a0980e1e99771e"}}}], "date": "2012-09-07T03:56:51+00:00", "message": "Changes to how labscript handles initialisation and cleanup.\nSince runmanager runs labscripts repeatedly, and labscript does initialisation at import time, we've previously been handling this by reloading labscript every run.\nThis has caused some nasty interaction with ModuleWatcher which I don't quite understand.\nSince this was pretty bad practise anyway, labscript now has explicit init and cleanup functions. Usage is still identical in that initialisation still happens at import time, however there is now the option to supress auto-initialisation by setting labscript_auto_init = False in your __main__ module. runmanager's batch_compiler does this and then calls labscript.labscript_init(h5_file, labscript_file) and labscript.labscript_cleanup() explicitly for every shot it compiles, rather than munging sys.argv and simulating a fresh import.\n\nThis seems like a much cleaner solution. A quick test will reveal if this fixes #600 (The ModuleWatcher crash)", "type": "commit", "git_hash": "3401fe86711de6fe4204b465523ed5ddd55630b5", "tags": null, "branches": "default"}